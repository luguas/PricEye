var H2=Object.defineProperty;var G2=(t,e,r)=>e in t?H2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var be=(t,e,r)=>G2(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function K2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Nv={exports:{}},Ph={},jv={exports:{}},Xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cc=Symbol.for("react.element"),Y2=Symbol.for("react.portal"),X2=Symbol.for("react.fragment"),q2=Symbol.for("react.strict_mode"),J2=Symbol.for("react.profiler"),Q2=Symbol.for("react.provider"),Z2=Symbol.for("react.context"),eS=Symbol.for("react.forward_ref"),tS=Symbol.for("react.suspense"),rS=Symbol.for("react.memo"),nS=Symbol.for("react.lazy"),Ig=Symbol.iterator;function sS(t){return t===null||typeof t!="object"?null:(t=Ig&&t[Ig]||t["@@iterator"],typeof t=="function"?t:null)}var Ov={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rv=Object.assign,Dv={};function xo(t,e,r){this.props=t,this.context=e,this.refs=Dv,this.updater=r||Ov}xo.prototype.isReactComponent={};xo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Pv(){}Pv.prototype=xo.prototype;function q0(t,e,r){this.props=t,this.context=e,this.refs=Dv,this.updater=r||Ov}var J0=q0.prototype=new Pv;J0.constructor=q0;Rv(J0,xo.prototype);J0.isPureReactComponent=!0;var Mg=Array.isArray,Iv=Object.prototype.hasOwnProperty,Q0={current:null},Mv={key:!0,ref:!0,__self:!0,__source:!0};function Fv(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Iv.call(e,n)&&!Mv.hasOwnProperty(n)&&(s[n]=e[n]);var o=arguments.length-2;if(o===1)s.children=r;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)s[n]===void 0&&(s[n]=o[n]);return{$$typeof:cc,type:t,key:i,ref:a,props:s,_owner:Q0.current}}function iS(t,e){return{$$typeof:cc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Z0(t){return typeof t=="object"&&t!==null&&t.$$typeof===cc}function aS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Fg=/\/+/g;function pd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aS(""+t.key):e.toString(36)}function gu(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case cc:case Y2:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+pd(a,0):n,Mg(s)?(r="",t!=null&&(r=t.replace(Fg,"$&/")+"/"),gu(s,e,r,"",function(c){return c})):s!=null&&(Z0(s)&&(s=iS(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Fg,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",Mg(t))for(var o=0;o<t.length;o++){i=t[o];var l=n+pd(i,o);a+=gu(i,e,r,l,s)}else if(l=sS(t),typeof l=="function")for(t=l.call(t),o=0;!(i=t.next()).done;)i=i.value,l=n+pd(i,o++),a+=gu(i,e,r,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Sc(t,e,r){if(t==null)return t;var n=[],s=0;return gu(t,n,"","",function(i){return e.call(r,i,s++)}),n}function oS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ir={current:null},mu={transition:null},lS={ReactCurrentDispatcher:Ir,ReactCurrentBatchConfig:mu,ReactCurrentOwner:Q0};function Lv(){throw Error("act(...) is not supported in production builds of React.")}Xe.Children={map:Sc,forEach:function(t,e,r){Sc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Sc(t,function(){e++}),e},toArray:function(t){return Sc(t,function(e){return e})||[]},only:function(t){if(!Z0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Xe.Component=xo;Xe.Fragment=X2;Xe.Profiler=J2;Xe.PureComponent=q0;Xe.StrictMode=q2;Xe.Suspense=tS;Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lS;Xe.act=Lv;Xe.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Rv({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Q0.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)Iv.call(e,l)&&!Mv.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];n.children=o}return{$$typeof:cc,type:t.type,key:s,ref:i,props:n,_owner:a}};Xe.createContext=function(t){return t={$$typeof:Z2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Q2,_context:t},t.Consumer=t};Xe.createElement=Fv;Xe.createFactory=function(t){var e=Fv.bind(null,t);return e.type=t,e};Xe.createRef=function(){return{current:null}};Xe.forwardRef=function(t){return{$$typeof:eS,render:t}};Xe.isValidElement=Z0;Xe.lazy=function(t){return{$$typeof:nS,_payload:{_status:-1,_result:t},_init:oS}};Xe.memo=function(t,e){return{$$typeof:rS,type:t,compare:e===void 0?null:e}};Xe.startTransition=function(t){var e=mu.transition;mu.transition={};try{t()}finally{mu.transition=e}};Xe.unstable_act=Lv;Xe.useCallback=function(t,e){return Ir.current.useCallback(t,e)};Xe.useContext=function(t){return Ir.current.useContext(t)};Xe.useDebugValue=function(){};Xe.useDeferredValue=function(t){return Ir.current.useDeferredValue(t)};Xe.useEffect=function(t,e){return Ir.current.useEffect(t,e)};Xe.useId=function(){return Ir.current.useId()};Xe.useImperativeHandle=function(t,e,r){return Ir.current.useImperativeHandle(t,e,r)};Xe.useInsertionEffect=function(t,e){return Ir.current.useInsertionEffect(t,e)};Xe.useLayoutEffect=function(t,e){return Ir.current.useLayoutEffect(t,e)};Xe.useMemo=function(t,e){return Ir.current.useMemo(t,e)};Xe.useReducer=function(t,e,r){return Ir.current.useReducer(t,e,r)};Xe.useRef=function(t){return Ir.current.useRef(t)};Xe.useState=function(t){return Ir.current.useState(t)};Xe.useSyncExternalStore=function(t,e,r){return Ir.current.useSyncExternalStore(t,e,r)};Xe.useTransition=function(){return Ir.current.useTransition()};Xe.version="18.3.1";jv.exports=Xe;var C=jv.exports;const _f=K2(C);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cS=C,uS=Symbol.for("react.element"),hS=Symbol.for("react.fragment"),dS=Object.prototype.hasOwnProperty,fS=cS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pS={key:!0,ref:!0,__self:!0,__source:!0};function Bv(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)dS.call(e,n)&&!pS.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:uS,type:t,key:i,ref:a,props:s,_owner:fS.current}}Ph.Fragment=hS;Ph.jsx=Bv;Ph.jsxs=Bv;Nv.exports=Ph;var u=Nv.exports,Sf={},Uv={exports:{}},fn={},zv={exports:{}},$v={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,re){var le=te.length;te.push(re);e:for(;0<le;){var je=le-1>>>1,M=te[je];if(0<s(M,re))te[je]=re,te[le]=M,le=je;else break e}}function r(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var re=te[0],le=te.pop();if(le!==re){te[0]=le;e:for(var je=0,M=te.length,U=M>>>1;je<U;){var L=2*(je+1)-1,P=te[L],V=L+1,ce=te[V];if(0>s(P,le))V<M&&0>s(ce,P)?(te[je]=ce,te[V]=le,je=V):(te[je]=P,te[L]=le,je=L);else if(V<M&&0>s(ce,le))te[je]=ce,te[V]=le,je=V;else break e}}return re}function s(te,re){var le=te.sortIndex-re.sortIndex;return le!==0?le:te.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(te){for(var re=r(c);re!==null;){if(re.callback===null)n(c);else if(re.startTime<=te)n(c),re.sortIndex=re.expirationTime,e(l,re);else break;re=r(c)}}function w(te){if(g=!1,y(te),!m)if(r(l)!==null)m=!0,Te(S);else{var re=r(c);re!==null&&he(w,re.startTime-te)}}function S(te,re){m=!1,g&&(g=!1,v(A),A=-1),p=!0;var le=f;try{for(y(re),d=r(l);d!==null&&(!(d.expirationTime>re)||te&&!I());){var je=d.callback;if(typeof je=="function"){d.callback=null,f=d.priorityLevel;var M=je(d.expirationTime<=re);re=t.unstable_now(),typeof M=="function"?d.callback=M:d===r(l)&&n(l),y(re)}else n(l);d=r(l)}if(d!==null)var U=!0;else{var L=r(c);L!==null&&he(w,L.startTime-re),U=!1}return U}finally{d=null,f=le,p=!1}}var N=!1,k=null,A=-1,T=5,F=-1;function I(){return!(t.unstable_now()-F<T)}function B(){if(k!==null){var te=t.unstable_now();F=te;var re=!0;try{re=k(!0,te)}finally{re?Z():(N=!1,k=null)}}else N=!1}var Z;if(typeof b=="function")Z=function(){b(B)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,ae=ke.port2;ke.port1.onmessage=B,Z=function(){ae.postMessage(null)}}else Z=function(){x(B,0)};function Te(te){k=te,N||(N=!0,Z())}function he(te,re){A=x(function(){te(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,Te(S))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(te){switch(f){case 1:case 2:case 3:var re=3;break;default:re=f}var le=f;f=re;try{return te()}finally{f=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,re){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var le=f;f=te;try{return re()}finally{f=le}},t.unstable_scheduleCallback=function(te,re,le){var je=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?je+le:je):le=je,te){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=le+M,te={id:h++,callback:re,priorityLevel:te,startTime:le,expirationTime:M,sortIndex:-1},le>je?(te.sortIndex=le,e(c,te),r(l)===null&&te===r(c)&&(g?(v(A),A=-1):g=!0,he(w,le-je))):(te.sortIndex=M,e(l,te),m||p||(m=!0,Te(S))),te},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(te){var re=f;return function(){var le=f;f=re;try{return te.apply(this,arguments)}finally{f=le}}}})($v);zv.exports=$v;var gS=zv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mS=C,hn=gS;function ue(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wv=new Set,El={};function aa(t,e){so(t,e),so(t+"Capture",e)}function so(t,e){for(El[t]=e,t=0;t<e.length;t++)Wv.add(e[t])}var As=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kf=Object.prototype.hasOwnProperty,xS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lg={},Bg={};function vS(t){return kf.call(Bg,t)?!0:kf.call(Lg,t)?!1:xS.test(t)?Bg[t]=!0:(Lg[t]=!0,!1)}function bS(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function yS(t,e,r,n){if(e===null||typeof e>"u"||bS(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Mr(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var mr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mr[t]=new Mr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mr[e]=new Mr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mr[t]=new Mr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mr[t]=new Mr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mr[t]=new Mr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mr[t]=new Mr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mr[t]=new Mr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mr[t]=new Mr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mr[t]=new Mr(t,5,!1,t.toLowerCase(),null,!1,!1)});var ep=/[\-:]([a-z])/g;function tp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ep,tp);mr[e]=new Mr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ep,tp);mr[e]=new Mr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ep,tp);mr[e]=new Mr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mr[t]=new Mr(t,1,!1,t.toLowerCase(),null,!1,!1)});mr.xlinkHref=new Mr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mr[t]=new Mr(t,1,!1,t.toLowerCase(),null,!0,!0)});function rp(t,e,r,n){var s=mr.hasOwnProperty(e)?mr[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(yS(e,r,s,n)&&(r=null),n||s===null?vS(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ps=mS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kc=Symbol.for("react.element"),Ra=Symbol.for("react.portal"),Da=Symbol.for("react.fragment"),np=Symbol.for("react.strict_mode"),Ef=Symbol.for("react.profiler"),Vv=Symbol.for("react.provider"),Hv=Symbol.for("react.context"),sp=Symbol.for("react.forward_ref"),Tf=Symbol.for("react.suspense"),Cf=Symbol.for("react.suspense_list"),ip=Symbol.for("react.memo"),Us=Symbol.for("react.lazy"),Gv=Symbol.for("react.offscreen"),Ug=Symbol.iterator;function Co(t){return t===null||typeof t!="object"?null:(t=Ug&&t[Ug]||t["@@iterator"],typeof t=="function"?t:null)}var Ot=Object.assign,gd;function $o(t){if(gd===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);gd=e&&e[1]||""}return`
`+gd+t}var md=!1;function xd(t,e){if(!t||md)return"";md=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{md=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?$o(t):""}function wS(t){switch(t.tag){case 5:return $o(t.type);case 16:return $o("Lazy");case 13:return $o("Suspense");case 19:return $o("SuspenseList");case 0:case 2:case 15:return t=xd(t.type,!1),t;case 11:return t=xd(t.type.render,!1),t;case 1:return t=xd(t.type,!0),t;default:return""}}function Af(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Da:return"Fragment";case Ra:return"Portal";case Ef:return"Profiler";case np:return"StrictMode";case Tf:return"Suspense";case Cf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Hv:return(t.displayName||"Context")+".Consumer";case Vv:return(t._context.displayName||"Context")+".Provider";case sp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ip:return e=t.displayName||null,e!==null?e:Af(t.type)||"Memo";case Us:e=t._payload,t=t._init;try{return Af(t(e))}catch{}}return null}function _S(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Af(e);case 8:return e===np?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ui(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SS(t){var e=Kv(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ec(t){t._valueTracker||(t._valueTracker=SS(t))}function Yv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Kv(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Mu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nf(t,e){var r=e.checked;return Ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function zg(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ui(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xv(t,e){e=e.checked,e!=null&&rp(t,"checked",e,!1)}function jf(t,e){Xv(t,e);var r=ui(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Of(t,e.type,r):e.hasOwnProperty("defaultValue")&&Of(t,e.type,ui(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $g(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Of(t,e,r){(e!=="number"||Mu(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Wo=Array.isArray;function Ga(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ui(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Rf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ue(91));return Ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Wg(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ue(92));if(Wo(r)){if(1<r.length)throw Error(ue(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ui(r)}}function qv(t,e){var r=ui(e.value),n=ui(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Vg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Jv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Df(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Jv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tc,Qv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Tc=Tc||document.createElement("div"),Tc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Tl(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var tl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kS=["Webkit","ms","Moz","O"];Object.keys(tl).forEach(function(t){kS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),tl[e]=tl[t]})});function Zv(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||tl.hasOwnProperty(t)&&tl[t]?(""+e).trim():e+"px"}function eb(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Zv(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var ES=Ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pf(t,e){if(e){if(ES[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ue(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ue(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ue(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ue(62))}}function If(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mf=null;function ap(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ff=null,Ka=null,Ya=null;function Hg(t){if(t=dc(t)){if(typeof Ff!="function")throw Error(ue(280));var e=t.stateNode;e&&(e=Bh(e),Ff(t.stateNode,t.type,e))}}function tb(t){Ka?Ya?Ya.push(t):Ya=[t]:Ka=t}function rb(){if(Ka){var t=Ka,e=Ya;if(Ya=Ka=null,Hg(t),e)for(t=0;t<e.length;t++)Hg(e[t])}}function nb(t,e){return t(e)}function sb(){}var vd=!1;function ib(t,e,r){if(vd)return t(e,r);vd=!0;try{return nb(t,e,r)}finally{vd=!1,(Ka!==null||Ya!==null)&&(sb(),rb())}}function Cl(t,e){var r=t.stateNode;if(r===null)return null;var n=Bh(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ue(231,e,typeof r));return r}var Lf=!1;if(As)try{var Ao={};Object.defineProperty(Ao,"passive",{get:function(){Lf=!0}}),window.addEventListener("test",Ao,Ao),window.removeEventListener("test",Ao,Ao)}catch{Lf=!1}function TS(t,e,r,n,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(h){this.onError(h)}}var rl=!1,Fu=null,Lu=!1,Bf=null,CS={onError:function(t){rl=!0,Fu=t}};function AS(t,e,r,n,s,i,a,o,l){rl=!1,Fu=null,TS.apply(CS,arguments)}function NS(t,e,r,n,s,i,a,o,l){if(AS.apply(this,arguments),rl){if(rl){var c=Fu;rl=!1,Fu=null}else throw Error(ue(198));Lu||(Lu=!0,Bf=c)}}function oa(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function ab(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Gg(t){if(oa(t)!==t)throw Error(ue(188))}function jS(t){var e=t.alternate;if(!e){if(e=oa(t),e===null)throw Error(ue(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Gg(s),t;if(i===n)return Gg(s),e;i=i.sibling}throw Error(ue(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a)throw Error(ue(189))}}if(r.alternate!==n)throw Error(ue(190))}if(r.tag!==3)throw Error(ue(188));return r.stateNode.current===r?t:e}function ob(t){return t=jS(t),t!==null?lb(t):null}function lb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=lb(t);if(e!==null)return e;t=t.sibling}return null}var cb=hn.unstable_scheduleCallback,Kg=hn.unstable_cancelCallback,OS=hn.unstable_shouldYield,RS=hn.unstable_requestPaint,Lt=hn.unstable_now,DS=hn.unstable_getCurrentPriorityLevel,op=hn.unstable_ImmediatePriority,ub=hn.unstable_UserBlockingPriority,Bu=hn.unstable_NormalPriority,PS=hn.unstable_LowPriority,hb=hn.unstable_IdlePriority,Ih=null,os=null;function IS(t){if(os&&typeof os.onCommitFiberRoot=="function")try{os.onCommitFiberRoot(Ih,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:LS,MS=Math.log,FS=Math.LN2;function LS(t){return t>>>=0,t===0?32:31-(MS(t)/FS|0)|0}var Cc=64,Ac=4194304;function Vo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Uu(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var o=a&~s;o!==0?n=Vo(o):(i&=a,i!==0&&(n=Vo(i)))}else a=r&~s,a!==0?n=Vo(a):i!==0&&(n=Vo(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-zn(e),s=1<<r,n|=t[r],e&=~s;return n}function BS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function US(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-zn(i),o=1<<a,l=s[a];l===-1?(!(o&r)||o&n)&&(s[a]=BS(o,e)):l<=e&&(t.expiredLanes|=o),i&=~o}}function Uf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function db(){var t=Cc;return Cc<<=1,!(Cc&4194240)&&(Cc=64),t}function bd(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function uc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=r}function zS(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-zn(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function lp(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-zn(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var ct=0;function fb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pb,cp,gb,mb,xb,zf=!1,Nc=[],ti=null,ri=null,ni=null,Al=new Map,Nl=new Map,Ws=[],$S="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yg(t,e){switch(t){case"focusin":case"focusout":ti=null;break;case"dragenter":case"dragleave":ri=null;break;case"mouseover":case"mouseout":ni=null;break;case"pointerover":case"pointerout":Al.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nl.delete(e.pointerId)}}function No(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=dc(e),e!==null&&cp(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function WS(t,e,r,n,s){switch(e){case"focusin":return ti=No(ti,t,e,r,n,s),!0;case"dragenter":return ri=No(ri,t,e,r,n,s),!0;case"mouseover":return ni=No(ni,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Al.set(i,No(Al.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Nl.set(i,No(Nl.get(i)||null,t,e,r,n,s)),!0}return!1}function vb(t){var e=Bi(t.target);if(e!==null){var r=oa(e);if(r!==null){if(e=r.tag,e===13){if(e=ab(r),e!==null){t.blockedOn=e,xb(t.priority,function(){gb(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=$f(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Mf=n,r.target.dispatchEvent(n),Mf=null}else return e=dc(r),e!==null&&cp(e),t.blockedOn=r,!1;e.shift()}return!0}function Xg(t,e,r){xu(t)&&r.delete(e)}function VS(){zf=!1,ti!==null&&xu(ti)&&(ti=null),ri!==null&&xu(ri)&&(ri=null),ni!==null&&xu(ni)&&(ni=null),Al.forEach(Xg),Nl.forEach(Xg)}function jo(t,e){t.blockedOn===e&&(t.blockedOn=null,zf||(zf=!0,hn.unstable_scheduleCallback(hn.unstable_NormalPriority,VS)))}function jl(t){function e(s){return jo(s,t)}if(0<Nc.length){jo(Nc[0],t);for(var r=1;r<Nc.length;r++){var n=Nc[r];n.blockedOn===t&&(n.blockedOn=null)}}for(ti!==null&&jo(ti,t),ri!==null&&jo(ri,t),ni!==null&&jo(ni,t),Al.forEach(e),Nl.forEach(e),r=0;r<Ws.length;r++)n=Ws[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ws.length&&(r=Ws[0],r.blockedOn===null);)vb(r),r.blockedOn===null&&Ws.shift()}var Xa=Ps.ReactCurrentBatchConfig,zu=!0;function HS(t,e,r,n){var s=ct,i=Xa.transition;Xa.transition=null;try{ct=1,up(t,e,r,n)}finally{ct=s,Xa.transition=i}}function GS(t,e,r,n){var s=ct,i=Xa.transition;Xa.transition=null;try{ct=4,up(t,e,r,n)}finally{ct=s,Xa.transition=i}}function up(t,e,r,n){if(zu){var s=$f(t,e,r,n);if(s===null)Nd(t,e,n,$u,r),Yg(t,n);else if(WS(s,t,e,r,n))n.stopPropagation();else if(Yg(t,n),e&4&&-1<$S.indexOf(t)){for(;s!==null;){var i=dc(s);if(i!==null&&pb(i),i=$f(t,e,r,n),i===null&&Nd(t,e,n,$u,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Nd(t,e,n,null,r)}}var $u=null;function $f(t,e,r,n){if($u=null,t=ap(n),t=Bi(t),t!==null)if(e=oa(t),e===null)t=null;else if(r=e.tag,r===13){if(t=ab(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $u=t,null}function bb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DS()){case op:return 1;case ub:return 4;case Bu:case PS:return 16;case hb:return 536870912;default:return 16}default:return 16}}var Gs=null,hp=null,vu=null;function yb(){if(vu)return vu;var t,e=hp,r=e.length,n,s="value"in Gs?Gs.value:Gs.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return vu=s.slice(t,1<n?1-n:void 0)}function bu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jc(){return!0}function qg(){return!1}function pn(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(r=t[o],this[o]=r?r(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jc:qg,this.isPropagationStopped=qg,this}return Ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=jc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=jc)},persist:function(){},isPersistent:jc}),e}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dp=pn(vo),hc=Ot({},vo,{view:0,detail:0}),KS=pn(hc),yd,wd,Oo,Mh=Ot({},hc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oo&&(Oo&&t.type==="mousemove"?(yd=t.screenX-Oo.screenX,wd=t.screenY-Oo.screenY):wd=yd=0,Oo=t),yd)},movementY:function(t){return"movementY"in t?t.movementY:wd}}),Jg=pn(Mh),YS=Ot({},Mh,{dataTransfer:0}),XS=pn(YS),qS=Ot({},hc,{relatedTarget:0}),_d=pn(qS),JS=Ot({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),QS=pn(JS),ZS=Ot({},vo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ek=pn(ZS),tk=Ot({},vo,{data:0}),Qg=pn(tk),rk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ik(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sk[t])?!!e[t]:!1}function fp(){return ik}var ak=Ot({},hc,{key:function(t){if(t.key){var e=rk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fp,charCode:function(t){return t.type==="keypress"?bu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ok=pn(ak),lk=Ot({},Mh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zg=pn(lk),ck=Ot({},hc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fp}),uk=pn(ck),hk=Ot({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),dk=pn(hk),fk=Ot({},Mh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pk=pn(fk),gk=[9,13,27,32],pp=As&&"CompositionEvent"in window,nl=null;As&&"documentMode"in document&&(nl=document.documentMode);var mk=As&&"TextEvent"in window&&!nl,wb=As&&(!pp||nl&&8<nl&&11>=nl),em=" ",tm=!1;function _b(t,e){switch(t){case"keyup":return gk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pa=!1;function xk(t,e){switch(t){case"compositionend":return Sb(e);case"keypress":return e.which!==32?null:(tm=!0,em);case"textInput":return t=e.data,t===em&&tm?null:t;default:return null}}function vk(t,e){if(Pa)return t==="compositionend"||!pp&&_b(t,e)?(t=yb(),vu=hp=Gs=null,Pa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return wb&&e.locale!=="ko"?null:e.data;default:return null}}var bk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bk[t.type]:e==="textarea"}function kb(t,e,r,n){tb(n),e=Wu(e,"onChange"),0<e.length&&(r=new dp("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var sl=null,Ol=null;function yk(t){Ib(t,0)}function Fh(t){var e=Fa(t);if(Yv(e))return t}function wk(t,e){if(t==="change")return e}var Eb=!1;if(As){var Sd;if(As){var kd="oninput"in document;if(!kd){var nm=document.createElement("div");nm.setAttribute("oninput","return;"),kd=typeof nm.oninput=="function"}Sd=kd}else Sd=!1;Eb=Sd&&(!document.documentMode||9<document.documentMode)}function sm(){sl&&(sl.detachEvent("onpropertychange",Tb),Ol=sl=null)}function Tb(t){if(t.propertyName==="value"&&Fh(Ol)){var e=[];kb(e,Ol,t,ap(t)),ib(yk,e)}}function _k(t,e,r){t==="focusin"?(sm(),sl=e,Ol=r,sl.attachEvent("onpropertychange",Tb)):t==="focusout"&&sm()}function Sk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fh(Ol)}function kk(t,e){if(t==="click")return Fh(e)}function Ek(t,e){if(t==="input"||t==="change")return Fh(e)}function Tk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:Tk;function Rl(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!kf.call(e,s)||!Hn(t[s],e[s]))return!1}return!0}function im(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function am(t,e){var r=im(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=im(r)}}function Cb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Cb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ab(){for(var t=window,e=Mu();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Mu(t.document)}return e}function gp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ck(t){var e=Ab(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&Cb(r.ownerDocument.documentElement,r)){if(n!==null&&gp(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=am(r,i);var a=am(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ak=As&&"documentMode"in document&&11>=document.documentMode,Ia=null,Wf=null,il=null,Vf=!1;function om(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Vf||Ia==null||Ia!==Mu(n)||(n=Ia,"selectionStart"in n&&gp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),il&&Rl(il,n)||(il=n,n=Wu(Wf,"onSelect"),0<n.length&&(e=new dp("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Ia)))}function Oc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ma={animationend:Oc("Animation","AnimationEnd"),animationiteration:Oc("Animation","AnimationIteration"),animationstart:Oc("Animation","AnimationStart"),transitionend:Oc("Transition","TransitionEnd")},Ed={},Nb={};As&&(Nb=document.createElement("div").style,"AnimationEvent"in window||(delete Ma.animationend.animation,delete Ma.animationiteration.animation,delete Ma.animationstart.animation),"TransitionEvent"in window||delete Ma.transitionend.transition);function Lh(t){if(Ed[t])return Ed[t];if(!Ma[t])return t;var e=Ma[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in Nb)return Ed[t]=e[r];return t}var jb=Lh("animationend"),Ob=Lh("animationiteration"),Rb=Lh("animationstart"),Db=Lh("transitionend"),Pb=new Map,lm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xi(t,e){Pb.set(t,e),aa(e,[t])}for(var Td=0;Td<lm.length;Td++){var Cd=lm[Td],Nk=Cd.toLowerCase(),jk=Cd[0].toUpperCase()+Cd.slice(1);xi(Nk,"on"+jk)}xi(jb,"onAnimationEnd");xi(Ob,"onAnimationIteration");xi(Rb,"onAnimationStart");xi("dblclick","onDoubleClick");xi("focusin","onFocus");xi("focusout","onBlur");xi(Db,"onTransitionEnd");so("onMouseEnter",["mouseout","mouseover"]);so("onMouseLeave",["mouseout","mouseover"]);so("onPointerEnter",["pointerout","pointerover"]);so("onPointerLeave",["pointerout","pointerover"]);aa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));aa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));aa("onBeforeInput",["compositionend","keypress","textInput","paste"]);aa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));aa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));aa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ok=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function cm(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,NS(n,e,void 0,t),t.currentTarget=null}function Ib(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;cm(s,o,c),i=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;cm(s,o,c),i=l}}}if(Lu)throw t=Bf,Lu=!1,Bf=null,t}function yt(t,e){var r=e[Xf];r===void 0&&(r=e[Xf]=new Set);var n=t+"__bubble";r.has(n)||(Mb(e,t,2,!1),r.add(n))}function Ad(t,e,r){var n=0;e&&(n|=4),Mb(r,t,n,e)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function Dl(t){if(!t[Rc]){t[Rc]=!0,Wv.forEach(function(r){r!=="selectionchange"&&(Ok.has(r)||Ad(r,!1,t),Ad(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rc]||(e[Rc]=!0,Ad("selectionchange",!1,e))}}function Mb(t,e,r,n){switch(bb(e)){case 1:var s=HS;break;case 4:s=GS;break;default:s=up}r=s.bind(null,e,r,t),s=void 0,!Lf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Nd(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Bi(o),a===null)return;if(l=a.tag,l===5||l===6){n=i=a;continue e}o=o.parentNode}}n=n.return}ib(function(){var c=i,h=ap(r),d=[];e:{var f=Pb.get(t);if(f!==void 0){var p=dp,m=t;switch(t){case"keypress":if(bu(r)===0)break e;case"keydown":case"keyup":p=ok;break;case"focusin":m="focus",p=_d;break;case"focusout":m="blur",p=_d;break;case"beforeblur":case"afterblur":p=_d;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Jg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=XS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=uk;break;case jb:case Ob:case Rb:p=QS;break;case Db:p=dk;break;case"scroll":p=KS;break;case"wheel":p=pk;break;case"copy":case"cut":case"paste":p=ek;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Zg}var g=(e&4)!==0,x=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var b=c,y;b!==null;){y=b;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,v!==null&&(w=Cl(b,v),w!=null&&g.push(Pl(b,w,y)))),x)break;b=b.return}0<g.length&&(f=new p(f,m,null,r,h),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&r!==Mf&&(m=r.relatedTarget||r.fromElement)&&(Bi(m)||m[Ns]))break e;if((p||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=c,m=m?Bi(m):null,m!==null&&(x=oa(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=Jg,w="onMouseLeave",v="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=Zg,w="onPointerLeave",v="onPointerEnter",b="pointer"),x=p==null?f:Fa(p),y=m==null?f:Fa(m),f=new g(w,b+"leave",p,r,h),f.target=x,f.relatedTarget=y,w=null,Bi(h)===c&&(g=new g(v,b+"enter",m,r,h),g.target=y,g.relatedTarget=x,w=g),x=w,p&&m)t:{for(g=p,v=m,b=0,y=g;y;y=ma(y))b++;for(y=0,w=v;w;w=ma(w))y++;for(;0<b-y;)g=ma(g),b--;for(;0<y-b;)v=ma(v),y--;for(;b--;){if(g===v||v!==null&&g===v.alternate)break t;g=ma(g),v=ma(v)}g=null}else g=null;p!==null&&um(d,f,p,g,!1),m!==null&&x!==null&&um(d,x,m,g,!0)}}e:{if(f=c?Fa(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=wk;else if(rm(f))if(Eb)S=Ek;else{S=Sk;var N=_k}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=kk);if(S&&(S=S(t,c))){kb(d,S,r,h);break e}N&&N(t,f,c),t==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Of(f,"number",f.value)}switch(N=c?Fa(c):window,t){case"focusin":(rm(N)||N.contentEditable==="true")&&(Ia=N,Wf=c,il=null);break;case"focusout":il=Wf=Ia=null;break;case"mousedown":Vf=!0;break;case"contextmenu":case"mouseup":case"dragend":Vf=!1,om(d,r,h);break;case"selectionchange":if(Ak)break;case"keydown":case"keyup":om(d,r,h)}var k;if(pp)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Pa?_b(t,r)&&(A="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(A="onCompositionStart");A&&(wb&&r.locale!=="ko"&&(Pa||A!=="onCompositionStart"?A==="onCompositionEnd"&&Pa&&(k=yb()):(Gs=h,hp="value"in Gs?Gs.value:Gs.textContent,Pa=!0)),N=Wu(c,A),0<N.length&&(A=new Qg(A,t,null,r,h),d.push({event:A,listeners:N}),k?A.data=k:(k=Sb(r),k!==null&&(A.data=k)))),(k=mk?xk(t,r):vk(t,r))&&(c=Wu(c,"onBeforeInput"),0<c.length&&(h=new Qg("onBeforeInput","beforeinput",null,r,h),d.push({event:h,listeners:c}),h.data=k))}Ib(d,e)})}function Pl(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Wu(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Cl(t,r),i!=null&&n.unshift(Pl(t,i,s)),i=Cl(t,e),i!=null&&n.push(Pl(t,i,s))),t=t.return}return n}function ma(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function um(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&c!==null&&(o=c,s?(l=Cl(r,i),l!=null&&a.unshift(Pl(r,l,o))):s||(l=Cl(r,i),l!=null&&a.push(Pl(r,l,o)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var Rk=/\r\n?/g,Dk=/\u0000|\uFFFD/g;function hm(t){return(typeof t=="string"?t:""+t).replace(Rk,`
`).replace(Dk,"")}function Dc(t,e,r){if(e=hm(e),hm(t)!==e&&r)throw Error(ue(425))}function Vu(){}var Hf=null,Gf=null;function Kf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yf=typeof setTimeout=="function"?setTimeout:void 0,Pk=typeof clearTimeout=="function"?clearTimeout:void 0,dm=typeof Promise=="function"?Promise:void 0,Ik=typeof queueMicrotask=="function"?queueMicrotask:typeof dm<"u"?function(t){return dm.resolve(null).then(t).catch(Mk)}:Yf;function Mk(t){setTimeout(function(){throw t})}function jd(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),jl(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);jl(e)}function si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var bo=Math.random().toString(36).slice(2),as="__reactFiber$"+bo,Il="__reactProps$"+bo,Ns="__reactContainer$"+bo,Xf="__reactEvents$"+bo,Fk="__reactListeners$"+bo,Lk="__reactHandles$"+bo;function Bi(t){var e=t[as];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ns]||r[as]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=fm(t);t!==null;){if(r=t[as])return r;t=fm(t)}return e}t=r,r=t.parentNode}return null}function dc(t){return t=t[as]||t[Ns],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ue(33))}function Bh(t){return t[Il]||null}var qf=[],La=-1;function vi(t){return{current:t}}function wt(t){0>La||(t.current=qf[La],qf[La]=null,La--)}function mt(t,e){La++,qf[La]=t.current,t.current=e}var hi={},Tr=vi(hi),$r=vi(!1),Xi=hi;function io(t,e){var r=t.type.contextTypes;if(!r)return hi;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Wr(t){return t=t.childContextTypes,t!=null}function Hu(){wt($r),wt(Tr)}function pm(t,e,r){if(Tr.current!==hi)throw Error(ue(168));mt(Tr,e),mt($r,r)}function Fb(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(ue(108,_S(t)||"Unknown",s));return Ot({},r,n)}function Gu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hi,Xi=Tr.current,mt(Tr,t),mt($r,$r.current),!0}function gm(t,e,r){var n=t.stateNode;if(!n)throw Error(ue(169));r?(t=Fb(t,e,Xi),n.__reactInternalMemoizedMergedChildContext=t,wt($r),wt(Tr),mt(Tr,t)):wt($r),mt($r,r)}var xs=null,Uh=!1,Od=!1;function Lb(t){xs===null?xs=[t]:xs.push(t)}function Bk(t){Uh=!0,Lb(t)}function bi(){if(!Od&&xs!==null){Od=!0;var t=0,e=ct;try{var r=xs;for(ct=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}xs=null,Uh=!1}catch(s){throw xs!==null&&(xs=xs.slice(t+1)),cb(op,bi),s}finally{ct=e,Od=!1}}return null}var Ba=[],Ua=0,Ku=null,Yu=0,bn=[],yn=0,qi=null,bs=1,ys="";function Oi(t,e){Ba[Ua++]=Yu,Ba[Ua++]=Ku,Ku=t,Yu=e}function Bb(t,e,r){bn[yn++]=bs,bn[yn++]=ys,bn[yn++]=qi,qi=t;var n=bs;t=ys;var s=32-zn(n)-1;n&=~(1<<s),r+=1;var i=32-zn(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,bs=1<<32-zn(e)+s|r<<s|n,ys=i+t}else bs=1<<i|r<<s|n,ys=t}function mp(t){t.return!==null&&(Oi(t,1),Bb(t,1,0))}function xp(t){for(;t===Ku;)Ku=Ba[--Ua],Ba[Ua]=null,Yu=Ba[--Ua],Ba[Ua]=null;for(;t===qi;)qi=bn[--yn],bn[yn]=null,ys=bn[--yn],bn[yn]=null,bs=bn[--yn],bn[yn]=null}var un=null,cn=null,kt=!1,Fn=null;function Ub(t,e){var r=wn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function mm(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,un=t,cn=si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,un=t,cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=qi!==null?{id:bs,overflow:ys}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=wn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,un=t,cn=null,!0):!1;default:return!1}}function Jf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qf(t){if(kt){var e=cn;if(e){var r=e;if(!mm(t,e)){if(Jf(t))throw Error(ue(418));e=si(r.nextSibling);var n=un;e&&mm(t,e)?Ub(n,r):(t.flags=t.flags&-4097|2,kt=!1,un=t)}}else{if(Jf(t))throw Error(ue(418));t.flags=t.flags&-4097|2,kt=!1,un=t}}}function xm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;un=t}function Pc(t){if(t!==un)return!1;if(!kt)return xm(t),kt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Kf(t.type,t.memoizedProps)),e&&(e=cn)){if(Jf(t))throw zb(),Error(ue(418));for(;e;)Ub(t,e),e=si(e.nextSibling)}if(xm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ue(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){cn=si(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}cn=null}}else cn=un?si(t.stateNode.nextSibling):null;return!0}function zb(){for(var t=cn;t;)t=si(t.nextSibling)}function ao(){cn=un=null,kt=!1}function vp(t){Fn===null?Fn=[t]:Fn.push(t)}var Uk=Ps.ReactCurrentBatchConfig;function Ro(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ue(309));var n=r.stateNode}if(!n)throw Error(ue(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(ue(284));if(!r._owner)throw Error(ue(290,t))}return t}function Ic(t,e){throw t=Object.prototype.toString.call(e),Error(ue(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vm(t){var e=t._init;return e(t._payload)}function $b(t){function e(v,b){if(t){var y=v.deletions;y===null?(v.deletions=[b],v.flags|=16):y.push(b)}}function r(v,b){if(!t)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function s(v,b){return v=li(v,b),v.index=0,v.sibling=null,v}function i(v,b,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<b?(v.flags|=2,b):y):(v.flags|=2,b)):(v.flags|=1048576,b)}function a(v){return t&&v.alternate===null&&(v.flags|=2),v}function o(v,b,y,w){return b===null||b.tag!==6?(b=Ld(y,v.mode,w),b.return=v,b):(b=s(b,y),b.return=v,b)}function l(v,b,y,w){var S=y.type;return S===Da?h(v,b,y.props.children,w,y.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Us&&vm(S)===b.type)?(w=s(b,y.props),w.ref=Ro(v,b,y),w.return=v,w):(w=Tu(y.type,y.key,y.props,null,v.mode,w),w.ref=Ro(v,b,y),w.return=v,w)}function c(v,b,y,w){return b===null||b.tag!==4||b.stateNode.containerInfo!==y.containerInfo||b.stateNode.implementation!==y.implementation?(b=Bd(y,v.mode,w),b.return=v,b):(b=s(b,y.children||[]),b.return=v,b)}function h(v,b,y,w,S){return b===null||b.tag!==7?(b=Hi(y,v.mode,w,S),b.return=v,b):(b=s(b,y),b.return=v,b)}function d(v,b,y){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Ld(""+b,v.mode,y),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case kc:return y=Tu(b.type,b.key,b.props,null,v.mode,y),y.ref=Ro(v,null,b),y.return=v,y;case Ra:return b=Bd(b,v.mode,y),b.return=v,b;case Us:var w=b._init;return d(v,w(b._payload),y)}if(Wo(b)||Co(b))return b=Hi(b,v.mode,y,null),b.return=v,b;Ic(v,b)}return null}function f(v,b,y,w){var S=b!==null?b.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:o(v,b,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case kc:return y.key===S?l(v,b,y,w):null;case Ra:return y.key===S?c(v,b,y,w):null;case Us:return S=y._init,f(v,b,S(y._payload),w)}if(Wo(y)||Co(y))return S!==null?null:h(v,b,y,w,null);Ic(v,y)}return null}function p(v,b,y,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return v=v.get(y)||null,o(b,v,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case kc:return v=v.get(w.key===null?y:w.key)||null,l(b,v,w,S);case Ra:return v=v.get(w.key===null?y:w.key)||null,c(b,v,w,S);case Us:var N=w._init;return p(v,b,y,N(w._payload),S)}if(Wo(w)||Co(w))return v=v.get(y)||null,h(b,v,w,S,null);Ic(b,w)}return null}function m(v,b,y,w){for(var S=null,N=null,k=b,A=b=0,T=null;k!==null&&A<y.length;A++){k.index>A?(T=k,k=null):T=k.sibling;var F=f(v,k,y[A],w);if(F===null){k===null&&(k=T);break}t&&k&&F.alternate===null&&e(v,k),b=i(F,b,A),N===null?S=F:N.sibling=F,N=F,k=T}if(A===y.length)return r(v,k),kt&&Oi(v,A),S;if(k===null){for(;A<y.length;A++)k=d(v,y[A],w),k!==null&&(b=i(k,b,A),N===null?S=k:N.sibling=k,N=k);return kt&&Oi(v,A),S}for(k=n(v,k);A<y.length;A++)T=p(k,v,A,y[A],w),T!==null&&(t&&T.alternate!==null&&k.delete(T.key===null?A:T.key),b=i(T,b,A),N===null?S=T:N.sibling=T,N=T);return t&&k.forEach(function(I){return e(v,I)}),kt&&Oi(v,A),S}function g(v,b,y,w){var S=Co(y);if(typeof S!="function")throw Error(ue(150));if(y=S.call(y),y==null)throw Error(ue(151));for(var N=S=null,k=b,A=b=0,T=null,F=y.next();k!==null&&!F.done;A++,F=y.next()){k.index>A?(T=k,k=null):T=k.sibling;var I=f(v,k,F.value,w);if(I===null){k===null&&(k=T);break}t&&k&&I.alternate===null&&e(v,k),b=i(I,b,A),N===null?S=I:N.sibling=I,N=I,k=T}if(F.done)return r(v,k),kt&&Oi(v,A),S;if(k===null){for(;!F.done;A++,F=y.next())F=d(v,F.value,w),F!==null&&(b=i(F,b,A),N===null?S=F:N.sibling=F,N=F);return kt&&Oi(v,A),S}for(k=n(v,k);!F.done;A++,F=y.next())F=p(k,v,A,F.value,w),F!==null&&(t&&F.alternate!==null&&k.delete(F.key===null?A:F.key),b=i(F,b,A),N===null?S=F:N.sibling=F,N=F);return t&&k.forEach(function(B){return e(v,B)}),kt&&Oi(v,A),S}function x(v,b,y,w){if(typeof y=="object"&&y!==null&&y.type===Da&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case kc:e:{for(var S=y.key,N=b;N!==null;){if(N.key===S){if(S=y.type,S===Da){if(N.tag===7){r(v,N.sibling),b=s(N,y.props.children),b.return=v,v=b;break e}}else if(N.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Us&&vm(S)===N.type){r(v,N.sibling),b=s(N,y.props),b.ref=Ro(v,N,y),b.return=v,v=b;break e}r(v,N);break}else e(v,N);N=N.sibling}y.type===Da?(b=Hi(y.props.children,v.mode,w,y.key),b.return=v,v=b):(w=Tu(y.type,y.key,y.props,null,v.mode,w),w.ref=Ro(v,b,y),w.return=v,v=w)}return a(v);case Ra:e:{for(N=y.key;b!==null;){if(b.key===N)if(b.tag===4&&b.stateNode.containerInfo===y.containerInfo&&b.stateNode.implementation===y.implementation){r(v,b.sibling),b=s(b,y.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else e(v,b);b=b.sibling}b=Bd(y,v.mode,w),b.return=v,v=b}return a(v);case Us:return N=y._init,x(v,b,N(y._payload),w)}if(Wo(y))return m(v,b,y,w);if(Co(y))return g(v,b,y,w);Ic(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,b!==null&&b.tag===6?(r(v,b.sibling),b=s(b,y),b.return=v,v=b):(r(v,b),b=Ld(y,v.mode,w),b.return=v,v=b),a(v)):r(v,b)}return x}var oo=$b(!0),Wb=$b(!1),Xu=vi(null),qu=null,za=null,bp=null;function yp(){bp=za=qu=null}function wp(t){var e=Xu.current;wt(Xu),t._currentValue=e}function Zf(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function qa(t,e){qu=t,bp=za=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(zr=!0),t.firstContext=null)}function Sn(t){var e=t._currentValue;if(bp!==t)if(t={context:t,memoizedValue:e,next:null},za===null){if(qu===null)throw Error(ue(308));za=t,qu.dependencies={lanes:0,firstContext:t}}else za=za.next=t;return e}var Ui=null;function _p(t){Ui===null?Ui=[t]:Ui.push(t)}function Vb(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,_p(e)):(r.next=s.next,s.next=r),e.interleaved=r,js(t,n)}function js(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var zs=!1;function Sp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Hb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ks(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ii(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Qe&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,js(t,r)}return s=n.interleaved,s===null?(e.next=e,_p(n)):(e.next=s.next,s.next=e),n.interleaved=e,js(t,r)}function yu(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,lp(t,r)}}function bm(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ju(t,e,r,n){var s=t.updateQueue;zs=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==a&&(o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;a=0,h=c=l=null,o=i;do{var f=o.lane,p=o.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,g=o;switch(f=e,p=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=Ot({},d,f);break e;case 2:zs=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(c=h=p,l=d):h=h.next=p,a|=f;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;f=o,o=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Qi|=a,t.lanes=a,t.memoizedState=d}}function ym(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(ue(191,s));s.call(n)}}}var fc={},ls=vi(fc),Ml=vi(fc),Fl=vi(fc);function zi(t){if(t===fc)throw Error(ue(174));return t}function kp(t,e){switch(mt(Fl,e),mt(Ml,t),mt(ls,fc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Df(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Df(e,t)}wt(ls),mt(ls,e)}function lo(){wt(ls),wt(Ml),wt(Fl)}function Gb(t){zi(Fl.current);var e=zi(ls.current),r=Df(e,t.type);e!==r&&(mt(Ml,t),mt(ls,r))}function Ep(t){Ml.current===t&&(wt(ls),wt(Ml))}var Nt=vi(0);function Qu(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rd=[];function Tp(){for(var t=0;t<Rd.length;t++)Rd[t]._workInProgressVersionPrimary=null;Rd.length=0}var wu=Ps.ReactCurrentDispatcher,Dd=Ps.ReactCurrentBatchConfig,Ji=0,jt=null,qt=null,er=null,Zu=!1,al=!1,Ll=0,zk=0;function vr(){throw Error(ue(321))}function Cp(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Hn(t[r],e[r]))return!1;return!0}function Ap(t,e,r,n,s,i){if(Ji=i,jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wu.current=t===null||t.memoizedState===null?Hk:Gk,t=r(n,s),al){i=0;do{if(al=!1,Ll=0,25<=i)throw Error(ue(301));i+=1,er=qt=null,e.updateQueue=null,wu.current=Kk,t=r(n,s)}while(al)}if(wu.current=eh,e=qt!==null&&qt.next!==null,Ji=0,er=qt=jt=null,Zu=!1,e)throw Error(ue(300));return t}function Np(){var t=Ll!==0;return Ll=0,t}function ss(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?jt.memoizedState=er=t:er=er.next=t,er}function kn(){if(qt===null){var t=jt.alternate;t=t!==null?t.memoizedState:null}else t=qt.next;var e=er===null?jt.memoizedState:er.next;if(e!==null)er=e,qt=t;else{if(t===null)throw Error(ue(310));qt=t,t={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},er===null?jt.memoizedState=er=t:er=er.next=t}return er}function Bl(t,e){return typeof e=="function"?e(t):e}function Pd(t){var e=kn(),r=e.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=t;var n=qt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var o=a=null,l=null,c=i;do{var h=c.lane;if((Ji&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=d,a=n):l=l.next=d,jt.lanes|=h,Qi|=h}c=c.next}while(c!==null&&c!==i);l===null?a=n:l.next=o,Hn(n,e.memoizedState)||(zr=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,jt.lanes|=i,Qi|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Id(t){var e=kn(),r=e.queue;if(r===null)throw Error(ue(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Hn(i,e.memoizedState)||(zr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function Kb(){}function Yb(t,e){var r=jt,n=kn(),s=e(),i=!Hn(n.memoizedState,s);if(i&&(n.memoizedState=s,zr=!0),n=n.queue,jp(Jb.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||er!==null&&er.memoizedState.tag&1){if(r.flags|=2048,Ul(9,qb.bind(null,r,n,s,e),void 0,null),ir===null)throw Error(ue(349));Ji&30||Xb(r,e,s)}return s}function Xb(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=jt.updateQueue,e===null?(e={lastEffect:null,stores:null},jt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function qb(t,e,r,n){e.value=r,e.getSnapshot=n,Qb(e)&&Zb(t)}function Jb(t,e,r){return r(function(){Qb(e)&&Zb(t)})}function Qb(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Hn(t,r)}catch{return!0}}function Zb(t){var e=js(t,1);e!==null&&$n(e,t,1,-1)}function wm(t){var e=ss();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:t},e.queue=t,t=t.dispatch=Vk.bind(null,jt,t),[e.memoizedState,t]}function Ul(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=jt.updateQueue,e===null?(e={lastEffect:null,stores:null},jt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function ey(){return kn().memoizedState}function _u(t,e,r,n){var s=ss();jt.flags|=t,s.memoizedState=Ul(1|e,r,void 0,n===void 0?null:n)}function zh(t,e,r,n){var s=kn();n=n===void 0?null:n;var i=void 0;if(qt!==null){var a=qt.memoizedState;if(i=a.destroy,n!==null&&Cp(n,a.deps)){s.memoizedState=Ul(e,r,i,n);return}}jt.flags|=t,s.memoizedState=Ul(1|e,r,i,n)}function _m(t,e){return _u(8390656,8,t,e)}function jp(t,e){return zh(2048,8,t,e)}function ty(t,e){return zh(4,2,t,e)}function ry(t,e){return zh(4,4,t,e)}function ny(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function sy(t,e,r){return r=r!=null?r.concat([t]):null,zh(4,4,ny.bind(null,e,t),r)}function Op(){}function iy(t,e){var r=kn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Cp(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function ay(t,e){var r=kn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Cp(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function oy(t,e,r){return Ji&21?(Hn(r,e)||(r=db(),jt.lanes|=r,Qi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,zr=!0),t.memoizedState=r)}function $k(t,e){var r=ct;ct=r!==0&&4>r?r:4,t(!0);var n=Dd.transition;Dd.transition={};try{t(!1),e()}finally{ct=r,Dd.transition=n}}function ly(){return kn().memoizedState}function Wk(t,e,r){var n=oi(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},cy(t))uy(e,r);else if(r=Vb(t,e,r,n),r!==null){var s=Dr();$n(r,t,n,s),hy(r,e,n)}}function Vk(t,e,r){var n=oi(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(cy(t))uy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,r);if(s.hasEagerState=!0,s.eagerState=o,Hn(o,a)){var l=e.interleaved;l===null?(s.next=s,_p(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=Vb(t,e,s,n),r!==null&&(s=Dr(),$n(r,t,n,s),hy(r,e,n))}}function cy(t){var e=t.alternate;return t===jt||e!==null&&e===jt}function uy(t,e){al=Zu=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function hy(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,lp(t,r)}}var eh={readContext:Sn,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useInsertionEffect:vr,useLayoutEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useMutableSource:vr,useSyncExternalStore:vr,useId:vr,unstable_isNewReconciler:!1},Hk={readContext:Sn,useCallback:function(t,e){return ss().memoizedState=[t,e===void 0?null:e],t},useContext:Sn,useEffect:_m,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,_u(4194308,4,ny.bind(null,e,t),r)},useLayoutEffect:function(t,e){return _u(4194308,4,t,e)},useInsertionEffect:function(t,e){return _u(4,2,t,e)},useMemo:function(t,e){var r=ss();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=ss();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Wk.bind(null,jt,t),[n.memoizedState,t]},useRef:function(t){var e=ss();return t={current:t},e.memoizedState=t},useState:wm,useDebugValue:Op,useDeferredValue:function(t){return ss().memoizedState=t},useTransition:function(){var t=wm(!1),e=t[0];return t=$k.bind(null,t[1]),ss().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=jt,s=ss();if(kt){if(r===void 0)throw Error(ue(407));r=r()}else{if(r=e(),ir===null)throw Error(ue(349));Ji&30||Xb(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,_m(Jb.bind(null,n,i,t),[t]),n.flags|=2048,Ul(9,qb.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=ss(),e=ir.identifierPrefix;if(kt){var r=ys,n=bs;r=(n&~(1<<32-zn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ll++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=zk++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gk={readContext:Sn,useCallback:iy,useContext:Sn,useEffect:jp,useImperativeHandle:sy,useInsertionEffect:ty,useLayoutEffect:ry,useMemo:ay,useReducer:Pd,useRef:ey,useState:function(){return Pd(Bl)},useDebugValue:Op,useDeferredValue:function(t){var e=kn();return oy(e,qt.memoizedState,t)},useTransition:function(){var t=Pd(Bl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:Kb,useSyncExternalStore:Yb,useId:ly,unstable_isNewReconciler:!1},Kk={readContext:Sn,useCallback:iy,useContext:Sn,useEffect:jp,useImperativeHandle:sy,useInsertionEffect:ty,useLayoutEffect:ry,useMemo:ay,useReducer:Id,useRef:ey,useState:function(){return Id(Bl)},useDebugValue:Op,useDeferredValue:function(t){var e=kn();return qt===null?e.memoizedState=t:oy(e,qt.memoizedState,t)},useTransition:function(){var t=Id(Bl)[0],e=kn().memoizedState;return[t,e]},useMutableSource:Kb,useSyncExternalStore:Yb,useId:ly,unstable_isNewReconciler:!1};function Dn(t,e){if(t&&t.defaultProps){e=Ot({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function e0(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ot({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var $h={isMounted:function(t){return(t=t._reactInternals)?oa(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Dr(),s=oi(t),i=ks(n,s);i.payload=e,r!=null&&(i.callback=r),e=ii(t,i,s),e!==null&&($n(e,t,s,n),yu(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Dr(),s=oi(t),i=ks(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=ii(t,i,s),e!==null&&($n(e,t,s,n),yu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Dr(),n=oi(t),s=ks(r,n);s.tag=2,e!=null&&(s.callback=e),e=ii(t,s,n),e!==null&&($n(e,t,n,r),yu(e,t,n))}};function Sm(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Rl(r,n)||!Rl(s,i):!0}function dy(t,e,r){var n=!1,s=hi,i=e.contextType;return typeof i=="object"&&i!==null?i=Sn(i):(s=Wr(e)?Xi:Tr.current,n=e.contextTypes,i=(n=n!=null)?io(t,s):hi),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$h,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function km(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&$h.enqueueReplaceState(e,e.state,null)}function t0(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Sp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Sn(i):(i=Wr(e)?Xi:Tr.current,s.context=io(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(e0(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&$h.enqueueReplaceState(s,s.state,null),Ju(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function co(t,e){try{var r="",n=e;do r+=wS(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Md(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function r0(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Yk=typeof WeakMap=="function"?WeakMap:Map;function fy(t,e,r){r=ks(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){rh||(rh=!0,d0=n),r0(t,e)},r}function py(t,e,r){r=ks(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){r0(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){r0(t,e),typeof n!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function Em(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Yk;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=lE.bind(null,t,e,r),e.then(t,t))}function Tm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Cm(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ks(-1,1),e.tag=2,ii(r,e,1))),r.lanes|=1),t)}var Xk=Ps.ReactCurrentOwner,zr=!1;function jr(t,e,r,n){e.child=t===null?Wb(e,null,r,n):oo(e,t.child,r,n)}function Am(t,e,r,n,s){r=r.render;var i=e.ref;return qa(e,s),n=Ap(t,e,r,n,i,s),r=Np(),t!==null&&!zr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Os(t,e,s)):(kt&&r&&mp(e),e.flags|=1,jr(t,e,n,s),e.child)}function Nm(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!Bp(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,gy(t,e,i,n,s)):(t=Tu(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Rl,r(a,n)&&t.ref===e.ref)return Os(t,e,s)}return e.flags|=1,t=li(i,n),t.ref=e.ref,t.return=e,e.child=t}function gy(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Rl(i,n)&&t.ref===e.ref)if(zr=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(zr=!0);else return e.lanes=t.lanes,Os(t,e,s)}return n0(t,e,r,n,s)}function my(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(Wa,rn),rn|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,mt(Wa,rn),rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,mt(Wa,rn),rn|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,mt(Wa,rn),rn|=n;return jr(t,e,s,r),e.child}function xy(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function n0(t,e,r,n,s){var i=Wr(r)?Xi:Tr.current;return i=io(e,i),qa(e,s),r=Ap(t,e,r,n,i,s),n=Np(),t!==null&&!zr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Os(t,e,s)):(kt&&n&&mp(e),e.flags|=1,jr(t,e,r,s),e.child)}function jm(t,e,r,n,s){if(Wr(r)){var i=!0;Gu(e)}else i=!1;if(qa(e,s),e.stateNode===null)Su(t,e),dy(e,r,n),t0(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Sn(c):(c=Wr(r)?Xi:Tr.current,c=io(e,c));var h=r.getDerivedStateFromProps,d=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==c)&&km(e,a,n,c),zs=!1;var f=e.memoizedState;a.state=f,Ju(e,n,a,s),l=e.memoizedState,o!==n||f!==l||$r.current||zs?(typeof h=="function"&&(e0(e,r,h,n),l=e.memoizedState),(o=zs||Sm(e,r,o,n,f,l,c))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=c,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,Hb(t,e),o=e.memoizedProps,c=e.type===e.elementType?o:Dn(e.type,o),a.props=c,d=e.pendingProps,f=a.context,l=r.contextType,typeof l=="object"&&l!==null?l=Sn(l):(l=Wr(r)?Xi:Tr.current,l=io(e,l));var p=r.getDerivedStateFromProps;(h=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||f!==l)&&km(e,a,n,l),zs=!1,f=e.memoizedState,a.state=f,Ju(e,n,a,s);var m=e.memoizedState;o!==d||f!==m||$r.current||zs?(typeof p=="function"&&(e0(e,r,p,n),m=e.memoizedState),(c=zs||Sm(e,r,c,n,f,m,l)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),a.props=n,a.state=m,a.context=l,n=c):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return s0(t,e,r,n,i,s)}function s0(t,e,r,n,s,i){xy(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&gm(e,r,!1),Os(t,e,i);n=e.stateNode,Xk.current=e;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=oo(e,t.child,null,i),e.child=oo(e,null,o,i)):jr(t,e,o,i),e.memoizedState=n.state,s&&gm(e,r,!0),e.child}function vy(t){var e=t.stateNode;e.pendingContext?pm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pm(t,e.context,!1),kp(t,e.containerInfo)}function Om(t,e,r,n,s){return ao(),vp(s),e.flags|=256,jr(t,e,r,n),e.child}var i0={dehydrated:null,treeContext:null,retryLane:0};function a0(t){return{baseLanes:t,cachePool:null,transitions:null}}function by(t,e,r){var n=e.pendingProps,s=Nt.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),mt(Nt,s&1),t===null)return Qf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Hh(a,n,0,null),t=Hi(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=a0(r),e.memoizedState=i0,t):Rp(e,a));if(s=t.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return qk(t,e,a,n,o,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,o=s.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=li(s,l),n.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=li(o,i):(i=Hi(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?a0(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=i0,n}return i=t.child,t=i.sibling,n=li(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Rp(t,e){return e=Hh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mc(t,e,r,n){return n!==null&&vp(n),oo(e,t.child,null,r),t=Rp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qk(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=Md(Error(ue(422))),Mc(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Hh({mode:"visible",children:n.children},s,0,null),i=Hi(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&oo(e,t.child,null,a),e.child.memoizedState=a0(a),e.memoizedState=i0,i);if(!(e.mode&1))return Mc(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var o=n.dgst;return n=o,i=Error(ue(419)),n=Md(i,n,void 0),Mc(t,e,a,n)}if(o=(a&t.childLanes)!==0,zr||o){if(n=ir,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,js(t,s),$n(n,t,s,-1))}return Lp(),n=Md(Error(ue(421))),Mc(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=cE.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,cn=si(s.nextSibling),un=e,kt=!0,Fn=null,t!==null&&(bn[yn++]=bs,bn[yn++]=ys,bn[yn++]=qi,bs=t.id,ys=t.overflow,qi=e),e=Rp(e,n.children),e.flags|=4096,e)}function Rm(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Zf(t.return,e,r)}function Fd(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function yy(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(jr(t,e,n.children,r),n=Nt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rm(t,r,e);else if(t.tag===19)Rm(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(mt(Nt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Qu(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Fd(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Qu(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Fd(e,!0,r,null,i);break;case"together":Fd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Su(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Os(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Qi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ue(153));if(e.child!==null){for(t=e.child,r=li(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=li(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Jk(t,e,r){switch(e.tag){case 3:vy(e),ao();break;case 5:Gb(e);break;case 1:Wr(e.type)&&Gu(e);break;case 4:kp(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;mt(Xu,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(mt(Nt,Nt.current&1),e.flags|=128,null):r&e.child.childLanes?by(t,e,r):(mt(Nt,Nt.current&1),t=Os(t,e,r),t!==null?t.sibling:null);mt(Nt,Nt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return yy(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),mt(Nt,Nt.current),n)break;return null;case 22:case 23:return e.lanes=0,my(t,e,r)}return Os(t,e,r)}var wy,o0,_y,Sy;wy=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};o0=function(){};_y=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,zi(ls.current);var i=null;switch(r){case"input":s=Nf(t,s),n=Nf(t,n),i=[];break;case"select":s=Ot({},s,{value:void 0}),n=Ot({},n,{value:void 0}),i=[];break;case"textarea":s=Rf(t,s),n=Rf(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Vu)}Pf(r,n);var a;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(El.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var l=n[c];if(o=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(r||(r={}),r[a]=l[a])}else r||(i||(i=[]),i.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(El.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&yt("scroll",t),i||o===l||(i=[])):(i=i||[]).push(c,l))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Sy=function(t,e,r,n){r!==n&&(e.flags|=4)};function Do(t,e){if(!kt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function br(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Qk(t,e,r){var n=e.pendingProps;switch(xp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return br(e),null;case 1:return Wr(e.type)&&Hu(),br(e),null;case 3:return n=e.stateNode,lo(),wt($r),wt(Tr),Tp(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Pc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fn!==null&&(g0(Fn),Fn=null))),o0(t,e),br(e),null;case 5:Ep(e);var s=zi(Fl.current);if(r=e.type,t!==null&&e.stateNode!=null)_y(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ue(166));return br(e),null}if(t=zi(ls.current),Pc(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[as]=e,n[Il]=i,t=(e.mode&1)!==0,r){case"dialog":yt("cancel",n),yt("close",n);break;case"iframe":case"object":case"embed":yt("load",n);break;case"video":case"audio":for(s=0;s<Ho.length;s++)yt(Ho[s],n);break;case"source":yt("error",n);break;case"img":case"image":case"link":yt("error",n),yt("load",n);break;case"details":yt("toggle",n);break;case"input":zg(n,i),yt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},yt("invalid",n);break;case"textarea":Wg(n,i),yt("invalid",n)}Pf(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?n.textContent!==o&&(i.suppressHydrationWarning!==!0&&Dc(n.textContent,o,t),s=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&Dc(n.textContent,o,t),s=["children",""+o]):El.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&yt("scroll",n)}switch(r){case"input":Ec(n),$g(n,i,!0);break;case"textarea":Ec(n),Vg(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Vu)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Jv(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[as]=e,t[Il]=n,wy(t,e,!1,!1),e.stateNode=t;e:{switch(a=If(r,n),r){case"dialog":yt("cancel",t),yt("close",t),s=n;break;case"iframe":case"object":case"embed":yt("load",t),s=n;break;case"video":case"audio":for(s=0;s<Ho.length;s++)yt(Ho[s],t);s=n;break;case"source":yt("error",t),s=n;break;case"img":case"image":case"link":yt("error",t),yt("load",t),s=n;break;case"details":yt("toggle",t),s=n;break;case"input":zg(t,n),s=Nf(t,n),yt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Ot({},n,{value:void 0}),yt("invalid",t);break;case"textarea":Wg(t,n),s=Rf(t,n),yt("invalid",t);break;default:s=n}Pf(r,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?eb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Qv(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Tl(t,l):typeof l=="number"&&Tl(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(El.hasOwnProperty(i)?l!=null&&i==="onScroll"&&yt("scroll",t):l!=null&&rp(t,i,l,a))}switch(r){case"input":Ec(t),$g(t,n,!1);break;case"textarea":Ec(t),Vg(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ui(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Ga(t,!!n.multiple,i,!1):n.defaultValue!=null&&Ga(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Vu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return br(e),null;case 6:if(t&&e.stateNode!=null)Sy(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ue(166));if(r=zi(Fl.current),zi(ls.current),Pc(e)){if(n=e.stateNode,r=e.memoizedProps,n[as]=e,(i=n.nodeValue!==r)&&(t=un,t!==null))switch(t.tag){case 3:Dc(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dc(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[as]=e,e.stateNode=n}return br(e),null;case 13:if(wt(Nt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(kt&&cn!==null&&e.mode&1&&!(e.flags&128))zb(),ao(),e.flags|=98560,i=!1;else if(i=Pc(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(ue(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ue(317));i[as]=e}else ao(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;br(e),i=!1}else Fn!==null&&(g0(Fn),Fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Nt.current&1?Jt===0&&(Jt=3):Lp())),e.updateQueue!==null&&(e.flags|=4),br(e),null);case 4:return lo(),o0(t,e),t===null&&Dl(e.stateNode.containerInfo),br(e),null;case 10:return wp(e.type._context),br(e),null;case 17:return Wr(e.type)&&Hu(),br(e),null;case 19:if(wt(Nt),i=e.memoizedState,i===null)return br(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)Do(i,!1);else{if(Jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Qu(t),a!==null){for(e.flags|=128,Do(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return mt(Nt,Nt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Lt()>uo&&(e.flags|=128,n=!0,Do(i,!1),e.lanes=4194304)}else{if(!n)if(t=Qu(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Do(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!kt)return br(e),null}else 2*Lt()-i.renderingStartTime>uo&&r!==1073741824&&(e.flags|=128,n=!0,Do(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Lt(),e.sibling=null,r=Nt.current,mt(Nt,n?r&1|2:r&1),e):(br(e),null);case 22:case 23:return Fp(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?rn&1073741824&&(br(e),e.subtreeFlags&6&&(e.flags|=8192)):br(e),null;case 24:return null;case 25:return null}throw Error(ue(156,e.tag))}function Zk(t,e){switch(xp(e),e.tag){case 1:return Wr(e.type)&&Hu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return lo(),wt($r),wt(Tr),Tp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ep(e),null;case 13:if(wt(Nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ue(340));ao()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return wt(Nt),null;case 4:return lo(),null;case 10:return wp(e.type._context),null;case 22:case 23:return Fp(),null;case 24:return null;default:return null}}var Fc=!1,_r=!1,eE=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function $a(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Pt(t,e,n)}else r.current=null}function l0(t,e,r){try{r()}catch(n){Pt(t,e,n)}}var Dm=!1;function tE(t,e){if(Hf=zu,t=Ab(),gp(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,o=-1,l=-1,c=0,h=0,d=t,f=null;t:for(;;){for(var p;d!==r||s!==0&&d.nodeType!==3||(o=a+s),d!==i||n!==0&&d.nodeType!==3||(l=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===r&&++c===s&&(o=a),f===i&&++h===n&&(l=a),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}r=o===-1||l===-1?null:{start:o,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Gf={focusedElem:t,selectionRange:r},zu=!1,Ae=e;Ae!==null;)if(e=Ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ae=t;else for(;Ae!==null;){e=Ae;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,x=m.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Dn(e.type,g),x);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(w){Pt(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Ae=t;break}Ae=e.return}return m=Dm,Dm=!1,m}function ol(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&l0(e,r,i)}s=s.next}while(s!==n)}}function Wh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function c0(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function ky(t){var e=t.alternate;e!==null&&(t.alternate=null,ky(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[as],delete e[Il],delete e[Xf],delete e[Fk],delete e[Lk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ey(t){return t.tag===5||t.tag===3||t.tag===4}function Pm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ey(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function u0(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Vu));else if(n!==4&&(t=t.child,t!==null))for(u0(t,e,r),t=t.sibling;t!==null;)u0(t,e,r),t=t.sibling}function h0(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(h0(t,e,r),t=t.sibling;t!==null;)h0(t,e,r),t=t.sibling}var ur=null,In=!1;function Ls(t,e,r){for(r=r.child;r!==null;)Ty(t,e,r),r=r.sibling}function Ty(t,e,r){if(os&&typeof os.onCommitFiberUnmount=="function")try{os.onCommitFiberUnmount(Ih,r)}catch{}switch(r.tag){case 5:_r||$a(r,e);case 6:var n=ur,s=In;ur=null,Ls(t,e,r),ur=n,In=s,ur!==null&&(In?(t=ur,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):ur.removeChild(r.stateNode));break;case 18:ur!==null&&(In?(t=ur,r=r.stateNode,t.nodeType===8?jd(t.parentNode,r):t.nodeType===1&&jd(t,r),jl(t)):jd(ur,r.stateNode));break;case 4:n=ur,s=In,ur=r.stateNode.containerInfo,In=!0,Ls(t,e,r),ur=n,In=s;break;case 0:case 11:case 14:case 15:if(!_r&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&l0(r,e,a),s=s.next}while(s!==n)}Ls(t,e,r);break;case 1:if(!_r&&($a(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Pt(r,e,o)}Ls(t,e,r);break;case 21:Ls(t,e,r);break;case 22:r.mode&1?(_r=(n=_r)||r.memoizedState!==null,Ls(t,e,r),_r=n):Ls(t,e,r);break;default:Ls(t,e,r)}}function Im(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new eE),e.forEach(function(n){var s=uE.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Nn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:ur=o.stateNode,In=!1;break e;case 3:ur=o.stateNode.containerInfo,In=!0;break e;case 4:ur=o.stateNode.containerInfo,In=!0;break e}o=o.return}if(ur===null)throw Error(ue(160));Ty(i,a,s),ur=null,In=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Pt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Cy(e,t),e=e.sibling}function Cy(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(e,t),es(t),n&4){try{ol(3,t,t.return),Wh(3,t)}catch(g){Pt(t,t.return,g)}try{ol(5,t,t.return)}catch(g){Pt(t,t.return,g)}}break;case 1:Nn(e,t),es(t),n&512&&r!==null&&$a(r,r.return);break;case 5:if(Nn(e,t),es(t),n&512&&r!==null&&$a(r,r.return),t.flags&32){var s=t.stateNode;try{Tl(s,"")}catch(g){Pt(t,t.return,g)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&Xv(s,i),If(o,a);var c=If(o,i);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];h==="style"?eb(s,d):h==="dangerouslySetInnerHTML"?Qv(s,d):h==="children"?Tl(s,d):rp(s,h,d,c)}switch(o){case"input":jf(s,i);break;case"textarea":qv(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Ga(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Ga(s,!!i.multiple,i.defaultValue,!0):Ga(s,!!i.multiple,i.multiple?[]:"",!1))}s[Il]=i}catch(g){Pt(t,t.return,g)}}break;case 6:if(Nn(e,t),es(t),n&4){if(t.stateNode===null)throw Error(ue(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Pt(t,t.return,g)}}break;case 3:if(Nn(e,t),es(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{jl(e.containerInfo)}catch(g){Pt(t,t.return,g)}break;case 4:Nn(e,t),es(t);break;case 13:Nn(e,t),es(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Ip=Lt())),n&4&&Im(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(_r=(c=_r)||h,Nn(e,t),_r=c):Nn(e,t),es(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Ae=t,h=t.child;h!==null;){for(d=Ae=h;Ae!==null;){switch(f=Ae,p=f.child,f.tag){case 0:case 11:case 14:case 15:ol(4,f,f.return);break;case 1:$a(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Pt(n,r,g)}}break;case 5:$a(f,f.return);break;case 22:if(f.memoizedState!==null){Fm(d);continue}}p!==null?(p.return=f,Ae=p):Fm(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=Zv("display",a))}catch(g){Pt(t,t.return,g)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Pt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Nn(e,t),es(t),n&4&&Im(t);break;case 21:break;default:Nn(e,t),es(t)}}function es(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Ey(r)){var n=r;break e}r=r.return}throw Error(ue(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Tl(s,""),n.flags&=-33);var i=Pm(t);h0(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,o=Pm(t);u0(t,o,a);break;default:throw Error(ue(161))}}catch(l){Pt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rE(t,e,r){Ae=t,Ay(t)}function Ay(t,e,r){for(var n=(t.mode&1)!==0;Ae!==null;){var s=Ae,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Fc;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||_r;o=Fc;var c=_r;if(Fc=a,(_r=l)&&!c)for(Ae=s;Ae!==null;)a=Ae,l=a.child,a.tag===22&&a.memoizedState!==null?Lm(s):l!==null?(l.return=a,Ae=l):Lm(s);for(;i!==null;)Ae=i,Ay(i),i=i.sibling;Ae=s,Fc=o,_r=c}Mm(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ae=i):Mm(t)}}function Mm(t){for(;Ae!==null;){var e=Ae;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_r||Wh(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!_r)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Dn(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ym(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ym(e,a,r)}break;case 5:var o=e.stateNode;if(r===null&&e.flags&4){r=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&jl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}_r||e.flags&512&&c0(e)}catch(f){Pt(e,e.return,f)}}if(e===t){Ae=null;break}if(r=e.sibling,r!==null){r.return=e.return,Ae=r;break}Ae=e.return}}function Fm(t){for(;Ae!==null;){var e=Ae;if(e===t){Ae=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Ae=r;break}Ae=e.return}}function Lm(t){for(;Ae!==null;){var e=Ae;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Wh(4,e)}catch(l){Pt(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){Pt(e,s,l)}}var i=e.return;try{c0(e)}catch(l){Pt(e,i,l)}break;case 5:var a=e.return;try{c0(e)}catch(l){Pt(e,a,l)}}}catch(l){Pt(e,e.return,l)}if(e===t){Ae=null;break}var o=e.sibling;if(o!==null){o.return=e.return,Ae=o;break}Ae=e.return}}var nE=Math.ceil,th=Ps.ReactCurrentDispatcher,Dp=Ps.ReactCurrentOwner,_n=Ps.ReactCurrentBatchConfig,Qe=0,ir=null,$t=null,pr=0,rn=0,Wa=vi(0),Jt=0,zl=null,Qi=0,Vh=0,Pp=0,ll=null,Br=null,Ip=0,uo=1/0,gs=null,rh=!1,d0=null,ai=null,Lc=!1,Ks=null,nh=0,cl=0,f0=null,ku=-1,Eu=0;function Dr(){return Qe&6?Lt():ku!==-1?ku:ku=Lt()}function oi(t){return t.mode&1?Qe&2&&pr!==0?pr&-pr:Uk.transition!==null?(Eu===0&&(Eu=db()),Eu):(t=ct,t!==0||(t=window.event,t=t===void 0?16:bb(t.type)),t):1}function $n(t,e,r,n){if(50<cl)throw cl=0,f0=null,Error(ue(185));uc(t,r,n),(!(Qe&2)||t!==ir)&&(t===ir&&(!(Qe&2)&&(Vh|=r),Jt===4&&Vs(t,pr)),Vr(t,n),r===1&&Qe===0&&!(e.mode&1)&&(uo=Lt()+500,Uh&&bi()))}function Vr(t,e){var r=t.callbackNode;US(t,e);var n=Uu(t,t===ir?pr:0);if(n===0)r!==null&&Kg(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Kg(r),e===1)t.tag===0?Bk(Bm.bind(null,t)):Lb(Bm.bind(null,t)),Ik(function(){!(Qe&6)&&bi()}),r=null;else{switch(fb(n)){case 1:r=op;break;case 4:r=ub;break;case 16:r=Bu;break;case 536870912:r=hb;break;default:r=Bu}r=My(r,Ny.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function Ny(t,e){if(ku=-1,Eu=0,Qe&6)throw Error(ue(327));var r=t.callbackNode;if(Ja()&&t.callbackNode!==r)return null;var n=Uu(t,t===ir?pr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=sh(t,n);else{e=n;var s=Qe;Qe|=2;var i=Oy();(ir!==t||pr!==e)&&(gs=null,uo=Lt()+500,Vi(t,e));do try{aE();break}catch(o){jy(t,o)}while(!0);yp(),th.current=i,Qe=s,$t!==null?e=0:(ir=null,pr=0,e=Jt)}if(e!==0){if(e===2&&(s=Uf(t),s!==0&&(n=s,e=p0(t,s))),e===1)throw r=zl,Vi(t,0),Vs(t,n),Vr(t,Lt()),r;if(e===6)Vs(t,n);else{if(s=t.current.alternate,!(n&30)&&!sE(s)&&(e=sh(t,n),e===2&&(i=Uf(t),i!==0&&(n=i,e=p0(t,i))),e===1))throw r=zl,Vi(t,0),Vs(t,n),Vr(t,Lt()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(ue(345));case 2:Ri(t,Br,gs);break;case 3:if(Vs(t,n),(n&130023424)===n&&(e=Ip+500-Lt(),10<e)){if(Uu(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Dr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Yf(Ri.bind(null,t,Br,gs),e);break}Ri(t,Br,gs);break;case 4:if(Vs(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-zn(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=Lt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*nE(n/1960))-n,10<n){t.timeoutHandle=Yf(Ri.bind(null,t,Br,gs),n);break}Ri(t,Br,gs);break;case 5:Ri(t,Br,gs);break;default:throw Error(ue(329))}}}return Vr(t,Lt()),t.callbackNode===r?Ny.bind(null,t):null}function p0(t,e){var r=ll;return t.current.memoizedState.isDehydrated&&(Vi(t,e).flags|=256),t=sh(t,e),t!==2&&(e=Br,Br=r,e!==null&&g0(e)),t}function g0(t){Br===null?Br=t:Br.push.apply(Br,t)}function sE(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Hn(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vs(t,e){for(e&=~Pp,e&=~Vh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-zn(e),n=1<<r;t[r]=-1,e&=~n}}function Bm(t){if(Qe&6)throw Error(ue(327));Ja();var e=Uu(t,0);if(!(e&1))return Vr(t,Lt()),null;var r=sh(t,e);if(t.tag!==0&&r===2){var n=Uf(t);n!==0&&(e=n,r=p0(t,n))}if(r===1)throw r=zl,Vi(t,0),Vs(t,e),Vr(t,Lt()),r;if(r===6)throw Error(ue(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ri(t,Br,gs),Vr(t,Lt()),null}function Mp(t,e){var r=Qe;Qe|=1;try{return t(e)}finally{Qe=r,Qe===0&&(uo=Lt()+500,Uh&&bi())}}function Zi(t){Ks!==null&&Ks.tag===0&&!(Qe&6)&&Ja();var e=Qe;Qe|=1;var r=_n.transition,n=ct;try{if(_n.transition=null,ct=1,t)return t()}finally{ct=n,_n.transition=r,Qe=e,!(Qe&6)&&bi()}}function Fp(){rn=Wa.current,wt(Wa)}function Vi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Pk(r)),$t!==null)for(r=$t.return;r!==null;){var n=r;switch(xp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Hu();break;case 3:lo(),wt($r),wt(Tr),Tp();break;case 5:Ep(n);break;case 4:lo();break;case 13:wt(Nt);break;case 19:wt(Nt);break;case 10:wp(n.type._context);break;case 22:case 23:Fp()}r=r.return}if(ir=t,$t=t=li(t.current,null),pr=rn=e,Jt=0,zl=null,Pp=Vh=Qi=0,Br=ll=null,Ui!==null){for(e=0;e<Ui.length;e++)if(r=Ui[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Ui=null}return t}function jy(t,e){do{var r=$t;try{if(yp(),wu.current=eh,Zu){for(var n=jt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Zu=!1}if(Ji=0,er=qt=jt=null,al=!1,Ll=0,Dp.current=null,r===null||r.return===null){Jt=1,zl=e,$t=null;break}e:{var i=t,a=r.return,o=r,l=e;if(e=pr,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=o,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Tm(a);if(p!==null){p.flags&=-257,Cm(p,a,o,i,e),p.mode&1&&Em(i,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){Em(i,c,e),Lp();break e}l=Error(ue(426))}}else if(kt&&o.mode&1){var x=Tm(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Cm(x,a,o,i,e),vp(co(l,o));break e}}i=l=co(l,o),Jt!==4&&(Jt=2),ll===null?ll=[i]:ll.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=fy(i,l,e);bm(i,v);break e;case 1:o=l;var b=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ai===null||!ai.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=py(i,o,e);bm(i,w);break e}}i=i.return}while(i!==null)}Dy(r)}catch(S){e=S,$t===r&&r!==null&&($t=r=r.return);continue}break}while(!0)}function Oy(){var t=th.current;return th.current=eh,t===null?eh:t}function Lp(){(Jt===0||Jt===3||Jt===2)&&(Jt=4),ir===null||!(Qi&268435455)&&!(Vh&268435455)||Vs(ir,pr)}function sh(t,e){var r=Qe;Qe|=2;var n=Oy();(ir!==t||pr!==e)&&(gs=null,Vi(t,e));do try{iE();break}catch(s){jy(t,s)}while(!0);if(yp(),Qe=r,th.current=n,$t!==null)throw Error(ue(261));return ir=null,pr=0,Jt}function iE(){for(;$t!==null;)Ry($t)}function aE(){for(;$t!==null&&!OS();)Ry($t)}function Ry(t){var e=Iy(t.alternate,t,rn);t.memoizedProps=t.pendingProps,e===null?Dy(t):$t=e,Dp.current=null}function Dy(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Zk(r,e),r!==null){r.flags&=32767,$t=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Jt=6,$t=null;return}}else if(r=Qk(r,e,rn),r!==null){$t=r;return}if(e=e.sibling,e!==null){$t=e;return}$t=e=t}while(e!==null);Jt===0&&(Jt=5)}function Ri(t,e,r){var n=ct,s=_n.transition;try{_n.transition=null,ct=1,oE(t,e,r,n)}finally{_n.transition=s,ct=n}return null}function oE(t,e,r,n){do Ja();while(Ks!==null);if(Qe&6)throw Error(ue(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ue(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(zS(t,i),t===ir&&($t=ir=null,pr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Lc||(Lc=!0,My(Bu,function(){return Ja(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=_n.transition,_n.transition=null;var a=ct;ct=1;var o=Qe;Qe|=4,Dp.current=null,tE(t,r),Cy(r,t),Ck(Gf),zu=!!Hf,Gf=Hf=null,t.current=r,rE(r),RS(),Qe=o,ct=a,_n.transition=i}else t.current=r;if(Lc&&(Lc=!1,Ks=t,nh=s),i=t.pendingLanes,i===0&&(ai=null),IS(r.stateNode),Vr(t,Lt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(rh)throw rh=!1,t=d0,d0=null,t;return nh&1&&t.tag!==0&&Ja(),i=t.pendingLanes,i&1?t===f0?cl++:(cl=0,f0=t):cl=0,bi(),null}function Ja(){if(Ks!==null){var t=fb(nh),e=_n.transition,r=ct;try{if(_n.transition=null,ct=16>t?16:t,Ks===null)var n=!1;else{if(t=Ks,Ks=null,nh=0,Qe&6)throw Error(ue(331));var s=Qe;for(Qe|=4,Ae=t.current;Ae!==null;){var i=Ae,a=i.child;if(Ae.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(Ae=c;Ae!==null;){var h=Ae;switch(h.tag){case 0:case 11:case 15:ol(8,h,i)}var d=h.child;if(d!==null)d.return=h,Ae=d;else for(;Ae!==null;){h=Ae;var f=h.sibling,p=h.return;if(ky(h),h===c){Ae=null;break}if(f!==null){f.return=p,Ae=f;break}Ae=p}}}var m=i.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}Ae=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Ae=a;else e:for(;Ae!==null;){if(i=Ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ol(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Ae=v;break e}Ae=i.return}}var b=t.current;for(Ae=b;Ae!==null;){a=Ae;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,Ae=y;else e:for(a=b;Ae!==null;){if(o=Ae,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Wh(9,o)}}catch(S){Pt(o,o.return,S)}if(o===a){Ae=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,Ae=w;break e}Ae=o.return}}if(Qe=s,bi(),os&&typeof os.onPostCommitFiberRoot=="function")try{os.onPostCommitFiberRoot(Ih,t)}catch{}n=!0}return n}finally{ct=r,_n.transition=e}}return!1}function Um(t,e,r){e=co(r,e),e=fy(t,e,1),t=ii(t,e,1),e=Dr(),t!==null&&(uc(t,1,e),Vr(t,e))}function Pt(t,e,r){if(t.tag===3)Um(t,t,r);else for(;e!==null;){if(e.tag===3){Um(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ai===null||!ai.has(n))){t=co(r,t),t=py(e,t,1),e=ii(e,t,1),t=Dr(),e!==null&&(uc(e,1,t),Vr(e,t));break}}e=e.return}}function lE(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Dr(),t.pingedLanes|=t.suspendedLanes&r,ir===t&&(pr&r)===r&&(Jt===4||Jt===3&&(pr&130023424)===pr&&500>Lt()-Ip?Vi(t,0):Pp|=r),Vr(t,e)}function Py(t,e){e===0&&(t.mode&1?(e=Ac,Ac<<=1,!(Ac&130023424)&&(Ac=4194304)):e=1);var r=Dr();t=js(t,e),t!==null&&(uc(t,e,r),Vr(t,r))}function cE(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Py(t,r)}function uE(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ue(314))}n!==null&&n.delete(e),Py(t,r)}var Iy;Iy=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||$r.current)zr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return zr=!1,Jk(t,e,r);zr=!!(t.flags&131072)}else zr=!1,kt&&e.flags&1048576&&Bb(e,Yu,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Su(t,e),t=e.pendingProps;var s=io(e,Tr.current);qa(e,r),s=Ap(null,e,n,t,s,r);var i=Np();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wr(n)?(i=!0,Gu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sp(e),s.updater=$h,e.stateNode=s,s._reactInternals=e,t0(e,n,t,r),e=s0(null,e,n,!0,i,r)):(e.tag=0,kt&&i&&mp(e),jr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Su(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=dE(n),t=Dn(n,t),s){case 0:e=n0(null,e,n,t,r);break e;case 1:e=jm(null,e,n,t,r);break e;case 11:e=Am(null,e,n,t,r);break e;case 14:e=Nm(null,e,n,Dn(n.type,t),r);break e}throw Error(ue(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Dn(n,s),n0(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Dn(n,s),jm(t,e,n,s,r);case 3:e:{if(vy(e),t===null)throw Error(ue(387));n=e.pendingProps,i=e.memoizedState,s=i.element,Hb(t,e),Ju(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=co(Error(ue(423)),e),e=Om(t,e,n,r,s);break e}else if(n!==s){s=co(Error(ue(424)),e),e=Om(t,e,n,r,s);break e}else for(cn=si(e.stateNode.containerInfo.firstChild),un=e,kt=!0,Fn=null,r=Wb(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ao(),n===s){e=Os(t,e,r);break e}jr(t,e,n,r)}e=e.child}return e;case 5:return Gb(e),t===null&&Qf(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Kf(n,s)?a=null:i!==null&&Kf(n,i)&&(e.flags|=32),xy(t,e),jr(t,e,a,r),e.child;case 6:return t===null&&Qf(e),null;case 13:return by(t,e,r);case 4:return kp(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=oo(e,null,n,r):jr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Dn(n,s),Am(t,e,n,s,r);case 7:return jr(t,e,e.pendingProps,r),e.child;case 8:return jr(t,e,e.pendingProps.children,r),e.child;case 12:return jr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,mt(Xu,n._currentValue),n._currentValue=a,i!==null)if(Hn(i.value,a)){if(i.children===s.children&&!$r.current){e=Os(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=ks(-1,r&-r),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Zf(i.return,r,e),o.lanes|=r;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(ue(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),Zf(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}jr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,qa(e,r),s=Sn(s),n=n(s),e.flags|=1,jr(t,e,n,r),e.child;case 14:return n=e.type,s=Dn(n,e.pendingProps),s=Dn(n.type,s),Nm(t,e,n,s,r);case 15:return gy(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Dn(n,s),Su(t,e),e.tag=1,Wr(n)?(t=!0,Gu(e)):t=!1,qa(e,r),dy(e,n,s),t0(e,n,s,r),s0(null,e,n,!0,t,r);case 19:return yy(t,e,r);case 22:return my(t,e,r)}throw Error(ue(156,e.tag))};function My(t,e){return cb(t,e)}function hE(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,e,r,n){return new hE(t,e,r,n)}function Bp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function dE(t){if(typeof t=="function")return Bp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sp)return 11;if(t===ip)return 14}return 2}function li(t,e){var r=t.alternate;return r===null?(r=wn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Tu(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")Bp(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Da:return Hi(r.children,s,i,e);case np:a=8,s|=8;break;case Ef:return t=wn(12,r,e,s|2),t.elementType=Ef,t.lanes=i,t;case Tf:return t=wn(13,r,e,s),t.elementType=Tf,t.lanes=i,t;case Cf:return t=wn(19,r,e,s),t.elementType=Cf,t.lanes=i,t;case Gv:return Hh(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Vv:a=10;break e;case Hv:a=9;break e;case sp:a=11;break e;case ip:a=14;break e;case Us:a=16,n=null;break e}throw Error(ue(130,t==null?t:typeof t,""))}return e=wn(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Hi(t,e,r,n){return t=wn(7,t,n,e),t.lanes=r,t}function Hh(t,e,r,n){return t=wn(22,t,n,e),t.elementType=Gv,t.lanes=r,t.stateNode={isHidden:!1},t}function Ld(t,e,r){return t=wn(6,t,null,e),t.lanes=r,t}function Bd(t,e,r){return e=wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function fE(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bd(0),this.expirationTimes=bd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bd(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Up(t,e,r,n,s,i,a,o,l){return t=new fE(t,e,r,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=wn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sp(i),t}function pE(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ra,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Fy(t){if(!t)return hi;t=t._reactInternals;e:{if(oa(t)!==t||t.tag!==1)throw Error(ue(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ue(171))}if(t.tag===1){var r=t.type;if(Wr(r))return Fb(t,r,e)}return e}function Ly(t,e,r,n,s,i,a,o,l){return t=Up(r,n,!0,t,s,i,a,o,l),t.context=Fy(null),r=t.current,n=Dr(),s=oi(r),i=ks(n,s),i.callback=e??null,ii(r,i,s),t.current.lanes=s,uc(t,s,n),Vr(t,n),t}function Gh(t,e,r,n){var s=e.current,i=Dr(),a=oi(s);return r=Fy(r),e.context===null?e.context=r:e.pendingContext=r,e=ks(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=ii(s,e,a),t!==null&&($n(t,s,a,i),yu(t,s,a)),a}function ih(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function zp(t,e){zm(t,e),(t=t.alternate)&&zm(t,e)}function gE(){return null}var By=typeof reportError=="function"?reportError:function(t){console.error(t)};function $p(t){this._internalRoot=t}Kh.prototype.render=$p.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ue(409));Gh(t,e,null,null)};Kh.prototype.unmount=$p.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zi(function(){Gh(null,t,null,null)}),e[Ns]=null}};function Kh(t){this._internalRoot=t}Kh.prototype.unstable_scheduleHydration=function(t){if(t){var e=mb();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ws.length&&e!==0&&e<Ws[r].priority;r++);Ws.splice(r,0,t),r===0&&vb(t)}};function Wp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Yh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $m(){}function mE(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=ih(a);i.call(c)}}var a=Ly(e,n,t,0,null,!1,!1,"",$m);return t._reactRootContainer=a,t[Ns]=a.current,Dl(t.nodeType===8?t.parentNode:t),Zi(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var o=n;n=function(){var c=ih(l);o.call(c)}}var l=Up(t,0,!1,null,null,!1,!1,"",$m);return t._reactRootContainer=l,t[Ns]=l.current,Dl(t.nodeType===8?t.parentNode:t),Zi(function(){Gh(e,l,r,n)}),l}function Xh(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=ih(a);o.call(l)}}Gh(e,a,t,s)}else a=mE(r,e,t,s,n);return ih(a)}pb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Vo(e.pendingLanes);r!==0&&(lp(e,r|1),Vr(e,Lt()),!(Qe&6)&&(uo=Lt()+500,bi()))}break;case 13:Zi(function(){var n=js(t,1);if(n!==null){var s=Dr();$n(n,t,1,s)}}),zp(t,1)}};cp=function(t){if(t.tag===13){var e=js(t,134217728);if(e!==null){var r=Dr();$n(e,t,134217728,r)}zp(t,134217728)}};gb=function(t){if(t.tag===13){var e=oi(t),r=js(t,e);if(r!==null){var n=Dr();$n(r,t,e,n)}zp(t,e)}};mb=function(){return ct};xb=function(t,e){var r=ct;try{return ct=t,e()}finally{ct=r}};Ff=function(t,e,r){switch(e){case"input":if(jf(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Bh(n);if(!s)throw Error(ue(90));Yv(n),jf(n,s)}}}break;case"textarea":qv(t,r);break;case"select":e=r.value,e!=null&&Ga(t,!!r.multiple,e,!1)}};nb=Mp;sb=Zi;var xE={usingClientEntryPoint:!1,Events:[dc,Fa,Bh,tb,rb,Mp]},Po={findFiberByHostInstance:Bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vE={bundleType:Po.bundleType,version:Po.version,rendererPackageName:Po.rendererPackageName,rendererConfig:Po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ob(t),t===null?null:t.stateNode},findFiberByHostInstance:Po.findFiberByHostInstance||gE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bc.isDisabled&&Bc.supportsFiber)try{Ih=Bc.inject(vE),os=Bc}catch{}}fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xE;fn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wp(e))throw Error(ue(200));return pE(t,e,null,r)};fn.createRoot=function(t,e){if(!Wp(t))throw Error(ue(299));var r=!1,n="",s=By;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Up(t,1,!1,null,null,r,!1,n,s),t[Ns]=e.current,Dl(t.nodeType===8?t.parentNode:t),new $p(e)};fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ue(188)):(t=Object.keys(t).join(","),Error(ue(268,t)));return t=ob(e),t=t===null?null:t.stateNode,t};fn.flushSync=function(t){return Zi(t)};fn.hydrate=function(t,e,r){if(!Yh(e))throw Error(ue(200));return Xh(null,t,e,!0,r)};fn.hydrateRoot=function(t,e,r){if(!Wp(t))throw Error(ue(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=By;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=Ly(e,null,t,1,r??null,s,!1,i,a),t[Ns]=e.current,Dl(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Kh(e)};fn.render=function(t,e,r){if(!Yh(e))throw Error(ue(200));return Xh(null,t,e,!1,r)};fn.unmountComponentAtNode=function(t){if(!Yh(t))throw Error(ue(40));return t._reactRootContainer?(Zi(function(){Xh(null,null,t,!1,function(){t._reactRootContainer=null,t[Ns]=null})}),!0):!1};fn.unstable_batchedUpdates=Mp;fn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Yh(r))throw Error(ue(200));if(t==null||t._reactInternals===void 0)throw Error(ue(38));return Xh(t,e,r,!1,n)};fn.version="18.3.1-next-f1338f8080-20240426";function Uy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Uy)}catch(t){console.error(t)}}Uy(),Uv.exports=fn;var zy=Uv.exports,Wm=zy;Sf.createRoot=Wm.createRoot,Sf.hydrateRoot=Wm.hydrateRoot;const bE="modulepreload",yE=function(t){return"/"+t},Vm={},wE=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=yE(l),l in Vm)return;Vm[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":bE,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})};function qh(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function _E(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(h){try{c(n.next(h))}catch(d){a(d)}}function l(h){try{c(n.throw(h))}catch(d){a(d)}}function c(h){h.done?i(h.value):s(h.value).then(o,l)}c((n=n.apply(t,e||[])).next())})}const SE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Vp extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class kE extends Vp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Hm extends Vp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Gm extends Vp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var m0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(m0||(m0={}));class EE{constructor(e,{headers:r={},customFetch:n,region:s=m0.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=SE(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return _E(this,arguments,void 0,function*(r,n={}){var s;let i,a;try{const{headers:o,method:l,body:c,signal:h,timeout:d}=n;let f={},{region:p}=n;p||(p=this.region);const m=new URL(`${this.url}/${r}`);p&&p!=="any"&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let g;c&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",g=c):typeof c=="string"?(f["Content-Type"]="text/plain",g=c):typeof FormData<"u"&&c instanceof FormData?g=c:(f["Content-Type"]="application/json",g=JSON.stringify(c)):g=c;let x=h;d&&(a=new AbortController,i=setTimeout(()=>a.abort(),d),h?(x=a.signal,h.addEventListener("abort",()=>a.abort())):x=a.signal);const v=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:g,signal:x}).catch(S=>{throw new kE(S)}),b=v.headers.get("x-relay-error");if(b&&b==="true")throw new Hm(v);if(!v.ok)throw new Gm(v);let y=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),w;return y==="application/json"?w=yield v.json():y==="application/octet-stream"||y==="application/pdf"?w=yield v.blob():y==="text/event-stream"?w=v:y==="multipart/form-data"?w=yield v.formData():w=yield v.text(),{data:w,error:null,response:v}}catch(o){return{data:null,error:o,response:o instanceof Gm||o instanceof Hm?o.context:void 0}}finally{i&&clearTimeout(i)}})}}var TE=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},CE=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let a=null,o=null,l=null,c=i.status,h=i.statusText;if(i.ok){var d,f;if(r.method!=="HEAD"){var p;const v=await i.text();v===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((p=r.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?o=v:o=JSON.parse(v))}const g=(d=r.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),x=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");g&&x&&x.length>1&&(l=parseInt(x[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,h="Not Acceptable"):o.length===1?o=o[0]:o=null)}else{var m;const g=await i.text();try{a=JSON.parse(g),Array.isArray(a)&&i.status===404&&(o=[],a=null,c=200,h="OK")}catch{i.status===404&&g===""?(c=204,h="No Content"):a={message:g}}if(a&&r.isMaybeSingle&&(!(a==null||(m=a.details)===null||m===void 0)&&m.includes("0 rows"))&&(a=null,c=200,h="OK"),a&&r.shouldThrowOnError)throw new TE(a)}return{error:a,data:o,count:l,status:c,statusText:h}});return this.shouldThrowOnError||(s=s.catch(i=>{var a;let o="";const l=i==null?void 0:i.cause;if(l){var c,h,d,f;const m=(c=l==null?void 0:l.message)!==null&&c!==void 0?c:"",g=(h=l==null?void 0:l.code)!==null&&h!==void 0?h:"";o=`${(d=i==null?void 0:i.name)!==null&&d!==void 0?d:"FetchError"}: ${i==null?void 0:i.message}`,o+=`

Caused by: ${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"Error"}: ${m}`,g&&(o+=` (${g})`),l!=null&&l.stack&&(o+=`
${l.stack}`)}else{var p;o=(p=i==null?void 0:i.stack)!==null&&p!==void 0?p:""}return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:o,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},AE=class extends CE{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var a;const o=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${o};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Km=new RegExp("[,()]");var Aa=class extends AE{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&Km.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&Km.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},NE=class{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n}select(t,e){const{head:r=!1,count:n}=e??{},s=r?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),n&&this.headers.append("Prefer",`count=${n}`),new Aa({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const s="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const i=t.reduce((a,o)=>a.concat(Object.keys(o)),[]);if(i.length>0){const a=[...new Set(i)].map(o=>`"${o}"`);this.url.searchParams.set("columns",a.join(","))}}return new Aa({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),n&&this.headers.append("Prefer",`count=${n}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Aa({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(t,{count:e}={}){var r;const n="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new Aa({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Aa({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},jE=class $y{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.fetch=s}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new NE(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new $y(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:i}={}){var a;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=r);const h=new Headers(this.headers);return i&&h.set("Prefer",`count=${i}`),new Aa({method:o,url:l,headers:h,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};class OE{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const RE="2.89.0",DE=`realtime-js/${RE}`,Wy="1.0.0",PE="2.0.0",Ym=Wy,x0=1e4,IE=1e3,ME=100;var $s;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})($s||($s={}));var Yt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Yt||(Yt={}));var Mn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Mn||(Mn={}));var v0;(function(t){t.websocket="websocket"})(v0||(v0={}));var Mi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Mi||(Mi={}));class FE{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},a=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,r,n){var s,i;const a=e.topic,o=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",c=e.payload.event,h=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(h).length===0?"":JSON.stringify(h);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`ref length ${o.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+o.length+a.length+c.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(p),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,l.length),m.setUint8(g++,o.length),m.setUint8(g++,a.length),m.setUint8(g++,c.length),m.setUint8(g++,d.length),m.setUint8(g++,r),Array.from(l,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(o,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(a,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(c,v=>m.setUint8(g++,v.charCodeAt(0))),Array.from(d,v=>m.setUint8(g++,v.charCodeAt(0)));var x=new Uint8Array(p.byteLength+n.byteLength);return x.set(new Uint8Array(p),0),x.set(new Uint8Array(n),p.byteLength),x.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,i,a,o,l]=n;return r({join_ref:s,ref:i,topic:a,event:o,payload:l})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodeUserBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2),a=r.getUint8(3),o=r.getUint8(4);let l=this.HEADER_LENGTH+4;const c=n.decode(e.slice(l,l+s));l=l+s;const h=n.decode(e.slice(l,l+i));l=l+i;const d=n.decode(e.slice(l,l+a));l=l+a;const f=e.slice(l,e.byteLength),p=o===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,m={type:this.BROADCAST_EVENT,event:h,payload:p};return a>0&&(m.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class Vy{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var pt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(pt||(pt={}));const Xm=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,a)=>(i[a]=LE(a,t,e,s),i),{}):{}},LE=(t,e,r,n)=>{const s=e.find(o=>o.name===t),i=s==null?void 0:s.type,a=r[t];return i&&!n.includes(i)?Hy(i,a):b0(a)},Hy=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return $E(e,r)}switch(t){case pt.bool:return BE(e);case pt.float4:case pt.float8:case pt.int2:case pt.int4:case pt.int8:case pt.numeric:case pt.oid:return UE(e);case pt.json:case pt.jsonb:return zE(e);case pt.timestamp:return WE(e);case pt.abstime:case pt.date:case pt.daterange:case pt.int4range:case pt.int8range:case pt.money:case pt.reltime:case pt.text:case pt.time:case pt.timestamptz:case pt.timetz:case pt.tsrange:case pt.tstzrange:return b0(e);default:return b0(e)}},b0=t=>t,BE=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},UE=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},zE=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},$E=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const a=t.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>Hy(e,o))}return t},WE=t=>typeof t=="string"?t.replace(" ","T"):t,Gy=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ud{constructor(e,r,n={},s=x0){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var qm;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(qm||(qm={}));class ul{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ul.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=ul.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ul.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),a=this.transformState(r),o={},l={};return this.map(i,(c,h)=>{a[c]||(l[c]=h)}),this.map(a,(c,h)=>{const d=i[c];if(d){const f=h.map(x=>x.presence_ref),p=d.map(x=>x.presence_ref),m=h.filter(x=>p.indexOf(x.presence_ref)<0),g=d.filter(x=>f.indexOf(x.presence_ref)<0);m.length>0&&(o[c]=m),g.length>0&&(l[c]=g)}else o[c]=h}),this.syncDiff(i,{joins:o,leaves:l},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var c;const h=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),h.length>0){const d=e[o].map(p=>p.presence_ref),f=h.filter(p=>d.indexOf(p.presence_ref)<0);e[o].unshift(...f)}n(o,h,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const h=l.map(d=>d.presence_ref);c=c.filter(d=>h.indexOf(d.presence_ref)<0),e[o]=c,s(o,c,l),c.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Jm;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Jm||(Jm={}));var hl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(hl||(hl={}));var ms;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ms||(ms={}));class Va{constructor(e,r={config:{}},n){var s,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Yt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ud(this,Mn.join,this.params,this.timeout),this.rejoinTimer=new Vy(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Yt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Yt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Yt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Yt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Yt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Mn.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new ul(this),this.broadcastEndpointURL=Gy(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Yt.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],h=!!this.bindings[hl.PRESENCE]&&this.bindings[hl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:h}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(ms.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(ms.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e==null||e(ms.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,x=(m=g==null?void 0:g.length)!==null&&m!==void 0?m:0,v=[];for(let b=0;b<x;b++){const y=g[b],{filter:{event:w,schema:S,table:N,filter:k}}=y,A=p&&p[b];if(A&&A.event===w&&Va.isFilterValueEqual(A.schema,S)&&Va.isFilterValueEqual(A.table,N)&&Va.isFilterValueEqual(A.filter,k))v.push(Object.assign(Object.assign({},y),{id:A.id}));else{this.unsubscribe(),this.state=Yt.errored,e==null||e(ms.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(ms.SUBSCRIBED);return}}).receive("error",p=>{this.state=Yt.errored,e==null||e(ms.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ms.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Yt.joined&&e===hl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const a={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(o.status===202)return{success:!0};let l=o.statusText;try{const c=await o.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:a}=e,o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Yt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Mn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Ud(this,Mn.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Yt.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ud(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ME){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:h}=Mn;if(n&&[o,l,c,h].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var m,g,x;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((x=(g=p.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===a}).map(p=>p.callback(f,n)):(i=this.bindings[a])===null||i===void 0||i.filter(p=>{var m,g,x,v,b,y;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const w=p.id,S=(m=p.filter)===null||m===void 0?void 0:m.event;return w&&((g=r.ids)===null||g===void 0?void 0:g.includes(w))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const w=(b=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return w==="*"||w===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:g,table:x,commit_timestamp:v,type:b,errors:y}=m;f=Object.assign(Object.assign({},{schema:g,table:x,commit_timestamp:v,eventType:b,new:{},old:{},errors:y}),this._getPayloadRecords(m))}p.callback(f,n)})}_isClosed(){return this.state===Yt.closed}_isJoined(){return this.state===Yt.joined}_isJoining(){return this.state===Yt.joining}_isLeaving(){return this.state===Yt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Va.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Mn.close,{},e)}_onError(e){this._on(Mn.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Yt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Xm(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Xm(e.columns,e.old_record)),r}}const zd=()=>{},Uc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},VE=[1e3,2e3,5e3,1e4],HE=1e4,GE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class KE{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=x0,this.transport=null,this.heartbeatIntervalMs=Uc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zd,this.ref=0,this.reconnectTimer=null,this.vsn=Ym,this.logger=zd,this.conn=null,this.sendBuffer=[],this.serializer=new FE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${v0.websocket}`,this.httpEndpoint=Gy(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=OE.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case $s.connecting:return Mi.Connecting;case $s.open:return Mi.Open;case $s.closing:return Mi.Closing;default:return Mi.Closed}}isConnected(){return this.connectionState()===Mi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Va(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(IE,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Uc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:a}=r,o=a?`(${a})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${o}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(s,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===$s.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===$s.open||this.conn.readyState===$s.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Mn.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([GE],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:DE};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Mn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Vy(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Uc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,a,o,l,c,h,d,f,p;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:x0,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Uc.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:zd,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Ym,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:m=>VE[m-1]||HE,this.vsn){case Wy:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:(m,g)=>g(JSON.stringify(m)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(m,g)=>g(JSON.parse(m));break;case PE:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var $l=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function YE(t,e,r){const n=new URL(e,t);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function XE(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function qE(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:a}){const o=YE(t.baseUrl,n,s),l=await XE(t.auth),c=await e(o,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...l,...a},body:i?JSON.stringify(i):void 0}),h=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),f=d&&h?JSON.parse(h):h;if(!c.ok){const p=d?f:void 0,m=p==null?void 0:p.error;throw new $l((m==null?void 0:m.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:p})}return{status:c.status,headers:c.headers,data:f}}}}function zc(t){return t.join("")}var JE=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:zc(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${zc(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${zc(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${zc(t.namespace)}`}),!0}catch(e){if(e instanceof $l&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof $l&&r.status===409)return;throw r}}};function xa(t){return t.join("")}var QE=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xa(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xa(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xa(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xa(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xa(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xa(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof $l&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof $l&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},ZE=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=qE({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new JE(this.client,e),this.tableOps=new QE(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Jh=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function At(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var eT=class extends Jh{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},y0=class extends Jh{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const Hp=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),tT=()=>Response,w0=t=>{if(Array.isArray(t))return t.map(r=>w0(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=w0(n)}),e},rT=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},nT=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Wl(t){"@babel/helpers - typeof";return Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wl(t)}function sT(t,e){if(Wl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Wl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iT(t){var e=sT(t,"string");return Wl(e)=="symbol"?e:e+""}function aT(t,e,r){return(e=iT(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qm(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Me(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Qm(Object(r),!0).forEach(function(n){aT(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qm(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const $d=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},oT=async(t,e,r)=>{t instanceof await tT()&&!(r!=null&&r.noResolveJson)?t.json().then(n=>{const s=t.status||500,i=(n==null?void 0:n.statusCode)||s+"";e(new eT($d(n),s,i))}).catch(n=>{e(new y0($d(n),n))}):e(new y0($d(t),t))},lT=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(rT(n)?(s.headers=Me({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Me(Me({},s),r))};async function pc(t,e,r,n,s,i){return new Promise((a,o)=>{t(r,lT(e,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>oT(l,o,n))})}async function Vl(t,e,r,n){return pc(t,"GET",e,r,n)}async function Pn(t,e,r,n,s){return pc(t,"POST",e,n,s,r)}async function _0(t,e,r,n,s){return pc(t,"PUT",e,n,s,r)}async function cT(t,e,r,n){return pc(t,"HEAD",e,Me(Me({},r),{},{noResolveJson:!0}),n)}async function Gp(t,e,r,n,s){return pc(t,"DELETE",e,n,s,r)}var uT=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}}};let Ky;Ky=Symbol.toStringTag;var hT=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Ky]="BlobDownloadBuilder",this.promise=null}asStream(){return new uT(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}}};const dT={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Zm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var fT=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=Hp(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,r,n){var s=this;try{let i;const a=Me(Me({},Zm),n);let o=Me(Me({},s.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",a.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!a.duplex&&(a.duplex="half")),n!=null&&n.headers&&(o=Me(Me({},o),n.headers));const c=s._removeEmptyFolders(e),h=s._getFinalPath(c),d=await(t=="PUT"?_0:Pn)(s.fetch,`${s.url}/object/${h}`,i,Me({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(s.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var s=this;const i=s._removeEmptyFolders(t),a=s._getFinalPath(i),o=new URL(s.url+`/object/upload/sign/${a}`);o.searchParams.set("token",e);try{let l;const c=Me({upsert:Zm.upsert},n),h=Me(Me({},s.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType),{data:{path:i,fullPath:(await _0(s.fetch,o.toString(),l,{headers:h})).Key},error:null}}catch(l){if(s.shouldThrowOnError)throw l;if(At(l))return{data:null,error:l};throw l}}async createSignedUploadUrl(t,e){var r=this;try{let n=r._getFinalPath(t);const s=Me({},r.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await Pn(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(r.url+i.url),o=a.searchParams.get("token");if(!o)throw new Jh("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:o},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;try{return{data:await Pn(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(At(s))return{data:null,error:s};throw s}}async copy(t,e,r){var n=this;try{return{data:{path:(await Pn(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key},error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(At(s))return{data:null,error:s};throw s}}async createSignedUrl(t,e,r){var n=this;try{let s=n._getFinalPath(t),i=await Pn(n.fetch,`${n.url}/object/sign/${s}`,Me({expiresIn:e},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${n.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(At(s))return{data:null,error:s};throw s}}async createSignedUrls(t,e,r){var n=this;try{const s=await Pn(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Me(Me({},a),{},{signedUrl:a.signedURL?encodeURI(`${n.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(At(s))return{data:null,error:s};throw s}}download(t,e){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),s=n?`?${n}`:"",i=this._getFinalPath(t),a=()=>Vl(this.fetch,`${this.url}/${r}/${i}${s}`,{headers:this.headers,noResolveJson:!0});return new hT(a,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);try{return{data:w0(await Vl(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await cT(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(At(n)&&n instanceof y0){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&n.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});a!==""&&n.push(a);let o=n.join("&");return o!==""&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${o}`)}}}async remove(t){var e=this;try{return{data:await Gp(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}}async list(t,e,r){var n=this;try{const s=Me(Me(Me({},dT),e),{},{prefix:t||""});return{data:await Pn(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r),error:null}}catch(s){if(n.shouldThrowOnError)throw s;if(At(s))return{data:null,error:s};throw s}}async listV2(t,e){var r=this;try{const n=Me({},t);return{data:await Pn(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Yy="2.89.0",Xy={"X-Client-Info":`storage-js/${Yy}`};var pT=class{constructor(t,e={},r,n){this.shouldThrowOnError=!1;const s=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Me(Me({},Xy),e),this.fetch=Hp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const r=e.listBucketOptionsToQueryString(t);return{data:await Vl(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await Vl(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}}async createBucket(t,e={public:!1}){var r=this;try{return{data:await Pn(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}}async updateBucket(t,e){var r=this;try{return{data:await _0(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}}async emptyBucket(t){var e=this;try{return{data:await Pn(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Gp(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},gT=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Me(Me({},Xy),e),this.fetch=Hp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Pn(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}}async listBuckets(t){var e=this;try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return{data:await Vl(e.fetch,s,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await Gp(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}}from(t){var e=this;if(!nT(t))throw new Jh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new ZE({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const a=s[i];return typeof a!="function"?a:async(...o)=>{try{return{data:await a.apply(s,o),error:null}}catch(l){if(n)throw l;return{data:null,error:l}}}}})}};const Kp={"X-Client-Info":`storage-js/${Yy}`,"Content-Type":"application/json"};var qy=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function on(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Wd=class extends qy{constructor(t,e,r){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},mT=class extends qy{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Yp=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),xT=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ex=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),vT=async(t,e,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const n=t.status||500,s=t;if(typeof s.json=="function")s.json().then(i=>{const a=(i==null?void 0:i.statusCode)||(i==null?void 0:i.code)||n+"";e(new Wd(ex(i),n,a))}).catch(()=>{const i=n+"";e(new Wd(s.statusText||`HTTP ${n} error`,n,i))});else{const i=n+"";e(new Wd(s.statusText||`HTTP ${n} error`,n,i))}}else e(new mT(ex(t),t))},bT=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(xT(n)?(s.headers=Me({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,Me(Me({},s),r)):s};async function yT(t,e,r,n,s,i){return new Promise((a,o)=>{t(r,bT(e,n,s,i)).then(l=>{if(!l.ok)throw l;if(n!=null&&n.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>a(l)).catch(l=>vT(l,o,n))})}async function ln(t,e,r,n,s){return yT(t,"POST",e,n,s,r)}var wT=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Me(Me({},Kp),e),this.fetch=Yp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await ln(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}}async getIndex(t,e){var r=this;try{return{data:await ln(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}),error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(on(n))return{data:null,error:n};throw n}}async listIndexes(t){var e=this;try{return{data:await ln(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}}async deleteIndex(t,e){var r=this;try{return{data:await ln(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{},error:null}}catch(n){if(r.shouldThrowOnError)throw n;if(on(n))return{data:null,error:n};throw n}}},_T=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Me(Me({},Kp),e),this.fetch=Yp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await ln(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}}async getVectors(t){var e=this;try{return{data:await ln(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await ln(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}}async queryVectors(t){var e=this;try{return{data:await ln(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await ln(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}}},ST=class{constructor(t,e={},r){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Me(Me({},Kp),e),this.fetch=Yp(r)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await ln(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}}async getBucket(t){var e=this;try{return{data:await ln(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}}async listBuckets(t={}){var e=this;try{return{data:await ln(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}}async deleteBucket(t){var e=this;try{return{data:await ln(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}}},kT=class extends ST{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new ET(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},ET=class extends wT{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,Me(Me({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,Me(Me({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new TT(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},TT=class extends _T{constructor(t,e,r,n,s){super(t,e,s),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,Me(Me({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,Me(Me({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,Me(Me({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,Me(Me({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,Me(Me({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},CT=class extends pT{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new fT(this.url,this.headers,t,this.fetch)}get vectors(){return new kT(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new gT(this.url+"/iceberg",this.headers,this.fetch)}};const Jy="2.89.0",Na=30*1e3,S0=3,Vd=S0*Na,AT="http://localhost:9999",NT="supabase.auth.token",jT={"X-Client-Info":`gotrue-js/${Jy}`},k0="X-Supabase-Api-Version",Qy={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},OT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,RT=10*60*1e3;class Hl extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class DT extends Hl{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function PT(t){return Re(t)&&t.name==="AuthApiError"}class Fi extends Hl{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Is extends Hl{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Zr extends Is{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function IT(t){return Re(t)&&t.name==="AuthSessionMissingError"}class va extends Is{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $c extends Is{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Wc extends Is{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function MT(t){return Re(t)&&t.name==="AuthImplicitGrantRedirectError"}class tx extends Is{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class FT extends Is{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class E0 extends Is{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Hd(t){return Re(t)&&t.name==="AuthRetryableFetchError"}class rx extends Is{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class T0 extends Is{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ah="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),nx=` 	
\r=`.split(""),LT=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<nx.length;e+=1)t[nx[e].charCodeAt(0)]=-2;for(let e=0;e<ah.length;e+=1)t[ah[e].charCodeAt(0)]=e;return t})();function sx(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(ah[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(ah[n]),e.queuedBits-=6}}function Zy(t,e,r){const n=LT[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function ix(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{zT(a,n,r)};for(let a=0;a<t.length;a+=1)Zy(t.charCodeAt(a),s,i);return e.join("")}function BT(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function UT(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}BT(n,e)}}function zT(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Qa(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Zy(t.charCodeAt(s),r,n);return new Uint8Array(e)}function $T(t){const e=[];return UT(t,r=>e.push(r)),new Uint8Array(e)}function $i(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>sx(s,r,n)),sx(null,r,n),e.join("")}function WT(t){return Math.round(Date.now()/1e3)+t}function VT(){return Symbol("auth-callback")}const lr=()=>typeof window<"u"&&typeof document<"u",Ei={tested:!1,writable:!1},ew=()=>{if(!lr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ei.tested)return Ei.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Ei.tested=!0,Ei.writable=!0}catch{Ei.tested=!0,Ei.writable=!1}return Ei.writable};function HT(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const tw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),GT=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ja=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Ti=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},or=async(t,e)=>{await t.removeItem(e)};class Qh{constructor(){this.promise=new Qh.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Qh.promiseConstructor=Promise;function Gd(t){const e=t.split(".");if(e.length!==3)throw new T0("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!OT.test(e[n]))throw new T0("JWT not in base64url format");return{header:JSON.parse(ix(e[0])),payload:JSON.parse(ix(e[1])),signature:Qa(e[2]),raw:{header:e[0],payload:e[1]}}}async function KT(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function YT(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function XT(t){return("0"+t.toString(16)).substr(-2)}function qT(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,XT).join("")}async function JT(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function QT(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await JT(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ba(t,e,r=!1){const n=qT();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await ja(t,`${e}-code-verifier`,s);const i=await QT(n);return[i,n===i?"plain":"s256"]}const ZT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function e4(t){const e=t.headers.get(k0);if(!e||!e.match(ZT))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function t4(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function r4(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const n4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ya(t){if(!n4.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Kd(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function s4(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function ax(t){return JSON.parse(JSON.stringify(t))}const Di=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),i4=[502,503,504];async function ox(t){var e;if(!GT(t))throw new E0(Di(t),0);if(i4.includes(t.status))throw new E0(Di(t),t.status);let r;try{r=await t.json()}catch(i){throw new Fi(Di(i),i)}let n;const s=e4(t);if(s&&s.getTime()>=Qy["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new rx(Di(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Zr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new rx(Di(r),t.status,r.weak_password.reasons);throw new DT(Di(r),t.status||500,n)}const a4=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Ie(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[k0]||(i[k0]=Qy["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await o4(t,e,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function o4(t,e,r,n,s,i){const a=a4(e,n,s,i);let o;try{o=await t(r,Object.assign({},a))}catch(l){throw console.error(l),new E0(Di(l),0)}if(o.ok||await ox(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await ox(l)}}function Rn(t){var e;let r=null;u4(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=WT(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function lx(t){const e=Rn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Hs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function l4(t){return{data:t,error:null}}function c4(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,a=qh(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function cx(t){return t}function u4(t){return t.access_token&&t.refresh_token&&t.expires_in}const Yd=["global","local","others"];class h4{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=tw(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Yd[0]){if(Yd.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Yd.join(", ")}`);try{return await Ie(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await Ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Hs})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=qh(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:c4,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Re(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await Ie(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Hs})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},h=await Ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:cx});if(h.error)throw h.error;const d=await h.json(),f=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(m.split(";")[1].split("=")[1]);c[`${x}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Re(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){ya(e);try{return await Ie(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Hs})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){ya(e);try{return await Ie(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Hs})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){ya(e);try{return await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Hs})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){ya(e.userId);try{const{data:r,error:n}=await Ie(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _deleteFactor(e){ya(e.userId),ya(e.id);try{return{data:await Ie(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},h=await Ie(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:cx});if(h.error)throw h.error;const d=await h.json(),f=(a=h.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=h.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const g=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(m.split(";")[1].split("=")[1]);c[`${x}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Re(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await Ie(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await Ie(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await Ie(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Ie(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await Ie(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Re(r))return{data:null,error:r};throw r}}}function ux(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const wa={debug:!!(globalThis&&ew()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class d4 extends rw{}async function f4(t,e,r){wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),wa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw wa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new d4(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(wa.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function p4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function nw(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function g4(t){return parseInt(t,16)}function m4(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function x4(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:a,notBefore:o,requestId:l,resources:c,scheme:h,uri:d,version:f}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=nw(t.address),m=h?`${h}://${n}`:n,g=t.statement?`${t.statement}
`:"",x=`${m} wants you to sign in with your Ethereum account:
${p}

${g}`;let v=`URI: ${d}
Version: ${f}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),o&&(v+=`
Not Before: ${o.toISOString()}`),l&&(v+=`
Request ID: ${l}`),c){let b=`
Resources:`;for(const y of c){if(!y||typeof y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${y}`);b+=`
- ${y}`}v+=b}return`${x}
${v}`}class zt extends Error{constructor({message:e,code:r,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class oh extends zt{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function v4({error:t,options:e}){var r,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new zt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new zt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new zt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new zt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new zt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new zt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new zt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new zt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(sw(a)){if(i.rp.id!==a)return new zt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new zt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new zt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new zt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new zt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function b4({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new zt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new zt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(sw(n)){if(r.rpId!==n)return new zt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new zt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new zt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new zt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class y4{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const w4=new y4;function _4(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=qh(t,["challenge","user","excludeCredentials"]),i=Qa(e).buffer,a=Object.assign(Object.assign({},r),{id:Qa(r.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:i,user:a});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const c=n[l];o.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Qa(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return o}function S4(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=qh(t,["challenge","allowCredentials"]),s=Qa(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const o=r[a];i.allowCredentials[a]=Object.assign(Object.assign({},o),{id:Qa(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function k4(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:$i(new Uint8Array(t.response.attestationObject)),clientDataJSON:$i(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function E4(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:$i(new Uint8Array(s.authenticatorData)),clientDataJSON:$i(new Uint8Array(s.clientDataJSON)),signature:$i(new Uint8Array(s.signature)),userHandle:s.userHandle?$i(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function sw(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function hx(){var t,e;return!!(lr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function T4(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new oh("Browser returned unexpected credential type",e)}:{data:null,error:new oh("Empty credential response",e)}}catch(e){return{data:null,error:v4({error:e,options:t})}}}async function C4(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new oh("Browser returned unexpected credential type",e)}:{data:null,error:new oh("Empty credential response",e)}}catch(e){return{data:null,error:b4({error:e,options:t})}}}const A4={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},N4={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function lh(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const i in s){const a=s[i];if(a!==void 0)if(Array.isArray(a))n[i]=a;else if(r(a))n[i]=a;else if(e(a)){const o=n[i];e(o)?n[i]=lh(o,a):n[i]=lh(a)}else n[i]=a}return n}function j4(t,e){return lh(A4,t,e||{})}function O4(t,e){return lh(N4,t,e||{})}class R4{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},i){try{const{data:a,error:o}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:o};const l=s??w4.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=j4(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:h,error:d}=await T4({publicKey:c,signal:l});return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}case"request":{const c=O4(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:h,error:d}=await C4(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:l}));return h?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:h}},error:null}:{data:null,error:d}}}}catch(a){return Re(a)?{data:null,error:a}:{data:null,error:new Fi("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Hl("rpId is required for WebAuthn authentication")};try{if(!hx())return{data:null,error:new Fi("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!a)return{data:null,error:o};const{webauthn:l}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(a){return Re(a)?{data:null,error:a}:{data:null,error:new Fi("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Hl("rpId is required for WebAuthn registration")};try{if(!hx())return{data:null,error:new Fi("Browser does not support WebAuthn",null)};const{data:a,error:o}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(h=>{var d;return(d=h.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:o};const{data:l,error:c}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:a.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(a){return Re(a)?{data:null,error:a}:{data:null,error:new Fi("Unexpected error in register",a)}}}}p4();const D4={url:AT,storageKey:NT,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function dx(t,e,r){return await r()}const _a={};class Gl{get jwks(){var e,r;return(r=(e=_a[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){_a[this.storageKey]=Object.assign(Object.assign({},_a[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=_a[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){_a[this.storageKey]=Object.assign(Object.assign({},_a[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},D4),e);if(this.storageKey=i.storageKey,this.instanceID=(r=Gl.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Gl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&lr()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new h4({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=tw(i.fetch),this.lock=i.lock||dx,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&lr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=f4:this.lock=dx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new R4(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:ew()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ux(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=ux(this.memoryStorage)),lr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Jy}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(lr()&&(r=HT(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),lr()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),MT(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Re(r)?this._returnResult({error:r}):this._returnResult({error:new Fi("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Rn}),{data:a,error:o}=i;if(o||!a)return this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(Re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:h,password:d,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await ba(this.storage,this.storageKey)),i=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:h,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:Rn})}else if("phone"in e){const{phone:h,password:d,options:f}=e;i=await Ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Rn})}else throw new $c("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return await or(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:o});const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await or(this.storage,`${this.storageKey}-code-verifier`),Re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:a,options:o}=e;r=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:lx})}else if("phone"in e){const{phone:i,password:a,options:o}=e;r=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:lx})}else throw new $c("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new va;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,i,a,o,l,c,h,d,f;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:g,wallet:x,statement:v,options:b}=e;let y;if(lr())if(typeof x=="object")y=x;else{const T=window;if("ethereum"in T&&typeof T.ethereum=="object"&&"request"in T.ethereum&&typeof T.ethereum.request=="function")y=T.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=x}const w=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href),S=await y.request({method:"eth_requestAccounts"}).then(T=>T).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=nw(S[0]);let k=(n=b==null?void 0:b.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!k){const T=await y.request({method:"eth_chainId"});k=g4(T)}const A={domain:w.host,address:N,statement:v,uri:w.href,version:"1",chainId:k,nonce:(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(o=b==null?void 0:b.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(h=b==null?void 0:b.signInWithEthereum)===null||h===void 0?void 0:h.resources};p=x4(A),m=await y.request({method:"personal_sign",params:[m4(p),N]})}try{const{data:g,error:x}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Rn});if(x)throw x;if(!g||!g.session||!g.user){const v=new va;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:x})}catch(g){if(Re(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var r,n,s,i,a,o,l,c,h,d,f,p;let m,g;if("message"in e)m=e.message,g=e.signature;else{const{chain:x,wallet:v,statement:b,options:y}=e;let w;if(lr())if(typeof v=="object")w=v;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))w=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const S=new URL((r=y==null?void 0:y.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const N=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),b?{statement:b}:null));let k;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")k=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)k=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)m=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${S.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(n=y==null?void 0:y.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((d=(h=y==null?void 0:y.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||d===void 0)&&d.length?["Resources",...y.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const N=await w.signMessage(new TextEncoder().encode(m),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=N}}try{const{data:x,error:v}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:$i(g)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Rn});if(v)throw v;if(!x||!x.session||!x.user){const b=new va;return this._returnResult({data:{user:null,session:null},error:b})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:v})}catch(x){if(Re(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const r=await Ti(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new FT;const{data:i,error:a}=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Rn});if(await or(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!i||!i.session||!i.user){const o=new va;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(await or(this.storage,`${this.storageKey}-code-verifier`),Re(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=e,o=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Rn}),{data:l,error:c}=o;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const h=new va;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,s,i,a;try{if("email"in e){const{email:o,options:l}=e;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await ba(this.storage,this.storageKey));const{error:d}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:h}=await Ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new $c("You must provide either an email or phone number.")}catch(o){if(await or(this.storage,`${this.storageKey}-code-verifier`),Re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await Ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Rn});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(Re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,n,s,i,a;try{let o=null,l=null;this.flowType==="pkce"&&([o,l]=await ba(this.storage,this.storageKey));const c=await Ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:l}),headers:this.headers,xform:l4});return!((i=c.data)===null||i===void 0)&&i.url&&lr()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(o){if(await or(this.storage,`${this.storageKey}-code-verifier`),Re(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Zr;const{error:s}=await Ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(Re(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:a}=await Ie(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:a,error:o}=await Ie(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o})}throw new $c("You must provide either an email or phone number and a type")}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Ti(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Vd:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await Ti(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Kd()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=s4(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Hs}):await this._useSession(async r=>{var n,s,i;const{data:a,error:o}=r;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Zr}:await Ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Hs})})}catch(r){if(Re(r))return IT(r)&&(await this._removeSession(),await or(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Zr;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await ba(this.storage,this.storageKey));const{data:c,error:h}=await Ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Hs});if(h)throw h;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(await or(this.storage,`${this.storageKey}-code-verifier`),Re(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Zr;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=Gd(e.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(Re(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:o}=r;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Zr;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!lr())throw new Wc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Wc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new tx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new tx("No code detected.");const{data:b,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=e;if(!i||!o||!a||!c)throw new Wc("No session defined in URL");const h=Math.round(Date.now()/1e3),d=parseInt(o);let f=h+d;l&&(f=parseInt(l));const p=f-h;p*1e3<=Na&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const m=f-d;h-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,h):h-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,h);const{data:g,error:x}=await this._getUser(i);if(x)throw x;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:a,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:e.type},error:null})}catch(n){if(Re(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Ti(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(PT(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return e!=="others"&&(await this._removeSession(),await or(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=VT(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ba(this.storage,this.storageKey,!0));try{return await Ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await or(this.storage,`${this.storageKey}-code-verifier`),Re(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,o,l,c,h;const{data:d,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ie(this.fetch,"GET",p,{headers:this.headers,jwt:(h=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(s)throw s;return lr()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Re(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:a,provider:o,token:l,access_token:c,nonce:h}=e,d=await Ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:l,access_token:c,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Rn}),{data:f,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new va}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(s){if(await or(this.storage,`${this.storageKey}-code-verifier`),Re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await Ie(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await YT(async s=>(s>0&&await KT(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Rn})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Hd(i)&&Date.now()+a-n<Na})}catch(n){if(this._debug(r,"error",n),Re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),lr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Ti(this.storage,this.storageKey);if(s&&this.userStorage){let a=await Ti(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await ja(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Kd()}else if(s&&!s.user&&!s.user){const a=await Ti(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await or(this.storage,this.storageKey+"-user"),await ja(this.storage,this.storageKey,s)):s.user=Kd()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Vd;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Vd}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Hd(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:o}=await this._getUser(s.access_token);!o&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Zr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Qh;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Zr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),Re(i)){const a={data:null,error:i};return Hd(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await or(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await ja(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=ax(s);await ja(this.storage,this.storageKey,i)}else{const s=ax(r);await ja(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await or(this.storage,this.storageKey),await or(this.storage,this.storageKey+"-code-verifier"),await or(this.storage,this.storageKey+"-user"),this.userStorage&&await or(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&lr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Na);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Na);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Na}ms, refresh threshold is ${S0} ticks`),s<=S0&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof rw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await ba(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await Ie(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await Ie(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?k4(e.webauthn.credential_response):E4(e.webauthn.credential_response)})}:{code:e.code}),{data:o,error:l}=await Ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:l}))})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const a=await Ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:o}=a;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:_4(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:S4(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Gd(n.access_token);let a=null;i.aal&&(a=i.aal);let o=a;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const c=i.amr||[];return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await Ie(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Zr})})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Zr});const a=await Ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&lr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Zr});const a=await Ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return a.data&&a.data.redirect_url&&lr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await Ie(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Zr})})}catch(e){if(Re(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await Ie(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Zr})})}catch(r){if(Re(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+RT>s)return n;const{data:i,error:a}=await Ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(o=>o.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});n=p.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:l}}=Gd(n);r!=null&&r.allowExpired||t4(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:a},error:null}}const h=r4(s.alg),d=await crypto.subtle.importKey("jwk",c,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,a,$T(`${o}.${l}`)))throw new T0("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(Re(n))return this._returnResult({data:null,error:n});throw n}}}Gl.nextInstanceID={};const P4=Gl,I4="2.89.0";let Go="";typeof Deno<"u"?Go="deno":typeof document<"u"?Go="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Go="react-native":Go="node";const M4={"X-Client-Info":`supabase-js-${Go}/${I4}`},F4={headers:M4},L4={schema:"public"},B4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},U4={};function Kl(t){"@babel/helpers - typeof";return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kl(t)}function z4(t,e){if(Kl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Kl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $4(t){var e=z4(t,"string");return Kl(e)=="symbol"?e:e+""}function W4(t,e,r){return(e=$4(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function Dt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fx(Object(r),!0).forEach(function(n){W4(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fx(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const V4=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),H4=()=>Headers,G4=(t,e,r)=>{const n=V4(r),s=H4();return async(i,a)=>{var o;const l=(o=await e())!==null&&o!==void 0?o:t;let c=new s(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Dt(Dt({},a),{},{headers:c}))}};function K4(t){return t.endsWith("/")?t:t+"/"}function Y4(t,e){var r,n;const{db:s,auth:i,realtime:a,global:o}=t,{db:l,auth:c,realtime:h,global:d}=e,f={db:Dt(Dt({},l),s),auth:Dt(Dt({},c),i),realtime:Dt(Dt({},h),a),storage:{},global:Dt(Dt(Dt({},d),o),{},{headers:Dt(Dt({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function X4(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(K4(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var q4=class extends P4{constructor(t){super(t)}},J4=class{constructor(t,e,r){var n,s;this.supabaseUrl=t,this.supabaseKey=e;const i=X4(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const a=`sb-${i.hostname.split(".")[0]}-auth-token`,o={db:L4,realtime:U4,auth:Dt(Dt({},B4),{},{storageKey:a}),global:F4},l=Y4(r??{},o);if(this.storageKey=(n=l.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(h,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=G4(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Dt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new jE(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new CT(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new EE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:a,lock:o,debug:l,throwOnError:c},h,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new q4({url:this.authUrl.href,headers:Dt(Dt({},f),h),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,flowType:a,lock:o,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new KE(this.realtimeUrl.href,Dt(Dt({},t),{},{params:Dt(Dt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Q4=(t,e,r)=>new J4(t,e,r);function Z4(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Z4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const eC="https://relhbdlvjgpnovwuhhmh.supabase.co",tC="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJlbGhiZGx2amdwbm92d3VoaG1oIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU3Mjg1NDUsImV4cCI6MjA4MTMwNDU0NX0.KsyzECDLFlG9jRdBXoY4gbneIImRwhTCZbYkWNoe6WQ",dl=Q4(eC,tC,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),rC=Object.freeze(Object.defineProperty({__proto__:null,supabase:dl},Symbol.toStringTag,{value:"Module"})),nC="https://priceye.onrender.com";async function Fe(t,e={}){var o;const r=e.token,n={"Content-Type":((o=e.headers)==null?void 0:o["Content-Type"])??"application/json",...e.headers};r&&(n.Authorization=`Bearer ${r}`);const s={...e,headers:n};delete s.token;const i=await fetch(`${nC}${t}`,s),a=i.headers.get("content-type");if(!i.ok){if((i.status===401||i.status===403)&&(localStorage.removeItem("authToken"),typeof window<"u"))try{window.dispatchEvent(new CustomEvent("tokenExpired"))}catch(c){console.error("Erreur lors de l'envoi de l'vnement tokenExpired:",c)}let l={error:`Erreur ${i.status} sur l'endpoint ${t}`};if(a&&a.includes("application/json"))try{l=await i.json()}catch{}else{const c=await i.text();c&&(l.error=c)}throw console.error(`Erreur API (${i.status}):`,l.error),new Error(l.error)}if(i.status===204||i.status===200&&(!(a!=null&&a.includes("application/json"))||i.headers.get("content-length")==="0"))return{message:"Opration russie."};if(a&&(a.includes("text/html")||a.includes("text/plain")))return{message:await i.text()};try{return await i.json()}catch(l){throw console.error("Erreur de parsing JSON pour une rponse OK:",l,"Rponse:",await i.text()),new Error("Rponse du serveur reue mais invalide (pas un JSON).")}}async function sC(t,e){try{const{data:r,error:n}=await dl.auth.signInWithPassword({email:t,password:e});if(n)throw console.error("Erreur de connexion Supabase:",n.message),n.message.includes("Invalid login credentials")||n.message.includes("Email not confirmed")?new Error("Email ou mot de passe invalide."):new Error(n.message);if(!r.session)throw new Error("Aucune session cre.");return{idToken:r.session.access_token,message:"Connexion russie"}}catch(r){throw r}}function iC(t){return Fe("/api/auth/register",{method:"POST",body:JSON.stringify(t)})}async function aC(t,e){try{const{data:{user:r}}=await dl.auth.getUser();if(!r)throw new Error("Utilisateur non connect ou session invalide. Veuillez vous reconnecter.");const{error:n}=await dl.auth.signInWithPassword({email:r.email,password:t});if(n)throw n.message.includes("Invalid login credentials")?new Error("L'ancien mot de passe est incorrect."):new Error(n.message);const{error:s}=await dl.auth.updateUser({password:e});if(s)throw s.message.includes("Password should be at least")?new Error("Le nouveau mot de passe est trop faible (6 caractres min)."):new Error(s.message)}catch(r){throw console.error("Erreur lors du changement de mot de passe:",r),r}}function C0(t){return Fe("/api/users/profile",{token:t})}function oC(t,e){return Fe("/api/users/profile",{method:"PUT",token:e,body:JSON.stringify(t)})}function lC(t){return Fe("/api/integrations",{token:t})}function cC(t,e,r){return Fe("/api/integrations/test-connection",{method:"POST",token:r,body:JSON.stringify({type:t,credentials:e})})}function uC(t,e,r){return Fe("/api/integrations/connect",{method:"POST",token:r,body:JSON.stringify({type:t,credentials:e})})}function hC(t){return Fe("/api/integrations/sync-properties",{method:"POST",token:t})}function dC(t,e){return Fe(`/api/integrations/${t}`,{method:"DELETE",token:e})}function fC(t,e,r){return Fe("/api/integrations/import-properties",{method:"POST",token:r,body:JSON.stringify({propertiesToImport:t,pmsType:e})})}function ea(t){return Fe("/api/properties",{token:t})}function pC(t,e){return Fe("/api/properties",{method:"POST",token:e,body:JSON.stringify(t)})}function gC(t,e,r){return Fe(`/api/properties/${t}`,{method:"PUT",token:r,body:JSON.stringify(e)})}function mC(t,e){return Fe(`/api/properties/${t}`,{method:"DELETE",token:e})}function xC(t,e){return Fe(`/api/properties/${t}/sync`,{method:"POST",token:e})}function vC(t,e,r){return Fe(`/api/properties/${t}/strategy`,{method:"PUT",token:r,body:JSON.stringify(e)})}function bC(t,e,r){return Fe(`/api/properties/${t}/rules`,{method:"PUT",token:r,body:JSON.stringify(e)})}function yC(t,e,r){return Fe(`/api/properties/${t}/status`,{method:"PUT",token:r,body:JSON.stringify({status:e})})}function fl(t){return Fe("/api/groups",{token:t})}function Xp(t,e){return Fe("/api/groups",{method:"POST",token:e,body:JSON.stringify(t)})}function Xd(t,e,r){return Fe(`/api/groups/${t}`,{method:"PUT",token:r,body:JSON.stringify(e)})}function wC(t,e){return Fe(`/api/groups/${t}`,{method:"DELETE",token:e})}function qp(t,e,r){return Fe(`/api/groups/${t}/properties`,{method:"PUT",token:r,body:JSON.stringify({propertyIds:e})})}function _C(t,e,r){return Fe(`/api/groups/${t}/properties`,{method:"DELETE",token:r,body:JSON.stringify({propertyIds:e})})}function SC(t,e,r){return Fe(`/api/groups/${t}/strategy`,{method:"PUT",token:r,body:JSON.stringify(e)})}function kC(t,e,r){return Fe(`/api/groups/${t}/rules`,{method:"PUT",token:r,body:JSON.stringify(e)})}function EC(t,e){return Fe(`/api/properties/${t}/pricing-strategy`,{method:"POST",token:e})}function TC(t,e,r){return Fe(`/api/properties/${t}/bookings`,{method:"POST",token:r,body:JSON.stringify(e)})}function CC(t,e,r,n){const s=r+1;return Fe(`/api/properties/${t}/bookings?year=${e}&month=${s}`,{token:n})}function AC(t,e,r){const n=new URLSearchParams({startDate:e,endDate:r});return Fe(`/api/bookings?${n.toString()}`,{token:t})}function NC(t,e){return Fe("/api/teams/invites",{method:"POST",token:e,body:JSON.stringify(t)})}function qd(t){return Fe("/api/teams/members",{token:t})}function jC(t,e,r){return Fe(`/api/teams/members/${t}/role`,{method:"PUT",token:r,body:JSON.stringify({role:e})})}function OC(t,e){return Fe(`/api/teams/members/${t}`,{method:"DELETE",token:e})}function A0(t,e,r){const n=new URLSearchParams({startDate:e,endDate:r});return Fe(`/api/reports/kpis?${n.toString()}`,{token:t})}function RC(t,e,r){const n=new URLSearchParams({startDate:e,endDate:r});return Fe(`/api/reports/revenue-over-time?${n.toString()}`,{token:t})}function DC(t,e,r){const n=new URLSearchParams({startDate:e,endDate:r});return Fe(`/api/reports/performance-over-time?${n.toString()}`,{token:t})}function PC(t,e){const r=new URLSearchParams({timezone:e});return Fe(`/api/reports/market-demand-snapshot?${r.toString()}`,{token:t})}function IC(t,e,r){const n=new URLSearchParams({startDate:e,endDate:r});return Fe(`/api/reports/positioning?${n.toString()}`,{token:t})}function MC(t,e,r){return Fe("/api/reports/analyze-date",{method:"POST",token:r,body:JSON.stringify({propertyId:t,date:e})})}function iw(t){return Fe("/api/recommendations/group-candidates",{token:t})}function FC(t,e="fr",r=!1){const n=new URLSearchParams({language:e});return r&&n.append("forceRefresh","true"),Fe(`/api/news?${n.toString()}`,{token:t})}function aw(t,e,r="fr"){return Fe(`/api/properties/${t}/news?language=${r}`,{token:e})}function LC(t,e){return Fe(`/api/users/auto-pricing/${t}`,{token:e})}function BC(t,e,r,n){return Fe(`/api/users/auto-pricing/${t}`,{method:"PUT",token:n,body:JSON.stringify({enabled:e,timezone:r})})}function px(t,e,r,n){const s=new URLSearchParams;return r&&s.append("startDate",r),n&&s.append("endDate",n),Fe(`/api/properties/${t}/price-overrides?${s.toString()}`,{token:e})}function gx(t,e,r){return Fe(`/api/properties/${t}/price-overrides`,{method:"PUT",token:r,body:JSON.stringify({overrides:e})})}async function UC(t){return Fe("/api/checkout/create-session",{method:"POST",token:t})}async function zC(t){return Fe("/api/subscriptions/end-trial-and-bill",{method:"POST",token:t})}async function ow(t){return Fe("/api/billing/portal-session",{method:"POST",token:t})}function $C({onLoginSuccess:t,onNavigate:e}){const[r,n]=C.useState(""),[s,i]=C.useState(""),[a,o]=C.useState(""),[l,c]=C.useState(!1),h=async d=>{d.preventDefault(),o(""),c(!0);try{const f=await sC(r,s);f.idToken&&t(f.idToken)}catch(f){o(f.message)}finally{c(!1)}};return u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg",children:[u.jsx("h2",{className:"text-3xl font-bold text-center text-white",children:"Connexion"}),u.jsxs("form",{className:"space-y-6",onSubmit:h,children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-gray-300",children:"Adresse e-mail"}),u.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:r,onChange:d=>n(d.target.value),className:"w-full px-3 py-2 mt-2 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-300",children:"Mot de passe"}),u.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:d=>i(d.target.value),className:"w-full px-3 py-2 mt-2 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a&&u.jsx("p",{className:"text-sm text-center text-red-400 bg-red-900/50 p-3 rounded-md",children:a}),u.jsx("div",{children:u.jsx("button",{type:"submit",disabled:l,className:"w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-blue-500 disabled:bg-gray-500",children:l?"Connexion...":"Se connecter"})})]}),u.jsxs("p",{className:"text-sm text-center text-gray-400",children:["Pas encore de compte ?"," ",u.jsx("button",{onClick:()=>e("register"),className:"font-semibold text-blue-400 hover:underline",children:"S'inscrire"})]})]})})}function WC({onNavigate:t}){const[e,r]=C.useState(""),[n,s]=C.useState(""),[i,a]=C.useState(""),[o,l]=C.useState(""),[c,h]=C.useState(""),[d,f]=C.useState(!1),p=async m=>{m.preventDefault(),l(""),h(""),f(!0);try{const g=await iC({name:e,email:n,password:i});h("Compte cr avec succs ! Vous pouvez maintenant vous connecter.")}catch(g){l(g.message)}finally{f(!1)}};return u.jsx("div",{className:"flex items-center justify-center min-h-screen",children:u.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg",children:[u.jsx("h2",{className:"text-3xl font-bold text-center text-white",children:"Crer un compte"}),u.jsxs("form",{className:"space-y-6",onSubmit:p,children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"name",className:"text-sm font-medium text-gray-300",children:"Nom complet"}),u.jsx("input",{id:"name",type:"text",required:!0,value:e,onChange:m=>r(m.target.value),className:"w-full px-3 py-2 mt-2 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email-register",className:"text-sm font-medium text-gray-300",children:"Adresse e-mail"}),u.jsx("input",{id:"email-register",type:"email",required:!0,value:n,onChange:m=>s(m.target.value),className:"w-full px-3 py-2 mt-2 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password-register",className:"text-sm font-medium text-gray-300",children:"Mot de passe"}),u.jsx("input",{id:"password-register",type:"password",required:!0,value:i,onChange:m=>a(m.target.value),className:"w-full px-3 py-2 mt-2 text-white bg-gray-700 border border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o&&u.jsx("p",{className:"text-sm text-center text-red-400 bg-red-900/50 p-3 rounded-md",children:o}),c&&u.jsx("p",{className:"text-sm text-center text-green-400 bg-green-900/50 p-3 rounded-md",children:c}),u.jsx("div",{children:u.jsx("button",{type:"submit",disabled:d,className:"w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-blue-500 disabled:bg-gray-500",children:d?"Cration...":"S'inscrire"})})]}),u.jsxs("p",{className:"text-sm text-center text-gray-400",children:["Dj un compte ?"," ",u.jsx("button",{onClick:()=>t("login"),className:"font-semibold text-blue-400 hover:underline",children:"Se connecter"})]})]})})}function yo({children:t,className:e=""}){const r=C.useRef(null),n=C.useRef(null),[s,i]=C.useState(0),[a,o]=C.useState(0),[l,c]=C.useState(0),[h,d]=C.useState(0);C.useEffect(()=>{const p=r.current,m=n.current;if(!p)return;const g=()=>{requestAnimationFrame(()=>{if(!p)return;const v=p.scrollTop,b=p.scrollHeight,y=p.clientHeight,w=(m==null?void 0:m.offsetHeight)||0;i(v),o(b),c(y),w>0&&d(w)})};g(),p.addEventListener("scroll",g,{passive:!0});const x=new ResizeObserver(()=>{g()});return x.observe(p),m&&x.observe(m),()=>{p.removeEventListener("scroll",g),x.disconnect()}},[t]);const f=()=>{if(a<=l||l===0)return{display:"none"};const p=h>0?h:l,m=Math.max(20,l/a*p),g=a-l,x=g>0?s/g:0,v=Math.max(0,x*(p-m));return{height:`${m}px`,top:`${v}px`,display:"block"}};return u.jsxs("div",{className:`flex flex-row gap-2 items-stretch justify-start relative ${e}`,style:{height:"100%",minHeight:0},children:[u.jsx("div",{ref:r,className:"flex-1 overflow-x-hidden hide-scrollbar",style:{overflowY:"auto",height:"100%"},children:t}),u.jsx("div",{ref:n,className:"bg-global-bg-small-box rounded-[10px] shrink-0 w-2 relative overflow-hidden flex-shrink-0 self-stretch",style:{height:"100%",minHeight:"100px"},children:a>l&&l>0&&u.jsx("div",{className:"bg-global-blanc rounded-[10px] w-1.5 absolute left-px overflow-hidden",style:f()})})]})}const lw=C.createContext(),Vt=()=>{const t=C.useContext(lw);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},VC=({children:t,userLanguage:e="fr"})=>{const[r,n]=C.useState(e),[s,i]=C.useState({});C.useEffect(()=>{n(e)},[e]),C.useEffect(()=>{const o=l=>{n(l.detail.language)};return window.addEventListener("languageChanged",o),()=>{window.removeEventListener("languageChanged",o)}},[]),C.useEffect(()=>{(async()=>{try{const c=await(await fetch(`/locales/${r}/translation.json`)).json();i(c)}catch(l){if(console.error(`Erreur lors du chargement des traductions pour ${r}:`,l),r!=="fr")try{const h=await(await fetch("/locales/fr/translation.json")).json();i(h)}catch(c){console.error("Erreur lors du chargement des traductions de secours:",c)}}})()},[r]);const a=(o,l={})=>{const c=o.split(".");let h=s;for(const d of c)if(h&&typeof h=="object"&&d in h)h=h[d];else return o;return typeof h=="string"&&Object.keys(l).length>0?h.replace(/\{\{(\w+)\}\}/g,(d,f)=>l[f]!==void 0?l[f]:d):typeof h=="string"?h:o};return u.jsx(lw.Provider,{value:{language:r,setLanguage:n,t:a},children:t})},HC=["wifi","piscine","parking gratuit","climatisation","jacuzzi","salle de sport","animaux accepts","lave-linge","cuisine quipe","tlvision","chemine","espace de travail","vue sur mer"];function GC({token:t,onClose:e,onSave:r,property:n}){const{t:s}=Vt(),[i,a]=C.useState({name:"",address:"",location:"",description:"",surface:"",capacity:"",daily_revenue:"",property_type:"villa",min_stay:"",amenities:[]}),[o,l]=C.useState(""),[c,h]=C.useState(!1),[d,f]=C.useState(!1),[p,m]=C.useState(""),g=!!n;C.useEffect(()=>{a(g?{name:n.name||"",address:n.address||"",location:n.location||"",description:n.description||"",surface:n.surface||"",capacity:n.capacity||"",daily_revenue:n.daily_revenue||"",property_type:n.property_type||n.type||"villa",min_stay:n.min_stay||"",amenities:n.amenities||[]}:{name:"",address:"",location:"",description:"",surface:"",capacity:"",daily_revenue:"100",property_type:"villa",min_stay:"2",amenities:[]}),l(""),m("")},[n,g]);const x=w=>{a({...i,[w.target.name]:w.target.value})},v=w=>{const{value:S,checked:N}=w.target;a(k=>{const A=k.amenities||[];if(N){if(!A.includes(S))return{...k,amenities:[...A,S]}}else return{...k,amenities:A.filter(T=>T!==S)};return k})},b=async w=>{w.preventDefault(),l(""),m(""),h(!0);try{const S={name:i.name||i.address,address:i.address,location:i.location,description:i.description||"",surface:parseInt(i.surface,10)||0,capacity:parseInt(i.capacity,10)||0,daily_revenue:parseInt(i.daily_revenue,10)||100,property_type:i.property_type,min_stay:parseInt(i.min_stay,10)||1,amenities:i.amenities};g?await gC(n.id,S,t):await pC(S,t),r(),e()}catch(S){const N=S.message||"";if(N.includes("LIMIT_EXCEEDED"))if(window.showLimitExceededModal)try{const k=JSON.parse(N.split("LIMIT_EXCEEDED")[1]||"{}");window.showLimitExceededModal({currentCount:k.currentCount||10,maxAllowed:k.maxAllowed||10})}catch{window.showLimitExceededModal({currentCount:10,maxAllowed:10})}else l("Vous avez atteint la limite de 10 proprits pendant votre essai gratuit. Veuillez terminer votre essai pour continuer.");else l(N||"Une erreur est survenue lors de l'ajout de la proprit.")}finally{h(!1)}},y=async()=>{if(n){f(!0),m(""),l("");try{const w=await xC(n.id,t);m(w.message||s("propertyModal.syncSuccess")),r()}catch(w){l(w.message)}finally{f(!1),setTimeout(()=>m(""),3e3)}}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-global-bg-box border border-global-stroke-box rounded-[14px] shadow-xl w-full max-w-4xl p-6 max-h-[90vh] flex flex-col",children:[u.jsx("h3",{className:"text-xl font-bold mb-6 text-global-blanc shrink-0",children:s(g?"propertyModal.editTitle":"propertyModal.title")}),g&&u.jsxs("div",{className:"border-b border-global-stroke-box pb-4 mb-4 shrink-0",children:[u.jsx("button",{type:"button",onClick:y,disabled:d,className:"w-full flex justify-center items-center gap-2 px-4 py-2 font-semibold text-white bg-teal-600 rounded-[8px] hover:bg-teal-700 disabled:bg-gray-500 transition-colors",children:d?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"loader-small"}),s("common.loading")]}):s("propertyModal.sync")}),p&&u.jsx("p",{className:"text-sm text-green-400 mt-2 text-center",children:p})]}),u.jsx(yo,{className:"flex-1 min-h-0",children:u.jsxs("form",{onSubmit:b,className:"space-y-4 pr-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-global-inactive",children:s("propertyModal.name")}),u.jsx("input",{name:"name",id:"name",type:"text",placeholder:s("propertyModal.name"),value:i.name,onChange:x,className:"w-full bg-global-bg-small-box border border-global-stroke-box text-global-blanc p-2.5 rounded-[8px] mt-1 focus:outline-none focus:border-global-content-highlight-2nd transition-colors"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-global-inactive",children:s("propertyModal.address")}),u.jsx("input",{name:"address",id:"address",type:"text",placeholder:s("propertyModal.address"),value:i.address,onChange:x,className:"w-full bg-global-bg-small-box border border-global-stroke-box text-global-blanc p-2.5 rounded-[8px] mt-1 focus:outline-none focus:border-global-content-highlight-2nd transition-colors",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-global-inactive",children:s("propertyModal.location")}),u.jsx("input",{name:"location",id:"location",type:"text",placeholder:s("propertyModal.location"),value:i.location,onChange:x,className:"w-full bg-global-bg-small-box border border-global-stroke-box text-global-blanc p-2.5 rounded-[8px] mt-1 focus:outline-none focus:border-global-content-highlight-2nd transition-colors",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-global-inactive",children:s("propertyModal.description")}),u.jsx("textarea",{name:"description",id:"description",rows:"4",placeholder:s("propertyModal.description"),value:i.description,onChange:x,className:"w-full bg-global-bg-small-box border border-global-stroke-box text-global-blanc p-2.5 rounded-[8px] mt-1 focus:outline-none focus:border-global-content-highlight-2nd transition-colors resize-none"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"property_type",className:"block text-sm font-medium text-global-inactive",children:s("propertyModal.propertyType")}),u.jsxs("select",{name:"property_type",id:"property_type",value:i.property_type,onChange:x,className:"w-full bg-global-bg-small-box border border-global-stroke-box text-global-blanc p-2.5 rounded-[8px] mt-1 focus:outline-none focus:border-global-content-highlight-2nd transition-colors [&>option]:bg-global-bg-box [&>option]:text-global-blanc",children:[u.jsx("option",{value:"appartement",children:"Appartement"}),u.jsx("option",{value:"villa",children:"Villa"}),u.jsx("option",{value:"studio",children:"Studio"}),u.jsx("option",{value:"loft",children:"Loft"}),u.jsx("option",{value:"maison",children:"Maison"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"surface",className:"block text-sm font-medium text-global-inactive",children:s("propertyModal.surface")}),u.jsx("input",{name:"surface",id:"surface",type:"number",placeholder:s("propertyModal.surface"),value:i.surface,onChange:x,className:"w-full bg-global-bg-small-box border border-global-stroke-box text-global-blanc p-2.5 rounded-[8px] mt-1 focus:outline-none focus:border-global-content-highlight-2nd transition-colors",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"capacity",className:"block text-sm font-medium text-global-inactive",children:s("propertyModal.capacity")}),u.jsx("input",{name:"capacity",id:"capacity",type:"number",placeholder:s("propertyModal.capacity"),value:i.capacity,onChange:x,className:"w-full bg-global-bg-small-box border border-global-stroke-box text-global-blanc p-2.5 rounded-[8px] mt-1 focus:outline-none focus:border-global-content-highlight-2nd transition-colors",required:!0})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"daily_revenue",className:"block text-sm font-medium text-global-inactive",children:s("propertyModal.dailyRevenue")}),u.jsx("input",{name:"daily_revenue",id:"daily_revenue",type:"number",placeholder:s("propertyModal.dailyRevenue"),value:i.daily_revenue,onChange:x,className:"w-full bg-global-bg-small-box border border-global-stroke-box text-global-blanc p-2.5 rounded-[8px] mt-1 focus:outline-none focus:border-global-content-highlight-2nd transition-colors",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"min_stay",className:"block text-sm font-medium text-global-inactive",children:s("propertyModal.minStay")}),u.jsx("input",{name:"min_stay",id:"min_stay",type:"number",placeholder:s("propertyModal.minStay"),value:i.min_stay,onChange:x,className:"w-full bg-global-bg-small-box border border-global-stroke-box text-global-blanc p-2.5 rounded-[8px] mt-1 focus:outline-none focus:border-global-content-highlight-2nd transition-colors",required:!0})]})]}),u.jsxs("fieldset",{className:"border border-global-stroke-box p-4 rounded-[8px]",children:[u.jsx("legend",{className:"text-lg font-semibold px-2 text-global-blanc",children:s("propertyModal.amenities")}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2 max-h-48 overflow-y-auto",children:HC.map(w=>u.jsxs("label",{className:"flex items-center gap-2 text-sm text-global-inactive cursor-pointer hover:text-global-blanc transition-colors",children:[u.jsx("input",{type:"checkbox",name:"amenities",value:w,checked:i.amenities.includes(w),onChange:v,className:"cursor-pointer"}),w.charAt(0).toUpperCase()+w.slice(1)]},w))})]}),o&&u.jsx("p",{className:"text-sm text-red-400 bg-red-900/50 p-3 rounded-[8px] border border-red-500/20",children:o}),u.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[u.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 font-semibold text-global-inactive bg-global-bg-small-box border border-global-stroke-box rounded-[8px] hover:border-global-content-highlight-2nd hover:text-global-blanc transition-colors",children:s("propertyModal.cancel")}),u.jsx("button",{type:"submit",disabled:c||d,className:"px-4 py-2 font-semibold text-white bg-gradient-to-r from-[#155dfc] to-[#12a1d5] rounded-[8px] hover:opacity-90 disabled:bg-gray-500 disabled:opacity-50 transition-opacity",children:s(c?"common.saving":"propertyModal.save")})]})]})})]})})}const ho=({isOpen:t,onClose:e,onConfirm:r,title:n="Confirmation",message:s,confirmText:i="Confirmer",cancelText:a="Annuler"})=>t?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50",onClick:e,children:u.jsxs("div",{className:"bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box p-6 flex flex-col gap-4 items-start justify-start w-full max-w-md relative",onClick:o=>o.stopPropagation(),children:[u.jsx("div",{className:"text-global-blanc text-left font-h2-font-family text-h2-font-size font-h2-font-weight relative w-full",children:n}),u.jsx("div",{className:"text-global-inactive text-left font-p1-font-family text-p1-font-size font-p1-font-weight relative w-full",children:s}),u.jsxs("div",{className:"flex flex-row gap-3 items-start justify-end self-stretch shrink-0 relative w-full",children:[u.jsx("button",{type:"button",onClick:e,className:"inline-flex items-center justify-center gap-2 px-4 py-2 relative rounded-[10px] border border-solid border-global-stroke-highlight-2nd bg-transparent cursor-pointer hover:opacity-90 transition-opacity",children:u.jsx("span",{className:"relative w-fit font-h3-font-family font-h3-font-weight text-global-inactive text-h3-font-size leading-h3-line-height",children:a})}),u.jsx("button",{type:"button",onClick:()=>{r(),e()},className:"inline-flex items-center justify-center gap-2 px-4 py-2 relative rounded-[10px] bg-[linear-gradient(90deg,rgba(21,93,252,1)_0%,rgba(18,161,213,1)_100%)] cursor-pointer border-0 transition-opacity hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[rgba(21,93,252,1)]",children:u.jsx("span",{className:"relative w-fit font-h3-font-family font-h3-font-weight text-global-blanc text-h3-font-size leading-h3-line-height",children:i})})]})]})}):null,KC=()=>u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:"w-4 h-4",children:u.jsx("path",{d:"M11.333 2.00001C11.5084 1.82465 11.7163 1.68571 11.9447 1.59203C12.1731 1.49835 12.4173 1.4519 12.6637 1.45564C12.91 1.45938 13.1531 1.51324 13.3782 1.61395C13.6033 1.71466 13.8057 1.85999 13.9733 2.04001C14.1409 2.22003 14.2701 2.43145 14.3533 2.66108C14.4365 2.89071 14.4719 3.13399 14.4573 3.37668C14.4427 3.61937 14.3785 3.85648 14.2687 4.07334C14.1589 4.2902 14.0058 4.48235 13.8187 4.63868L5.81866 12.6387L1.33333 14.0001L2.69466 9.51468L10.6947 1.51468L11.333 2.00001Z",stroke:"white",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})}),YC=()=>u.jsxs("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",className:"w-8 h-8",children:[u.jsx("circle",{cx:"16",cy:"8",r:"2",fill:"white"}),u.jsx("circle",{cx:"16",cy:"16",r:"2",fill:"white"}),u.jsx("circle",{cx:"16",cy:"24",r:"2",fill:"white"})]}),XC=()=>u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:"w-5 h-5",children:u.jsx("path",{d:"M10 4V16M4 10H16",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})});function qC({token:t,properties:e,onGroupChange:r,onEditStrategy:n,onEditRules:s,userProfile:i,refreshKey:a}){const{t:o,language:l}=Vt(),[c,h]=C.useState([]),[d,f]=C.useState(!0),[p,m]=C.useState(""),[g,x]=C.useState(""),[v,b]=C.useState(null),[y,w]=C.useState(""),[S,N]=C.useState(null),[k,A]=C.useState([]),[T,F]=C.useState(!1),[I,B]=C.useState({isOpen:!1,message:"",onConfirm:null}),Z=C.useCallback(async()=>{try{f(!0);const P=await fl(t);h(P),m("")}catch(P){m(P.message)}finally{f(!1)}},[t]);C.useEffect(()=>{Z()},[Z,a]);const ke=async P=>{if(P.preventDefault(),!!g.trim())try{await Xp({name:g.trim()},t),x(""),F(!1),Z(),r()}catch(V){m(V.message)}},ae=async P=>{B({isOpen:!0,message:o("groupsManager.deleteConfirm"),onConfirm:async()=>{try{await wC(P,t),Z(),r()}catch(V){m(V.message)}}})},Te=P=>{b(P.id),w(P.name)},he=()=>{b(null),w("")},te=async P=>{if(y.trim())try{await Xd(P,{name:y.trim()},t),he(),Z()}catch(V){m(V.message)}},re=async P=>{if(k.length!==0)try{await qp(P,k,t),Z(),A([]),r()}catch(V){m(V.message)}},le=async(P,V)=>{try{await _C(P,[V],t),Z(),r()}catch(ce){m(ce.message)}},je=async(P,V)=>{try{await Xd(P,{mainPropertyId:V},t),Z()}catch(ce){m(ce.message)}},M=async P=>{try{await Xd(P.id,{syncPrices:!P.syncPrices},t),Z()}catch(V){m(V.message)}},U=P=>{const V=(i==null?void 0:i.currency)||"EUR",ce=l==="en"?"en-US":"fr-FR";return(P||0).toLocaleString(ce,{style:"currency",currency:V,minimumFractionDigits:0,maximumFractionDigits:0})},L=()=>d?u.jsx("p",{className:"text-sm text-global-inactive",children:o("groupsManager.loading")}):c.length===0?u.jsx("p",{className:"text-sm text-global-inactive",children:o("groupsManager.noGroups")}):u.jsx("div",{className:"space-y-4 self-stretch w-full",children:c.map(P=>{const V=P.properties||[],ce=V.map(Se=>e.find(Ce=>Ce.id===Se)).filter(Boolean),we=e.filter(Se=>!V.includes(Se.id)),xe=[{label:o("groupsManager.floor"),value:U(P.floor_price||0)},{label:o("groupsManager.base"),value:U(P.base_price||0)},{label:o("groupsManager.ceiling"),value:U(P.ceiling_price||0)}],X=[{label:o("groupsManager.minimum"),value:`${P.min_stay_duration||0} ${o("groupsManager.nights")}`},{label:o("groupsManager.maximum"),value:`${P.max_stay_duration||0} ${o("groupsManager.nights")}`}],ve=[{label:o("groupsManager.longStayDiscount"),value:P.long_stay_discount?`-${P.long_stay_discount}%`:"-"},{label:o("groupsManager.markups"),value:P.markup?`+${P.markup}%`:"-"}],Ee=P.strategy||o("strategyModal.balanced");return u.jsxs("article",{className:"flex flex-col items-start gap-4 p-6 relative bg-[#1d293d80] rounded-[10px] border border-solid border-[#31415780] self-stretch w-full",children:[u.jsxs("header",{className:"flex items-start justify-between relative self-stretch w-full flex-[0_0_auto]",children:[u.jsxs("div",{className:"flex-col items-start flex-1 grow flex relative",children:[u.jsxs("div",{className:"h-7 items-center gap-3 self-stretch w-full flex relative",children:[v===P.id?u.jsx("input",{type:"text",value:y,onChange:Se=>w(Se.target.value),className:"flex-1 bg-transparent border border-global-stroke-box rounded-[10px] px-3 py-2 text-white font-h3-font-family text-h3-font-size focus:outline-none",autoFocus:!0}):u.jsx("h2",{className:"relative w-fit mt-[-0.50px] font-h3-font-family font-h3-font-weight text-white text-h3-font-size leading-h3-line-height",children:P.name}),u.jsx("span",{className:"inline-flex items-start px-2 py-1 relative flex-[0_0_auto] mt-[-1.50px] mb-[-1.50px] rounded border border-solid border-global-stroke-highlight-2nd bg-[linear-gradient(90deg,rgba(21,93,252,0.2)_0%,rgba(0,146,184,0.2)_100%)]",children:u.jsx("span",{className:"relative w-fit font-p1-font-family font-p1-font-weight text-global-content-highlight-2nd text-p1-font-size leading-p1-line-height",children:Ee})})]}),u.jsxs("p",{className:"relative w-fit font-p1-font-family font-p1-font-weight text-global-inactive text-p1-font-size leading-p1-line-height",children:[ce.length," ",ce.length>1?o("common.properties"):o("common.property")]})]}),u.jsx("div",{className:"h-8 items-start justify-end gap-2 flex-1 grow flex relative",children:v===P.id?u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>te(P.id),className:"px-3 py-1 bg-gradient-to-r from-[#155dfc] to-[#12a1d5] text-white rounded-lg text-sm",children:o("groupsManager.ok")}),u.jsx("button",{onClick:he,className:"px-3 py-1 bg-white/10 text-global-inactive rounded-lg text-sm",children:o("groupsManager.cancel")})]}):u.jsxs(u.Fragment,{children:[u.jsxs("button",{className:"all-[unset] box-border inline-flex h-8 items-center gap-4 px-3 py-1 relative flex-[0_0_auto] bg-global-bg-small-box rounded-lg border border-solid border-global-stroke-box cursor-pointer",type:"button",onClick:()=>n(P),"aria-label":o("groupsManager.edit"),children:[u.jsx("span",{className:"relative w-4 h-4","aria-hidden":"true",children:u.jsx(KC,{})}),u.jsx("span",{className:"relative w-fit font-h4-font-family font-normal text-white text-sm text-center tracking-[0] leading-5 whitespace-nowrap",children:o("groupsManager.edit")})]}),u.jsxs("div",{className:"relative action-menu-container",children:[u.jsx("button",{type:"button",onClick:()=>N(S===P.id?null:P.id),"aria-label":"Options supplmentaires",className:"relative w-8 h-8 bg-transparent border-0 p-0 cursor-pointer",children:u.jsx(YC,{})}),S===P.id&&u.jsxs("div",{className:"absolute right-0 top-full mt-2 w-40 bg-global-bg-box border border-global-stroke-box rounded-lg shadow-xl z-20 py-1 overflow-hidden",children:[u.jsx("button",{onClick:()=>s(P),className:"block w-full text-left px-4 py-2 text-xs text-global-inactive hover:bg-global-bg-small-box hover:text-white transition-colors",children:o("groupsManager.rules")}),u.jsx("button",{onClick:()=>Te(P),className:"block w-full text-left px-4 py-2 text-xs text-global-inactive hover:bg-global-bg-small-box hover:text-white transition-colors",children:o("groupsManager.rename")}),u.jsx("div",{className:"h-px bg-global-stroke-box my-1"}),u.jsx("button",{onClick:()=>ae(P.id),className:"block w-full text-left px-4 py-2 text-xs text-red-400 hover:bg-red-500/10 transition-colors",children:o("groupsManager.delete")})]})]})]})})]}),u.jsxs("div",{className:"items-start gap-4 self-stretch w-full flex-[0_0_auto] flex relative",children:[u.jsxs("section",{className:"flex-col items-start gap-2 p-4 flex-1 self-stretch grow bg-[#0f172b80] rounded-[10px] flex relative",children:[u.jsx("h3",{className:"relative w-fit mt-[-1.00px] font-h4-font-family font-h4-font-weight text-global-inactive text-h4-font-size leading-h4-line-height",children:o("groupsManager.pricingStrategy")}),u.jsx("dl",{className:"flex-col items-start gap-1 self-stretch w-full flex-[0_0_auto] flex relative",children:xe.map((Se,Ce)=>u.jsxs("div",{className:"flex items-start justify-between relative self-stretch w-full flex-[0_0_auto]",children:[u.jsx("dt",{className:"relative w-fit mt-[-1.00px] font-p1-font-family font-p1-font-weight text-global-inactive text-p1-font-size leading-p1-line-height",children:Se.label}),u.jsx("dd",{className:"relative w-fit mt-[-1.00px] font-p1-font-family font-p1-font-weight text-global-content-highlight-3rd text-p1-font-size leading-p1-line-height",children:Se.value})]},Ce))})]}),u.jsxs("section",{className:"flex-col items-start gap-2 pt-4 pb-0 px-4 flex-1 self-stretch grow bg-[#0f172b80] rounded-[10px] flex relative",children:[u.jsx("h3",{className:"relative w-fit mt-[-1.00px] font-h4-font-family font-h4-font-weight text-global-inactive text-h4-font-size leading-h4-line-height",children:o("groupsManager.stayDuration")}),u.jsx("dl",{className:"flex flex-col items-start gap-1 relative self-stretch w-full flex-[0_0_auto]",children:X.map((Se,Ce)=>u.jsxs("div",{className:"flex items-start justify-between relative self-stretch w-full flex-[0_0_auto]",children:[u.jsx("dt",{className:"relative w-fit mt-[-1.00px] font-p1-font-family font-p1-font-weight text-global-inactive text-p1-font-size leading-p1-line-height",children:Se.label}),u.jsx("dd",{className:"relative w-fit mt-[-1.00px] font-p1-font-family font-p1-font-weight text-white text-p1-font-size leading-p1-line-height",children:Se.value})]},Ce))})]}),u.jsxs("section",{className:"flex-col items-start gap-2 pt-4 pb-0 px-4 flex-1 self-stretch grow bg-[#0f172b80] rounded-[10px] flex relative",children:[u.jsx("h3",{className:"relative w-fit mt-[-1.00px] font-p1-font-family font-p1-font-weight text-global-inactive text-p1-font-size leading-p1-line-height",children:o("groupsManager.pricingRules")}),u.jsx("dl",{className:"flex-col items-start gap-1 self-stretch w-full flex-[0_0_auto] flex relative",children:ve.map((Se,Ce)=>u.jsxs("div",{className:"flex items-start justify-between relative self-stretch w-full flex-[0_0_auto]",children:[u.jsx("dt",{className:`relative ${Ce===0?"flex-1":"w-fit"} mt-[-1.00px] font-p1-font-family font-p1-font-weight text-global-inactive text-p1-font-size leading-p1-line-height`,children:Se.label}),u.jsx("dd",{className:"relative w-fit mt-[-1.00px] font-p1-font-family font-p1-font-weight text-global-content-highlight-3rd text-p1-font-size leading-p1-line-height",children:Se.value})]},Ce))})]})]}),S===P.id&&u.jsxs("div",{className:"self-stretch mt-4 pt-4 border-t border-global-stroke-box space-y-4",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm text-global-blanc",children:[u.jsx("input",{type:"checkbox",checked:!!P.syncPrices,onChange:()=>M(P),className:"rounded bg-global-bg-small-box border-global-stroke-box text-blue-500 focus:ring-blue-500"}),o("groupsManager.syncPrices")]}),u.jsxs("div",{children:[u.jsxs("h4",{className:"font-semibold text-sm mb-2 text-global-blanc",children:[o("groupsManager.propertiesInGroup")," (",ce.length,")"]}),ce.length>0?u.jsx("ul",{className:"space-y-2",children:ce.map(Se=>u.jsxs("li",{className:"flex justify-between items-center bg-global-bg-small-box border border-global-stroke-box p-2 rounded text-xs",children:[u.jsx("span",{className:"text-global-inactive",children:Se.address}),u.jsxs("div",{className:"flex items-center gap-2",children:[P.mainPropertyId===Se.id?u.jsx("span",{className:"px-2 py-0.5 bg-blue-600 text-white rounded-full text-[10px] font-bold",children:o("groupsManager.main")}):u.jsx("button",{onClick:()=>je(P.id,Se.id),className:"px-2 py-1 bg-white/10 hover:bg-blue-600 rounded text-[10px] text-white",children:o("groupsManager.setMain")}),u.jsx("button",{onClick:()=>le(P.id,Se.id),className:"px-2 py-1 bg-red-800 text-white rounded",children:o("groupsManager.removeProperty")})]})]},Se.id))}):u.jsx("p",{className:"text-xs text-global-inactive",children:o("groupsManager.noProperties")})]}),we.length>0&&u.jsxs("div",{children:[u.jsx("h4",{className:"font-semibold text-sm mb-2 text-global-blanc",children:o("groupsManager.addProperties")}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("select",{multiple:!0,value:k,onChange:Se=>A(Array.from(Se.target.selectedOptions,Ce=>Ce.value)),className:"flex-grow bg-global-bg-small-box border border-global-stroke-box rounded-[10px] text-xs h-24 text-global-blanc focus:outline-none",children:we.map(Se=>u.jsx("option",{value:Se.id,children:Se.address},Se.id))}),u.jsx("button",{onClick:()=>re(P.id),className:"px-4 py-2 font-semibold text-white bg-gradient-to-r from-[#155dfc] to-[#12a1d5] rounded-md self-start",children:o("groupsManager.add")})]})]}),we.length===0&&ce.length>0&&u.jsx("p",{className:"text-xs text-global-inactive mt-2",children:o("groupsManager.allPropertiesInGroup")})]})]},P.id)})});return u.jsxs("div",{className:"flex flex-col items-start gap-6 p-[25px] relative bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box",children:[u.jsxs("header",{className:"flex items-center justify-between relative self-stretch w-full flex-[0_0_auto]",children:[u.jsx("h1",{className:"relative w-fit font-h2-font-family font-h2-font-weight text-global-blanc text-h2-font-size leading-h2-line-height",children:o("groupsManager.title")}),u.jsxs("button",{type:"button",onClick:()=>F(!T),className:"inline-flex items-center justify-center gap-2 px-3 py-2 relative flex-[0_0_auto] rounded-[10px] bg-[linear-gradient(90deg,rgba(21,93,252,1)_0%,rgba(18,161,213,1)_100%)] cursor-pointer border-0 transition-opacity hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[rgba(21,93,252,1)]","aria-label":o("groupsManager.createGroup"),children:[u.jsx(XC,{}),u.jsx("span",{className:"relative w-fit mt-[-1.00px] font-h3-font-family font-h3-font-weight text-global-blanc text-h3-font-size leading-h3-line-height",children:o("groupsManager.createGroup")})]})]}),p&&u.jsx("p",{className:"text-sm text-red-400 mb-4 bg-red-900/40 border border-red-500/40 p-3 rounded-md",children:p}),T&&u.jsxs("form",{onSubmit:ke,className:"self-stretch flex gap-2 p-4 bg-global-bg-small-box rounded-[10px] border border-global-stroke-box",children:[u.jsx("input",{type:"text",value:g,onChange:P=>x(P.target.value),placeholder:o("groupsManager.groupNamePlaceholder"),className:"flex-grow bg-transparent border border-global-stroke-box text-global-blanc placeholder:text-global-inactive rounded-[10px] px-3 py-2 focus:outline-none",autoFocus:!0}),u.jsx("button",{type:"submit",className:"px-4 py-2 font-semibold text-white rounded-[10px] bg-gradient-to-r from-[#155dfc] to-[#12a1d5] hover:opacity-90",children:o("groupsManager.create")}),u.jsx("button",{type:"button",onClick:()=>{F(!1),x("")},className:"px-4 py-2 text-global-inactive hover:text-global-blanc rounded-[10px] border border-global-stroke-box",children:o("groupsManager.cancel")})]}),L(),u.jsx(ho,{isOpen:I.isOpen,onClose:()=>B({isOpen:!1,message:"",onConfirm:null}),onConfirm:I.onConfirm||(()=>{}),title:o("confirmModal.title"),message:I.message,confirmText:o("common.confirm"),cancelText:o("common.cancel")})]})}const JC=({property1:t="off",className:e=""})=>{const r=t==="on";return u.jsx("div",{className:`relative w-5 h-5 shrink-0 ${e}`,children:r?u.jsx("div",{className:"w-5 h-5 bg-global-content-highlight-2nd rounded flex items-center justify-center",children:u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:u.jsx("path",{d:"M10 3L4.5 8.5L2 6",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}):u.jsx("div",{className:"w-5 h-5 border border-global-content-highlight-2nd rounded bg-transparent"})})},QC=({className:t=""})=>u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:t,children:u.jsx("path",{d:"M10 4V16M4 10H16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})});function ZC({token:t,onClose:e,onSave:r,item:n,itemType:s,onGroupStrategyUpdated:i}){const{t:a}=Vt(),[o,l]=C.useState({strategy:a("strategyModal.balanced"),floor_price:"",base_price:"",ceiling_price:""}),[c,h]=C.useState(""),[d,f]=C.useState(!1),[p,m]=C.useState(!1);n!=null&&n.address||n!=null&&n.name||a("strategyModal.for"),C.useEffect(()=>{n&&l({strategy:n.strategy||a("strategyModal.balanced"),floor_price:n.floor_price!=null?String(n.floor_price):"",base_price:n.base_price!=null?String(n.base_price):"",ceiling_price:n.ceiling_price!=null?String(n.ceiling_price):""})},[n]);const g=v=>{l({...o,[v.target.name]:v.target.value})},x=async v=>{if(v.preventDefault(),h(""),f(!0),!o.floor_price||!o.base_price){h(a("strategyModal.required")),f(!1);return}try{const b={strategy:o.strategy,floor_price:parseInt(o.floor_price,10),base_price:parseInt(o.base_price,10),ceiling_price:o.ceiling_price?parseInt(o.ceiling_price,10):null};s==="group"?(await SC(n.id,b,t),i&&await i({...n,...b})):await vC(n.id,b,t),e(),setTimeout(()=>{r()},100)}catch(b){h(b.message)}finally{f(!1)}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box p-6 flex flex-col gap-3 items-start justify-start w-full max-w-lg relative max-h-[90vh]",children:[u.jsx("div",{className:"text-global-blanc text-left font-h2-font-family text-h2-font-size font-h2-font-weight relative shrink-0",children:a("strategyModal.title")}),u.jsx("div",{className:"text-global-inactive text-left font-h4-font-family text-h4-font-size leading-h4-line-height font-h4-font-weight relative self-stretch shrink-0",children:a("strategyModal.description")}),u.jsxs("div",{className:"bg-global-stroke-highlight-2nd rounded-[10px] border border-solid border-global-content-highlight-2nd pt-2 pr-3 pb-2 pl-3 flex flex-row gap-3 items-center justify-center self-stretch shrink-0 h-[46px] relative cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>m(!p),children:[u.jsx(JC,{property1:p?"on":"off",className:"!shrink-0"}),u.jsx("div",{className:"text-global-blanc text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative",children:a("strategyModal.automate")})]}),u.jsx(yo,{className:"self-stretch flex-1 min-h-0",children:u.jsxs("form",{onSubmit:x,className:"flex flex-col gap-4 pr-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"strategy",className:"block text-sm font-medium text-global-inactive mb-1",children:a("strategyModal.strategy")}),u.jsxs("select",{name:"strategy",value:o.strategy,onChange:g,className:"w-full bg-global-bg-small-box border border-global-stroke-box text-global-blanc rounded-[10px] px-3 py-2 focus:outline-none focus:border-global-content-highlight-2nd",children:[u.jsx("option",{value:"Prudent",children:a("strategyModal.prudent")}),u.jsx("option",{value:"quilibr",children:a("strategyModal.balanced")}),u.jsx("option",{value:"Agressif",children:a("strategyModal.aggressive")})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"floor_price",className:"block text-sm font-medium text-global-inactive mb-1",children:a("strategyModal.floorPrice")}),u.jsx("input",{name:"floor_price",type:"number",placeholder:"Ex: 80",value:o.floor_price,onChange:g,className:"w-full bg-global-bg-small-box border border-global-stroke-box text-global-blanc rounded-[10px] px-3 py-2 focus:outline-none focus:border-global-content-highlight-2nd placeholder:text-global-inactive",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"base_price",className:"block text-sm font-medium text-global-inactive mb-1",children:a("strategyModal.basePrice")}),u.jsx("input",{name:"base_price",type:"number",placeholder:"Ex: 120",value:o.base_price,onChange:g,className:"w-full bg-global-bg-small-box border border-global-stroke-box text-global-blanc rounded-[10px] px-3 py-2 focus:outline-none focus:border-global-content-highlight-2nd placeholder:text-global-inactive",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"ceiling_price",className:"block text-sm font-medium text-global-inactive mb-1",children:a("strategyModal.ceilingPrice")}),u.jsx("input",{name:"ceiling_price",type:"number",placeholder:a("strategyModal.optional"),value:o.ceiling_price,onChange:g,className:"w-full bg-global-bg-small-box border border-global-stroke-box text-global-blanc rounded-[10px] px-3 py-2 focus:outline-none focus:border-global-content-highlight-2nd placeholder:text-global-inactive"})]})]}),c&&u.jsx("div",{className:"p-3 bg-red-900/40 border border-red-500/40 rounded-lg",children:u.jsx("p",{className:"text-sm text-red-300",children:c})}),u.jsxs("div",{className:"flex flex-row gap-3 items-start justify-start self-stretch shrink-0 relative",children:[u.jsxs("button",{type:"button",onClick:e,className:"inline-flex items-center justify-center gap-2 px-3 py-2 border border-solid border-global-stroke-highlight-2nd rounded-[10px] bg-transparent text-global-blanc font-h3-font-family text-h3-font-size font-h3-font-weight hover:opacity-90 transition-opacity shrink-0",children:[u.jsx(QC,{className:"w-5 h-5"}),u.jsx("span",{children:a("strategyModal.cancel")})]}),u.jsx("button",{type:"submit",disabled:d,className:"inline-flex items-center justify-center gap-2 px-3 py-2 flex-1 rounded-[10px] bg-gradient-to-r from-[#155dfc] to-[#12a1d5] text-global-blanc font-h3-font-family text-h3-font-size font-h3-font-weight hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:a(d?"common.saving":"strategyModal.save")})]})]})})]})})}function eA({token:t,onClose:e,onSave:r,item:n,itemType:s}){const{t:i}=Vt(),[a,o]=C.useState({min_stay:"",max_stay:"",weekly_discount_percent:"",monthly_discount_percent:"",weekend_markup_percent:""}),[l,c]=C.useState(""),[h,d]=C.useState(!1),f=(n==null?void 0:n.address)||(n==null?void 0:n.name)||i("rulesModal.for");C.useEffect(()=>{n&&o({min_stay:n.min_stay!=null?n.min_stay:"",max_stay:n.max_stay!=null?n.max_stay:"",weekly_discount_percent:n.weekly_discount_percent!=null?n.weekly_discount_percent:"",monthly_discount_percent:n.monthly_discount_percent!=null?n.monthly_discount_percent:"",weekend_markup_percent:n.weekend_markup_percent!=null?n.weekend_markup_percent:""})},[n]);const p=g=>{o({...a,[g.target.name]:g.target.value})},m=async g=>{g.preventDefault(),c(""),d(!0);try{const x={min_stay:a.min_stay!==""?parseInt(a.min_stay,10):null,max_stay:a.max_stay!==""?parseInt(a.max_stay,10):null,weekly_discount_percent:a.weekly_discount_percent!==""?parseInt(a.weekly_discount_percent,10):null,monthly_discount_percent:a.monthly_discount_percent!==""?parseInt(a.monthly_discount_percent,10):null,weekend_markup_percent:a.weekend_markup_percent!==""?parseInt(a.weekend_markup_percent,10):null};s==="group"?await kC(n.id,x,t):await bC(n.id,x,t),r(),e()}catch(x){c(x.message)}finally{d(!1)}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50",children:u.jsxs("div",{className:"bg-bg-secondary rounded-lg shadow-xl w-full max-w-2xl p-6 flex flex-col max-h-[90vh]",children:[u.jsx("h3",{className:"text-xl font-bold mb-2 text-text-primary shrink-0",children:i("rulesModal.title")}),u.jsxs("p",{className:"text-sm text-text-muted mb-6 shrink-0",children:[i("rulesModal.for"),": ",f]}),u.jsx(yo,{className:"flex-1 min-h-0",children:u.jsxs("form",{onSubmit:m,className:"space-y-6 pr-2",children:[u.jsxs("fieldset",{className:"border border-border-secondary p-4 rounded-md",children:[u.jsx("legend",{className:"text-lg font-semibold px-2 text-text-primary",children:i("rulesModal.stayDuration")}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"min_stay",className:"block text-sm font-medium text-text-secondary",children:i("rulesModal.minStay")}),u.jsx("input",{name:"min_stay",type:"number",placeholder:"Ex: 2",value:a.min_stay,onChange:p,className:"w-full form-input mt-1",min:"0"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"max_stay",className:"block text-sm font-medium text-text-secondary",children:i("rulesModal.maxStay")}),u.jsx("input",{name:"max_stay",type:"number",placeholder:"Ex: 90",value:a.max_stay,onChange:p,className:"w-full form-input mt-1",min:"0"})]})]})]}),u.jsxs("fieldset",{className:"border border-border-secondary p-4 rounded-md",children:[u.jsx("legend",{className:"text-lg font-semibold px-2 text-text-primary",children:i("rulesModal.longTermDiscounts")}),u.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"weekly_discount_percent",className:"block text-sm font-medium text-text-secondary",children:i("rulesModal.weeklyDiscount")}),u.jsx("input",{name:"weekly_discount_percent",type:"number",placeholder:"Ex: 10",value:a.weekly_discount_percent,onChange:p,className:"w-full form-input mt-1",min:"0",max:"100"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"monthly_discount_percent",className:"block text-sm font-medium text-text-secondary",children:i("rulesModal.monthlyDiscount")}),u.jsx("input",{name:"monthly_discount_percent",type:"number",placeholder:"Ex: 20",value:a.monthly_discount_percent,onChange:p,className:"w-full form-input mt-1",min:"0",max:"100"})]})]})]}),u.jsxs("fieldset",{className:"border border-border-secondary p-4 rounded-md",children:[u.jsx("legend",{className:"text-lg font-semibold px-2 text-text-primary",children:i("rulesModal.markups")}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"weekend_markup_percent",className:"block text-sm font-medium text-text-secondary",children:i("rulesModal.weekendMarkup")}),u.jsx("input",{name:"weekend_markup_percent",type:"number",placeholder:"Ex: 15",value:a.weekend_markup_percent,onChange:p,className:"w-full form-input mt-1",min:"0"}),u.jsx("p",{className:"text-xs text-text-muted mt-1",children:i("rulesModal.weekendMarkupNote")})]})]}),l&&u.jsx("p",{className:"text-sm text-red-400 bg-red-900/50 p-3 rounded-md",children:l}),u.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[u.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 font-semibold text-text-secondary bg-bg-muted rounded-md hover:bg-border-primary",children:i("rulesModal.cancel")}),u.jsx("button",{type:"submit",disabled:h,className:"px-4 py-2 font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-500",children:i(h?"common.saving":"rulesModal.save")})]})]})})]})})}function tA({token:t,userProfile:e}){const{t:r,language:n}=Vt(),s=(e==null?void 0:e.language)||n||"fr",[i,a]=C.useState([]),[o,l]=C.useState(!0),[c,h]=C.useState(""),d=C.useCallback(async(x=!1)=>{if(t){l(!0),h("");try{const v=await FC(t,s,x);a(v||[])}catch(v){h(r("newsFeed.loadError",{message:v.message}))}finally{l(!1)}}},[t,s,r]);C.useEffect(()=>{d()},[d]);const f=x=>{switch((x||"").toLowerCase()){case"lev":case"high":return"text-global-negative-impact";case"modr":case"medium":return"text-global-mid-impact";case"faible":case"low":return"text-global-positive-impact";default:return"text-global-inactive"}},p=x=>typeof x!="number"?"N/A":x>0?`+${x}%`:`${x}%`,m=x=>{if(!x)return"";try{const v=s==="en"?"en-US":"fr-FR";return new Intl.DateTimeFormat(v,{day:"2-digit",month:"short"}).format(new Date(x))}catch{return""}},g=()=>o?u.jsx("div",{className:"flex justify-center items-center h-48",children:u.jsx("div",{className:"loader"})}):c?u.jsx("p",{className:"text-sm text-red-400",children:c}):!i||i.length===0?u.jsx("p",{className:"text-sm text-global-inactive",children:r("newsFeed.noNews")}):u.jsx("div",{className:"space-y-4",children:i.map((x,v)=>u.jsxs("div",{className:"bg-global-bg-small-box border border-global-stroke-box rounded-[12px] p-4 flex flex-col gap-3",children:[u.jsxs("div",{className:"flex items-center justify-between gap-4",children:[u.jsx("h4",{className:"text-global-blanc font-h4-font-family text-h4-font-size leading-h4-line-height font-h4-font-weight",children:x.title}),u.jsx("span",{className:"text-xs text-global-inactive whitespace-nowrap",children:m(x.published_at)})]}),u.jsx("p",{className:"text-sm text-global-inactive",children:x.summary}),u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsxs("span",{className:`font-semibold ${f(x.impact_category)}`,children:[r("newsFeed.estimatedImpact"),": ",p(x.impact_percentage)," (",x.impact_category||"N/A",")"]}),x.source&&u.jsxs("span",{className:"text-xs text-global-inactive",children:[r("newsFeed.source"),": ",x.source]})]})]},`${x.id||x.title}-${v}`))});return u.jsxs("div",{className:"bg-global-bg-box border border-global-stroke-box rounded-[14px] p-6 shadow-[0_15px_60px_rgba(0,0,0,0.35)] flex flex-col h-full max-h-[800px]",children:[u.jsxs("div",{className:"flex items-center justify-between gap-4 shrink-0 mb-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-global-inactive",children:"Insights"}),u.jsx("h2",{className:"text-2xl font-h2-font-family text-global-blanc",children:r("newsFeed.title")})]}),u.jsx("button",{type:"button",onClick:()=>d(!0),className:"text-sm px-4 py-2 rounded-full border border-global-stroke-box text-global-inactive hover:text-global-blanc hover:border-global-content-highlight-2nd transition shrink-0",children:r("dashboard.refresh")})]}),u.jsx("div",{className:"flex-1 min-h-0 overflow-hidden flex flex-col",children:u.jsx(yo,{className:"flex-1 min-h-0",children:g()})})]})}function rA({token:t,recommendations:e,onGroupCreated:r}){const{t:n}=Vt(),[s,i]=C.useState(!1),[a,o]=C.useState("");if(!e||e.length===0)return null;const l=async c=>{if(!c||!c.properties||c.properties.length<2){o(n("groupRecommendations.invalidRecommendation"));return}i(!0),o("");try{const h=c.properties[0].address,d=`${n("groupRecommendations.groupNamePrefix")} (${h.split(",")[0]})`,f=await Xp({name:d},t),p=c.properties.map(m=>m.id);await qp(f.id,p,t),r()}catch(h){console.error("Error creating suggested group:",h),o(h.message)}finally{i(!1)}};return u.jsxs("div",{className:"space-y-4",children:[a&&u.jsx("p",{className:"text-sm text-red-400 bg-red-900/30 border border-red-500/40 p-3 rounded-[10px]",children:a}),u.jsx("div",{className:"space-y-3",children:e.map(c=>u.jsxs("div",{className:"bg-global-bg-small-box border border-global-stroke-box rounded-[12px] p-4 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[u.jsxs("div",{className:"text-sm text-global-inactive",children:[u.jsxs("p",{className:"text-global-blanc font-semibold mb-1",children:[c.properties.length," ",n("groupRecommendations.similarProperties")]}),u.jsx("ul",{className:"list-disc list-inside text-xs space-y-1",children:c.properties.map(h=>u.jsx("li",{children:h.address},h.id))})]}),u.jsx("button",{onClick:()=>l(c),disabled:s,className:"inline-flex items-center justify-center gap-2 px-4 py-2 rounded-[10px] font-semibold text-white bg-gradient-to-r from-[#155dfc] to-[#12a1d5] shadow-lg hover:opacity-90 disabled:opacity-50",children:n(s?"groupRecommendations.creating":"groupRecommendations.createGroup")})]},c.key))})]})}const ch=t=>t.toISOString().split("T")[0],mx=t=>{const r=new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:t||"UTC"}).format(new Date);return new Date(Date.UTC(parseInt(r.substring(0,4)),parseInt(r.substring(5,7))-1,parseInt(r.substring(8,10))))},cw=(t,e="UTC")=>{const r=mx(e);let n=mx(e);switch(t){case"7d":n.setUTCDate(r.getUTCDate()-7);break;case"1m":n.setUTCMonth(r.getUTCMonth()-1);break;case"6m":n.setUTCMonth(r.getUTCMonth()-6);break;case"ytd":n=new Date(Date.UTC(r.getUTCFullYear(),0,1));break;case"1y":n.setUTCFullYear(r.getUTCFullYear()-1);break;case"all":n.setUTCFullYear(r.getUTCFullYear()-5);break;default:n.setUTCMonth(r.getUTCMonth()-1)}return{startDate:ch(n),endDate:ch(r)}},nA=(t,e)=>{const r=new Date(t+"T00:00:00Z"),s=new Date(e+"T00:00:00Z").getTime()-r.getTime(),i=new Date(r.getTime()-24*60*60*1e3),a=new Date(i.getTime()-s);return{startDate:ch(a),endDate:ch(i)}},Vc=(t="en")=>{const e={fr:{errorRefreshing:"Erreur lors du rafrachissement",errorFetchingGroup:"Erreur lors de la rcupration du groupe",loadingKPIs:"Chargement des indicateurs de performance IA",loadingRecommendations:"Chargement des recommandations IA",aiGainDescription:"Gains gnrs par l'IA sur la priode",aiScoreDescription:"Score de performance de l'IA (sur 100)",aiRecommendationsTitle:"Recommandations de l'IA",aiStrategyDescription:"Stratgie optimise par l'IA pour maximiser les revenus",errorFetchingData:"Erreur lors de la rcupration des donnes",refreshing:"Rafrachissement en cours..."},en:{errorRefreshing:"Error refreshing",errorFetchingGroup:"Error fetching group",loadingKPIs:"Loading AI performance indicators",loadingRecommendations:"Loading AI recommendations",aiGainDescription:"AI-generated gains over the period",aiScoreDescription:"AI performance score (out of 100)",aiRecommendationsTitle:"AI Recommendations",aiStrategyDescription:"AI-optimized strategy to maximize revenue",errorFetchingData:"Error fetching data",refreshing:"Refreshing..."}};return e[t]||e.en},xx=["https://images.unsplash.com/photo-1505691938895-1758d7feb511?auto=format&fit=crop&w=900&q=60","https://images.unsplash.com/photo-1493809842364-78817add7ffb?auto=format&fit=crop&w=900&q=60","https://images.unsplash.com/photo-1505691723518-36a5ac3be353?auto=format&fit=crop&w=900&q=60","https://images.unsplash.com/photo-1505852679233-d9fd70aff56d?auto=format&fit=crop&w=900&q=60","https://images.unsplash.com/photo-1484154218962-a197022b5858?auto=format&fit=crop&w=900&q=60"],sA=({className:t=""})=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:`w-4 h-4 ${t}`,children:[u.jsx("path",{d:"M12 21s7-4.35 7-11a7 7 0 0 0-14 0c0 6.65 7 11 7 11z"}),u.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),iA=({className:t=""})=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:`w-4 h-4 ${t}`,children:[u.jsx("path",{d:"M3 10.5 12 3l9 7.5"}),u.jsx("path",{d:"M5 10.5V21h5v-6h4v6h5v-10.5"})]}),aA=({className:t=""})=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:`w-4 h-4 ${t}`,children:[u.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),u.jsx("circle",{cx:"9",cy:"7",r:"4"}),u.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),u.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),oA=({className:t=""})=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:`w-3.5 h-3.5 ${t}`,children:[u.jsx("polyline",{points:"17 11 21 7 23 9"}),u.jsx("path",{d:"M3 17l6-6 4 4 8-8"})]}),lA=({className:t=""})=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:`w-6 h-6 ${t}`,children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M12 6v12"}),u.jsx("path",{d:"M16 8H9.5a2.5 2.5 0 0 0 0 5H14a2.5 2.5 0 0 1 0 5H8"})]}),cA=({className:t=""})=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:`w-6 h-6 ${t}`,children:[u.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),u.jsx("path",{d:"M3 9h18"}),u.jsx("path",{d:"M9 21V9"}),u.jsx("path",{d:"M15 21V9"})]}),uA=({className:t=""})=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:`w-6 h-6 ${t}`,children:[u.jsx("path",{d:"M3 6l3 0"}),u.jsx("path",{d:"M3 10l5 0"}),u.jsx("path",{d:"M3 14l3 0"}),u.jsx("path",{d:"M3 18l5 0"}),u.jsx("path",{d:"M12 4h9v16h-9z"}),u.jsx("path",{d:"M16 8h.01"}),u.jsx("path",{d:"M16 12h.01"}),u.jsx("path",{d:"M16 16h.01"})]}),hA=({className:t=""})=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:`w-6 h-6 ${t}`,children:[u.jsx("path",{d:"M12 3 1 9l11 6 9-4.91V17"}),u.jsx("path",{d:"M5 10.74v4.55c0 .16.08.31.21.4l6.79 4.53a.5.5 0 0 0 .54 0l6.79-4.54a.5.5 0 0 0 .21-.41V10.7"}),u.jsx("path",{d:"M9 21h6"})]}),dA=({className:t=""})=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`w-4 h-4 ${t}`,children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]});function vx({token:t,userProfile:e}){const{t:r,language:n}=Vt(),[s,i]=C.useState([]),[a,o]=C.useState([]),[l,c]=C.useState(!0),[h,d]=C.useState(!0),[f,p]=C.useState(""),[m,g]=C.useState(null),[x,v]=C.useState(null),[b,y]=C.useState(0),[w,S]=C.useState(!1),[N,k]=C.useState(!1),[A,T]=C.useState(!1),[F,I]=C.useState(null),[B,Z]=C.useState({totalRevenue:0,avgOccupancy:0,adr:0,iaGain:0,iaScore:0}),[ke,ae]=C.useState([]),[Te,he]=C.useState(!0),[te,re]=C.useState("active"),[le,je]=C.useState(""),[M,U]=C.useState({isOpen:!1,message:"",onConfirm:null}),L=C.useCallback(async()=>{if(!t)return;const W=(e==null?void 0:e.language)||n||"en",_e=Vc(W);try{const[Pe,Ze]=await Promise.all([ea(t),fl(t)]);i(Pe),o(Ze)}catch(Pe){console.error(`${_e.errorRefreshing}:`,Pe)}},[t,e==null?void 0:e.language,n]),P=C.useCallback(async()=>{if(!(w||N||A)){c(!0),d(!0),he(!0);try{const[W,_e]=await Promise.all([ea(t),fl(t)]);i(W),o(_e),p("");const Pe=(e==null?void 0:e.language)||n||"en",Ze=Vc(Pe);if(e){const{startDate:vt,endDate:bt}=cw("1m",e.timezone);try{const dt=await A0(t,vt,bt);Z({totalRevenue:dt.totalRevenue||0,avgOccupancy:dt.occupancy||0,adr:dt.adr||0,iaGain:dt.iaGain||0,iaScore:dt.iaScore||0})}catch(dt){console.error(`${Ze.errorFetchingData} (KPIs):`,dt)}}try{const vt=await iw(t);ae(vt)}catch(vt){console.error(`${Ze.errorFetchingData} (${Ze.aiRecommendationsTitle}):`,vt),ae([])}}catch(W){p(W.message),i([]),Z({totalRevenue:0,avgOccupancy:0,adr:0,iaGain:0,iaScore:0}),ae([])}finally{c(!1),d(!1),he(!1)}}},[t,w,N,A,e]);C.useEffect(()=>{P()},[P]),C.useEffect(()=>{const W=_e=>{F&&!_e.target.closest(".action-menu-container")&&I(null)};return document.addEventListener("click",W),()=>document.removeEventListener("click",W)},[F]);const V=C.useMemo(()=>{let W=s;if(te&&(W=W.filter(_e=>(_e.status||"active")===te)),le){const _e=a.find(Ze=>Ze.id===le),Pe=(_e==null?void 0:_e.properties)||[];W=W.filter(Ze=>Pe.includes(Ze.id))}return W},[s,te,le,a]),ce=W=>a.find(_e=>{var Pe;return(Pe=_e.properties)==null?void 0:Pe.includes(W)}),we=()=>{g(null),S(!0)},xe=W=>{g(W),S(!0),I(null)},X=async W=>{I(null);const _e=(e==null?void 0:e.language)||n||"en",Pe=Vc(_e);if(!W.address&&W.id)try{const vt=(await fl(t)).find(bt=>bt.id===W.id);v(vt||W)}catch(Ze){console.error(`${Pe.errorFetchingGroup}:`,Ze),v(W)}else g(W);k(!0)},ve=W=>{W.address?g(W):v(W),T(!0),I(null)},Ee=async W=>{I(null),U({isOpen:!0,message:r("dashboard.property.deleteConfirm"),onConfirm:async()=>{try{await mC(W,t),P()}catch(_e){p(_e.message)}}})},Se=async(W,_e)=>{I(null);try{await yC(W,_e,t),P()}catch(Pe){p(Pe.message)}},Ce=async()=>{S(!1),k(!1),T(!1),g(null),v(null),await L(),y(W=>W+1)},rt=()=>{S(!1),k(!1),T(!1),g(null),v(null)},We=W=>{const _e=n==="en"?"en-US":"fr-FR";return(W||0).toLocaleString(_e,{style:"currency",currency:(e==null?void 0:e.currency)||"EUR",minimumFractionDigits:0,maximumFractionDigits:0})},fe=W=>{const _e=n==="en"?"en-US":"fr-FR";return(W||0).toLocaleString(_e,{style:"currency",currency:(e==null?void 0:e.currency)||"EUR",minimumFractionDigits:2})},xt=C.useMemo(()=>{const W=(e==null?void 0:e.language)||n||"en",_e=Vc(W);return[{id:"totalRevenue",title:r("dashboard.kpi.revenue"),value:We(B.totalRevenue),helper:r("dashboard.kpi.revenueHelper"),icon:lA},{id:"avgOccupancy",title:r("dashboard.kpi.occupancy"),value:`${(B.avgOccupancy||0).toFixed(1)}%`,helper:r("dashboard.kpi.occupancyHelper"),icon:cA},{id:"adr",title:r("dashboard.kpi.adr"),value:fe(B.adr),helper:r("dashboard.kpi.adrHelper"),icon:uA},{id:"iaGain",title:r("dashboard.kpi.iaGain"),value:We(B.iaGain),helper:_e.aiGainDescription||r("dashboard.kpi.iaGainHelper"),icon:hA}]},[B,e==null?void 0:e.language,n,r]),st=()=>u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:xt.map(({id:W,title:_e,value:Pe,helper:Ze,icon:vt})=>u.jsx("div",{className:"bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box p-4 flex flex-col gap-2 items-start justify-center flex-1 relative overflow-hidden",children:u.jsxs("div",{className:"flex flex-row items-center justify-between self-stretch shrink-0 relative w-full",children:[u.jsxs("div",{className:"flex flex-col gap-0 items-start justify-start flex-1 relative min-w-0",children:[u.jsx("div",{className:"text-global-inactive text-left font-p1-font-family text-p1-font-size font-p1-font-weight relative",children:_e}),u.jsx("div",{className:"text-global-blanc text-left font-h1-font-family text-h1-font-size font-h1-font-weight font-bold relative",children:Pe||""}),Ze&&u.jsx("div",{className:"text-global-inactive text-left text-xs font-normal relative mt-1",children:Ze})]}),u.jsx("div",{className:"rounded-[10px] border border-solid border-global-stroke-highlight-2nd flex flex-col gap-2.5 items-center justify-center shrink-0 w-[50px] h-[50px] relative",style:{background:"linear-gradient(90deg, rgba(21, 93, 252, 0.20) 0%, rgba(0, 146, 184, 0.20) 100%)",aspectRatio:"1"},children:u.jsx(vt,{className:"w-6 h-6 text-global-content-highlight-2nd"})})]})},W))}),Zt=W=>{const _e={active:{label:r("dashboard.statusLabels.active"),className:"bg-emerald-500/10 border border-emerald-500/20 text-emerald-400"},archived:{label:r("dashboard.statusLabels.archived"),className:"bg-gray-500/10 border border-gray-500/20 text-gray-400"},error:{label:r("dashboard.statusLabels.error"),className:"bg-red-500/10 border border-red-500/20 text-red-400"},default:{label:r("dashboard.statusLabels.unknown"),className:"bg-yellow-500/10 border border-yellow-500/20 text-yellow-400"}},{label:Pe,className:Ze}=_e[W]||_e.default;return u.jsx("span",{className:`px-2.5 py-0.5 text-[10px] font-semibold rounded-full uppercase tracking-wide ${Ze}`,children:Pe})},Ct=()=>l?u.jsx("p",{className:"text-center text-text-muted col-span-full py-8",children:r("dashboard.loadingProperties")}):f&&s.length===0?u.jsxs("p",{className:"text-center text-red-400 col-span-full py-8",children:[r("common.error"),": ",f]}):s.length===0?u.jsxs("div",{className:"text-center bg-global-bg-box border border-global-stroke-box p-8 rounded-[14px] col-span-full",children:[u.jsx("h3",{className:"text-xl font-semibold text-global-blanc",children:r("dashboard.noProperties")}),u.jsx("p",{className:"text-global-inactive mt-2",children:r("dashboard.noPropertiesMessage")})]}):V.length===0?u.jsxs("div",{className:"text-center bg-global-bg-box border border-global-stroke-box p-8 rounded-[14px] col-span-full",children:[u.jsx("h3",{className:"text-xl font-semibold text-global-blanc",children:r("dashboard.noFilteredProperties")}),u.jsx("p",{className:"text-global-inactive mt-2",children:r("dashboard.noFilteredPropertiesMessage")})]}):V.map((W,_e)=>{var Jr,gn,Cn,An;const Pe=ce(W.id),Ze=Pe&&Pe.syncPrices,vt=W.coverImage||W.imageUrl||W.photoUrl||xx[_e%xx.length],bt=W.property_type||W.type||"villa",dt=bt.charAt(0).toUpperCase()+bt.slice(1),Yr=W.capacity?`${W.capacity} ${r("dashboard.property.capacity")}`:r("dashboard.property.capacityNA"),Xr=Number(W.monthly_revenue??W.monthlyRevenue??((Jr=W.metrics)==null?void 0:Jr.monthlyRevenue)??(W.daily_revenue?W.daily_revenue*30:0)),Tn=Number(W.target_revenue??W.targetRevenue??((gn=W.metrics)==null?void 0:gn.targetRevenue)??(Xr?Xr*1.15:0)),qr=Number.isFinite(Tn)?Tn:0,Ar=typeof W.revenueGrowth=="number"?W.revenueGrowth:typeof((Cn=W.metrics)==null?void 0:Cn.revenueGrowth)=="number"?W.metrics.revenueGrowth:null,ar=Ar!==null?`${Ar>0?"+":""}${Ar.toFixed(1)}%`:null,Kn=Ar!==null&&Ar>=0?"text-global-positive-impact":"text-red-400",hs=qr?Math.min(100,Math.round(Xr/qr*100)):0;return u.jsxs("div",{className:"bg-global-bg-box border border-global-stroke-box rounded-[14px] overflow-hidden shadow-lg flex flex-col group hover:border-global-content-highlight-2nd/30 transition-colors duration-300",children:[u.jsxs("div",{className:"relative h-48 shrink-0 overflow-hidden",children:[u.jsx("img",{src:vt,alt:W.address||"Proprit",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",loading:"lazy"}),u.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),u.jsx("div",{className:"absolute top-3 right-3",children:Zt(W.status||"active")}),Ze&&u.jsxs("div",{className:"absolute top-3 left-3 bg-blue-600/90 backdrop-blur-md px-2.5 py-1 rounded-full text-[10px] font-bold text-white flex items-center gap-1.5 border border-blue-400/30 shadow-lg",children:[u.jsx("span",{className:"text-xs",children:""}),r("dashboard.property.sync")," ",Pe==null?void 0:Pe.name]}),u.jsxs("div",{className:"absolute bottom-3 left-4 right-4",children:[u.jsx("h3",{className:"text-white font-bold text-lg truncate shadow-black drop-shadow-md",children:W.name||W.address||r("dashboard.property.propertyNoName")}),u.jsxs("div",{className:"flex items-center gap-2 text-gray-300 text-xs mt-0.5 truncate",children:[u.jsx(sA,{className:"w-3 h-3"}),u.jsx("span",{children:W.location||r("dashboard.property.locationUnknown")})]})]})]}),u.jsxs("div",{className:"p-5 flex flex-col gap-5 flex-1",children:[u.jsxs("div",{className:"flex items-center justify-between text-xs text-global-inactive border-b border-global-stroke-box pb-4",children:[u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("span",{className:"flex items-center gap-1.5",children:[u.jsx(iA,{className:"w-3.5 h-3.5"}),dt]}),u.jsxs("span",{className:"flex items-center gap-1.5",children:[u.jsx(aA,{className:"w-3.5 h-3.5"}),Yr]})]}),u.jsxs("span",{className:"bg-global-bg-small-box px-2 py-1 rounded text-[10px]",children:[((An=W.amenities)==null?void 0:An.length)||0," ",r("dashboard.property.equipment")]})]}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsxs("div",{className:"flex items-center justify-between text-sm",children:[u.jsx("span",{className:"text-global-inactive",children:r("dashboard.property.monthlyRevenue")}),ar&&u.jsxs("span",{className:`flex items-center gap-1 text-xs font-medium ${Kn}`,children:[u.jsx(oA,{className:"w-3 h-3"}),ar]})]}),u.jsxs("div",{className:"flex items-baseline gap-2 mb-1",children:[u.jsx("span",{className:"text-global-blanc font-bold text-xl",children:We(Xr)}),qr>0&&u.jsxs("span",{className:"text-global-inactive text-xs",children:["/ ",We(qr)]})]}),u.jsx("div",{className:"w-full h-1.5 rounded-full bg-global-bg-muted overflow-hidden",children:u.jsx("div",{className:"h-full bg-gradient-to-r from-[#155dfc] to-[#12a1d5] rounded-full",style:{width:`${hs}%`}})})]}),u.jsxs("div",{className:"flex items-center gap-2 mt-auto pt-2",children:[u.jsx("button",{onClick:()=>X(W),className:"flex-1 bg-global-bg-small-box border border-global-stroke-box hover:border-global-content-highlight-2nd text-global-blanc text-xs font-medium py-2 rounded-[8px] transition-colors",children:r("dashboard.property.strategyAI")}),u.jsx("button",{onClick:()=>ve(W),className:"flex-1 bg-global-bg-small-box border border-global-stroke-box hover:border-purple-500/50 text-global-blanc text-xs font-medium py-2 rounded-[8px] transition-colors",children:r("dashboard.property.rules")}),u.jsxs("div",{className:"relative action-menu-container",children:[u.jsx("button",{type:"button",onClick:()=>I(F===W.id?null:W.id),className:"w-9 h-9 flex items-center justify-center bg-global-bg-small-box border border-global-stroke-box rounded-[8px] text-global-inactive hover:text-white hover:border-global-content-highlight-2nd transition-colors",children:""}),F===W.id&&u.jsxs("div",{className:"absolute right-0 bottom-full mb-2 w-40 bg-global-bg-box border border-global-stroke-box rounded-lg shadow-xl z-20 py-1 overflow-hidden",children:[u.jsx("button",{onClick:()=>xe(W),className:"block w-full text-left px-4 py-2 text-xs text-global-inactive hover:bg-global-bg-small-box hover:text-white transition-colors",children:r("dashboard.property.edit")}),W.status!=="active"&&u.jsx("button",{onClick:()=>Se(W.id,"active"),className:"block w-full text-left px-4 py-2 text-xs text-green-400 hover:bg-global-bg-small-box transition-colors",children:r("dashboard.property.activate")}),W.status==="active"&&u.jsx("button",{onClick:()=>Se(W.id,"archived"),className:"block w-full text-left px-4 py-2 text-xs text-global-inactive hover:bg-global-bg-small-box transition-colors",children:r("dashboard.property.archive")}),u.jsx("button",{onClick:()=>Se(W.id,"error"),className:"block w-full text-left px-4 py-2 text-xs text-yellow-400 hover:bg-global-bg-small-box transition-colors",children:r("dashboard.property.markError")}),u.jsx("div",{className:"h-px bg-global-stroke-box my-1"}),u.jsx("button",{onClick:()=>Ee(W.id),className:"block w-full text-left px-4 py-2 text-xs text-red-400 hover:bg-red-500/10 transition-colors",children:r("dashboard.property.delete")})]})]})]})]})]},W.id)});return u.jsxs("div",{className:"relative min-h-screen",children:[u.jsx("div",{className:"fixed inset-0",style:{background:"linear-gradient(135deg, rgba(2,6,24,1) 0%, rgba(22,36,86,1) 45%, rgba(15,23,43,1) 100%)",zIndex:0}}),u.jsxs("div",{className:"relative z-10 p-4 md:p-6 lg:p-8 space-y-6 lg:space-y-8",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-bold uppercase tracking-[0.2em] text-global-inactive mb-1",children:r("dashboard.overview")}),u.jsx("h1",{className:"text-3xl md:text-4xl font-h1-font-family font-bold text-global-blanc",children:r("dashboard.title")})]}),u.jsxs("button",{onClick:we,className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-[12px] text-white font-semibold bg-gradient-to-r from-[#155dfc] to-[#12a1d5] shadow-lg hover:opacity-90 transition-opacity text-sm",children:[u.jsx(dA,{}),r("dashboard.addProperty")]})]}),f&&u.jsx("div",{className:"bg-red-900/20 border border-red-500/30 p-4 rounded-[12px] text-red-200 text-sm",children:f}),h?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[...Array(4)].map((W,_e)=>u.jsx("div",{className:"bg-global-bg-box border border-global-stroke-box rounded-[14px] p-5 animate-pulse h-32"},_e))}):st(),!Te&&ke.length>0&&u.jsxs("div",{className:"bg-global-bg-box border border-global-stroke-box rounded-[14px] p-6 shadow-lg",children:[u.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-bold uppercase tracking-[0.2em] text-global-inactive mb-1",children:r("dashboard.aiRecommendations")}),u.jsx("h2",{className:"text-xl font-bold text-global-blanc",children:r("dashboard.groupSuggestions")})]}),u.jsx("button",{onClick:P,className:"text-xs px-4 py-2 rounded-full border border-global-stroke-box text-global-inactive hover:text-global-blanc hover:border-global-content-highlight-2nd transition-colors",children:r("dashboard.refresh")})]}),u.jsx("div",{children:u.jsx(rA,{token:t,recommendations:ke,onGroupCreated:P})})]}),u.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8 items-stretch",children:[u.jsxs("div",{className:"xl:col-span-2 flex flex-col gap-8",children:[u.jsx(qC,{token:t,properties:s,onGroupChange:P,onEditStrategy:X,onEditRules:ve,userProfile:e,refreshKey:b}),u.jsxs("div",{className:"bg-global-bg-box border border-global-stroke-box rounded-[14px] p-6 shadow-lg",children:[u.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-xs font-bold uppercase tracking-[0.2em] text-global-inactive mb-1",children:r("dashboard.inventory")}),u.jsxs("h2",{className:"text-xl font-bold text-global-blanc",children:[r("dashboard.propertiesTitle")," (",V.length,")"]})]}),u.jsxs("div",{className:"flex flex-wrap gap-3 w-full sm:w-auto",children:[u.jsxs("select",{value:le,onChange:W=>je(W.target.value),className:"flex-1 sm:flex-none bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-xs text-global-blanc focus:outline-none focus:border-global-content-highlight-2nd transition-colors cursor-pointer",children:[u.jsx("option",{value:"",children:r("dashboard.allGroups")}),a.map(W=>u.jsx("option",{value:W.id,children:W.name},W.id))]}),u.jsxs("select",{value:te,onChange:W=>re(W.target.value),className:"flex-1 sm:flex-none bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-xs text-global-blanc focus:outline-none focus:border-global-content-highlight-2nd transition-colors cursor-pointer",children:[u.jsx("option",{value:"active",children:r("dashboard.status.active")}),u.jsx("option",{value:"archived",children:r("dashboard.status.archived")}),u.jsx("option",{value:"error",children:r("dashboard.status.error")}),u.jsx("option",{value:"",children:r("dashboard.status.all")})]})]})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Ct()})]})]}),u.jsx("div",{className:"xl:col-span-1 flex flex-col h-full",children:u.jsx(tA,{token:t,userProfile:e})})]})]}),w&&u.jsx(GC,{token:t,onClose:rt,onSave:Ce,property:m}),N&&u.jsx(ZC,{token:t,onClose:rt,onSave:Ce,item:x||m,itemType:x?"group":"property",onGroupStrategyUpdated:x?async W=>{await L(),y(_e=>_e+1)}:void 0}),A&&u.jsx(eA,{token:t,onClose:rt,onSave:Ce,item:x||m,itemType:x?"group":"property"}),u.jsx(ho,{isOpen:M.isOpen,onClose:()=>U({isOpen:!1,message:"",onConfirm:null}),onConfirm:M.onConfirm||(()=>{}),title:r("confirmModal.title"),message:M.message,confirmText:r("common.confirm"),cancelText:r("common.cancel")})]})}class Ko extends Error{}Ko.prototype.name="InvalidTokenError";function fA(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function pA(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return fA(e)}catch{return atob(e)}}function uh(t,e){if(typeof t!="string")throw new Ko("Invalid token specified: must be a string");e||(e={});const r=e.header===!0?0:1,n=t.split(".")[r];if(typeof n!="string")throw new Ko(`Invalid token specified: missing part #${r+1}`);let s;try{s=pA(n)}catch(i){throw new Ko(`Invalid token specified: invalid base64 for part #${r+1} (${i.message})`)}try{return JSON.parse(s)}catch(i){throw new Ko(`Invalid token specified: invalid json for part #${r+1} (${i.message})`)}}const gA=({className:t=""})=>u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:t,children:u.jsx("path",{d:"M8 12V4M4 8H12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),mA=({className:t=""})=>u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:t,children:u.jsx("path",{d:"M8 4V12M4 8H12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),xA=({className:t=""})=>u.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:t,children:u.jsx("path",{d:"M8 4V12M4 8H12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})});function vA({token:t,propertyId:e}){const{t:r,language:n}=Vt(),[s,i]=C.useState([]),[a,o]=C.useState(!0),[l,c]=C.useState(""),h=p=>{if(!p)return r("propertyNewsFeed.unknownDate");try{const m=new Date(p),x=new Date-m,v=Math.floor(x/6e4),b=Math.floor(x/36e5),y=Math.floor(x/864e5),w=Math.floor(y/30),S=Math.floor(w/12);return v<60?v>1?r("propertyNewsFeed.timeAgo.minutesPlural",{count:v}):r("propertyNewsFeed.timeAgo.minutes",{count:v}):b<24?b>1?r("propertyNewsFeed.timeAgo.hoursPlural",{count:b}):r("propertyNewsFeed.timeAgo.hours",{count:b}):y<30?y>1?r("propertyNewsFeed.timeAgo.daysPlural",{count:y}):r("propertyNewsFeed.timeAgo.days",{count:y}):w<12?r("propertyNewsFeed.timeAgo.months",{count:w}):S>1?r("propertyNewsFeed.timeAgo.yearsPlural",{count:S}):r("propertyNewsFeed.timeAgo.years",{count:S})}catch{return r("propertyNewsFeed.unknownDate")}};C.useEffect(()=>{(async()=>{if(!t||!e){i([]),o(!1);return}o(!0),c("");try{const m=await aw(e,t,n);i(m)}catch(m){c(r("propertyNewsFeed.error",{message:m.message}))}finally{o(!1)}})()},[t,e,n,r]);const d=(p,m)=>p>0?{color:"text-global-positive-impact",icon:u.jsx(mA,{className:"w-4 h-4 shrink-0"}),sign:`+${p}%`}:p<0?{color:"text-global-negative-impact",icon:u.jsx(gA,{className:"w-4 h-4 shrink-0"}),sign:`${p}%`}:{color:"text-global-mid-impact",icon:u.jsx(xA,{className:"w-4 h-4 shrink-0"}),sign:"0%"},f=()=>a?u.jsx("div",{className:"flex justify-center items-center h-24 w-full",children:u.jsx("div",{className:"w-8 h-8 border-2 border-global-content-highlight-2nd border-t-transparent rounded-full animate-spin"})}):l?u.jsx("p",{className:"text-global-inactive text-left font-p1-font-family text-p1-font-size font-p1-font-weight break-words",children:l}):!s||!Array.isArray(s)||s.length===0?u.jsx("p",{className:"text-global-inactive text-left font-p1-font-family text-p1-font-size font-p1-font-weight break-words",children:r("propertyNewsFeed.noNews")}):u.jsx("div",{className:"flex flex-col gap-3 items-start justify-start w-full",children:s.map((p,m)=>{const g=d(p.impact_percentage||0,p.impact_category),x=h(p.publishedAt||p.date);return u.jsx("div",{className:"bg-global-bg-small-box rounded-[14px] pt-3 pr-4 pb-3 pl-4 flex flex-row gap-3 items-start justify-start self-stretch shrink-0 relative w-full min-w-0",children:u.jsxs("div",{className:"flex flex-col gap-1 items-start justify-start flex-1 relative min-w-0 w-full",children:[u.jsx("div",{className:"text-global-blanc text-left font-h4-font-family text-h4-font-size leading-h4-line-height font-h4-font-weight relative self-stretch break-words w-full",children:p.title||r("propertyNewsFeed.noTitle")}),u.jsx("div",{className:"text-global-inactive text-left font-p2-font-family text-p2-font-size font-p2-font-weight relative self-stretch break-words whitespace-normal w-full",children:p.summary||p.description||r("propertyNewsFeed.noDescription")}),u.jsxs("div",{className:"flex flex-row items-center justify-between self-stretch shrink-0 relative flex-wrap gap-2 w-full",children:[u.jsxs("div",{className:"flex flex-row gap-1 items-center justify-start shrink-0 relative flex-wrap min-w-0",children:[u.jsx("div",{className:`${g.color} text-left font-p1-font-family text-p1-font-size font-p1-font-weight relative whitespace-nowrap`,children:r("propertyNewsFeed.estimatedImpact")}),g.icon,u.jsx("div",{className:`${g.color} text-left font-p1-font-family text-p1-font-size font-p1-font-weight relative whitespace-nowrap`,children:g.sign})]}),u.jsx("div",{className:"text-global-inactive text-left font-p1-font-family text-p1-font-size font-p1-font-weight relative whitespace-nowrap shrink-0",children:x})]})]})},m)})});return u.jsxs("div",{className:"bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box p-6 flex flex-col gap-3 items-start justify-start self-stretch shrink-0 h-[389px] relative w-full min-w-0 overflow-hidden",children:[u.jsx("div",{className:"text-global-blanc text-left font-h2-font-family text-h2-font-size font-h2-font-weight relative w-full shrink-0",children:r("propertyNewsFeed.title")}),u.jsx("div",{className:"flex-1 relative w-full min-h-0 overflow-hidden flex flex-col",children:u.jsx(yo,{className:"flex-1 min-h-0",children:f()})})]})}function bA({token:t,propertyId:e,date:r,currentPrice:n,userProfile:s}){const{t:i,language:a}=Vt(),[o,l]=C.useState(null),[c,h]=C.useState(!1),[d,f]=C.useState("");C.useEffect(()=>{if(!r||!e){l(null),f("");return}(async()=>{h(!0),f(""),l(null);try{const v=await MC(e,r,t);l(v)}catch(v){f(v.message)}finally{h(!1)}})()},[t,e,r]);const p=x=>{if(!x)return null;const v=x.match(/\d+/g);return v?v.length===1?parseFloat(v[0]):v.length>=2?(parseFloat(v[0])+parseFloat(v[1]))/2:null:null},m=x=>{if(x==null)return i("dateAnalysis.na");const v=(s==null?void 0:s.currency)||"EUR",b=a==="en"?"en-US":"fr-FR";return x.toLocaleString(b,{style:"currency",currency:v,minimumFractionDigits:0,maximumFractionDigits:0})},g=()=>{if(!r)return u.jsx("div",{className:"border-solid border-global-stroke-box border-t pt-4 flex flex-row gap-6 items-start justify-center self-stretch shrink-0 relative",children:u.jsx("div",{className:"text-global-inactive text-left font-h4-font-family text-h4-font-size leading-h4-line-height font-h4-font-weight relative self-stretch",children:i("dateAnalysis.selectDate")})});if(c)return u.jsx("div",{className:"flex justify-center items-center h-32",children:u.jsx("div",{className:"w-8 h-8 border-2 border-global-content-highlight-2nd border-t-transparent rounded-full animate-spin"})});if(d)return u.jsx("div",{className:"border-solid border-global-stroke-box border-t pt-4",children:u.jsx("p",{className:"text-sm text-red-400 text-center",children:d})});if(!o)return u.jsx("div",{className:"border-solid border-global-stroke-box border-t pt-4",children:u.jsx("p",{className:"text-global-inactive text-left font-h4-font-family text-h4-font-size leading-h4-line-height font-h4-font-weight",children:i("dateAnalysis.noAnalysis")})});const x=p(o.priceSuggestion);let v=null;if(x!=null&&n!=null){const b=(n-x)/x*100,y=b>5?"text-global-positive-impact":b<-5?"text-global-negative-impact":"text-global-inactive",w=b>0?"+":"";v=u.jsxs("span",{className:`text-sm font-semibold ${y}`,children:["(",w,b.toFixed(0),"% ",i("dateAnalysis.vsMarket"),")"]})}return u.jsxs("div",{className:"border-solid border-global-stroke-box border-t pt-4 flex flex-col gap-3 self-stretch",children:[u.jsxs("div",{children:[u.jsx("h5",{className:"text-xs font-bold text-global-inactive uppercase tracking-wider mb-1",children:i("dateAnalysis.marketDemand")}),u.jsx("p",{className:"text-lg font-semibold text-global-blanc",children:o.marketDemand||i("dateAnalysis.na")})]}),u.jsxs("div",{children:[u.jsx("h5",{className:"text-xs font-bold text-global-inactive uppercase tracking-wider mb-1",children:i("dateAnalysis.currentPrice")}),u.jsxs("div",{className:"flex items-baseline gap-2",children:[u.jsx("p",{className:"text-lg font-semibold text-global-blanc",children:m(n)}),v]})]}),u.jsxs("div",{children:[u.jsx("h5",{className:"text-xs font-bold text-global-inactive uppercase tracking-wider mb-1",children:i("dateAnalysis.priceSuggestion")}),u.jsx("p",{className:"text-lg font-semibold text-global-blanc",children:o.priceSuggestion||i("dateAnalysis.na")})]}),u.jsxs("div",{children:[u.jsx("h5",{className:"text-xs font-bold text-global-inactive uppercase tracking-wider mb-1",children:i("dateAnalysis.localEvents")}),o.events&&o.events.length>0?u.jsx("ul",{className:"list-disc list-inside text-sm text-global-inactive space-y-1 mt-1",children:o.events.map((b,y)=>u.jsx("li",{children:b},y))}):u.jsx("p",{className:"text-sm text-global-inactive mt-1",children:i("dateAnalysis.noEvents")})]}),u.jsxs("div",{children:[u.jsx("h5",{className:"text-xs font-bold text-global-inactive uppercase tracking-wider mb-1",children:i("dateAnalysis.aiSummary")}),u.jsxs("p",{className:"text-sm text-global-inactive italic mt-1",children:['"',o.analysisSummary||i("dateAnalysis.analysisNotAvailable"),'"']})]})]})};return u.jsxs("div",{className:"bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box p-6 flex flex-col gap-3 items-start justify-start shrink-0 w-full relative",children:[u.jsx("div",{className:"text-global-blanc text-left font-h2-font-family text-h2-font-size font-h2-font-weight relative",children:i("dateAnalysis.title")}),g()]})}function yA({className:t="",state:e="add",visibleComponent:r=!0,...n}){return r?u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:t,...n,children:u.jsx("path",{d:"M10 4V16M4 10H16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}):null}function wA({state:t="principal",className:e="",children:r,text:n,onClick:s,...i}){return u.jsxs("button",{type:"button",onClick:s,className:`rounded-[10px] border border-solid border-global-stroke-highlight-2nd pt-2 pr-3 pb-2 pl-3 flex flex-row gap-2 items-center justify-center shrink-0 relative cursor-pointer hover:opacity-90 transition-opacity ${e}`,style:{background:"linear-gradient(90deg, rgba(21, 93, 252, 0.20) 0%, rgba(0, 146, 184, 0.20) 100%)"},...i,children:[u.jsx(yA,{state:"add",visibleComponent:!0,className:"!w-5 !h-5"}),u.jsx("div",{className:"text-global-blanc text-left font-h4-font-family text-h4-font-size leading-h4-line-height font-h4-font-weight relative",children:n||r||"Ajouter Rservation"})]})}const uw=({isOpen:t,onClose:e,title:r="Information",message:n,buttonText:s="OK"})=>t?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50",onClick:e,children:u.jsxs("div",{className:"bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box p-6 flex flex-col gap-4 items-start justify-start w-full max-w-md relative",onClick:i=>i.stopPropagation(),children:[u.jsx("div",{className:"text-global-blanc text-left font-h2-font-family text-h2-font-size font-h2-font-weight relative w-full",children:r}),u.jsx("div",{className:"text-global-inactive text-left font-p1-font-family text-p1-font-size font-p1-font-weight relative w-full",children:n}),u.jsx("div",{className:"flex flex-row gap-3 items-start justify-end self-stretch shrink-0 relative w-full",children:u.jsx("button",{type:"button",onClick:e,className:"inline-flex items-center justify-center gap-2 px-4 py-2 relative rounded-[10px] bg-[linear-gradient(90deg,rgba(21,93,252,1)_0%,rgba(18,161,213,1)_100%)] cursor-pointer border-0 transition-opacity hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[rgba(21,93,252,1)]",children:u.jsx("span",{className:"relative w-fit font-h3-font-family font-h3-font-weight text-global-blanc text-h3-font-size leading-h3-line-height",children:s})})})]})}):null;function _A({token:t,userProfile:e}){const{t:r,language:n}=Vt(),[s,i]=C.useState([]),[a,o]=C.useState([]),[l,c]=C.useState("property"),[h,d]=C.useState(""),[f,p]=C.useState(new Date),[m,g]=C.useState({}),[x,v]=C.useState({}),[b,y]=C.useState(!0),[w,S]=C.useState(""),[N,k]=C.useState(!1),[A,T]=C.useState(!1),[F,I]=C.useState("Europe/Paris"),[B,Z]=C.useState(null),[ke,ae]=C.useState(!0),[Te,he]=C.useState(""),[te,re]=C.useState(""),[le,je]=C.useState(null),[M,U]=C.useState(null),[L,P]=C.useState(!1),[V,ce]=C.useState("booking"),[we,xe]=C.useState(""),[X,ve]=C.useState("Direct"),[Ee,Se]=C.useState(""),[Ce,rt]=C.useState(!0),[We,fe]=C.useState([]),[xt,st]=C.useState(!1),[Zt,Ct]=C.useState(""),[W,_e]=C.useState(null),[Pe,Ze]=C.useState({isOpen:!1,message:"",title:"Information"}),vt=C.useCallback(async()=>{if(t){y(!0),S("");try{const[ne,ye]=await Promise.all([ea(t),fl(t)]);i(ne),o(ye),ne.length>0?(c("property"),d(ne[0].id)):ye.length>0&&(c("group"),d(ye[0].id))}catch(ne){S(r("pricing.errors.loadData",{message:ne.message}))}finally{y(!1)}}},[t,e,r]);C.useEffect(()=>{vt()},[vt]),C.useEffect(()=>{(async()=>{if(!t){ae(!1);return}try{let ye=null;try{const Ne=uh(t);ye=(Ne==null?void 0:Ne.sub)||(Ne==null?void 0:Ne.user_id)||(Ne==null?void 0:Ne.uid)}catch(Ne){console.error("Erreur de dcodage du token:",Ne),ae(!1);return}if(!ye){console.warn("Impossible de rcuprer l'userId depuis le token"),ae(!1);return}const De=await LC(ye,t);T(De.enabled||!1),I(De.timezone||(e==null?void 0:e.timezone)||"Europe/Paris"),Z(De.lastRun||null),re("")}catch(ye){console.error("Erreur lors du chargement de l'tat de gnration automatique:",ye),re(r("pricing.autoPricing.loadError",{message:ye.message||"Impossible de charger l'tat actuel."})),T(!1),I((e==null?void 0:e.timezone)||"Europe/Paris")}finally{ae(!1)}})()},[t,e,r]),C.useEffect(()=>{e!=null&&e.timezone&&A&&e.timezone},[e==null?void 0:e.timezone,A,F]),C.useMemo(()=>{if(!A||!F)return null;try{const ne=new Date;ne.setDate(ne.getDate()+1),ne.setUTCHours(0,0,0,0);const ye=n==="en"?"en-US":"fr-FR";return new Intl.DateTimeFormat(ye,{timeZone:F,day:"numeric",month:"long",hour:"2-digit",minute:"2-digit",hour12:!1}).format(ne)}catch(ne){return console.error("Erreur lors du calcul de la prochaine gnration:",ne),r("pricing.autoPricing.nextGeneration")}},[A,F,n,r]),C.useMemo(()=>{if(!B)return null;try{let ne;if(typeof B=="string"?ne=new Date(B):B instanceof Date?ne=B:B.toDate&&typeof B.toDate=="function"?ne=B.toDate():B.seconds?ne=new Date(B.seconds*1e3):B._seconds?ne=new Date(B._seconds*1e3):ne=new Date(B),isNaN(ne.getTime()))return console.warn("Date de dernire gnration invalide:",B),null;const ye=n==="en"?"en-US":"fr-FR";return new Intl.DateTimeFormat(ye,{timeZone:F||(e==null?void 0:e.timezone)||"Europe/Paris",day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).format(ne)}catch(ne){return console.error("Erreur lors du formatage de la dernire gnration:",ne,B),null}},[B,F,e==null?void 0:e.timezone,n]);const bt=async(ne,ye=null)=>{if(!ne||!t)throw new Error("Proprit ou token manquant.");k(!0),S("");try{const De=await EC(ne,t);if(!De.daily_prices||De.daily_prices.length===0)throw new Error("La stratgie gnre par l'IA est vide ou mal forme.");let Ne=[ne];ye&&ye.properties.forEach($e=>{$e!==ne&&!Ne.includes($e)&&Ne.push($e)});const Oe=new Map;for(const $e of Ne)try{const Ve=await px($e,t);Array.isArray(Ve)?Ve.forEach(Ue=>{Ue.date&&(Ue.is_locked||Ue.isLocked)&&Oe.set(`${$e}-${Ue.date}`,Ue.price)}):typeof Ve=="object"&&Ve!==null&&Object.keys(Ve).forEach(Ue=>{const _=Ve[Ue];_&&(_.isLocked||_.is_locked)&&Oe.set(`${$e}-${Ue}`,_.price)})}catch(Ve){console.warn(`Erreur lors de la rcupration des prix verrouills pour ${$e}:`,Ve)}console.log(`Trouv ${Oe.size} prix verrouills pour ${Ne.length} proprits.`);for(const $e of Ne){const Ve=[];De.daily_prices.forEach(Ue=>{if(/^\d{4}-\d{2}-\d{2}$/.test(Ue.date)&&!(typeof Ue.price!="number"||isNaN(Ue.price))){if(Oe.has(`${$e}-${Ue.date}`)){console.log(`Ignor ${Ue.date} pour ${$e}: prix verrouill.`);return}Ve.push({date:Ue.date,price:Ue.price,isLocked:!1,reason:Ue.reason||"Stratgie IA Automatique"})}}),Ve.length>0&&await gx($e,Ve,t)}return Yr(),{success:!0,propertyCount:Ne.length,summary:De.strategy_summary}}catch(De){throw console.error("Erreur lors de l'application de la stratgie:",De),De}finally{k(!1)}},dt=async ne=>{he(""),re(""),F||e!=null&&e.timezone,T(ne);try{let ye=null;try{const Oe=uh(t);ye=(Oe==null?void 0:Oe.sub)||(Oe==null?void 0:Oe.user_id)||(Oe==null?void 0:Oe.uid)}catch(Oe){console.error("Erreur de dcodage du token:",Oe),re(r("pricing.autoPricing.authError")),T(!ne);return}if(!ye){re(r("pricing.autoPricing.userIdError")),T(!ne);return}const De=(e==null?void 0:e.timezone)||F||"Europe/Paris",Ne=await BC(ye,ne,De,t);if(I(De),ne)try{let Oe,$e=null;if(l==="property")Oe=h;else{const Ue=a.find(_=>_.id===h);if(Ue)if(Ue.syncPrices){if(!Ue.mainPropertyId){re(r("pricing.autoPricing.noMainProperty")),T(!1);return}Oe=Ue.mainPropertyId,$e=Ue}else{if(!Ue.mainPropertyId){re(r("pricing.autoPricing.noMainProperty")),T(!1);return}Oe=Ue.mainPropertyId,$e=null}else if(s.length>0)Oe=s[0].id;else{re(r("pricing.autoPricing.noProperties")),T(!1);return}}if(!Oe){re(r("pricing.autoPricing.invalidSelection")),T(!1);return}he(r("pricing.autoPricing.generating"));const Ve=await bt(Oe,$e);he(r("pricing.autoPricing.success",{count:Ve.propertyCount,timezone:De}))}catch(Oe){console.error("Erreur lors de la gnration immdiate des prix:",Oe),re(r("pricing.autoPricing.error",{message:Oe.message}))}else he(r("pricing.autoPricing.disabled"));setTimeout(()=>{he("")},5e3)}catch(ye){console.error("Erreur lors de la mise  jour de la gnration automatique:",ye),re(r("pricing.autoPricing.saveError",{message:ye.message||"Impossible de sauvegarder la prfrence."})),T(!ne),setTimeout(()=>{re("")},7e3)}},Yr=C.useCallback(async()=>{var De;if(!h||b)return;let ne,ye;if(l==="property")ne=h,ye=s.find(Ne=>Ne.id===h);else{const Ne=a.find(Oe=>Oe.id===h);if(!Ne)return;ne=Ne.mainPropertyId||((De=Ne.properties)==null?void 0:De[0]),ye=s.find(Oe=>Oe.id===ne)}if(!ne||!ye){g({}),v({});return}Xr(ne);try{const Ne=f.getFullYear(),Oe=f.getMonth(),$e=`${Ne}-${String(Oe+1).padStart(2,"0")}-01`,Ve=new Date(Ne,Oe+1,0).getDate(),Ue=`${Ne}-${String(Oe+1).padStart(2,"0")}-${String(Ve).padStart(2,"0")}`,_=await px(ne,t,$e,Ue),R={};Array.isArray(_)?_.forEach(O=>{O.date&&(R[O.date]=O.price)}):typeof _=="object"&&_!==null&&Object.keys(_).forEach(O=>{_[O]&&typeof _[O]=="object"?R[O]=_[O].price:R[O]=_[O]}),g(R);const E=await CC(ne,Ne,Oe,t),j={};E.forEach(O=>{let D=new Date(O.startDate);const H=new Date(O.endDate);for(;D<H;){const J=D.toISOString().split("T")[0];j[J]=O,D.setDate(D.getDate()+1)}}),v(j)}catch(Ne){console.error("Erreur de chargement des donnes calendrier:",Ne),S(r("pricing.errors.calendar",{message:Ne.message})),g({}),v({})}},[h,l,f,t,s,a,b,r]);C.useEffect(()=>{Yr()},[Yr]);const Xr=C.useCallback(async ne=>{if(!ne||!t){fe([]);return}st(!0),Ct("");try{const ye=await aw(ne,t);fe(ye)}catch(ye){Ct(r("pricing.errors.news",{message:ye.message}))}finally{st(!1)}},[t,r]),Tn=ne=>{P(!0),je(ne),U(ne),_e(ne),xe(""),Se(""),rt(!0)},qr=ne=>{if(L){const ye=new Date(le),De=new Date(ne);let Ne=new Date(Math.min(ye,De));const Oe=new Date(Math.max(ye,De));if(V==="booking"){let $e=!1;for(;Ne<=Oe;){const Ve=Ne.toISOString().split("T")[0];if(x[Ve]){$e=!0;break}Ne.setDate(Ne.getDate()+1)}$e&&console.warn("La slection traverse une date rserve.")}De<ye?(U(le),je(ne)):U(ne)}},Ar=()=>{P(!1)};C.useEffect(()=>(window.addEventListener("mouseup",Ar),()=>window.removeEventListener("mouseup",Ar)),[]);const ar=()=>{je(null),U(null),xe(""),ve("Direct"),Se(""),rt(!0),S("")},Kn=async ne=>{ne.preventDefault();let ye=h;if(l==="group"){const R=a.find(E=>E.id===h);if(!R||!R.mainPropertyId){S(r("pricing.errors.bookingNoMainProperty"));return}ye=R.mainPropertyId}if(!le||!M||!we||!ye)return;const De=parseInt(we,10);if(isNaN(De)||De<=0){S(r("pricing.errors.bookingInvalidPrice"));return}const Ne=new Date(le),Oe=new Date(M);let $e=new Date(Ne);for(;$e<=Oe;){const R=$e.toISOString().split("T")[0];if(x[R]){S(r("pricing.errors.bookingDateError",{date:R}));return}$e.setDate($e.getDate()+1)}const Ve=new Date(Oe);Ve.setDate(Ve.getDate()+1);const Ue=Math.round((Ve-Ne)/(1e3*60*60*24));if(Ue<=0){S(r("pricing.errors.bookingEndDateError"));return}const _={startDate:le,endDate:Ve.toISOString().split("T")[0],pricePerNight:De,totalPrice:De*Ue,channel:X,bookedAt:new Date().toISOString()};y(!0),S("");try{await TC(ye,_,t),Ze({isOpen:!0,message:r("pricing.errors.bookingSuccess"),title:r("pricing.modal.success")}),ar(),Yr()}catch(R){S(r("pricing.errors.bookingError",{message:R.message}))}finally{y(!1)}},hs=async ne=>{ne.preventDefault();let ye=[];if(l==="property")ye=[h];else{const Ne=a.find(Oe=>Oe.id===h);if(!Ne){S(r("pricing.errors.groupNotFound"));return}Ne.syncPrices?ye=Ne.properties||[]:(Ze({isOpen:!0,message:r("pricing.errors.syncNotEnabledPrice"),title:r("pricing.modal.information")}),ye=[Ne.mainPropertyId].filter(Boolean))}if(!le||!M||!Ee||ye.length===0){S(r("pricing.errors.bookingRequired"));return}const De=parseInt(Ee,10);if(isNaN(De)||De<0){S(r("pricing.errors.invalidPrice"));return}y(!0),S("");try{let Ne=new Date(le);const Oe=new Date(M);for(const $e of ye){const Ve=[];let Ue=new Date(le);for(;Ue<=Oe;){const _=Ue.toISOString().split("T")[0];Ve.push({date:_,price:De,isLocked:Ce,reason:"Manuel"}),Ue.setDate(Ue.getDate()+1)}Ve.length>0&&await gx($e,Ve,t)}Ze({isOpen:!0,message:r("pricing.errors.priceSuccess",{count:ye.length}),title:r("pricing.modal.success")}),ar(),Yr()}catch(Ne){S(r("pricing.errors.priceError",{message:Ne.message}))}finally{y(!1)}},Jr=C.useMemo(()=>{if(l==="property")return s.find(ne=>ne.id===h);{const ne=a.find(ye=>ye.id===h);return ne?s.find(ye=>ye.id===ne.mainPropertyId)||s.find(ye=>{var De;return ye.id===((De=ne.properties)==null?void 0:De[0])}):null}},[h,l,s,a]),gn=C.useMemo(()=>{var ne;if(l==="property")return h;{const ye=a.find(De=>De.id===h);return(ye==null?void 0:ye.mainPropertyId)||((ne=ye==null?void 0:ye.properties)==null?void 0:ne[0])}},[h,l,a]),Cn=C.useMemo(()=>!W||!Jr?null:m[W]??Jr.daily_revenue,[W,Jr,m]),An=({className:ne=""})=>u.jsx("div",{className:`relative w-5 h-5 ${ne}`,role:"img","aria-label":"Previous month",children:u.jsx("svg",{className:"absolute w-full h-full",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:u.jsx("path",{d:"M12.5 5L7.5 10L12.5 15",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),Yn=({className:ne=""})=>u.jsx("div",{className:`relative w-5 h-5 ${ne}`,role:"img","aria-label":"Next month",children:u.jsx("svg",{className:"absolute w-full h-full",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:u.jsx("path",{d:"M7.5 5L12.5 10L7.5 15",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}),Xn=()=>{const ne=Jr;if(b||!h||!ne)return u.jsx("div",{className:"grid grid-cols-7 gap-3",children:u.jsx("p",{className:"text-center p-4 text-global-inactive col-span-7",children:r("pricing.loading")})});const ye=f.getFullYear(),De=f.getMonth(),Ne=[],Oe=new Date;Oe.setHours(0,0,0,0);const $e=`${Oe.getFullYear()}-${String(Oe.getMonth()+1).padStart(2,"0")}-${String(Oe.getDate()).padStart(2,"0")}`,Ue=new Date(ye,De,1).getDay(),_=new Date(ye,De+1,0).getDate(),R=Ue===0?6:Ue-1,E=new Date(ye,De,0),j=E.getDate();for(let O=R-1;O>=0;O--){const D=j-O;`${E.getFullYear()}${String(E.getMonth()+1).padStart(2,"0")}${String(D).padStart(2,"0")}`,Ne.push(u.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center bg-global-bg-small-box rounded-[10px] border border-solid border-global-stroke-box relative",style:{opacity:.3},children:u.jsx("div",{className:"text-global-inactive relative w-fit font-h3-font-family font-h3-font-weight text-h3-font-size text-center leading-h3-line-height",children:D})},`prev-${D}`))}for(let O=1;O<=_;O++){const D=`${ye}-${String(De+1).padStart(2,"0")}-${String(O).padStart(2,"0")}`,H=!!x[D],J=H?x[D].pricePerNight:m[D]??ne.daily_revenue,G=(e==null?void 0:e.currency)||"EUR",K=J!=null?`${Math.round(J)}${G==="EUR"?"":G==="USD"?"$US":G}`:"",Y=D<$e;let ie="bg-global-bg-small-box",de="border-global-stroke-box",z="text-global-blanc",ee=!1,oe=!1,q=1;if(le&&M&&!Y){const pe=new Date(D).getTime(),Le=new Date(le).getTime(),He=new Date(M).getTime();!isNaN(Le)&&!isNaN(He)&&pe>=Le&&pe<=He&&(ee=!0,V==="booking"?(ie="bg-calendrierbg-bleu",de="border-calendrierstroke-bleu"):(ie="bg-calendrierbg-vert",de="border-calendrierstroke-vert"))}H?(ie="bg-calendrierbg-orange",de="border-calendrierstroke-orange",oe=!0):Y?(oe=!0,q=.4,z="text-global-inactive"):!ee&&!H&&(ie="bg-global-bg-small-box",de="border-global-stroke-box"),Ne.push(u.jsxs("div",{"data-date":D,className:`w-full h-full flex flex-col items-center justify-center ${K?"gap-1":""} ${ie} rounded-[10px] border border-solid ${de} ${z} ${oe?"cursor-not-allowed":"cursor-pointer"} transition-colors relative`,style:{opacity:q},onMouseDown:oe?void 0:()=>Tn(D),onMouseEnter:oe?void 0:()=>qr(D),children:[u.jsx("div",{className:`${z} relative w-fit font-h3-font-family font-h3-font-weight text-h3-font-size text-center leading-h3-line-height`,children:O}),K&&u.jsx("div",{className:`relative w-fit font-h4-font-family font-h4-font-weight ${Y?"text-global-inactive":"text-global-blanc"} text-h4-font-size text-center leading-h4-line-height whitespace-nowrap`,children:K})]},D))}return Ne},Fr=(e==null?void 0:e.currency)||"EUR",qn=()=>u.jsxs("form",{onSubmit:Kn,className:"flex flex-col gap-3 text-left",children:[u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-medium text-global-inactive mb-1 block",children:r("pricing.selectedPeriod")}),u.jsxs("p",{className:"text-sm font-medium text-global-blanc bg-global-bg-small-box border border-global-stroke-box rounded-[10px] p-2 mt-1",children:[le," ",n==="en"?"to":"au"," ",M]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-xs font-medium text-global-inactive mb-1 block",children:[r("pricing.pricePerNight")," (",Fr,")"]}),u.jsx("input",{type:"number",value:we,onChange:ne=>xe(ne.target.value),className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc placeholder:text-global-inactive focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd mt-1",placeholder:"Ex: 150",required:!0,min:"1"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-medium text-global-inactive mb-1 block",children:r("pricing.channel")}),u.jsxs("select",{value:X,onChange:ne=>ve(ne.target.value),className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd mt-1",children:[u.jsx("option",{value:"Direct",children:r("pricing.channels.direct")}),u.jsx("option",{value:"Airbnb",children:r("pricing.channels.airbnb")}),u.jsx("option",{value:"Booking",children:r("pricing.channels.booking")}),u.jsx("option",{value:"VRBO",children:r("pricing.channels.vrbo")}),u.jsx("option",{value:"Autre",children:r("pricing.channels.other")})]})]}),u.jsxs("div",{className:"flex gap-2 pt-2",children:[u.jsx("button",{type:"submit",disabled:b,className:"flex-grow bg-gradient-to-r from-[#155dfc] to-[#12a1d5] hover:opacity-90 text-white font-h3-font-family font-h3-font-weight text-h3-font-size py-2 px-4 rounded-[10px] transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:r(b?"pricing.save":"pricing.saveBooking")}),u.jsx("button",{type:"button",onClick:ar,className:"px-3 py-2 bg-transparent border border-global-stroke-highlight-2nd text-global-inactive hover:text-global-blanc rounded-[10px] text-xs transition-colors",children:r("pricing.cancel")})]})]}),Jn=()=>u.jsxs("form",{onSubmit:hs,className:"flex flex-col gap-3 text-left",children:[l==="group"&&u.jsx("p",{className:"text-xs text-global-inactive font-p1-font-family",children:r("pricing.groupPriceNote")}),u.jsxs("div",{children:[u.jsx("label",{className:"text-xs font-medium text-global-inactive mb-1 block",children:r("pricing.selectedPeriod")}),u.jsxs("p",{className:"text-sm font-medium text-global-blanc bg-global-bg-small-box border border-global-stroke-box rounded-[10px] p-2 mt-1",children:[le," ",n==="en"?"to":"au"," ",M]})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"text-xs font-medium text-global-inactive mb-1 block",children:[r("pricing.newPricePerNight")," (",Fr,")"]}),u.jsx("input",{type:"number",value:Ee,onChange:ne=>Se(ne.target.value),className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc placeholder:text-global-inactive focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd mt-1",placeholder:"Ex: 175",required:!0,min:"0"})]}),u.jsxs("div",{className:"flex items-center gap-2 pt-1",children:[u.jsx("input",{type:"checkbox",id:"lockPrice",checked:Ce,onChange:ne=>rt(ne.target.checked),className:"w-5 h-5 rounded border border-global-content-highlight-2nd bg-transparent text-global-content-highlight-2nd focus:ring-2 focus:ring-global-content-highlight-2nd cursor-pointer"}),u.jsx("label",{htmlFor:"lockPrice",className:"text-xs text-global-inactive font-p1-font-family cursor-pointer",children:r("pricing.lockPrice")})]}),u.jsxs("div",{className:"flex gap-2 pt-2",children:[u.jsx("button",{type:"submit",disabled:b,className:"flex-grow bg-gradient-to-r from-[#155dfc] to-[#12a1d5] hover:opacity-90 text-white font-h3-font-family font-h3-font-weight text-h3-font-size py-2 px-4 rounded-[10px] transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:r(b?"pricing.save":"pricing.applyPrice")}),u.jsx("button",{type:"button",onClick:ar,className:"px-3 py-2 bg-transparent border border-global-stroke-highlight-2nd text-global-inactive hover:text-global-blanc rounded-[10px] text-xs transition-colors",children:r("pricing.cancel")})]})]}),Qn=ne=>{const[ye,De]=ne.target.value.split("-");if(!ye||!De){c("property"),d("");return}c(ye),d(De),ar(),_e(null)},Zn=()=>h?`${l}-${h}`:"";return u.jsxs("div",{className:"relative min-h-screen",children:[u.jsx("div",{className:"fixed inset-0",style:{background:"linear-gradient(135deg, rgba(2,6,24,1) 0%, rgba(22,36,86,1) 45%, rgba(15,23,43,1) 100%)",zIndex:0}}),u.jsxs("div",{className:"relative z-10 space-y-6 p-4 md:p-6 lg:p-8",children:[w&&u.jsx("p",{className:"bg-red-900/50 text-red-300 p-3 rounded-md text-sm",children:w}),u.jsxs("div",{className:"md:flex gap-6",children:[u.jsxs("div",{className:"flex-grow self-stretch p-8 bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box flex flex-col items-start gap-6",children:[u.jsxs("header",{className:"flex items-center justify-between relative self-stretch w-full flex-[0_0_auto]",children:[u.jsxs("select",{id:"view-selector",value:Zn(),onChange:Qn,className:"w-80 h-9 bg-global-bg-small-box rounded-lg border border-solid border-global-stroke-box px-3 py-0 text-center font-h3-font-family font-h3-font-weight text-global-blanc text-h3-font-size leading-h3-line-height appearance-none cursor-pointer focus:outline-none hover:opacity-90 transition-opacity",disabled:b||N,children:[u.jsx("option",{value:"",children:r("pricing.select")}),u.jsx("optgroup",{label:r("pricing.groups"),children:a.map(ne=>u.jsx("option",{value:`group-${ne.id}`,children:ne.name},ne.id))}),u.jsx("optgroup",{label:r("pricing.individualProperties"),children:s.map(ne=>u.jsx("option",{value:`property-${ne.id}`,children:ne.address},ne.id))})]}),u.jsxs("nav",{className:"inline-flex h-8 items-center gap-3 relative flex-[0_0_auto]","aria-label":"Month navigation",children:[u.jsx("button",{id:"prev-month-btn",onClick:()=>{p(ne=>new Date(ne.getFullYear(),ne.getMonth()-1,1)),ar(),_e(null)},className:"cursor-pointer hover:opacity-70 transition-opacity","aria-label":"Previous month",children:u.jsx(An,{})}),u.jsx("time",{className:"relative w-[150px] font-h4-font-family font-h4-font-weight text-global-blanc text-h4-font-size text-center leading-h4-line-height",children:f.toLocaleDateString(n==="en"?"en-US":"fr-FR",{month:"long",year:"numeric"})}),u.jsx("button",{id:"next-month-btn",onClick:()=>{p(ne=>new Date(ne.getFullYear(),ne.getMonth()+1,1)),ar(),_e(null)},className:"cursor-pointer hover:opacity-70 transition-opacity","aria-label":"Next month",children:u.jsx(Yn,{})})]})]}),u.jsxs("section",{className:"flex flex-col items-start gap-3 relative self-stretch w-full flex-[0_0_auto]",children:[u.jsx("header",{className:"flex items-center justify-between px-9 py-0 relative self-stretch w-full flex-[0_0_auto]",children:(n==="en"?["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"]).map((ne,ye)=>u.jsx("div",{className:"relative w-fit mt-[-1.00px] font-p1-font-family font-p1-font-weight text-global-inactive text-p1-font-size text-center leading-p1-line-height",children:ne},ye))}),u.jsxs("div",{id:"calendar-grid",className:"self-stretch h-[458px] grid grid-cols-7 gap-2 select-none relative",children:[Xn(),N&&u.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm rounded-[10px] flex items-center justify-center z-10",children:u.jsxs("div",{className:"bg-global-bg-box border border-global-content-highlight-2nd rounded-[10px] p-4 flex flex-col items-center gap-3",children:[u.jsxs("svg",{className:"animate-spin w-8 h-8 text-global-content-highlight-2nd",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u.jsx("span",{className:"text-global-blanc text-sm font-h3-font-family font-h3-font-weight",children:r("pricing.strategy.generating")})]})})]})]}),u.jsxs("section",{className:"flex items-start justify-center gap-6 pt-4 pb-0 px-0 self-stretch w-full border-t border-solid border-global-stroke-box relative flex-[0_0_auto]",role:"region","aria-label":"Calendar legends",children:[u.jsxs("div",{className:"inline-flex items-center gap-2 relative flex-[0_0_auto]",children:[u.jsx("div",{className:"w-3 h-3 bg-calendrierbg-vert rounded border border-solid border-calendrierstroke-vert relative",role:"img","aria-label":"Slection prix indicator"}),u.jsx("span",{className:"relative w-fit mt-[-1.00px] font-p1-font-family font-p1-font-weight text-global-inactive text-p1-font-size leading-p1-line-height",children:r("pricing.legend.priceSelection")})]}),u.jsxs("div",{className:"inline-flex items-center gap-2 relative flex-[0_0_auto]",children:[u.jsx("div",{className:"w-3 h-3 bg-calendrierbg-orange rounded border border-solid border-calendrierstroke-orange relative",role:"img","aria-label":"Rserv indicator"}),u.jsx("span",{className:"relative w-fit mt-[-1.00px] font-p1-font-family font-p1-font-weight text-global-inactive text-p1-font-size leading-p1-line-height",children:r("pricing.legend.booked")})]}),u.jsxs("div",{className:"inline-flex items-center gap-2 relative flex-[0_0_auto]",children:[u.jsx("div",{className:"w-3 h-3 bg-calendrierbg-bleu rounded border border-solid border-calendrierstroke-bleu relative",role:"img","aria-label":"Slection rsa indicator"}),u.jsx("span",{className:"relative w-fit mt-[-1.00px] font-p1-font-family font-p1-font-weight text-global-inactive text-p1-font-size leading-p1-line-height",children:r("pricing.legend.bookingSelection")})]})]})]}),u.jsxs("div",{id:"edit-panel",className:"flex flex-col gap-1 items-start justify-start self-stretch shrink-0 relative w-full md:w-[394px]",children:[u.jsx(bA,{token:t,date:W,propertyId:gn,currentPrice:Cn,userProfile:e}),u.jsxs("div",{className:"bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box p-6 flex flex-col gap-3 items-start justify-start shrink-0 w-full relative",children:[u.jsx("div",{className:"text-global-blanc text-left font-h2-font-family text-h2-font-size font-h2-font-weight relative",children:r("pricing.strategy.title")}),u.jsx("div",{className:"text-global-inactive text-left font-h4-font-family text-h4-font-size leading-h4-line-height font-h4-font-weight relative self-stretch",children:r("pricing.strategy.description")}),N&&u.jsxs("div",{className:"w-full bg-global-bg-small-box border border-global-content-highlight-2nd rounded-[10px] p-4 flex items-center gap-3 animate-pulse",children:[u.jsx("div",{className:"relative w-5 h-5 shrink-0",children:u.jsxs("svg",{className:"animate-spin w-5 h-5 text-global-content-highlight-2nd",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),u.jsxs("div",{className:"flex flex-col gap-1 flex-1",children:[u.jsx("span",{className:"text-global-blanc text-sm font-h3-font-family font-h3-font-weight",children:r("pricing.strategy.generating")}),u.jsx("span",{className:"text-global-inactive text-xs font-p1-font-family",children:r("pricing.strategy.generatingDescription")})]})]}),Te&&!N&&u.jsxs("div",{className:"w-full bg-green-900/20 border border-green-500/50 rounded-[10px] p-3 flex items-start gap-2",children:[u.jsx("svg",{className:"w-5 h-5 text-green-400 shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("span",{className:"text-green-300 text-sm font-p1-font-family",children:Te})]}),te&&!N&&u.jsxs("div",{className:"w-full bg-red-900/20 border border-red-500/50 rounded-[10px] p-3 flex items-start gap-2",children:[u.jsx("svg",{className:"w-5 h-5 text-red-400 shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),u.jsx("span",{className:"text-red-300 text-sm font-p1-font-family",children:te})]}),u.jsxs("div",{className:`bg-global-stroke-highlight-2nd rounded-[10px] border border-solid border-global-content-highlight-2nd pt-2 pr-3 pb-2 pl-3 flex flex-row gap-3 items-center justify-center self-stretch shrink-0 h-[46px] relative transition-opacity ${N?"opacity-50 cursor-not-allowed":A?"opacity-100 cursor-pointer hover:opacity-90":"opacity-70 cursor-pointer hover:opacity-90"}`,onClick:N?void 0:()=>dt(!A),children:[u.jsx("div",{className:"relative w-5 h-5 shrink-0",children:A?u.jsx("div",{className:"w-5 h-5 bg-global-content-highlight-2nd rounded flex items-center justify-center",children:u.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:u.jsx("path",{d:"M10 3L4.5 8.5L2 6",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}):u.jsx("div",{className:"w-5 h-5 border border-global-content-highlight-2nd rounded bg-transparent"})}),u.jsx("div",{className:"text-global-blanc text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative",children:r("pricing.strategy.automate")})]}),u.jsxs("div",{className:"flex flex-row gap-3 items-start justify-start self-stretch shrink-0 relative",children:[u.jsx(wA,{state:"principal",text:r("pricing.strategy.addBooking"),onClick:N?void 0:()=>{ce("booking"),xe(""),ve("Direct"),Se(""),rt(!0)},className:N?"opacity-50 cursor-not-allowed":V==="booking"?"opacity-100":"opacity-70",disabled:N}),u.jsxs("button",{onClick:N?void 0:()=>{ce("price"),xe(""),ve("Direct"),Se(""),rt(!0)},disabled:N,className:`inline-flex items-center justify-center gap-2 px-3 py-2 relative flex-1 rounded-[10px] border border-solid border-global-stroke-highlight-2nd transition-opacity ${N?"opacity-50 cursor-not-allowed bg-transparent text-global-inactive":V==="price"?"bg-global-stroke-highlight-2nd text-global-blanc cursor-pointer hover:opacity-90":"bg-transparent text-global-inactive cursor-pointer hover:opacity-90"}`,children:[u.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:"w-5 h-5",children:[u.jsx("path",{d:"M10 2L2 7L10 12L18 7L10 2Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M2 13L10 18L18 13",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M2 10L10 15L18 10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),u.jsx("span",{className:"relative w-fit font-h3-font-family font-h3-font-weight text-h3-font-size leading-h3-line-height",children:r("pricing.strategy.setPrice")})]})]}),u.jsx("div",{className:"border-t border-solid border-global-stroke-box pt-4 flex flex-row gap-6 items-start justify-center self-stretch shrink-0 relative",children:le?u.jsx("div",{className:"self-stretch w-full",children:V==="booking"?qn():Jn()}):u.jsx("div",{className:"text-global-inactive text-left font-h4-font-family text-h4-font-size leading-h4-line-height font-h4-font-weight relative self-stretch",children:r("pricing.selectPeriod")})})]}),u.jsx(vA,{token:t,propertyId:gn})]})]})]}),u.jsx(uw,{isOpen:Pe.isOpen,onClose:()=>Ze({isOpen:!1,message:"",title:r("pricing.modal.information")}),title:Pe.title,message:Pe.message,buttonText:r("pricing.modal.ok")})]})}function SA({token:t,pmsType:e,onClose:r}){const{t:n}=Vt(),[s,i]=C.useState(!0),[a,o]=C.useState(!1),[l,c]=C.useState(null),[h,d]=C.useState([]),[f,p]=C.useState([]),[m,g]=C.useState({isOpen:!1,message:"",title:"Information"});C.useEffect(()=>{(async()=>{i(!0),c(null);try{const[w,S]=await Promise.all([hC(t),ea(t)]);d(w||[]),p(S||[])}catch(w){c(w.message)}finally{i(!1)}})()},[t]);const x=C.useMemo(()=>{if(s)return null;const y=new Set(f.map(N=>N.pmsId).filter(Boolean)),w=[],S=[];for(const N of h)y.has(N.pmsId)?S.push(N):w.push(N);return{newProperties:w,syncedProperties:S}},[s,h,f]),v=async()=>{if(!x||x.newProperties.length===0||!e){c(n("settings.integration.syncModal.noPropertiesToImport"));return}o(!0),c(null);try{const y=await fC(x.newProperties,e,t);let w=y.message||n("settings.integration.syncModal.importSuccess");(y.reservationsImported>0||y.reservationsUpdated>0)&&(w+=`

${y.reservationsImported} ${n("settings.integration.syncModal.reservationsImported")}`,y.reservationsUpdated>0&&(w+=`
${y.reservationsUpdated} ${n("settings.integration.syncModal.reservationsUpdated")}`)),g({isOpen:!0,message:w,title:n("settings.integration.syncModal.success")}),setTimeout(()=>{r(!0)},2e3)}catch(y){const w=y.message||"";if(w.includes("LIMIT_EXCEEDED"))if(window.showLimitExceededModal)try{const S=JSON.parse(w.split("LIMIT_EXCEEDED")[1]||"{}");window.showLimitExceededModal({currentCount:S.currentCount||10,maxAllowed:S.maxAllowed||10})}catch{window.showLimitExceededModal({currentCount:10,maxAllowed:10})}else c(n("billing.limitExceededMessage")+" "+n("billing.limitExceededAction"));else c(w||n("settings.integration.syncModal.importError"))}finally{o(!1)}},b=()=>s?u.jsxs("div",{className:"flex flex-col items-center justify-center h-48",children:[u.jsx("div",{className:"loader"}),u.jsx("p",{className:"text-text-muted mt-4",children:n("settings.integration.syncModal.analyzing")})]}):l?u.jsx("p",{className:"text-sm text-red-400 bg-red-900/50 p-3 rounded-md",children:l}):x?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsxs("h4",{className:"font-semibold text-text-primary",children:[n("settings.integration.syncModal.newProperties")," (",x.newProperties.length,")"]}),x.newProperties.length>0?u.jsx("ul",{className:"list-disc list-inside text-sm text-text-secondary max-h-32 overflow-y-auto bg-bg-muted p-2 rounded-md mt-1",children:x.newProperties.map(y=>u.jsxs("li",{children:[y.name," (ID: ",y.pmsId,")"]},y.pmsId))}):u.jsx("p",{className:"text-sm text-text-muted mt-1",children:n("settings.integration.syncModal.noNewProperties")})]}),u.jsxs("div",{children:[u.jsxs("h4",{className:"font-semibold text-text-primary",children:[n("settings.integration.syncModal.syncedProperties")," (",x.syncedProperties.length,")"]}),u.jsx("p",{className:"text-sm text-text-muted mt-1",children:x.syncedProperties.length>0?n("settings.integration.syncModal.alreadySynced"):n("settings.integration.syncModal.noneSynced")})]})]}):null;return u.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50",children:[u.jsxs("div",{className:"bg-bg-secondary rounded-lg shadow-xl w-full max-w-lg p-6 max-h-[90vh] flex flex-col",children:[u.jsx("h3",{className:"text-xl font-bold mb-6 text-text-primary shrink-0",children:n("settings.integration.syncModal.title")}),u.jsx(yo,{className:"flex-1 min-h-0",children:b()}),u.jsxs("div",{className:"flex justify-end gap-4 pt-6 mt-6 border-t border-border-primary shrink-0",children:[u.jsx("button",{type:"button",onClick:()=>r(!1),className:"px-4 py-2 font-semibold text-text-secondary bg-bg-muted rounded-md hover:bg-border-primary",children:n("settings.integration.syncModal.close")}),u.jsx("button",{type:"button",onClick:v,disabled:s||a||!x||x.newProperties.length===0,className:"px-4 py-2 font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-500",children:a?n("settings.integration.syncModal.importing"):`${n("settings.integration.syncModal.import")} ${(x==null?void 0:x.newProperties.length)||0} ${n("settings.integration.syncModal.newPropertiesCount")}`})]})]}),u.jsx(uw,{isOpen:m.isOpen,onClose:()=>g({isOpen:!1,message:"",title:"Information"}),title:m.title,message:m.message,buttonText:"OK"})]})}const kA=t=>({smoobu:{name:"Smoobu",type:"apikey",fields:[{name:"token",labelKey:"settings.integration.fields.smoobuToken",type:"password"}]},beds24:{name:"Beds24",type:"apikey",fields:[{name:"apiKey",labelKey:"settings.integration.fields.beds24ApiKey",type:"password"},{name:"propKey",labelKey:"settings.integration.fields.beds24PropKey",type:"password"}]},cloudbeds:{name:"Cloudbeds",type:"oauth",fields:[]}});function EA({token:t,currentIntegration:e,onConnectionUpdate:r}){const{t:n}=Vt(),[s,i]=C.useState("smoobu"),[a,o]=C.useState({}),[l,c]=C.useState(!1),[h,d]=C.useState(!1),[f,p]=C.useState({type:"",text:""}),[m,g]=C.useState({type:"",text:""}),[x,v]=C.useState({isOpen:!1,message:"",onConfirm:null}),b=kA();C.useEffect(()=>{e&&(i(e.type),o(e.credentials||{}))},[e]);const y=(F,I)=>{o(B=>({...B,[F]:I})),p({type:"",text:""}),g({type:"",text:""})},w=F=>{i(F.target.value),o({}),p({type:"",text:""}),g({type:"",text:""})},S=async()=>{c(!0),p({type:"loading",text:n("settings.integration.testInProgress")}),g({type:"",text:""});try{const F=await cC(s,a,t);p({type:"success",text:F.message||n("settings.integration.connectionSuccess")})}catch(F){p({type:"error",text:`${n("settings.integration.testFailed")}: ${F.message}`})}finally{c(!1)}},N=async F=>{F.preventDefault(),c(!0),g({type:"loading",text:n("settings.integration.saving")}),p({type:"",text:""});try{const I=await uC(s,a,t);g({type:"success",text:I.message}),r()}catch(I){g({type:"error",text:`${n("settings.integration.connectionFailed")}: ${I.message}`})}finally{c(!1)}},k=async()=>{v({isOpen:!0,message:`${n("settings.integration.disconnectConfirm")} ${e.type} ?`,onConfirm:async()=>{c(!0),g({type:"loading",text:n("settings.integration.disconnecting")});try{await dC(e.type,t),g({type:"success",text:n("settings.integration.disconnectSuccess")}),o({}),r()}catch(F){g({type:"error",text:`${n("settings.integration.disconnectFailed")}: ${F.message}`})}finally{c(!1)}}})},A=()=>{var F;return e?u.jsxs("div",{className:"space-y-4",children:[u.jsxs("p",{className:"text-sm text-green-400",children:[n("settings.integration.connected")," ",u.jsx("span",{className:"font-bold",children:((F=b[e.type])==null?void 0:F.name)||e.type})]}),u.jsx("button",{type:"button",onClick:()=>d(!0),disabled:l,className:"w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-500",children:n("settings.integration.synchronizeProperties")}),u.jsx("button",{type:"button",onClick:k,disabled:l,className:"w-full text-sm text-red-400 hover:text-red-300 disabled:text-gray-500",children:n("settings.integration.disconnect")})]}):u.jsx("p",{className:"text-sm text-text-muted",children:n("settings.integration.notConnected")})},T=()=>{const F=b[s];return u.jsxs("form",{onSubmit:N,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"pms-select",className:"block text-sm font-medium text-text-secondary",children:n("settings.integration.choosePMS")}),u.jsxs("select",{id:"pms-select",value:s,onChange:w,className:"w-full form-input mt-1",children:[u.jsx("option",{value:"smoobu",children:"Smoobu"}),u.jsx("option",{value:"beds24",children:"Beds24"}),u.jsx("option",{value:"cloudbeds",children:"Cloudbeds"})]})]}),F.type==="apikey"&&F.fields.map(I=>u.jsxs("div",{children:[u.jsx("label",{htmlFor:I.name,className:"block text-sm font-medium text-text-secondary",children:n(I.labelKey)}),u.jsx("input",{type:I.type||"text",id:I.name,value:a[I.name]||"",onChange:B=>y(I.name,B.target.value),className:"w-full form-input mt-1",required:!0})]},I.name)),F.type==="oauth"&&u.jsxs("button",{type:"button",className:"w-full px-4 py-2 font-semibold text-white bg-gray-600 rounded-md hover:bg-gray-700",onClick:()=>g({type:"error",text:n("settings.integration.oauthNotImplemented")}),children:[n("settings.integration.connectWith")," ",F.name]}),F.type==="apikey"&&u.jsxs("div",{className:"flex gap-4",children:[u.jsx("button",{type:"button",onClick:S,disabled:l,className:"flex-1 px-4 py-2 font-semibold text-text-primary bg-bg-muted rounded-md hover:bg-border-primary disabled:opacity-50",children:l&&f.text?"...":n("settings.integration.test")}),u.jsx("button",{type:"submit",disabled:l,className:"flex-1 px-4 py-2 font-semibold text-white bg-green-600 rounded-md hover:bg-green-700 disabled:bg-gray-500",children:l&&m.text?"...":n("settings.integration.connect")})]}),f.text&&u.jsx("p",{className:`text-sm ${f.type==="error"?"text-red-400":"text-green-400"}`,children:f.text}),m.text&&u.jsx("p",{className:`text-sm ${m.type==="error"?"text-red-400":"text-green-400"}`,children:m.text})]})};return u.jsxs(u.Fragment,{children:[u.jsxs("fieldset",{className:"border border-border-secondary p-4 rounded-md",children:[u.jsx("legend",{className:"text-lg font-semibold px-2 text-text-primary",children:n("settings.integration.title")}),u.jsx("div",{className:"mt-2",children:e?A():T()})]}),h&&u.jsx(SA,{token:t,pmsType:e==null?void 0:e.type,onClose:F=>{d(!1),F&&r()}}),u.jsx(ho,{isOpen:x.isOpen,onClose:()=>v({isOpen:!1,message:"",onConfirm:null}),onConfirm:x.onConfirm||(()=>{}),title:n("common.confirm"),message:x.message,confirmText:n("common.confirm"),cancelText:n("common.cancel")})]})}function TA({token:t,userProfile:e,onProfileUpdate:r}){const{t:n}=Vt(),[s,i]=C.useState(!1),[a,o]=C.useState(""),[l,c]=C.useState(""),[h,d]=C.useState(!1),[f,p]=C.useState(null),[m,g]=C.useState(!1),x=async()=>{i(!0),o(""),c("");try{const{url:T}=await UC(t);window.location.href=T}catch(T){console.error("Erreur lors de la cration de la session Checkout:",T),o(T.message||"Une erreur est survenue lors de la cration de la session de paiement."),i(!1)}},v=async()=>{i(!0),o(""),c("");try{const T=await zC(t);c("Essai termin et facturation effectue avec succs !"),g(!1),r&&await r()}catch(T){console.error("Erreur lors de la fin de l'essai:",T),o(T.message||"Une erreur est survenue lors de la fin de l'essai.")}finally{i(!1)}},b=async()=>{i(!0),o("");try{const{url:T}=await ow(t);window.location.href=T}catch(T){console.error("Erreur lors de la cration de la session Portal:",T),o(T.message||"Une erreur est survenue lors de l'ouverture du portail de gestion."),i(!1)}};C.useEffect(()=>{const T=F=>{try{p(F),d(!0)}catch(I){console.error("Erreur lors de l'affichage de la modale de limite:",I)}};return typeof window<"u"&&(window.showLimitExceededModal=T),()=>{if(typeof window<"u"&&window.showLimitExceededModal===T)try{delete window.showLimitExceededModal}catch{}}},[]);const y=(e==null?void 0:e.subscriptionStatus)||"none",w=y==="active"||y==="trialing",S=y==="trialing",N=!!(e!=null&&e.stripeCustomerId),A=(()=>{if(!S||!(e!=null&&e.subscriptionCreatedAt))return null;const T=new Date(e.subscriptionCreatedAt),I=Math.floor((new Date-T)/(1e3*60*60*24));return Math.max(0,30-I)})();return u.jsxs("div",{className:"bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box p-6 flex flex-col gap-4",children:[u.jsx("h2",{className:"text-global-blanc text-left font-h2-font-family text-h2-font-size font-h2-font-weight relative border-b border-global-stroke-box pb-2 mb-4",children:n("billing.title")||"Gestion de l'abonnement"}),a&&u.jsx("div",{className:"bg-red-900/50 text-red-300 p-3 rounded-[10px] text-sm",children:a}),l&&u.jsx("div",{className:"bg-green-900/50 text-green-300 p-3 rounded-[10px] text-sm",children:l}),u.jsxs("div",{className:"space-y-4",children:[!w&&u.jsxs("div",{className:"bg-global-bg-small-box border border-global-stroke-box p-4 rounded-[10px]",children:[u.jsx("p",{className:"text-global-inactive text-sm mb-4",children:n("billing.noSubscription")||"Vous n'avez pas encore d'abonnement actif."}),u.jsx("button",{onClick:x,disabled:s,className:"px-6 py-2 font-semibold text-white rounded-[10px] bg-gradient-to-r from-[#155dfc] to-[#12a1d5] hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:s?"Chargement...":n("billing.activateSubscription")||"Activer l'abonnement"})]}),S&&u.jsxs("div",{className:"bg-blue-900/20 border border-blue-700/50 p-4 rounded-[10px]",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("h3",{className:"text-global-blanc font-semibold",children:n("billing.trialActive")||"Essai gratuit actif"}),A!==null&&u.jsxs("span",{className:"text-blue-400 text-sm font-medium",children:[A," ",A===1?"jour restant":"jours restants"]})]}),u.jsx("p",{className:"text-global-inactive text-sm mb-4",children:n("billing.trialDescription")||"Vous bnficiez d'un essai gratuit de 30 jours. Vous pouvez ajouter jusqu' 10 proprits pendant cette priode."}),u.jsx("button",{onClick:()=>g(!0),disabled:s,className:"px-4 py-2 text-sm font-semibold text-white rounded-[10px] bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n("billing.endTrialNow")||"Terminer l'essai et payer maintenant"})]}),y==="active"&&u.jsxs("div",{className:"bg-green-900/20 border border-green-700/50 p-4 rounded-[10px]",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("h3",{className:"text-global-blanc font-semibold",children:n("billing.subscriptionActive")||"Abonnement actif"}),u.jsx("span",{className:"text-green-400 text-sm font-medium",children:" Actif"})]}),u.jsx("p",{className:"text-global-inactive text-sm mb-4",children:n("billing.subscriptionDescription")||"Votre abonnement est actif. Vous pouvez grer votre abonnement, tlcharger vos factures et mettre  jour votre carte bancaire."}),N&&u.jsx("button",{onClick:b,disabled:s,className:"px-4 py-2 text-sm font-semibold text-white rounded-[10px] bg-gradient-to-r from-[#155dfc] to-[#12a1d5] hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:s?"Chargement...":n("billing.manageSubscription")||"Grer mon abonnement"})]}),(y==="past_due"||y==="unpaid")&&u.jsxs("div",{className:"bg-red-900/50 border border-red-700 p-4 rounded-[10px]",children:[u.jsx("h3",{className:"text-red-400 font-semibold mb-2",children:n("billing.paymentFailed")||"chec de paiement"}),u.jsx("p",{className:"text-global-inactive text-sm mb-4",children:n("billing.paymentFailedDescription")||"Votre dernier paiement a chou. Veuillez mettre  jour votre mthode de paiement pour continuer  utiliser Priceye."}),N&&u.jsx("button",{onClick:b,disabled:s,className:"px-4 py-2 text-sm font-semibold text-white rounded-[10px] bg-red-600 hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s?"Chargement...":n("billing.updatePaymentMethod")||"Mettre  jour la mthode de paiement"})]}),y==="canceled"&&u.jsxs("div",{className:"bg-gray-900/50 border border-gray-700 p-4 rounded-[10px]",children:[u.jsx("h3",{className:"text-global-inactive font-semibold mb-2",children:n("billing.subscriptionCanceled")||"Abonnement annul"}),u.jsx("p",{className:"text-global-inactive text-sm mb-4",children:n("billing.subscriptionCanceledDescription")||"Votre abonnement a t annul. Ractivez votre abonnement pour continuer  utiliser Priceye."}),u.jsx("button",{onClick:x,disabled:s,className:"px-4 py-2 text-sm font-semibold text-white rounded-[10px] bg-gradient-to-r from-[#155dfc] to-[#12a1d5] hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:s?"Chargement...":n("billing.reactivateSubscription")||"Ractiver l'abonnement"})]})]}),u.jsx(ho,{isOpen:h,onClose:()=>d(!1),onConfirm:()=>{d(!1),g(!0)},title:n("billing.limitExceeded")||"Limite de proprits dpasse",message:f?`${n("billing.limitExceededMessage")||"Vous avez atteint la limite de 10 proprits pendant votre essai gratuit."} ${n("billing.limitExceededAction")||"Pour continuer, vous devez terminer votre essai et activer la facturation maintenant."}`:"",confirmText:n("billing.endTrialAndPay")||"Terminer l'essai et payer",cancelText:n("common.cancel")||"Annuler"}),u.jsx(ho,{isOpen:m,onClose:()=>g(!1),onConfirm:v,title:n("billing.endTrialConfirm")||"Terminer l'essai gratuit",message:n("billing.endTrialConfirmMessage")||"tes-vous sr de vouloir terminer votre essai gratuit maintenant ? Vous serez factur immdiatement pour le mois en cours.",confirmText:n("billing.confirmEndTrial")||"Oui, terminer l'essai",cancelText:n("common.cancel")||"Annuler"})]})}function CA({token:t,userProfile:e,onThemeChange:r,onLogout:n}){var Zt,Ct;const{t:s,language:i}=Vt(),[a,o]=C.useState({name:"",email:"",currency:"EUR",language:i||"fr",timezone:"Europe/Paris",theme:"auto",notificationPreferences:{notifyOnBooking:!0,notifyOnApiError:!0},reportFrequency:"hebdomadaire",role:"member"}),[l,c]=C.useState(null),[h,d]=C.useState(!0),[f,p]=C.useState([]),[m,g]=C.useState(""),[x,v]=C.useState("member"),[b,y]=C.useState(""),[w,S]=C.useState(""),[N,k]=C.useState(""),[A,T]=C.useState(""),[F,I]=C.useState(""),[B,Z]=C.useState(!0),[ke,ae]=C.useState(!1),[Te,he]=C.useState(""),[te,re]=C.useState(""),[le,je]=C.useState(""),[M,U]=C.useState(""),[L,P]=C.useState(""),[V,ce]=C.useState({}),[we,xe]=C.useState({isOpen:!1,message:"",onConfirm:null});C.useEffect(()=>{if(!t&&n){n();return}if(t)try{const W=uh(t)}catch(W){console.error("Erreur de dcodage du token:",W),n&&n()}},[t,n]);let X=null;try{if(t){const W=uh(t);X=(W==null?void 0:W.sub)||(W==null?void 0:W.user_id)||(W==null?void 0:W.uid)}}catch(W){console.error("Erreur de dcodage du token:",W)}const ve=C.useCallback(async()=>{try{const W=await C0(t);o({...W,language:W.language||i||"fr",notificationPreferences:W.notificationPreferences||{notifyOnBooking:!0,notifyOnApiError:!0},reportFrequency:W.reportFrequency||"hebdomadaire",theme:W.theme||"auto",role:W.role||"member"})}catch(W){console.error("Erreur lors du rafrachissement du profil:",W)}},[t,i]),Ee=C.useCallback(async()=>{if(!X){Z(!1);return}try{Z(!0),d(!0),he(""),U(""),e&&o({...e,language:e.language||i||"fr",notificationPreferences:e.notificationPreferences||{notifyOnBooking:!0,notifyOnApiError:!0},reportFrequency:e.reportFrequency||"hebdomadaire",theme:e.theme||"auto",role:e.role||"member"});try{const W=await lC(t);c(W)}catch(W){console.error("Erreur de chargement de l'intgration:",W),he(s("settings.errors.integrationLoadError"))}finally{d(!1)}if((e==null?void 0:e.role)==="admin"){const W=await qd(t);p(W)}}catch(W){he(s("settings.errors.loadError",{message:W.message}))}finally{Z(!1)}},[t,X,e]);C.useEffect(()=>{Ee()},[Ee]),C.useEffect(()=>{i&&o(W=>W.language!==i?{...W,language:i}:W)},[i]);const Se=()=>{const W={};return(!a.name||a.name.trim()==="")&&(W.name=s("settings.validation.nameRequired")),a.currency||(W.currency=s("settings.validation.currencyRequired")),a.timezone||(W.timezone=s("settings.validation.timezoneRequired")),ce(W),Object.keys(W).length===0},Ce=W=>{const{name:_e,value:Pe,type:Ze,checked:vt}=W.target;if(V[_e]&&ce(bt=>({...bt,[_e]:null})),_e==="theme")r&&r(Pe),o(bt=>({...bt,theme:Pe}));else if(_e.startsWith("notificationPreferences.")){const bt=_e.split(".")[1];o(dt=>({...dt,notificationPreferences:{...dt.notificationPreferences,[bt]:vt}}))}else o(bt=>({...bt,[_e]:Ze==="checkbox"?vt:Pe}));if(_e==="language"&&(localStorage.setItem("userLanguage",Pe),typeof window<"u"))try{window.dispatchEvent(new CustomEvent("languageChanged",{detail:{language:Pe}}))}catch(bt){console.error("Erreur lors de l'envoi de l'vnement languageChanged:",bt)}je(""),re("")},rt=async W=>{if(W.preventDefault(),re(""),je(""),!Se()){re(s("settings.validation.formErrors"));return}ae(!0);try{const _e={name:a.name,currency:a.currency,language:a.language,timezone:a.timezone,theme:a.theme,notificationPreferences:a.notificationPreferences,reportFrequency:a.reportFrequency};await oC(_e,t),je(s("settings.messages.profileUpdated")),ce({})}catch(_e){re(s("settings.errors.saveError",{message:_e.message}))}finally{ae(!1)}},We=async W=>{if(W.preventDefault(),T(""),I(""),w.length<6){T(s("settings.validation.passwordMinLength"));return}if(w!==N){T(s("settings.validation.passwordMismatch"));return}ae(!0);try{await aC(b,w),I(s("settings.messages.passwordChanged")),y(""),S(""),k("")}catch(_e){T(s("settings.errors.saveError",{message:_e.message}))}finally{ae(!1)}},fe=async W=>{W.preventDefault(),U(""),P("");try{await NC({email:m,role:x},t),P(s("settings.messages.inviteSent",{email:m})),g(""),Ee()}catch(_e){U(s("settings.errors.inviteError",{message:_e.message}))}},xt=async(W,_e)=>{U("");try{await jC(W,_e,t);const Pe=await qd(t);p(Pe)}catch(Pe){U(s("settings.errors.roleChangeError",{message:Pe.message}))}},st=async W=>{xe({isOpen:!0,message:s("settings.messages.removeMemberConfirm"),onConfirm:async()=>{U("");try{await OC(W,t);const _e=await qd(t);p(_e)}catch(_e){U(s("settings.errors.removeError",{message:_e.message}))}}})};return B&&!a.email?u.jsxs("div",{className:"relative min-h-screen",children:[u.jsx("div",{className:"fixed inset-0",style:{background:"linear-gradient(135deg, rgba(2,6,24,1) 0%, rgba(22,36,86,1) 45%, rgba(15,23,43,1) 100%)",zIndex:0}}),u.jsx("div",{className:"relative z-10 flex items-center justify-center min-h-screen",children:u.jsx("p",{className:"text-center text-global-inactive",children:s("settings.loading")})})]}):!t||!X&&!B?u.jsxs("div",{className:"relative min-h-screen",children:[u.jsx("div",{className:"fixed inset-0",style:{background:"linear-gradient(135deg, rgba(2,6,24,1) 0%, rgba(22,36,86,1) 45%, rgba(15,23,43,1) 100%)",zIndex:0}}),u.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-screen gap-4 p-8",children:[u.jsx("p",{className:"text-center text-red-400",children:s("settings.sessionError")}),u.jsx("p",{className:"text-center text-global-inactive text-sm",children:"Redirection en cours..."}),n&&u.jsx("button",{onClick:n,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:s("settings.disconnect")})]})]}):u.jsxs("div",{className:"relative min-h-screen",children:[u.jsx("div",{className:"fixed inset-0",style:{background:"linear-gradient(135deg, rgba(2,6,24,1) 0%, rgba(22,36,86,1) 45%, rgba(15,23,43,1) 100%)",zIndex:0}}),u.jsxs("div",{className:"relative z-10 space-y-6 p-4 md:p-6 lg:p-8 max-w-4xl mx-auto",children:[u.jsx("h1",{className:"text-global-blanc text-left font-h1-font-family text-h1-font-size font-h1-font-weight relative",children:s("settings.title")}),Te&&u.jsx("p",{className:"bg-red-900/50 text-red-300 p-3 rounded-[10px] text-sm",children:Te}),le&&u.jsx("p",{className:"bg-green-900/50 text-green-300 p-3 rounded-[10px] text-sm",children:le}),te&&u.jsx("p",{className:"bg-red-900/50 text-red-300 p-3 rounded-[10px] text-sm",children:te}),u.jsx("div",{className:"bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box p-6 flex flex-col gap-3 items-start justify-start relative",children:h?u.jsx("p",{className:"text-sm text-global-inactive",children:s("settings.integration.loading")}):u.jsx(EA,{token:t,currentIntegration:l,onConnectionUpdate:Ee})}),u.jsx(TA,{token:t,userProfile:a,onProfileUpdate:ve}),u.jsxs("form",{onSubmit:rt,className:"space-y-6 bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box p-6 flex flex-col gap-3 items-start justify-start relative",children:[u.jsx("h2",{className:"text-global-blanc text-left font-h2-font-family text-h2-font-size font-h2-font-weight relative border-b border-global-stroke-box pb-2 mb-4 w-full",children:s("settings.myProfile")}),u.jsxs("fieldset",{className:"border border-global-stroke-box p-4 rounded-[10px] w-full",children:[u.jsx("legend",{className:"text-global-blanc text-left font-h3-font-family text-h3-font-size font-h3-font-weight px-2",children:s("settings.personalInfo")}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-global-inactive mb-1",children:s("settings.name")}),u.jsx("input",{type:"text",name:"name",id:"name",value:a.name,onChange:Ce,className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc placeholder:text-global-inactive focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd"}),V.name&&u.jsx("p",{className:"text-xs text-red-400 mt-1",children:V.name})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-global-inactive mb-1",children:s("settings.email")}),u.jsx("input",{type:"email",name:"email",id:"email",value:a.email,className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-inactive cursor-not-allowed",disabled:!0})]})]})]}),u.jsxs("fieldset",{className:"border border-global-stroke-box p-4 rounded-[10px] w-full",children:[u.jsx("legend",{className:"text-global-blanc text-left font-h3-font-family text-h3-font-size font-h3-font-weight px-2",children:s("settings.regionalPreferences")}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"language",className:"block text-sm font-medium text-global-inactive mb-1",children:s("settings.language")}),u.jsxs("select",{name:"language",id:"language",value:a.language,onChange:Ce,className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd",children:[u.jsx("option",{value:"fr",children:s("settings.languages.fr")}),u.jsx("option",{value:"en",children:s("settings.languages.en")})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"currency",className:"block text-sm font-medium text-global-inactive mb-1",children:s("settings.currency")}),u.jsxs("select",{name:"currency",id:"currency",value:a.currency,onChange:Ce,className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd",children:[u.jsx("option",{value:"",children:s("settings.selectCurrency")}),u.jsx("option",{value:"EUR",children:"EUR ()"}),u.jsx("option",{value:"USD",children:"USD ($)"}),u.jsx("option",{value:"GBP",children:"GBP ()"})]}),V.currency&&u.jsx("p",{className:"text-xs text-red-400 mt-1",children:V.currency})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"timezone",className:"block text-sm font-medium text-global-inactive mb-1",children:s("settings.timezone")}),u.jsxs("select",{name:"timezone",id:"timezone",value:a.timezone,onChange:Ce,className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd",children:[u.jsx("option",{value:"",children:s("settings.selectTimezone")}),u.jsxs("optgroup",{label:"Europe",children:[u.jsx("option",{value:"Europe/Paris",children:"Europe/Paris (UTC+1/+2)"}),u.jsx("option",{value:"Europe/London",children:"Europe/London (UTC+0/+1)"}),u.jsx("option",{value:"Europe/Berlin",children:"Europe/Berlin (UTC+1/+2)"}),u.jsx("option",{value:"Europe/Madrid",children:"Europe/Madrid (UTC+1/+2)"}),u.jsx("option",{value:"Europe/Rome",children:"Europe/Rome (UTC+1/+2)"}),u.jsx("option",{value:"Europe/Amsterdam",children:"Europe/Amsterdam (UTC+1/+2)"}),u.jsx("option",{value:"Europe/Brussels",children:"Europe/Brussels (UTC+1/+2)"}),u.jsx("option",{value:"Europe/Zurich",children:"Europe/Zurich (UTC+1/+2)"}),u.jsx("option",{value:"Europe/Vienna",children:"Europe/Vienna (UTC+1/+2)"}),u.jsx("option",{value:"Europe/Prague",children:"Europe/Prague (UTC+1/+2)"}),u.jsx("option",{value:"Europe/Warsaw",children:"Europe/Warsaw (UTC+1/+2)"}),u.jsx("option",{value:"Europe/Stockholm",children:"Europe/Stockholm (UTC+1/+2)"}),u.jsx("option",{value:"Europe/Oslo",children:"Europe/Oslo (UTC+1/+2)"}),u.jsx("option",{value:"Europe/Copenhagen",children:"Europe/Copenhagen (UTC+1/+2)"}),u.jsx("option",{value:"Europe/Helsinki",children:"Europe/Helsinki (UTC+2/+3)"}),u.jsx("option",{value:"Europe/Athens",children:"Europe/Athens (UTC+2/+3)"}),u.jsx("option",{value:"Europe/Lisbon",children:"Europe/Lisbon (UTC+0/+1)"}),u.jsx("option",{value:"Europe/Dublin",children:"Europe/Dublin (UTC+0/+1)"}),u.jsx("option",{value:"Europe/Moscow",children:"Europe/Moscow (UTC+3)"})]}),u.jsxs("optgroup",{label:"Amrique du Nord",children:[u.jsx("option",{value:"America/New_York",children:"America/New_York (UTC-5/-4)"}),u.jsx("option",{value:"America/Chicago",children:"America/Chicago (UTC-6/-5)"}),u.jsx("option",{value:"America/Denver",children:"America/Denver (UTC-7/-6)"}),u.jsx("option",{value:"America/Los_Angeles",children:"America/Los_Angeles (UTC-8/-7)"}),u.jsx("option",{value:"America/Toronto",children:"America/Toronto (UTC-5/-4)"}),u.jsx("option",{value:"America/Vancouver",children:"America/Vancouver (UTC-8/-7)"}),u.jsx("option",{value:"America/Mexico_City",children:"America/Mexico_City (UTC-6/-5)"}),u.jsx("option",{value:"America/Montreal",children:"America/Montreal (UTC-5/-4)"})]}),u.jsxs("optgroup",{label:"Amrique du Sud",children:[u.jsx("option",{value:"America/Sao_Paulo",children:"America/Sao_Paulo (UTC-3)"}),u.jsx("option",{value:"America/Buenos_Aires",children:"America/Buenos_Aires (UTC-3)"}),u.jsx("option",{value:"America/Lima",children:"America/Lima (UTC-5)"}),u.jsx("option",{value:"America/Santiago",children:"America/Santiago (UTC-3/-4)"})]}),u.jsxs("optgroup",{label:"Asie",children:[u.jsx("option",{value:"Asia/Tokyo",children:"Asia/Tokyo (UTC+9)"}),u.jsx("option",{value:"Asia/Shanghai",children:"Asia/Shanghai (UTC+8)"}),u.jsx("option",{value:"Asia/Hong_Kong",children:"Asia/Hong_Kong (UTC+8)"}),u.jsx("option",{value:"Asia/Singapore",children:"Asia/Singapore (UTC+8)"}),u.jsx("option",{value:"Asia/Seoul",children:"Asia/Seoul (UTC+9)"}),u.jsx("option",{value:"Asia/Dubai",children:"Asia/Dubai (UTC+4)"}),u.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata (UTC+5:30)"}),u.jsx("option",{value:"Asia/Bangkok",children:"Asia/Bangkok (UTC+7)"})]}),u.jsxs("optgroup",{label:"Ocanie",children:[u.jsx("option",{value:"Australia/Sydney",children:"Australia/Sydney (UTC+10/+11)"}),u.jsx("option",{value:"Australia/Melbourne",children:"Australia/Melbourne (UTC+10/+11)"}),u.jsx("option",{value:"Australia/Brisbane",children:"Australia/Brisbane (UTC+10)"}),u.jsx("option",{value:"Pacific/Auckland",children:"Pacific/Auckland (UTC+12/+13)"})]}),u.jsxs("optgroup",{label:"Afrique",children:[u.jsx("option",{value:"Africa/Cairo",children:"Africa/Cairo (UTC+2)"}),u.jsx("option",{value:"Africa/Johannesburg",children:"Africa/Johannesburg (UTC+2)"}),u.jsx("option",{value:"Africa/Casablanca",children:"Africa/Casablanca (UTC+0/+1)"})]})]}),u.jsx("p",{className:"text-xs text-global-inactive mt-1",children:s("settings.timezoneNote")}),V.timezone&&u.jsx("p",{className:"text-xs text-red-400 mt-1",children:V.timezone})]}),u.jsxs("div",{className:"md:col-span-3",children:[u.jsx("label",{htmlFor:"theme",className:"block text-sm font-medium text-global-inactive mb-1",children:s("settings.appearance")}),u.jsxs("select",{name:"theme",id:"theme",value:a.theme||"auto",onChange:Ce,className:"w-full md:w-1/3 bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd",children:[u.jsx("option",{value:"auto",children:s("settings.auto")}),u.jsx("option",{value:"light",children:s("settings.light")}),u.jsx("option",{value:"dark",children:s("settings.dark")})]})]})]})]}),u.jsxs("fieldset",{className:"border border-global-stroke-box p-4 rounded-[10px] w-full",children:[u.jsx("legend",{className:"text-global-blanc text-left font-h3-font-family text-h3-font-size font-h3-font-weight px-2",children:s("settings.notifications")}),u.jsxs("div",{className:"space-y-2 mt-2",children:[u.jsxs("label",{className:"flex items-center gap-2 text-sm text-global-inactive",children:[u.jsx("input",{type:"checkbox",name:"notificationPreferences.notifyOnBooking",checked:((Zt=a.notificationPreferences)==null?void 0:Zt.notifyOnBooking)??!0,onChange:Ce,className:"w-4 h-4 rounded border-global-stroke-box bg-global-bg-small-box text-global-content-highlight-2nd focus:ring-global-content-highlight-2nd"}),s("settings.notifyOnBooking")]}),u.jsxs("label",{className:"flex items-center gap-2 text-sm text-global-inactive",children:[u.jsx("input",{type:"checkbox",name:"notificationPreferences.notifyOnApiError",checked:((Ct=a.notificationPreferences)==null?void 0:Ct.notifyOnApiError)??!0,onChange:Ce,className:"w-4 h-4 rounded border-global-stroke-box bg-global-bg-small-box text-global-content-highlight-2nd focus:ring-global-content-highlight-2nd"}),s("settings.notifyOnApiError")]})]})]}),u.jsxs("fieldset",{className:"border border-global-stroke-box p-4 rounded-[10px] w-full",children:[u.jsx("legend",{className:"text-global-blanc text-left font-h3-font-family text-h3-font-size font-h3-font-weight px-2",children:s("settings.automaticReports")}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"reportFrequency",className:"block text-sm font-medium text-global-inactive mb-1",children:s("settings.reportFrequency")}),u.jsxs("select",{name:"reportFrequency",id:"reportFrequency",value:a.reportFrequency,onChange:Ce,className:"w-full md:w-1/2 bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd",children:[u.jsx("option",{value:"jamais",children:s("settings.never")}),u.jsx("option",{value:"quotidien",children:s("settings.daily")}),u.jsx("option",{value:"hebdomadaire",children:s("settings.weekly")}),u.jsx("option",{value:"mensuel",children:s("settings.monthly")})]})]})]}),u.jsx("div",{className:"flex justify-end pt-4 w-full",children:u.jsx("button",{type:"submit",disabled:ke,className:"px-6 py-2 font-semibold text-white rounded-[10px] bg-gradient-to-r from-[#155dfc] to-[#12a1d5] hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:s(ke?"common.saving":"settings.saveProfile")})})]}),u.jsxs("form",{onSubmit:We,className:"space-y-6 bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box p-6 flex flex-col gap-3 items-start justify-start relative",children:[u.jsx("h2",{className:"text-global-blanc text-left font-h2-font-family text-h2-font-size font-h2-font-weight relative border-b border-global-stroke-box pb-2 mb-4 w-full",children:s("settings.security")}),u.jsxs("fieldset",{className:"border border-global-stroke-box p-4 rounded-[10px] w-full",children:[u.jsx("legend",{className:"text-global-blanc text-left font-h3-font-family text-h3-font-size font-h3-font-weight px-2",children:s("settings.changePassword")}),A&&u.jsx("p",{className:"text-sm text-red-400 bg-red-900/50 p-3 rounded-[10px]",children:A}),F&&u.jsx("p",{className:"text-sm text-green-400 bg-green-900/50 p-3 rounded-[10px]",children:F}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"oldPassword",className:"block text-sm font-medium text-global-inactive mb-1",children:s("settings.oldPassword")}),u.jsx("input",{type:"password",name:"oldPassword",id:"oldPassword",value:b,onChange:W=>y(W.target.value),required:!0,className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc placeholder:text-global-inactive focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-global-inactive mb-1",children:s("settings.newPassword")}),u.jsx("input",{type:"password",name:"newPassword",id:"newPassword",value:w,onChange:W=>S(W.target.value),required:!0,className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc placeholder:text-global-inactive focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-global-inactive mb-1",children:s("settings.confirmPassword")}),u.jsx("input",{type:"password",name:"confirmPassword",id:"confirmPassword",value:N,onChange:W=>k(W.target.value),required:!0,className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc placeholder:text-global-inactive focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd"})]})]})]}),u.jsx("div",{className:"flex justify-end pt-4 w-full",children:u.jsx("button",{type:"submit",disabled:ke,className:"px-6 py-2 font-semibold text-white rounded-[10px] bg-gradient-to-r from-[#155dfc] to-[#12a1d5] hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:s(ke?"common.saving":"settings.changePasswordButton")})})]}),a.role==="admin"&&u.jsxs("div",{className:"space-y-6 bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box p-6 flex flex-col gap-3 items-start justify-start relative",children:[u.jsx("h2",{className:"text-global-blanc text-left font-h2-font-family text-h2-font-size font-h2-font-weight relative border-b border-global-stroke-box pb-2 mb-4 w-full",children:s("settings.teamManagement")}),M&&u.jsx("p",{className:"bg-red-900/50 text-red-300 p-3 rounded-[10px] text-sm w-full",children:M}),L&&u.jsx("p",{className:"bg-green-900/50 text-green-300 p-3 rounded-[10px] text-sm w-full",children:L}),u.jsxs("form",{onSubmit:fe,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end w-full",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"inviteEmail",className:"block text-sm font-medium text-global-inactive mb-1",children:s("settings.newMemberEmail")}),u.jsx("input",{type:"email",id:"inviteEmail",value:m,onChange:W=>g(W.target.value),required:!0,className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc placeholder:text-global-inactive focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd",placeholder:"membre@example.com"})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"inviteRole",className:"block text-sm font-medium text-global-inactive mb-1",children:s("settings.role")}),u.jsxs("select",{id:"inviteRole",value:x,onChange:W=>v(W.target.value),className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd",children:[u.jsx("option",{value:"member",children:s("settings.member")}),u.jsx("option",{value:"manager",children:s("settings.manager")})]})]}),u.jsx("button",{type:"submit",className:"px-4 py-2 font-semibold text-white rounded-[10px] bg-gradient-to-r from-[#155dfc] to-[#12a1d5] hover:opacity-90 transition-opacity h-10",children:s("settings.invite")})]}),u.jsxs("div",{className:"mt-6 w-full",children:[u.jsx("h3",{className:"text-global-blanc text-left font-h3-font-family text-h3-font-size font-h3-font-weight mb-2",children:s("settings.currentMembers")}),B?u.jsx("p",{className:"text-global-inactive",children:s("common.loading")}):f.length>0?u.jsx("ul",{className:"space-y-2",children:f.map(W=>u.jsxs("li",{className:"bg-global-bg-small-box border border-global-stroke-box p-3 rounded-[10px] flex flex-wrap justify-between items-center gap-2",children:[u.jsxs("div",{children:[u.jsx("span",{className:"font-medium text-global-blanc",children:W.name}),u.jsxs("span",{className:"text-sm text-global-inactive ml-2",children:["(",W.email,")"]})]}),u.jsx("div",{className:"flex items-center gap-2",children:W.id===X?u.jsxs("span",{className:"text-sm font-semibold px-2 py-1 bg-global-bg-box rounded-[10px] text-global-blanc border border-global-stroke-box",children:[s("settings.you")," (",W.role,")"]}):u.jsxs(u.Fragment,{children:[u.jsxs("select",{value:W.role,onChange:_e=>xt(W.id,_e.target.value),className:"bg-global-bg-box border border-global-stroke-box p-1 rounded-[10px] text-xs text-global-blanc",children:[u.jsx("option",{value:"member",children:s("settings.member")}),u.jsx("option",{value:"manager",children:s("settings.manager")}),u.jsx("option",{value:"admin",children:"Admin"})]}),u.jsx("button",{onClick:()=>st(W.id),className:"text-xs px-2 py-1 bg-red-800 hover:bg-red-700 rounded-[10px] text-white transition-colors",children:s("settings.remove")})]})})]},W.id))}):u.jsx("p",{className:"text-global-inactive text-sm",children:s("settings.onlyMember")})]})]}),u.jsxs("div",{className:"bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box p-6 flex flex-col gap-3 items-start justify-start relative",children:[u.jsx("h2",{className:"text-global-blanc text-left font-h2-font-family text-h2-font-size font-h2-font-weight relative border-b border-global-stroke-box pb-2 mb-4 w-full",children:s("settings.logout")}),u.jsx("p",{className:"text-global-inactive text-sm mb-4",children:s("settings.logoutDescription")}),u.jsx("div",{className:"flex justify-end pt-4 w-full",children:u.jsx("button",{type:"button",onClick:n,className:"px-6 py-2 font-semibold text-white rounded-[10px] bg-red-600 hover:bg-red-700 transition-colors",children:s("settings.disconnect")})})]}),u.jsx(ho,{isOpen:we.isOpen,onClose:()=>xe({isOpen:!1,message:"",onConfirm:null}),onConfirm:we.onConfirm||(()=>{}),title:s("common.confirm"),message:we.message,confirmText:s("common.confirm"),cancelText:s("common.cancel")})]})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var hh={};hh.version="0.18.5";var hw=1252,AA=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],dw=function(t){AA.indexOf(t)!=-1&&(hw=t)};function NA(){dw(1252)}var Yl=function(t){dw(t)};function jA(){Yl(1200),NA()}var Hc=function(e){return String.fromCharCode(e)},bx=function(e){return String.fromCharCode(e)},dh,Ys="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Xl(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0,c=0;c<t.length;)r=t.charCodeAt(c++),i=r>>2,n=t.charCodeAt(c++),a=(r&3)<<4|n>>4,s=t.charCodeAt(c++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),e+=Ys.charAt(i)+Ys.charAt(a)+Ys.charAt(o)+Ys.charAt(l);return e}function Rs(t){var e="",r=0,n=0,s=0,i=0,a=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<t.length;)i=Ys.indexOf(t.charAt(c++)),a=Ys.indexOf(t.charAt(c++)),r=i<<2|a>>4,e+=String.fromCharCode(r),o=Ys.indexOf(t.charAt(c++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Ys.indexOf(t.charAt(c++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var nt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Ms=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function ta(t){return nt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function yx(t){return nt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Ln=function(e){return nt?Ms(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function Zh(t){if(typeof ArrayBuffer>"u")return Ln(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function gc(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function OA(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}var dr=nt?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Ms(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function RA(t){for(var e=[],r=0,n=t.length+250,s=ta(t.length+255),i=0;i<t.length;++i){var a=t.charCodeAt(i);if(a<128)s[r++]=a;else if(a<2048)s[r++]=192|a>>6&31,s[r++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=t.charCodeAt(++i)&1023;s[r++]=240|a>>8&7,s[r++]=128|a>>2&63,s[r++]=128|o>>6&15|(a&3)<<4,s[r++]=128|o&63}else s[r++]=224|a>>12&15,s[r++]=128|a>>6&63,s[r++]=128|a&63;r>n&&(e.push(s.slice(0,r)),r=0,s=ta(65535),n=65530)}return e.push(s.slice(0,r)),dr(e)}var pl=/\u0000/g,Gc=/[\u0001-\u0006]/g;function Za(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function Bn(t,e){var r=""+t;return r.length>=e?r:It("0",e-r.length)+r}function Jp(t,e){var r=""+t;return r.length>=e?r:It(" ",e-r.length)+r}function fh(t,e){var r=""+t;return r.length>=e?r:r+It(" ",e-r.length)}function DA(t,e){var r=""+Math.round(t);return r.length>=e?r:It("0",e-r.length)+r}function PA(t,e){var r=""+t;return r.length>=e?r:It("0",e-r.length)+r}var wx=Math.pow(2,32);function Sa(t,e){if(t>wx||t<-wx)return DA(t,e);var r=Math.round(t);return PA(r,e)}function ph(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var _x=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],Jd=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function IA(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var Ft={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Sx={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},MA={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function gh(t,e,r){for(var n=t<0?-1:1,s=t*n,i=0,a=1,o=0,l=1,c=0,h=0,d=Math.floor(s);c<e&&(d=Math.floor(s),o=d*a+i,h=d*c+l,!(s-d<5e-8));)s=1/(s-d),i=a,a=o,l=c,c=h;if(h>e&&(c>e?(h=l,o=i):(h=c,o=a)),!r)return[0,n*o,h];var f=Math.floor(n*o/h);return[f,n*o-f*h,h]}function Kc(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),i=0,a=[],o={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)a=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)a=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],i=l.getDay(),n<60&&(i=(i+6)%7),r&&(i=WA(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=i,o}var fw=new Date(1899,11,31,0,0,0),FA=fw.getTime(),LA=new Date(1900,2,1,0,0,0);function pw(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=LA&&(r+=24*60*60*1e3),(r-(FA+(t.getTimezoneOffset()-fw.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Qp(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function BA(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function UA(t){var e=t<0?12:11,r=Qp(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function zA(t){var e=Qp(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function $A(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=UA(t):e===10?r=t.toFixed(10).substr(0,12):r=zA(t),Qp(BA(r.toUpperCase()))}function N0(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):$A(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return di(14,pw(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function WA(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function VA(t,e,r,n){var s="",i=0,a=0,o=r.y,l,c=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,c=2;break;default:l=o%1e4,c=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,c=e.length;break;case 3:return Jd[r.m-1][1];case 5:return Jd[r.m-1][0];default:return Jd[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,c=e.length;break;case 3:return _x[r.q][0];default:return _x[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,c=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,c=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,c=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?Bn(r.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,i=Math.round(a*(r.S+r.u)),i>=60*a&&(i=0),e==="s"?i===0?"0":""+i/a:(s=Bn(i,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}c=e.length===3?1:2;break;case 101:l=o,c=1;break}var h=c>0?Bn(l,c):"";return h}function Xs(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var gw=/%/g;function HA(t,e,r){var n=e.replace(gw,""),s=e.length-n.length;return Es(t,n,r*Math.pow(10,2*s))+It("%",s)}function GA(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Es(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function mw(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+mw(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,h){return l+c+h.substr(0,(s+i)%s)+"."+h.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var xw=/# (\?+)( ?)\/( ?)(\d+)/;function KA(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),i=Math.floor(s/n),a=s-i*n,o=n;return r+(i===0?"":""+i)+" "+(a===0?It(" ",t[1].length+1+t[4].length):Jp(a,t[1].length)+t[2]+"/"+t[3]+Bn(o,t[4].length))}function YA(t,e,r){return r+(e===0?"":""+e)+It(" ",t[1].length+2+t[4].length)}var vw=/^#*0*\.([0#]+)/,bw=/\).*[0#]/,yw=/\(###\) ###\\?-####/;function Or(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function kx(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function Ex(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function XA(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function qA(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function xn(t,e,r){if(t.charCodeAt(0)===40&&!e.match(bw)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?xn("n",n,r):"("+xn("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return GA(t,e,r);if(e.indexOf("%")!==-1)return HA(t,e,r);if(e.indexOf("E")!==-1)return mw(e,r);if(e.charCodeAt(0)===36)return"$"+xn(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+Sa(l,e.length);if(e.match(/^[#?]+$/))return s=Sa(r,0),s==="0"&&(s=""),s.length>e.length?s:Or(e.substr(0,e.length-s.length))+s;if(i=e.match(xw))return KA(i,l,c);if(e.match(/^#+0+$/))return c+Sa(l,e.length-e.indexOf("0"));if(i=e.match(vw))return s=kx(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Or(i[1])).replace(/\.$/,"."+Or(i[1])).replace(/\.(\d*)$/,function(m,g){return"."+g+It("0",Or(i[1]).length-g.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+kx(l,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Xs(Sa(l,0));if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+xn(t,e,-r):Xs(""+(Math.floor(r)+XA(r,i[1].length)))+"."+Bn(Ex(r,i[1].length),i[1].length);if(i=e.match(/^#,#*,#0/))return xn(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Za(xn(t,e.replace(/[\\-]/g,""),r)),a=0,Za(Za(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return a<s.length?s.charAt(a++):m==="0"?"0":""}));if(e.match(yw))return s=xn(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var h="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=gh(l,Math.pow(10,a)-1,!1),s=""+c,h=Es("n",i[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),s+=h+i[2]+"/"+i[3],h=fh(o[2],a),h.length<i[4].length&&(h=Or(i[4].substr(i[4].length-h.length))+h),s+=h,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=gh(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Jp(o[1],a)+i[2]+"/"+i[3]+fh(o[2],a):It(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=Sa(r,0),e.length<=s.length?s:Or(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var d=e.indexOf(".")-a,f=e.length-s.length-d;return Or(e.substr(0,d)+s+e.substr(e.length-f))}if(i=e.match(/^00,000\.([#0]*0)$/))return a=Ex(r,i[1].length),r<0?"-"+xn(t,e,-r):Xs(qA(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Bn(0,3-m.length):"")+m})+"."+Bn(a,i[1].length);switch(e){case"###,##0.00":return xn(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=Xs(Sa(l,0));return p!=="0"?c+p:"";case"###,###.00":return xn(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return xn(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function JA(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Es(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function QA(t,e,r){var n=e.replace(gw,""),s=e.length-n.length;return Es(t,n,r*Math.pow(10,2*s))+It("%",s)}function ww(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+ww(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var i=Math.floor(Math.log(e)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(e/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(a-r.length+i):r+="E+"+(a-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,c,h){return l+c+h.substr(0,(s+i)%s)+"."+h.substr(i)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function ts(t,e,r){if(t.charCodeAt(0)===40&&!e.match(bw)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ts("n",n,r):"("+ts("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return JA(t,e,r);if(e.indexOf("%")!==-1)return QA(t,e,r);if(e.indexOf("E")!==-1)return ww(e,r);if(e.charCodeAt(0)===36)return"$"+ts(t,e.substr(e.charAt(1)==" "?2:1),r);var s,i,a,o,l=Math.abs(r),c=r<0?"-":"";if(e.match(/^00+$/))return c+Bn(l,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:Or(e.substr(0,e.length-s.length))+s;if(i=e.match(xw))return YA(i,l,c);if(e.match(/^#+0+$/))return c+Bn(l,e.length-e.indexOf("0"));if(i=e.match(vw))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Or(i[1])).replace(/\.$/,"."+Or(i[1])),s=s.replace(/\.(\d*)$/,function(m,g){return"."+g+It("0",Or(i[1]).length-g.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),i=e.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=e.match(/^#{1,3},##0(\.?)$/))return c+Xs(""+l);if(i=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ts(t,e,-r):Xs(""+r)+"."+It("0",i[1].length);if(i=e.match(/^#,#*,#0/))return ts(t,e.replace(/^#,#*,/,""),r);if(i=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Za(ts(t,e.replace(/[\\-]/g,""),r)),a=0,Za(Za(e.replace(/\\/g,"")).replace(/[0#]/g,function(m){return a<s.length?s.charAt(a++):m==="0"?"0":""}));if(e.match(yw))return s=ts(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var h="";if(i=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(i[4].length,7),o=gh(l,Math.pow(10,a)-1,!1),s=""+c,h=Es("n",i[1],o[1]),h.charAt(h.length-1)==" "&&(h=h.substr(0,h.length-1)+"0"),s+=h+i[2]+"/"+i[3],h=fh(o[2],a),h.length<i[4].length&&(h=Or(i[4].substr(i[4].length-h.length))+h),s+=h,s;if(i=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(i[1].length,i[4].length),7),o=gh(l,Math.pow(10,a)-1,!0),c+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Jp(o[1],a)+i[2]+"/"+i[3]+fh(o[2],a):It(" ",2*a+1+i[2].length+i[3].length));if(i=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:Or(e.substr(0,e.length-s.length))+s;if(i=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var d=e.indexOf(".")-a,f=e.length-s.length-d;return Or(e.substr(0,d)+s+e.substr(e.length-f))}if(i=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+ts(t,e,-r):Xs(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Bn(0,3-m.length):"")+m})+"."+Bn(0,i[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=Xs(""+l);return p!=="0"?c+p:"";default:if(e.match(/\.[0#?]*$/))return ts(t,e.slice(0,e.lastIndexOf(".")),r)+Or(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Es(t,e,r){return(r|0)===r?ts(t,e,r):xn(t,e,r)}function ZA(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var _w=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Sw(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":ph(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(_w))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function eN(t,e,r,n){for(var s=[],i="",a=0,o="",l="t",c,h,d,f="H";a<t.length;)switch(o=t.charAt(a)){case"G":if(!ph(t,a))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},a+=7;break;case'"':for(i="";(d=t.charCodeAt(++a))!==34&&a<t.length;)i+=String.fromCharCode(d);s[s.length]={t:"t",v:i},++a;break;case"\\":var p=t.charAt(++a),m=p==="("||p===")"?p:"t";s[s.length]={t:m,v:p},++a;break;case"_":s[s.length]={t:"t",v:" "},a+=2;break;case"@":s[s.length]={t:"T",v:e},++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2"){if(c==null&&(c=Kc(e,r,t.charAt(a+1)==="2"),c==null))return"";s[s.length]={t:"X",v:t.substr(a,2)},l=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||c==null&&(c=Kc(e,r),c==null))return"";for(i=o;++a<t.length&&t.charAt(a).toLowerCase()===o;)i+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=f),s[s.length]={t:o,v:i},l=o;break;case"A":case"a":case"":var g={t:o,v:o};if(c==null&&(c=Kc(e,r)),t.substr(a,3).toUpperCase()==="A/P"?(c!=null&&(g.v=c.H>=12?"P":"A"),g.t="T",f="h",a+=3):t.substr(a,5).toUpperCase()==="AM/PM"?(c!=null&&(g.v=c.H>=12?"PM":"AM"),g.t="T",a+=5,f="h"):t.substr(a,5).toUpperCase()==="/"?(c!=null&&(g.v=c.H>=12?"":""),g.t="T",a+=5,f="h"):(g.t="t",++a),c==null&&g.t==="T")return"";s[s.length]=g,l=o;break;case"[":for(i=o;t.charAt(a++)!=="]"&&a<t.length;)i+=t.charAt(a);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(_w)){if(c==null&&(c=Kc(e,r),c==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},l=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Sw(t)||(s[s.length]={t:"t",v:i}));break;case".":if(c!=null){for(i=o;++a<t.length&&(o=t.charAt(a))==="0";)i+=o;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++a<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(a))>-1;)i+=o;s[s.length]={t:"n",v:i};break;case"?":for(i=o;t.charAt(++a)===o;)i+=o;s[s.length]={t:o,v:i},l=o;break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;)i+=t.charAt(a);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:o,v:o},++a;break;case"$":s[s.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++a;break}var x=0,v=0,b;for(a=s.length-1,l="t";a>=0;--a)switch(s[a].t){case"h":case"H":s[a].t=f,l="h",x<1&&(x=1);break;case"s":(b=s[a].v.match(/\.0+$/))&&(v=Math.max(v,b[0].length-1)),x<3&&(x=3);case"d":case"y":case"M":case"e":l=s[a].t;break;case"m":l==="s"&&(s[a].t="M",x<2&&(x=2));break;case"X":break;case"Z":x<1&&s[a].v.match(/[Hh]/)&&(x=1),x<2&&s[a].v.match(/[Mm]/)&&(x=2),x<3&&s[a].v.match(/[Ss]/)&&(x=3)}switch(x){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var y="",w;for(a=0;a<s.length;++a)switch(s[a].t){case"t":case"T":case" ":case"D":break;case"X":s[a].v="",s[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[a].v=VA(s[a].t.charCodeAt(0),s[a].v,c,v),s[a].t="t";break;case"n":case"?":for(w=a+1;s[w]!=null&&((o=s[w].t)==="?"||o==="D"||(o===" "||o==="t")&&s[w+1]!=null&&(s[w+1].t==="?"||s[w+1].t==="t"&&s[w+1].v==="/")||s[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[w].v==="/"||s[w].v===" "&&s[w+1]!=null&&s[w+1].t=="?"));)s[a].v+=s[w].v,s[w]={v:"",t:";"},++w;y+=s[a].v,a=w-1;break;case"G":s[a].t="t",s[a].v=N0(e,r);break}var S="",N,k;if(y.length>0){y.charCodeAt(0)==40?(N=e<0&&y.charCodeAt(0)===45?-e:e,k=Es("n",y,N)):(N=e<0&&n>1?-e:e,k=Es("n",y,N),N<0&&s[0]&&s[0].t=="t"&&(k=k.substr(1),s[0].v="-"+s[0].v)),w=k.length-1;var A=s.length;for(a=0;a<s.length;++a)if(s[a]!=null&&s[a].t!="t"&&s[a].v.indexOf(".")>-1){A=a;break}var T=s.length;if(A===s.length&&k.indexOf("E")===-1){for(a=s.length-1;a>=0;--a)s[a]==null||"n?".indexOf(s[a].t)===-1||(w>=s[a].v.length-1?(w-=s[a].v.length,s[a].v=k.substr(w+1,s[a].v.length)):w<0?s[a].v="":(s[a].v=k.substr(0,w+1),w=-1),s[a].t="t",T=a);w>=0&&T<s.length&&(s[T].v=k.substr(0,w+1)+s[T].v)}else if(A!==s.length&&k.indexOf("E")===-1){for(w=k.indexOf(".")-1,a=A;a>=0;--a)if(!(s[a]==null||"n?".indexOf(s[a].t)===-1)){for(h=s[a].v.indexOf(".")>-1&&a===A?s[a].v.indexOf(".")-1:s[a].v.length-1,S=s[a].v.substr(h+1);h>=0;--h)w>=0&&(s[a].v.charAt(h)==="0"||s[a].v.charAt(h)==="#")&&(S=k.charAt(w--)+S);s[a].v=S,s[a].t="t",T=a}for(w>=0&&T<s.length&&(s[T].v=k.substr(0,w+1)+s[T].v),w=k.indexOf(".")+1,a=A;a<s.length;++a)if(!(s[a]==null||"n?(".indexOf(s[a].t)===-1&&a!==A)){for(h=s[a].v.indexOf(".")>-1&&a===A?s[a].v.indexOf(".")+1:0,S=s[a].v.substr(0,h);h<s[a].v.length;++h)w<k.length&&(S+=k.charAt(w++));s[a].v=S,s[a].t="t",T=a}}}for(a=0;a<s.length;++a)s[a]!=null&&"n?".indexOf(s[a].t)>-1&&(N=n>1&&e<0&&a>0&&s[a-1].v==="-"?-e:e,s[a].v=Es(s[a].t,s[a].v,N),s[a].t="t");var F="";for(a=0;a!==s.length;++a)s[a]!=null&&(F+=s[a].v);return F}var Tx=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Cx(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function tN(t,e){var r=ZA(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var a=r[0].match(Tx),o=r[1].match(Tx);return Cx(e,a)?[n,r[0]]:Cx(e,o)?[n,r[1]]:[n,r[a!=null&&o!=null?2:1]]}return[n,i]}function di(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Ft)[t],n==null&&(n=r.table&&r.table[Sx[t]]||Ft[Sx[t]]),n==null&&(n=MA[t]||"General");break}if(ph(n,0))return N0(e,r);e instanceof Date&&(e=pw(e,r.date1904));var s=tN(n,e);if(ph(s[1]))return N0(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return eN(s[1],e,r,s[0])}function kw(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(Ft[r]==null){e<0&&(e=r);continue}if(Ft[r]==t){e=r;break}}e<0&&(e=391)}return Ft[e]=t,e}function ed(t){for(var e=0;e!=392;++e)t[e]!==void 0&&kw(t[e],e)}function td(){Ft=IA()}var Ew=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function rN(t){var e=typeof t=="number"?Ft[t]:t;return e=e.replace(Ew,"(\\d+)"),new RegExp("^"+e+"$")}function nN(t,e,r){var n=-1,s=-1,i=-1,a=-1,o=-1,l=-1;(e.match(Ew)||[]).forEach(function(d,f){var p=parseInt(r[f+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=p;break;case"d":i=p;break;case"h":a=p;break;case"s":l=p;break;case"m":a>=0?o=p:s=p;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var h=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return a==-1&&o==-1&&l==-1?c:n==-1&&s==-1&&i==-1?h:c+"T"+h}var sN=function(){var t={};t.version="1.2.0";function e(){for(var k=0,A=new Array(256),T=0;T!=256;++T)k=T,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,A[T]=k;return typeof Int32Array<"u"?new Int32Array(A):A}var r=e();function n(k){var A=0,T=0,F=0,I=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(F=0;F!=256;++F)I[F]=k[F];for(F=0;F!=256;++F)for(T=k[F],A=256+F;A<4096;A+=256)T=I[A]=T>>>8^k[T&255];var B=[];for(F=1;F!=16;++F)B[F-1]=typeof Int32Array<"u"?I.subarray(F*256,F*256+256):I.slice(F*256,F*256+256);return B}var s=n(r),i=s[0],a=s[1],o=s[2],l=s[3],c=s[4],h=s[5],d=s[6],f=s[7],p=s[8],m=s[9],g=s[10],x=s[11],v=s[12],b=s[13],y=s[14];function w(k,A){for(var T=A^-1,F=0,I=k.length;F<I;)T=T>>>8^r[(T^k.charCodeAt(F++))&255];return~T}function S(k,A){for(var T=A^-1,F=k.length-15,I=0;I<F;)T=y[k[I++]^T&255]^b[k[I++]^T>>8&255]^v[k[I++]^T>>16&255]^x[k[I++]^T>>>24]^g[k[I++]]^m[k[I++]]^p[k[I++]]^f[k[I++]]^d[k[I++]]^h[k[I++]]^c[k[I++]]^l[k[I++]]^o[k[I++]]^a[k[I++]]^i[k[I++]]^r[k[I++]];for(F+=15;I<F;)T=T>>>8^r[(T^k[I++])&255];return~T}function N(k,A){for(var T=A^-1,F=0,I=k.length,B=0,Z=0;F<I;)B=k.charCodeAt(F++),B<128?T=T>>>8^r[(T^B)&255]:B<2048?(T=T>>>8^r[(T^(192|B>>6&31))&255],T=T>>>8^r[(T^(128|B&63))&255]):B>=55296&&B<57344?(B=(B&1023)+64,Z=k.charCodeAt(F++)&1023,T=T>>>8^r[(T^(240|B>>8&7))&255],T=T>>>8^r[(T^(128|B>>2&63))&255],T=T>>>8^r[(T^(128|Z>>6&15|(B&3)<<4))&255],T=T>>>8^r[(T^(128|Z&63))&255]):(T=T>>>8^r[(T^(224|B>>12&15))&255],T=T>>>8^r[(T^(128|B>>6&63))&255],T=T>>>8^r[(T^(128|B&63))&255]);return~T}return t.table=r,t.bstr=w,t.buf=S,t.str=N,t}(),ht=function(){var e={};e.version="1.2.1";function r(_,R){for(var E=_.split("/"),j=R.split("/"),O=0,D=0,H=Math.min(E.length,j.length);O<H;++O){if(D=E[O].length-j[O].length)return D;if(E[O]!=j[O])return E[O]<j[O]?-1:1}return E.length-j.length}function n(_){if(_.charAt(_.length-1)=="/")return _.slice(0,-1).indexOf("/")===-1?_:n(_.slice(0,-1));var R=_.lastIndexOf("/");return R===-1?_:_.slice(0,R+1)}function s(_){if(_.charAt(_.length-1)=="/")return s(_.slice(0,-1));var R=_.lastIndexOf("/");return R===-1?_:_.slice(R+1)}function i(_,R){typeof R=="string"&&(R=new Date(R));var E=R.getHours();E=E<<6|R.getMinutes(),E=E<<5|R.getSeconds()>>>1,_.write_shift(2,E);var j=R.getFullYear()-1980;j=j<<4|R.getMonth()+1,j=j<<5|R.getDate(),_.write_shift(2,j)}function a(_){var R=_.read_shift(2)&65535,E=_.read_shift(2)&65535,j=new Date,O=E&31;E>>>=5;var D=E&15;E>>>=4,j.setMilliseconds(0),j.setFullYear(E+1980),j.setMonth(D-1),j.setDate(O);var H=R&31;R>>>=5;var J=R&63;return R>>>=6,j.setHours(R),j.setMinutes(J),j.setSeconds(H<<1),j}function o(_){nn(_,0);for(var R={},E=0;_.l<=_.length-4;){var j=_.read_shift(2),O=_.read_shift(2),D=_.l+O,H={};switch(j){case 21589:E=_.read_shift(1),E&1&&(H.mtime=_.read_shift(4)),O>5&&(E&2&&(H.atime=_.read_shift(4)),E&4&&(H.ctime=_.read_shift(4))),H.mtime&&(H.mt=new Date(H.mtime*1e3));break}_.l=D,R[j]=H}return R}var l;function c(){return l||(l={})}function h(_,R){if(_[0]==80&&_[1]==75)return An(_,R);if((_[0]|32)==109&&(_[1]|32)==105)return ye(_,R);if(_.length<512)throw new Error("CFB file size "+_.length+" < 512");var E=3,j=512,O=0,D=0,H=0,J=0,G=0,K=[],Y=_.slice(0,512);nn(Y,0);var ie=d(Y);switch(E=ie[0],E){case 3:j=512;break;case 4:j=4096;break;case 0:if(ie[1]==0)return An(_,R);default:throw new Error("Major Version: Expected 3 or 4 saw "+E)}j!==512&&(Y=_.slice(0,j),nn(Y,28));var de=_.slice(0,j);f(Y,E);var z=Y.read_shift(4,"i");if(E===3&&z!==0)throw new Error("# Directory Sectors: Expected 0 saw "+z);Y.l+=4,H=Y.read_shift(4,"i"),Y.l+=4,Y.chk("00100000","Mini Stream Cutoff Size: "),J=Y.read_shift(4,"i"),O=Y.read_shift(4,"i"),G=Y.read_shift(4,"i"),D=Y.read_shift(4,"i");for(var ee=-1,oe=0;oe<109&&(ee=Y.read_shift(4,"i"),!(ee<0));++oe)K[oe]=ee;var q=p(_,j);x(G,D,q,j,K);var pe=b(q,H,K,j);pe[H].name="!Directory",O>0&&J!==Z&&(pe[J].name="!MiniFAT"),pe[K[0]].name="!FAT",pe.fat_addrs=K,pe.ssz=j;var Le={},He=[],Gt=[],ft=[];y(H,pe,q,He,O,Le,Gt,J),m(Gt,ft,He),He.shift();var Je={FileIndex:Gt,FullPaths:ft};return R&&R.raw&&(Je.raw={header:de,sectors:q}),Je}function d(_){if(_[_.l]==80&&_[_.l+1]==75)return[0,0];_.chk(ke,"Header Signature: "),_.l+=16;var R=_.read_shift(2,"u");return[_.read_shift(2,"u"),R]}function f(_,R){var E=9;switch(_.l+=2,E=_.read_shift(2)){case 9:if(R!=3)throw new Error("Sector Shift: Expected 9 saw "+E);break;case 12:if(R!=4)throw new Error("Sector Shift: Expected 12 saw "+E);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+E)}_.chk("0600","Mini Sector Shift: "),_.chk("000000000000","Reserved: ")}function p(_,R){for(var E=Math.ceil(_.length/R)-1,j=[],O=1;O<E;++O)j[O-1]=_.slice(O*R,(O+1)*R);return j[E-1]=_.slice(E*R),j}function m(_,R,E){for(var j=0,O=0,D=0,H=0,J=0,G=E.length,K=[],Y=[];j<G;++j)K[j]=Y[j]=j,R[j]=E[j];for(;J<Y.length;++J)j=Y[J],O=_[j].L,D=_[j].R,H=_[j].C,K[j]===j&&(O!==-1&&K[O]!==O&&(K[j]=K[O]),D!==-1&&K[D]!==D&&(K[j]=K[D])),H!==-1&&(K[H]=j),O!==-1&&j!=K[j]&&(K[O]=K[j],Y.lastIndexOf(O)<J&&Y.push(O)),D!==-1&&j!=K[j]&&(K[D]=K[j],Y.lastIndexOf(D)<J&&Y.push(D));for(j=1;j<G;++j)K[j]===j&&(D!==-1&&K[D]!==D?K[j]=K[D]:O!==-1&&K[O]!==O&&(K[j]=K[O]));for(j=1;j<G;++j)if(_[j].type!==0){if(J=j,J!=K[J])do J=K[J],R[j]=R[J]+"/"+R[j];while(J!==0&&K[J]!==-1&&J!=K[J]);K[j]=-1}for(R[0]+="/",j=1;j<G;++j)_[j].type!==2&&(R[j]+="/")}function g(_,R,E){for(var j=_.start,O=_.size,D=[],H=j;E&&O>0&&H>=0;)D.push(R.slice(H*B,H*B+B)),O-=B,H=Li(E,H*4);return D.length===0?Q(0):dr(D).slice(0,_.size)}function x(_,R,E,j,O){var D=Z;if(_===Z){if(R!==0)throw new Error("DIFAT chain shorter than expected")}else if(_!==-1){var H=E[_],J=(j>>>2)-1;if(!H)return;for(var G=0;G<J&&(D=Li(H,G*4))!==Z;++G)O.push(D);x(Li(H,j-4),R-1,E,j,O)}}function v(_,R,E,j,O){var D=[],H=[];O||(O=[]);var J=j-1,G=0,K=0;for(G=R;G>=0;){O[G]=!0,D[D.length]=G,H.push(_[G]);var Y=E[Math.floor(G*4/j)];if(K=G*4&J,j<4+K)throw new Error("FAT boundary crossed: "+G+" 4 "+j);if(!_[Y])break;G=Li(_[Y],K)}return{nodes:D,data:Ix([H])}}function b(_,R,E,j){var O=_.length,D=[],H=[],J=[],G=[],K=j-1,Y=0,ie=0,de=0,z=0;for(Y=0;Y<O;++Y)if(J=[],de=Y+R,de>=O&&(de-=O),!H[de]){G=[];var ee=[];for(ie=de;ie>=0;){ee[ie]=!0,H[ie]=!0,J[J.length]=ie,G.push(_[ie]);var oe=E[Math.floor(ie*4/j)];if(z=ie*4&K,j<4+z)throw new Error("FAT boundary crossed: "+ie+" 4 "+j);if(!_[oe]||(ie=Li(_[oe],z),ee[ie]))break}D[de]={nodes:J,data:Ix([G])}}return D}function y(_,R,E,j,O,D,H,J){for(var G=0,K=j.length?2:0,Y=R[_].data,ie=0,de=0,z;ie<Y.length;ie+=128){var ee=Y.slice(ie,ie+128);nn(ee,64),de=ee.read_shift(2),z=ng(ee,0,de-K),j.push(z);var oe={name:z,type:ee.read_shift(1),color:ee.read_shift(1),L:ee.read_shift(4,"i"),R:ee.read_shift(4,"i"),C:ee.read_shift(4,"i"),clsid:ee.read_shift(16),state:ee.read_shift(4,"i"),start:0,size:0},q=ee.read_shift(2)+ee.read_shift(2)+ee.read_shift(2)+ee.read_shift(2);q!==0&&(oe.ct=w(ee,ee.l-8));var pe=ee.read_shift(2)+ee.read_shift(2)+ee.read_shift(2)+ee.read_shift(2);pe!==0&&(oe.mt=w(ee,ee.l-8)),oe.start=ee.read_shift(4,"i"),oe.size=ee.read_shift(4,"i"),oe.size<0&&oe.start<0&&(oe.size=oe.type=0,oe.start=Z,oe.name=""),oe.type===5?(G=oe.start,O>0&&G!==Z&&(R[G].name="!StreamData")):oe.size>=4096?(oe.storage="fat",R[oe.start]===void 0&&(R[oe.start]=v(E,oe.start,R.fat_addrs,R.ssz)),R[oe.start].name=oe.name,oe.content=R[oe.start].data.slice(0,oe.size)):(oe.storage="minifat",oe.size<0?oe.size=0:G!==Z&&oe.start!==Z&&R[G]&&(oe.content=g(oe,R[G].data,(R[J]||{}).data))),oe.content&&nn(oe.content,0),D[z]=oe,H.push(oe)}}function w(_,R){return new Date((an(_,R+4)/1e7*Math.pow(2,32)+an(_,R)/1e7-11644473600)*1e3)}function S(_,R){return c(),h(l.readFileSync(_),R)}function N(_,R){var E=R&&R.type;switch(E||nt&&Buffer.isBuffer(_)&&(E="buffer"),E||"base64"){case"file":return S(_,R);case"base64":return h(Ln(Rs(_)),R);case"binary":return h(Ln(_),R)}return h(_,R)}function k(_,R){var E=R||{},j=E.root||"Root Entry";if(_.FullPaths||(_.FullPaths=[]),_.FileIndex||(_.FileIndex=[]),_.FullPaths.length!==_.FileIndex.length)throw new Error("inconsistent CFB structure");_.FullPaths.length===0&&(_.FullPaths[0]=j+"/",_.FileIndex[0]={name:j,type:5}),E.CLSID&&(_.FileIndex[0].clsid=E.CLSID),A(_)}function A(_){var R="Sh33tJ5";if(!ht.find(_,"/"+R)){var E=Q(4);E[0]=55,E[1]=E[3]=50,E[2]=54,_.FileIndex.push({name:R,type:2,content:E,size:4,L:69,R:69,C:69}),_.FullPaths.push(_.FullPaths[0]+R),T(_)}}function T(_,R){k(_);for(var E=!1,j=!1,O=_.FullPaths.length-1;O>=0;--O){var D=_.FileIndex[O];switch(D.type){case 0:j?E=!0:(_.FileIndex.pop(),_.FullPaths.pop());break;case 1:case 2:case 5:j=!0,isNaN(D.R*D.L*D.C)&&(E=!0),D.R>-1&&D.L>-1&&D.R==D.L&&(E=!0);break;default:E=!0;break}}if(!(!E&&!R)){var H=new Date(1987,1,19),J=0,G=Object.create?Object.create(null):{},K=[];for(O=0;O<_.FullPaths.length;++O)G[_.FullPaths[O]]=!0,_.FileIndex[O].type!==0&&K.push([_.FullPaths[O],_.FileIndex[O]]);for(O=0;O<K.length;++O){var Y=n(K[O][0]);j=G[Y],j||(K.push([Y,{name:s(Y).replace("/",""),type:1,clsid:Te,ct:H,mt:H,content:null}]),G[Y]=!0)}for(K.sort(function(z,ee){return r(z[0],ee[0])}),_.FullPaths=[],_.FileIndex=[],O=0;O<K.length;++O)_.FullPaths[O]=K[O][0],_.FileIndex[O]=K[O][1];for(O=0;O<K.length;++O){var ie=_.FileIndex[O],de=_.FullPaths[O];if(ie.name=s(de).replace("/",""),ie.L=ie.R=ie.C=-(ie.color=1),ie.size=ie.content?ie.content.length:0,ie.start=0,ie.clsid=ie.clsid||Te,O===0)ie.C=K.length>1?1:-1,ie.size=0,ie.type=5;else if(de.slice(-1)=="/"){for(J=O+1;J<K.length&&n(_.FullPaths[J])!=de;++J);for(ie.C=J>=K.length?-1:J,J=O+1;J<K.length&&n(_.FullPaths[J])!=n(de);++J);ie.R=J>=K.length?-1:J,ie.type=1}else n(_.FullPaths[O+1]||"")==n(de)&&(ie.R=O+1),ie.type=2}}}function F(_,R){var E=R||{};if(E.fileType=="mad")return De(_,E);switch(T(_),E.fileType){case"zip":return Xn(_,E)}var j=function(z){for(var ee=0,oe=0,q=0;q<z.FileIndex.length;++q){var pe=z.FileIndex[q];if(pe.content){var Le=pe.content.length;Le>0&&(Le<4096?ee+=Le+63>>6:oe+=Le+511>>9)}}for(var He=z.FullPaths.length+3>>2,Gt=ee+7>>3,ft=ee+127>>7,Je=Gt+oe+He+ft,Ge=Je+127>>7,Kt=Ge<=109?0:Math.ceil((Ge-109)/127);Je+Ge+Kt+127>>7>Ge;)Kt=++Ge<=109?0:Math.ceil((Ge-109)/127);var Ke=[1,Kt,Ge,ft,He,oe,ee,0];return z.FileIndex[0].size=ee<<6,Ke[7]=(z.FileIndex[0].start=Ke[0]+Ke[1]+Ke[2]+Ke[3]+Ke[4]+Ke[5])+(Ke[6]+7>>3),Ke}(_),O=Q(j[7]<<9),D=0,H=0;{for(D=0;D<8;++D)O.write_shift(1,ae[D]);for(D=0;D<8;++D)O.write_shift(2,0);for(O.write_shift(2,62),O.write_shift(2,3),O.write_shift(2,65534),O.write_shift(2,9),O.write_shift(2,6),D=0;D<3;++D)O.write_shift(2,0);for(O.write_shift(4,0),O.write_shift(4,j[2]),O.write_shift(4,j[0]+j[1]+j[2]+j[3]-1),O.write_shift(4,0),O.write_shift(4,4096),O.write_shift(4,j[3]?j[0]+j[1]+j[2]-1:Z),O.write_shift(4,j[3]),O.write_shift(-4,j[1]?j[0]-1:Z),O.write_shift(4,j[1]),D=0;D<109;++D)O.write_shift(-4,D<j[2]?j[1]+D:-1)}if(j[1])for(H=0;H<j[1];++H){for(;D<236+H*127;++D)O.write_shift(-4,D<j[2]?j[1]+D:-1);O.write_shift(-4,H===j[1]-1?Z:H+1)}var J=function(z){for(H+=z;D<H-1;++D)O.write_shift(-4,D+1);z&&(++D,O.write_shift(-4,Z))};for(H=D=0,H+=j[1];D<H;++D)O.write_shift(-4,he.DIFSECT);for(H+=j[2];D<H;++D)O.write_shift(-4,he.FATSECT);J(j[3]),J(j[4]);for(var G=0,K=0,Y=_.FileIndex[0];G<_.FileIndex.length;++G)Y=_.FileIndex[G],Y.content&&(K=Y.content.length,!(K<4096)&&(Y.start=H,J(K+511>>9)));for(J(j[6]+7>>3);O.l&511;)O.write_shift(-4,he.ENDOFCHAIN);for(H=D=0,G=0;G<_.FileIndex.length;++G)Y=_.FileIndex[G],Y.content&&(K=Y.content.length,!(!K||K>=4096)&&(Y.start=H,J(K+63>>6)));for(;O.l&511;)O.write_shift(-4,he.ENDOFCHAIN);for(D=0;D<j[4]<<2;++D){var ie=_.FullPaths[D];if(!ie||ie.length===0){for(G=0;G<17;++G)O.write_shift(4,0);for(G=0;G<3;++G)O.write_shift(4,-1);for(G=0;G<12;++G)O.write_shift(4,0);continue}Y=_.FileIndex[D],D===0&&(Y.start=Y.size?Y.start-1:Z);var de=D===0&&E.root||Y.name;if(K=2*(de.length+1),O.write_shift(64,de,"utf16le"),O.write_shift(2,K),O.write_shift(1,Y.type),O.write_shift(1,Y.color),O.write_shift(-4,Y.L),O.write_shift(-4,Y.R),O.write_shift(-4,Y.C),Y.clsid)O.write_shift(16,Y.clsid,"hex");else for(G=0;G<4;++G)O.write_shift(4,0);O.write_shift(4,Y.state||0),O.write_shift(4,0),O.write_shift(4,0),O.write_shift(4,0),O.write_shift(4,0),O.write_shift(4,Y.start),O.write_shift(4,Y.size),O.write_shift(4,0)}for(D=1;D<_.FileIndex.length;++D)if(Y=_.FileIndex[D],Y.size>=4096)if(O.l=Y.start+1<<9,nt&&Buffer.isBuffer(Y.content))Y.content.copy(O,O.l,0,Y.size),O.l+=Y.size+511&-512;else{for(G=0;G<Y.size;++G)O.write_shift(1,Y.content[G]);for(;G&511;++G)O.write_shift(1,0)}for(D=1;D<_.FileIndex.length;++D)if(Y=_.FileIndex[D],Y.size>0&&Y.size<4096)if(nt&&Buffer.isBuffer(Y.content))Y.content.copy(O,O.l,0,Y.size),O.l+=Y.size+63&-64;else{for(G=0;G<Y.size;++G)O.write_shift(1,Y.content[G]);for(;G&63;++G)O.write_shift(1,0)}if(nt)O.l=O.length;else for(;O.l<O.length;)O.write_shift(1,0);return O}function I(_,R){var E=_.FullPaths.map(function(G){return G.toUpperCase()}),j=E.map(function(G){var K=G.split("/");return K[K.length-(G.slice(-1)=="/"?2:1)]}),O=!1;R.charCodeAt(0)===47?(O=!0,R=E[0].slice(0,-1)+R):O=R.indexOf("/")!==-1;var D=R.toUpperCase(),H=O===!0?E.indexOf(D):j.indexOf(D);if(H!==-1)return _.FileIndex[H];var J=!D.match(Gc);for(D=D.replace(pl,""),J&&(D=D.replace(Gc,"!")),H=0;H<E.length;++H)if((J?E[H].replace(Gc,"!"):E[H]).replace(pl,"")==D||(J?j[H].replace(Gc,"!"):j[H]).replace(pl,"")==D)return _.FileIndex[H];return null}var B=64,Z=-2,ke="d0cf11e0a1b11ae1",ae=[208,207,17,224,161,177,26,225],Te="00000000000000000000000000000000",he={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Z,FREESECT:-1,HEADER_SIGNATURE:ke,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Te,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function te(_,R,E){c();var j=F(_,E);l.writeFileSync(R,j)}function re(_){for(var R=new Array(_.length),E=0;E<_.length;++E)R[E]=String.fromCharCode(_[E]);return R.join("")}function le(_,R){var E=F(_,R);switch(R&&R.type||"buffer"){case"file":return c(),l.writeFileSync(R.filename,E),E;case"binary":return typeof E=="string"?E:re(E);case"base64":return Xl(typeof E=="string"?E:re(E));case"buffer":if(nt)return Buffer.isBuffer(E)?E:Ms(E);case"array":return typeof E=="string"?Ln(E):E}return E}var je;function M(_){try{var R=_.InflateRaw,E=new R;if(E._processChunk(new Uint8Array([3,0]),E._finishFlushFlag),E.bytesRead)je=_;else throw new Error("zlib does not expose bytesRead")}catch(j){console.error("cannot use native zlib: "+(j.message||j))}}function U(_,R){if(!je)return gn(_,R);var E=je.InflateRaw,j=new E,O=j._processChunk(_.slice(_.l),j._finishFlushFlag);return _.l+=j.bytesRead,O}function L(_){return je?je.deflateRawSync(_):Xr(_)}var P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ce=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function we(_){var R=(_<<1|_<<11)&139536|(_<<5|_<<15)&558144;return(R>>16|R>>8|R)&255}for(var xe=typeof Uint8Array<"u",X=xe?new Uint8Array(256):[],ve=0;ve<256;++ve)X[ve]=we(ve);function Ee(_,R){var E=X[_&255];return R<=8?E>>>8-R:(E=E<<8|X[_>>8&255],R<=16?E>>>16-R:(E=E<<8|X[_>>16&255],E>>>24-R))}function Se(_,R){var E=R&7,j=R>>>3;return(_[j]|(E<=6?0:_[j+1]<<8))>>>E&3}function Ce(_,R){var E=R&7,j=R>>>3;return(_[j]|(E<=5?0:_[j+1]<<8))>>>E&7}function rt(_,R){var E=R&7,j=R>>>3;return(_[j]|(E<=4?0:_[j+1]<<8))>>>E&15}function We(_,R){var E=R&7,j=R>>>3;return(_[j]|(E<=3?0:_[j+1]<<8))>>>E&31}function fe(_,R){var E=R&7,j=R>>>3;return(_[j]|(E<=1?0:_[j+1]<<8))>>>E&127}function xt(_,R,E){var j=R&7,O=R>>>3,D=(1<<E)-1,H=_[O]>>>j;return E<8-j||(H|=_[O+1]<<8-j,E<16-j)||(H|=_[O+2]<<16-j,E<24-j)||(H|=_[O+3]<<24-j),H&D}function st(_,R,E){var j=R&7,O=R>>>3;return j<=5?_[O]|=(E&7)<<j:(_[O]|=E<<j&255,_[O+1]=(E&7)>>8-j),R+3}function Zt(_,R,E){var j=R&7,O=R>>>3;return E=(E&1)<<j,_[O]|=E,R+1}function Ct(_,R,E){var j=R&7,O=R>>>3;return E<<=j,_[O]|=E&255,E>>>=8,_[O+1]=E,R+8}function W(_,R,E){var j=R&7,O=R>>>3;return E<<=j,_[O]|=E&255,E>>>=8,_[O+1]=E&255,_[O+2]=E>>>8,R+16}function _e(_,R){var E=_.length,j=2*E>R?2*E:R+5,O=0;if(E>=R)return _;if(nt){var D=yx(j);if(_.copy)_.copy(D);else for(;O<_.length;++O)D[O]=_[O];return D}else if(xe){var H=new Uint8Array(j);if(H.set)H.set(_);else for(;O<E;++O)H[O]=_[O];return H}return _.length=j,_}function Pe(_){for(var R=new Array(_),E=0;E<_;++E)R[E]=0;return R}function Ze(_,R,E){var j=1,O=0,D=0,H=0,J=0,G=_.length,K=xe?new Uint16Array(32):Pe(32);for(D=0;D<32;++D)K[D]=0;for(D=G;D<E;++D)_[D]=0;G=_.length;var Y=xe?new Uint16Array(G):Pe(G);for(D=0;D<G;++D)K[O=_[D]]++,j<O&&(j=O),Y[D]=0;for(K[0]=0,D=1;D<=j;++D)K[D+16]=J=J+K[D-1]<<1;for(D=0;D<G;++D)J=_[D],J!=0&&(Y[D]=K[J+16]++);var ie=0;for(D=0;D<G;++D)if(ie=_[D],ie!=0)for(J=Ee(Y[D],j)>>j-ie,H=(1<<j+4-ie)-1;H>=0;--H)R[J|H<<ie]=ie&15|D<<4;return j}var vt=xe?new Uint16Array(512):Pe(512),bt=xe?new Uint16Array(32):Pe(32);if(!xe){for(var dt=0;dt<512;++dt)vt[dt]=0;for(dt=0;dt<32;++dt)bt[dt]=0}(function(){for(var _=[],R=0;R<32;R++)_.push(5);Ze(_,bt,32);var E=[];for(R=0;R<=143;R++)E.push(8);for(;R<=255;R++)E.push(9);for(;R<=279;R++)E.push(7);for(;R<=287;R++)E.push(8);Ze(E,vt,288)})();var Yr=function(){for(var R=xe?new Uint8Array(32768):[],E=0,j=0;E<ce.length-1;++E)for(;j<ce[E+1];++j)R[j]=E;for(;j<32768;++j)R[j]=29;var O=xe?new Uint8Array(259):[];for(E=0,j=0;E<V.length-1;++E)for(;j<V[E+1];++j)O[j]=E;function D(J,G){for(var K=0;K<J.length;){var Y=Math.min(65535,J.length-K),ie=K+Y==J.length;for(G.write_shift(1,+ie),G.write_shift(2,Y),G.write_shift(2,~Y&65535);Y-- >0;)G[G.l++]=J[K++]}return G.l}function H(J,G){for(var K=0,Y=0,ie=xe?new Uint16Array(32768):[];Y<J.length;){var de=Math.min(65535,J.length-Y);if(de<10){for(K=st(G,K,+(Y+de==J.length)),K&7&&(K+=8-(K&7)),G.l=K/8|0,G.write_shift(2,de),G.write_shift(2,~de&65535);de-- >0;)G[G.l++]=J[Y++];K=G.l*8;continue}K=st(G,K,+(Y+de==J.length)+2);for(var z=0;de-- >0;){var ee=J[Y];z=(z<<5^ee)&32767;var oe=-1,q=0;if((oe=ie[z])&&(oe|=Y&-32768,oe>Y&&(oe-=32768),oe<Y))for(;J[oe+q]==J[Y+q]&&q<250;)++q;if(q>2){ee=O[q],ee<=22?K=Ct(G,K,X[ee+1]>>1)-1:(Ct(G,K,3),K+=5,Ct(G,K,X[ee-23]>>5),K+=3);var pe=ee<8?0:ee-4>>2;pe>0&&(W(G,K,q-V[ee]),K+=pe),ee=R[Y-oe],K=Ct(G,K,X[ee]>>3),K-=3;var Le=ee<4?0:ee-2>>1;Le>0&&(W(G,K,Y-oe-ce[ee]),K+=Le);for(var He=0;He<q;++He)ie[z]=Y&32767,z=(z<<5^J[Y])&32767,++Y;de-=q-1}else ee<=143?ee=ee+48:K=Zt(G,K,1),K=Ct(G,K,X[ee]),ie[z]=Y&32767,++Y}K=Ct(G,K,0)-1}return G.l=(K+7)/8|0,G.l}return function(G,K){return G.length<8?D(G,K):H(G,K)}}();function Xr(_){var R=Q(50+Math.floor(_.length*1.1)),E=Yr(_,R);return R.slice(0,E)}var Tn=xe?new Uint16Array(32768):Pe(32768),qr=xe?new Uint16Array(32768):Pe(32768),Ar=xe?new Uint16Array(128):Pe(128),ar=1,Kn=1;function hs(_,R){var E=We(_,R)+257;R+=5;var j=We(_,R)+1;R+=5;var O=rt(_,R)+4;R+=4;for(var D=0,H=xe?new Uint8Array(19):Pe(19),J=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],G=1,K=xe?new Uint8Array(8):Pe(8),Y=xe?new Uint8Array(8):Pe(8),ie=H.length,de=0;de<O;++de)H[P[de]]=D=Ce(_,R),G<D&&(G=D),K[D]++,R+=3;var z=0;for(K[0]=0,de=1;de<=G;++de)Y[de]=z=z+K[de-1]<<1;for(de=0;de<ie;++de)(z=H[de])!=0&&(J[de]=Y[z]++);var ee=0;for(de=0;de<ie;++de)if(ee=H[de],ee!=0){z=X[J[de]]>>8-ee;for(var oe=(1<<7-ee)-1;oe>=0;--oe)Ar[z|oe<<ee]=ee&7|de<<3}var q=[];for(G=1;q.length<E+j;)switch(z=Ar[fe(_,R)],R+=z&7,z>>>=3){case 16:for(D=3+Se(_,R),R+=2,z=q[q.length-1];D-- >0;)q.push(z);break;case 17:for(D=3+Ce(_,R),R+=3;D-- >0;)q.push(0);break;case 18:for(D=11+fe(_,R),R+=7;D-- >0;)q.push(0);break;default:q.push(z),G<z&&(G=z);break}var pe=q.slice(0,E),Le=q.slice(E);for(de=E;de<286;++de)pe[de]=0;for(de=j;de<30;++de)Le[de]=0;return ar=Ze(pe,Tn,286),Kn=Ze(Le,qr,30),R}function Jr(_,R){if(_[0]==3&&!(_[1]&3))return[ta(R),2];for(var E=0,j=0,O=yx(R||1<<18),D=0,H=O.length>>>0,J=0,G=0;!(j&1);){if(j=Ce(_,E),E+=3,j>>>1)j>>1==1?(J=9,G=5):(E=hs(_,E),J=ar,G=Kn);else{E&7&&(E+=8-(E&7));var K=_[E>>>3]|_[(E>>>3)+1]<<8;if(E+=32,K>0)for(!R&&H<D+K&&(O=_e(O,D+K),H=O.length);K-- >0;)O[D++]=_[E>>>3],E+=8;continue}for(;;){!R&&H<D+32767&&(O=_e(O,D+32767),H=O.length);var Y=xt(_,E,J),ie=j>>>1==1?vt[Y]:Tn[Y];if(E+=ie&15,ie>>>=4,!(ie>>>8&255))O[D++]=ie;else{if(ie==256)break;ie-=257;var de=ie<8?0:ie-4>>2;de>5&&(de=0);var z=D+V[ie];de>0&&(z+=xt(_,E,de),E+=de),Y=xt(_,E,G),ie=j>>>1==1?bt[Y]:qr[Y],E+=ie&15,ie>>>=4;var ee=ie<4?0:ie-2>>1,oe=ce[ie];for(ee>0&&(oe+=xt(_,E,ee),E+=ee),!R&&H<z&&(O=_e(O,z+100),H=O.length);D<z;)O[D]=O[D-oe],++D}}}return R?[O,E+7>>>3]:[O.slice(0,D),E+7>>>3]}function gn(_,R){var E=_.slice(_.l||0),j=Jr(E,R);return _.l+=j[1],j[0]}function Cn(_,R){if(_)typeof console<"u"&&console.error(R);else throw new Error(R)}function An(_,R){var E=_;nn(E,0);var j=[],O=[],D={FileIndex:j,FullPaths:O};k(D,{root:R.root});for(var H=E.length-4;(E[H]!=80||E[H+1]!=75||E[H+2]!=5||E[H+3]!=6)&&H>=0;)--H;E.l=H+4,E.l+=4;var J=E.read_shift(2);E.l+=6;var G=E.read_shift(4);for(E.l=G,H=0;H<J;++H){E.l+=20;var K=E.read_shift(4),Y=E.read_shift(4),ie=E.read_shift(2),de=E.read_shift(2),z=E.read_shift(2);E.l+=8;var ee=E.read_shift(4),oe=o(E.slice(E.l+ie,E.l+ie+de));E.l+=ie+de+z;var q=E.l;E.l=ee+4,Yn(E,K,Y,D,oe),E.l=q}return D}function Yn(_,R,E,j,O){_.l+=2;var D=_.read_shift(2),H=_.read_shift(2),J=a(_);if(D&8257)throw new Error("Unsupported ZIP encryption");for(var G=_.read_shift(4),K=_.read_shift(4),Y=_.read_shift(4),ie=_.read_shift(2),de=_.read_shift(2),z="",ee=0;ee<ie;++ee)z+=String.fromCharCode(_[_.l++]);if(de){var oe=o(_.slice(_.l,_.l+de));(oe[21589]||{}).mt&&(J=oe[21589].mt),((O||{})[21589]||{}).mt&&(J=O[21589].mt)}_.l+=de;var q=_.slice(_.l,_.l+K);switch(H){case 8:q=U(_,Y);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+H)}var pe=!1;D&8&&(G=_.read_shift(4),G==134695760&&(G=_.read_shift(4),pe=!0),K=_.read_shift(4),Y=_.read_shift(4)),K!=R&&Cn(pe,"Bad compressed size: "+R+" != "+K),Y!=E&&Cn(pe,"Bad uncompressed size: "+E+" != "+Y),Oe(j,z,q,{unsafe:!0,mt:J})}function Xn(_,R){var E=R||{},j=[],O=[],D=Q(1),H=E.compression?8:0,J=0,G=0,K=0,Y=0,ie=0,de=_.FullPaths[0],z=de,ee=_.FileIndex[0],oe=[],q=0;for(G=1;G<_.FullPaths.length;++G)if(z=_.FullPaths[G].slice(de.length),ee=_.FileIndex[G],!(!ee.size||!ee.content||z=="Sh33tJ5")){var pe=Y,Le=Q(z.length);for(K=0;K<z.length;++K)Le.write_shift(1,z.charCodeAt(K)&127);Le=Le.slice(0,Le.l),oe[ie]=sN.buf(ee.content,0);var He=ee.content;H==8&&(He=L(He)),D=Q(30),D.write_shift(4,67324752),D.write_shift(2,20),D.write_shift(2,J),D.write_shift(2,H),ee.mt?i(D,ee.mt):D.write_shift(4,0),D.write_shift(-4,oe[ie]),D.write_shift(4,He.length),D.write_shift(4,ee.content.length),D.write_shift(2,Le.length),D.write_shift(2,0),Y+=D.length,j.push(D),Y+=Le.length,j.push(Le),Y+=He.length,j.push(He),D=Q(46),D.write_shift(4,33639248),D.write_shift(2,0),D.write_shift(2,20),D.write_shift(2,J),D.write_shift(2,H),D.write_shift(4,0),D.write_shift(-4,oe[ie]),D.write_shift(4,He.length),D.write_shift(4,ee.content.length),D.write_shift(2,Le.length),D.write_shift(2,0),D.write_shift(2,0),D.write_shift(2,0),D.write_shift(2,0),D.write_shift(4,0),D.write_shift(4,pe),q+=D.l,O.push(D),q+=Le.length,O.push(Le),++ie}return D=Q(22),D.write_shift(4,101010256),D.write_shift(2,0),D.write_shift(2,0),D.write_shift(2,ie),D.write_shift(2,ie),D.write_shift(4,q),D.write_shift(4,Y),D.write_shift(2,0),dr([dr(j),dr(O),D])}var Fr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function qn(_,R){if(_.ctype)return _.ctype;var E=_.name||"",j=E.match(/\.([^\.]+)$/);return j&&Fr[j[1]]||R&&(j=(E=R).match(/[\.\\]([^\.\\])+$/),j&&Fr[j[1]])?Fr[j[1]]:"application/octet-stream"}function Jn(_){for(var R=Xl(_),E=[],j=0;j<R.length;j+=76)E.push(R.slice(j,j+76));return E.join(`\r
`)+`\r
`}function Qn(_){var R=_.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(K){var Y=K.charCodeAt(0).toString(16).toUpperCase();return"="+(Y.length==1?"0"+Y:Y)});R=R.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),R.charAt(0)==`
`&&(R="=0D"+R.slice(1)),R=R.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var E=[],j=R.split(`\r
`),O=0;O<j.length;++O){var D=j[O];if(D.length==0){E.push("");continue}for(var H=0;H<D.length;){var J=76,G=D.slice(H,H+J);G.charAt(J-1)=="="?J--:G.charAt(J-2)=="="?J-=2:G.charAt(J-3)=="="&&(J-=3),G=D.slice(H,H+J),H+=J,H<D.length&&(G+="="),E.push(G)}}return E.join(`\r
`)}function Zn(_){for(var R=[],E=0;E<_.length;++E){for(var j=_[E];E<=_.length&&j.charAt(j.length-1)=="=";)j=j.slice(0,j.length-1)+_[++E];R.push(j)}for(var O=0;O<R.length;++O)R[O]=R[O].replace(/[=][0-9A-Fa-f]{2}/g,function(D){return String.fromCharCode(parseInt(D.slice(1),16))});return Ln(R.join(`\r
`))}function ne(_,R,E){for(var j="",O="",D="",H,J=0;J<10;++J){var G=R[J];if(!G||G.match(/^\s*$/))break;var K=G.match(/^(.*?):\s*([^\s].*)$/);if(K)switch(K[1].toLowerCase()){case"content-location":j=K[2].trim();break;case"content-type":D=K[2].trim();break;case"content-transfer-encoding":O=K[2].trim();break}}switch(++J,O.toLowerCase()){case"base64":H=Ln(Rs(R.slice(J).join("")));break;case"quoted-printable":H=Zn(R.slice(J));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+O)}var Y=Oe(_,j.slice(E.length),H,{unsafe:!0});D&&(Y.ctype=D)}function ye(_,R){if(re(_.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var E=R&&R.root||"",j=(nt&&Buffer.isBuffer(_)?_.toString("binary"):re(_)).split(`\r
`),O=0,D="";for(O=0;O<j.length;++O)if(D=j[O],!!/^Content-Location:/i.test(D)&&(D=D.slice(D.indexOf("file")),E||(E=D.slice(0,D.lastIndexOf("/")+1)),D.slice(0,E.length)!=E))for(;E.length>0&&(E=E.slice(0,E.length-1),E=E.slice(0,E.lastIndexOf("/")+1),D.slice(0,E.length)!=E););var H=(j[1]||"").match(/boundary="(.*?)"/);if(!H)throw new Error("MAD cannot find boundary");var J="--"+(H[1]||""),G=[],K=[],Y={FileIndex:G,FullPaths:K};k(Y);var ie,de=0;for(O=0;O<j.length;++O){var z=j[O];z!==J&&z!==J+"--"||(de++&&ne(Y,j.slice(ie,O),E),ie=O)}return Y}function De(_,R){var E=R||{},j=E.boundary||"SheetJS";j="------="+j;for(var O=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+j.slice(2)+'"',"","",""],D=_.FullPaths[0],H=D,J=_.FileIndex[0],G=1;G<_.FullPaths.length;++G)if(H=_.FullPaths[G].slice(D.length),J=_.FileIndex[G],!(!J.size||!J.content||H=="Sh33tJ5")){H=H.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(q){return"_x"+q.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(q){return"_u"+q.charCodeAt(0).toString(16)+"_"});for(var K=J.content,Y=nt&&Buffer.isBuffer(K)?K.toString("binary"):re(K),ie=0,de=Math.min(1024,Y.length),z=0,ee=0;ee<=de;++ee)(z=Y.charCodeAt(ee))>=32&&z<128&&++ie;var oe=ie>=de*4/5;O.push(j),O.push("Content-Location: "+(E.root||"file:///C:/SheetJS/")+H),O.push("Content-Transfer-Encoding: "+(oe?"quoted-printable":"base64")),O.push("Content-Type: "+qn(J,H)),O.push(""),O.push(oe?Qn(Y):Jn(Y))}return O.push(j+`--\r
`),O.join(`\r
`)}function Ne(_){var R={};return k(R,_),R}function Oe(_,R,E,j){var O=j&&j.unsafe;O||k(_);var D=!O&&ht.find(_,R);if(!D){var H=_.FullPaths[0];R.slice(0,H.length)==H?H=R:(H.slice(-1)!="/"&&(H+="/"),H=(H+R).replace("//","/")),D={name:s(R),type:2},_.FileIndex.push(D),_.FullPaths.push(H),O||ht.utils.cfb_gc(_)}return D.content=E,D.size=E?E.length:0,j&&(j.CLSID&&(D.clsid=j.CLSID),j.mt&&(D.mt=j.mt),j.ct&&(D.ct=j.ct)),D}function $e(_,R){k(_);var E=ht.find(_,R);if(E){for(var j=0;j<_.FileIndex.length;++j)if(_.FileIndex[j]==E)return _.FileIndex.splice(j,1),_.FullPaths.splice(j,1),!0}return!1}function Ve(_,R,E){k(_);var j=ht.find(_,R);if(j){for(var O=0;O<_.FileIndex.length;++O)if(_.FileIndex[O]==j)return _.FileIndex[O].name=s(E),_.FullPaths[O]=E,!0}return!1}function Ue(_){T(_,!0)}return e.find=I,e.read=N,e.parse=h,e.write=le,e.writeFile=te,e.utils={cfb_new:Ne,cfb_add:Oe,cfb_del:$e,cfb_mov:Ve,cfb_gc:Ue,ReadShift:ml,CheckField:Ww,prep_blob:nn,bconcat:dr,use_zlib:M,_deflateRaw:Xr,_inflateRaw:gn,consts:he},e}();function iN(t){return typeof t=="string"?Zh(t):Array.isArray(t)?OA(t):t}function mc(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=Zh(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?Jl(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var s=new Blob([iN(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:t,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=t,a.href=i,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=gc(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function xr(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function Ax(t,e){for(var r=[],n=xr(t),s=0;s!==n.length;++s)r[t[n[s]][e]]==null&&(r[t[n[s]][e]]=n[s]);return r}function Zp(t){for(var e=[],r=xr(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function rd(t){for(var e=[],r=xr(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function aN(t){for(var e=[],r=xr(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var mh=new Date(1899,11,30,0,0,0);function Gr(t,e){var r=t.getTime(),n=mh.getTime()+(t.getTimezoneOffset()-mh.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var Tw=new Date,oN=mh.getTime()+(Tw.getTimezoneOffset()-mh.getTimezoneOffset())*6e4,Nx=Tw.getTimezoneOffset();function Cw(t){var e=new Date;return e.setTime(t*24*60*60*1e3+oN),e.getTimezoneOffset()!==Nx&&e.setTime(e.getTime()+(e.getTimezoneOffset()-Nx)*6e4),e}var jx=new Date("2017-02-19T19:06:09.000Z"),Aw=isNaN(jx.getFullYear())?new Date("2/19/17"):jx,lN=Aw.getFullYear()==2017;function Pr(t,e){var r=new Date(t);if(lN)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(Aw.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function nd(t,e){if(nt&&Buffer.isBuffer(t))return t.toString("binary");if(typeof TextDecoder<"u")try{var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function Kr(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Kr(t[r]));return e}function It(t,e){for(var r="";r.length<e;)r+=t;return r}function Ts(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(e=Number(n)))?e/r:e}var cN=["january","february","march","april","may","june","july","august","september","october","november","december"];function ql(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),i=e.getDate();if(isNaN(i))return r;var a=t.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&cN.indexOf(a)==-1)return r}else if(a.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}function ze(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return nt?n=Ms(r):n=RA(r),ht.utils.cfb_add(t,e,n)}ht.utils.cfb_add(t,e,r)}else t.file(e,r)}function eg(){return ht.utils.cfb_new()}var Ht=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,uN={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},tg=Zp(uN),rg=/[&<>'"]/g,hN=/[\u0000-\u0008\u000b-\u001f]/g;function lt(t){var e=t+"";return e.replace(rg,function(r){return tg[r]}).replace(hN,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Ox(t){return lt(t).replace(/ /g,"_x0020_")}var Nw=/[\u0000-\u001f]/g;function dN(t){var e=t+"";return e.replace(rg,function(r){return tg[r]}).replace(/\n/g,"<br/>").replace(Nw,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function fN(t){var e=t+"";return e.replace(rg,function(r){return tg[r]}).replace(Nw,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}function pN(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function gN(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Qd(t){for(var e="",r=0,n=0,s=0,i=0,a=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){a=(n&31)<<6,a|=s&63,e+=String.fromCharCode(a);continue}if(i=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}a=t.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(i&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function Rx(t){var e=ta(2*t.length),r,n,s=1,i=0,a=0,o;for(n=0;n<t.length;n+=s)s=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,a=55296+(r>>>10&1023),r=56320+(r&1023)),a!==0&&(e[i++]=a&255,e[i++]=a>>>8,a=0),e[i++]=r%256,e[i++]=r>>>8;return e.slice(0,i).toString("ucs2")}function Dx(t){return Ms(t,"binary").toString("utf8")}var Yc="foo bar baz",gl=nt&&(Dx(Yc)==Qd(Yc)&&Dx||Rx(Yc)==Qd(Yc)&&Rx)||Qd,Jl=nt?function(t){return Ms(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},mN=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),jw=/(^\s|\s$|\n)/;function fr(t,e){return"<"+t+(e.match(jw)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Ql(t){return xr(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function ge(t,e,r){return"<"+t+(r!=null?Ql(r):"")+(e!=null?(e.match(jw)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function j0(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function xN(t,e){switch(typeof t){case"string":var r=ge("vt:lpwstr",lt(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return ge((t|0)==t?"vt:i4":"vt:r8",lt(String(t)));case"boolean":return ge("vt:bool",t?"true":"false")}if(t instanceof Date)return ge("vt:filetime",j0(t));throw new Error("Unable to serialize "+t)}var tr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},wo=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],sn={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function vN(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,i=5;i>=0;--i)s=s*256+t[e+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function bN(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,i=0,a=n?-e:e;isFinite(a)?a==0?s=i=0:(s=Math.floor(Math.log(a)/Math.LN2),i=a*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(e)?26985:0);for(var o=0;o<=5;++o,i/=256)t[r+o]=i&255;t[r+6]=(s&15)<<4|i&15,t[r+7]=s>>4|n}var Px=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,i=t[0][n].length;s<i;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},Ix=nt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Ms(e)})):Px(t)}:Px,Mx=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(Yo(t,s)));return n.join("").replace(pl,"")},ng=nt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(pl,""):Mx(t,e,r)}:Mx,Fx=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},Ow=nt?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):Fx(t,e,r)}:Fx,Lx=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(Oa(t,s)));return n.join("")},xc=nt?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):Lx(e,r,n)}:Lx,Rw=function(t,e){var r=an(t,e);return r>0?xc(t,e+4,e+4+r-1):""},Dw=Rw,Pw=function(t,e){var r=an(t,e);return r>0?xc(t,e+4,e+4+r-1):""},Iw=Pw,Mw=function(t,e){var r=2*an(t,e);return r>0?xc(t,e+4,e+4+r-1):""},Fw=Mw,Lw=function(e,r){var n=an(e,r);return n>0?ng(e,r+4,r+4+n):""},Bw=Lw,Uw=function(t,e){var r=an(t,e);return r>0?xc(t,e+4,e+4+r):""},zw=Uw,$w=function(t,e){return vN(t,e)},xh=$w,sg=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};nt&&(Dw=function(e,r){if(!Buffer.isBuffer(e))return Rw(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Iw=function(e,r){if(!Buffer.isBuffer(e))return Pw(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Fw=function(e,r){if(!Buffer.isBuffer(e))return Mw(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},Bw=function(e,r){if(!Buffer.isBuffer(e))return Lw(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},zw=function(e,r){if(!Buffer.isBuffer(e))return Uw(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},xh=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):$w(e,r)},sg=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Oa=function(t,e){return t[e]},Yo=function(t,e){return t[e+1]*256+t[e]},yN=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},an=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},Li=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},wN=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function ml(t,e){var r="",n,s,i=[],a,o,l,c;switch(e){case"dbcs":if(c=this.l,nt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(Yo(this,c)),c+=2;t*=2;break;case"utf8":r=xc(this,this.l,this.l+t);break;case"utf16le":t*=2,r=ng(this,this.l,this.l+t);break;case"wstr":return ml.call(this,t,"dbcs");case"lpstr-ansi":r=Dw(this,this.l),t=4+an(this,this.l);break;case"lpstr-cp":r=Iw(this,this.l),t=4+an(this,this.l);break;case"lpwstr":r=Fw(this,this.l),t=4+2*an(this,this.l);break;case"lpp4":t=4+an(this,this.l),r=Bw(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+an(this,this.l),r=zw(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(a=Oa(this,this.l+t++))!==0;)i.push(Hc(a));r=i.join("");break;case"_wstr":for(t=0,r="";(a=Yo(this,this.l+t))!==0;)i.push(Hc(a)),t+=2;t+=2,r=i.join("");break;case"dbcs-cont":for(r="",c=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Oa(this,c),this.l=c+1,o=ml.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Hc(Yo(this,c))),c+=2}r=i.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(c)!==-1)return a=Oa(this,c),this.l=c+1,o=ml.call(this,t-l,a?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(Hc(Oa(this,c))),c+=1}r=i.join("");break;default:switch(t){case 1:return n=Oa(this,this.l),this.l++,n;case 2:return n=(e==="i"?yN:Yo)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(t>0?Li:wN)(this,this.l),this.l+=4,n):(s=an(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=xh(this,this.l):s=xh([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=Ow(this,this.l,t);break}}return this.l+=t,r}var _N=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},SN=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},kN=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function EN(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)kN(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var a=e.charCodeAt(s);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,_N(this,e,this.l);break;case 8:if(n=8,r==="f"){bN(this,e,this.l);break}case 16:break;case-4:n=4,SN(this,e,this.l);break}return this.l+=n,this}function Ww(t,e){var r=Ow(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function nn(t,e){t.l=e,t.read_shift=ml,t.chk=Ww,t.write_shift=EN}function us(t,e){t.l+=e}function Q(t){var e=ta(t);return nn(e,0),e}function Hr(){var t=[],e=nt?256:2048,r=function(c){var h=Q(c);return nn(h,0),h},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},i=function(c){return n&&c<n.length-n.l?n:(s(),n=r(Math.max(c+1,e)))},a=function(){return s(),dr(t)},o=function(c){s(),n=c,n.l==null&&(n.l=n.length),i(e)};return{next:i,push:o,end:a,_bufs:t}}function se(t,e,r,n){var s=+e,i;if(!isNaN(s)){n||(n=v5[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var a=t.next(i);s<=127?a.write_shift(1,s):(a.write_shift(1,(s&127)+128),a.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(n>=128)a.write_shift(1,(n&127)+128),n>>=7;else{a.write_shift(1,n);break}n>0&&sg(r)&&t.push(r)}}function xl(t,e,r){var n=Kr(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function Bx(t,e,r){var n=Kr(t);return n.s=xl(n.s,e.s,r),n.e=xl(n.e,e.s,r),n}function vl(t,e){if(t.cRel&&t.c<0)for(t=Kr(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=Kr(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=ut(t);return!t.cRel&&t.cRel!=null&&(r=AN(r)),!t.rRel&&t.rRel!=null&&(r=TN(r)),r}function Zd(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+kr(t.s.c)+":"+(t.e.cRel?"":"$")+kr(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+gr(t.s.r)+":"+(t.e.rRel?"":"$")+gr(t.e.r):vl(t.s,e.biff)+":"+vl(t.e,e.biff)}function ig(t){return parseInt(CN(t),10)-1}function gr(t){return""+(t+1)}function TN(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function CN(t){return t.replace(/\$(\d+)$/,"$1")}function ag(t){for(var e=NN(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function kr(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function AN(t){return t.replace(/^([A-Z])/,"$$$1")}function NN(t){return t.replace(/^\$([A-Z])/,"$1")}function jN(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function rr(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function ut(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function dn(t){var e=t.indexOf(":");return e==-1?{s:rr(t),e:rr(t)}:{s:rr(t.slice(0,e)),e:rr(t.slice(e+1))}}function Wt(t,e){return typeof e>"u"||typeof e=="number"?Wt(t.s,t.e):(typeof t!="string"&&(t=ut(t)),typeof e!="string"&&(e=ut(e)),t==e?t:t+":"+e)}function St(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=t.length;for(r=0;n<i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===i||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=i&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=i&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function Ux(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=di(t.z,r?Gr(e):e)}catch{}try{return t.w=di((t.XF||{}).numFmtId||(r?14:0),r?Gr(e):e)}catch{return""+e}}function Ds(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?vc[t.v]||t.v:e==null?Ux(t,t.v):Ux(t,e))}function la(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function Vw(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,i=t||(s?[]:{}),a=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?rr(n.origin):n.origin;a=l.r,o=l.c}i["!ref"]||(i["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var h=St(i["!ref"]);c.s.c=h.s.c,c.s.r=h.s.r,c.e.c=Math.max(c.e.c,h.e.c),c.e.r=Math.max(c.e.r,h.e.r),a==-1&&(c.e.r=a=h.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var f=0;f!=e[d].length;++f)if(!(typeof e[d][f]>"u")){var p={v:e[d][f]},m=a+d,g=o+f;if(c.s.r>m&&(c.s.r=m),c.s.c>g&&(c.s.c=g),c.e.r<m&&(c.e.r=m),c.e.c<g&&(c.e.c=g),e[d][f]&&typeof e[d][f]=="object"&&!Array.isArray(e[d][f])&&!(e[d][f]instanceof Date))p=e[d][f];else if(Array.isArray(p.v)&&(p.f=e[d][f][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Ft[14],n.cellDates?(p.t="d",p.w=di(p.z,Gr(p.v))):(p.t="n",p.v=Gr(p.v),p.w=di(p.z,p.v))):p.t="s";if(s)i[m]||(i[m]=[]),i[m][g]&&i[m][g].z&&(p.z=i[m][g].z),i[m][g]=p;else{var x=ut({c:g,r:m});i[x]&&i[x].z&&(p.z=i[x].z),i[x]=p}}}return c.s.c<1e7&&(i["!ref"]=Wt(c)),i}function _o(t,e){return Vw(null,t,e)}function ON(t){return t.read_shift(4,"i")}function Wn(t,e){return e||(e=Q(4)),e.write_shift(4,t),e}function Er(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function nr(t,e){var r=!1;return e==null&&(r=!0,e=Q(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function RN(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function DN(t,e){return e||(e=Q(4)),e.write_shift(2,0),e.write_shift(2,0),e}function og(t,e){var r=t.l,n=t.read_shift(1),s=Er(t),i=[],a={t:s,h:s};if(n&1){for(var o=t.read_shift(4),l=0;l!=o;++l)i.push(RN(t));a.r=i}else a.r=[{ich:0,ifnt:0}];return t.l=r+e,a}function PN(t,e){var r=!1;return e==null&&(r=!0,e=Q(15+4*t.t.length)),e.write_shift(1,0),nr(t.t,e),r?e.slice(0,e.l):e}var IN=og;function MN(t,e){var r=!1;return e==null&&(r=!0,e=Q(23+4*t.t.length)),e.write_shift(1,1),nr(t.t,e),e.write_shift(4,1),DN({},e),r?e.slice(0,e.l):e}function En(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function ca(t,e){return e==null&&(e=Q(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function ua(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function ha(t,e){return e==null&&(e=Q(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var FN=Er,Hw=nr;function lg(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function vh(t,e){var r=!1;return e==null&&(r=!0,e=Q(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var LN=Er,O0=lg,cg=vh;function Gw(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?xh([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Li(e,0)>>2;return r?s/100:s}function Kw(t,e){e==null&&(e=Q(4));var r=0,n=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?s:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function Yw(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function BN(t,e){return e||(e=Q(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var da=Yw,So=BN;function ko(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function ra(t,e){return(e||Q(8)).write_shift(8,t,"f")}function UN(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),i=t.read_shift(2,"i"),a=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var c=XN[s];c&&(e.rgb=Jx(c));break;case 2:e.rgb=Jx([a,o,l]);break;case 3:e.theme=s;break}return i!=0&&(e.tint=i>0?i/32767:i/32768),e}function bh(t,e){if(e||(e=Q(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function zN(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function $N(t,e){e||(e=Q(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}var Xw=2,tn=3,Xc=11,yh=19,qc=64,WN=65,VN=71,HN=4108,GN=4126,hr=80,zx={1:{n:"CodePage",t:Xw},2:{n:"Category",t:hr},3:{n:"PresentationFormat",t:hr},4:{n:"ByteCount",t:tn},5:{n:"LineCount",t:tn},6:{n:"ParagraphCount",t:tn},7:{n:"SlideCount",t:tn},8:{n:"NoteCount",t:tn},9:{n:"HiddenCount",t:tn},10:{n:"MultimediaClipCount",t:tn},11:{n:"ScaleCrop",t:Xc},12:{n:"HeadingPairs",t:HN},13:{n:"TitlesOfParts",t:GN},14:{n:"Manager",t:hr},15:{n:"Company",t:hr},16:{n:"LinksUpToDate",t:Xc},17:{n:"CharacterCount",t:tn},19:{n:"SharedDoc",t:Xc},22:{n:"HyperlinksChanged",t:Xc},23:{n:"AppVersion",t:tn,p:"version"},24:{n:"DigSig",t:WN},26:{n:"ContentType",t:hr},27:{n:"ContentStatus",t:hr},28:{n:"Language",t:hr},29:{n:"Version",t:hr},255:{},2147483648:{n:"Locale",t:yh},2147483651:{n:"Behavior",t:yh},1919054434:{}},$x={1:{n:"CodePage",t:Xw},2:{n:"Title",t:hr},3:{n:"Subject",t:hr},4:{n:"Author",t:hr},5:{n:"Keywords",t:hr},6:{n:"Comments",t:hr},7:{n:"Template",t:hr},8:{n:"LastAuthor",t:hr},9:{n:"RevNumber",t:hr},10:{n:"EditTime",t:qc},11:{n:"LastPrinted",t:qc},12:{n:"CreatedDate",t:qc},13:{n:"ModifiedDate",t:qc},14:{n:"PageCount",t:tn},15:{n:"WordCount",t:tn},16:{n:"CharCount",t:tn},17:{n:"Thumbnail",t:VN},18:{n:"Application",t:hr},19:{n:"DocSecurity",t:tn},255:{},2147483648:{n:"Locale",t:yh},2147483651:{n:"Behavior",t:yh},1919054434:{}};function KN(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var YN=KN([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),XN=Kr(YN),vc={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},qN={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Jc={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function qw(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Jw(t,e){var r=aN(qN),n=[],s;n[n.length]=Ht,n[n.length]=ge("Types",null,{xmlns:tr.CT,"xmlns:xsd":tr.xsd,"xmlns:xsi":tr.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return ge("Default",null,{Extension:l[0],ContentType:l[1]})}));var i=function(l){t[l]&&t[l].length>0&&(s=t[l][0],n[n.length]=ge("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Jc[l][e.bookType]||Jc[l].xlsx}))},a=function(l){(t[l]||[]).forEach(function(c){n[n.length]=ge("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:Jc[l][e.bookType]||Jc[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(c){n[n.length]=ge("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:r[l][0]})})};return i("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var et={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Qw(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function eo(t){var e=[Ht,ge("Relationships",null,{xmlns:tr.RELS})];return xr(t["!id"]).forEach(function(r){e[e.length]=ge("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function at(t,e,r,n,s,i){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=n,s.Target=r,[et.HLINK,et.XPATH,et.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}function JN(t){var e=[Ht];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function Wx(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function QN(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function ZN(t){var e=[Ht];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(Wx(t[r][0],t[r][1])),e.push(QN("",t[r][0]));return e.push(Wx("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function Zw(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+hh.version+"</meta:generator></office:meta></office:document-meta>"}var Gi=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function ef(t,e,r,n,s){s[t]!=null||e==null||e===""||(s[t]=e,e=lt(e),n[n.length]=r?ge(t,e,r):fr(t,e))}function e_(t,e){var r=e||{},n=[Ht,ge("cp:coreProperties",null,{"xmlns:cp":tr.CORE_PROPS,"xmlns:dc":tr.dc,"xmlns:dcterms":tr.dcterms,"xmlns:dcmitype":tr.dcmitype,"xmlns:xsi":tr.xsi})],s={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&ef("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:j0(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),t.ModifiedDate!=null&&ef("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:j0(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var i=0;i!=Gi.length;++i){var a=Gi[i],o=r.Props&&r.Props[a[1]]!=null?r.Props[a[1]]:t?t[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&ef(a[0],o,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var to=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],t_=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function r_(t){var e=[],r=ge;return t||(t={}),t.Application="SheetJS",e[e.length]=Ht,e[e.length]=ge("Properties",null,{xmlns:tr.EXT_PROPS,"xmlns:vt":tr.vt}),to.forEach(function(n){if(t[n[1]]!==void 0){var s;switch(n[2]){case"string":s=lt(String(t[n[1]]));break;case"bool":s=t[n[1]]?"true":"false";break}s!==void 0&&(e[e.length]=r(n[0],s))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+lt(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function n_(t){var e=[Ht,ge("Properties",null,{xmlns:tr.CUST_PROPS,"xmlns:vt":tr.vt})];if(!t)return e.join("");var r=1;return xr(t).forEach(function(s){++r,e[e.length]=ge("property",xN(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:lt(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var Vx={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function e3(t,e){var r=[];return xr(Vx).map(function(n){for(var s=0;s<Gi.length;++s)if(Gi[s][1]==n)return Gi[s];for(s=0;s<to.length;++s)if(to[s][1]==n)return to[s];throw n}).forEach(function(n){if(t[n[1]]!=null){var s=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(fr(Vx[n[1]]||n[1],s))}}),ge("DocumentProperties",r.join(""),{xmlns:sn.o})}function t3(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return t&&xr(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)){for(var a=0;a<Gi.length;++a)if(i==Gi[a][1])return;for(a=0;a<to.length;++a)if(i==to[a][1])return;for(a=0;a<r.length;++a)if(i==r[a])return;var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(ge(Ox(i),o,{"dt:dt":l}))}}),e&&xr(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)&&!(t&&Object.prototype.hasOwnProperty.call(t,i))){var a=e[i],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),s.push(ge(Ox(i),a,{"dt:dt":o}))}}),"<"+n+' xmlns="'+sn.o+'">'+s.join("")+"</"+n+">"}function r3(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),s+=i);var a=Q(8);return a.write_shift(4,n),a.write_shift(4,s),a}function Hx(t,e){var r=Q(4),n=Q(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=Q(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=r3(e);break;case 31:case 80:for(n=Q(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return dr([r,n])}var s_=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function n3(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function Gx(t,e,r){var n=Q(8),s=[],i=[],a=8,o=0,l=Q(8),c=Q(8);if(l.write_shift(4,2),l.write_shift(4,1200),c.write_shift(4,1),i.push(l),s.push(c),a+=8+l.length,!e){c=Q(8),c.write_shift(4,0),s.unshift(c);var h=[Q(4)];for(h[0].write_shift(4,t.length),o=0;o<t.length;++o){var d=t[o][0];for(l=Q(8+2*(d.length+1)+(d.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,d.length+1),l.write_shift(0,d,"dbcs");l.l!=l.length;)l.write_shift(1,0);h.push(l)}l=dr(h),i.unshift(l),a+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(s_.indexOf(t[o][0])>-1||t_.indexOf(t[o][0])>-1)&&t[o][1]!=null){var f=t[o][1],p=0;if(e){p=+e[t[o][0]];var m=r[p];if(m.p=="version"&&typeof f=="string"){var g=f.split(".");f=(+g[0]<<16)+(+g[1]||0)}l=Hx(m.t,f)}else{var x=n3(f);x==-1&&(x=31,f=String(f)),l=Hx(x,f)}i.push(l),c=Q(8),c.write_shift(4,e?p:2+o),s.push(c),a+=8+l.length}var v=8*(i.length+1);for(o=0;o<i.length;++o)s[o].write_shift(4,v),v+=i[o].length;return n.write_shift(4,a),n.write_shift(4,i.length),dr([n].concat(s).concat(i))}function Kx(t,e,r,n,s,i){var a=Q(s?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,ht.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,s?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,s?68:48);var l=Gx(t,r,n);if(o.push(l),s){var c=Gx(s,null,null);a.write_shift(16,i,"hex"),a.write_shift(4,68+l.length),o.push(c)}return dr(o)}function s3(t,e){e||(e=Q(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function i3(t,e){return t.read_shift(e)===1}function Rr(t,e){return e||(e=Q(2)),e.write_shift(2,+!!t),e}function i_(t){return t.read_shift(2,"u")}function vn(t,e){return e||(e=Q(2)),e.write_shift(2,t),e}function a_(t,e,r){return r||(r=Q(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function o_(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=t.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var a=n?t.read_shift(n,s):"";return a}function a3(t){var e=t.t||"",r=Q(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=Q(2*e.length);n.write_shift(2*e.length,e,"utf16le");var s=[r,n];return dr(s)}function o3(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function l3(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):o3(t,n,r)}function c3(t,e,r){if(r.biff>5)return l3(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function l_(t,e,r){return r||(r=Q(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function Yx(t,e){e||(e=Q(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function u3(t){var e=Q(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),i=s>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}e.write_shift(4,2),e.write_shift(4,i);var a=[8,6815827,6619237,4849780,83];for(r=0;r<a.length;++r)e.write_shift(4,a[r]);if(i==28)n=n.slice(1),Yx(n,e);else if(i&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));var o=s>-1?n.slice(0,s):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),i&8&&Yx(s>-1?n.slice(s+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<a.length;++r)e.write_shift(1,parseInt(a[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function na(t,e,r,n){return n||(n=Q(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function h3(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),i=t.read_shift(n,"i"),a=t.read_shift(n,"i");return[s,i,a]}function d3(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function c_(t,e){return e||(e=Q(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function ug(t,e,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Q(s);return i.write_shift(2,n),i.write_shift(2,e),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function f3(t,e){var r=!e||e.biff==8,n=Q(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function p3(t,e){var r=!e||e.biff>=8?2:1,n=Q(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function g3(t,e){var r=Q(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],s=0;s<t.length;++s)n[s]=a3(t[s]);var i=dr([r].concat(n));return i.parts=[r.length].concat(n.map(function(a){return a.length})),i}function m3(){var t=Q(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function x3(t){var e=Q(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function v3(t,e){var r=t.name||"Arial",n=e&&e.biff==5,s=n?15+r.length:16+2*r.length,i=Q(s);return i.write_shift(2,t.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function b3(t,e,r,n){var s=Q(10);return na(t,e,n,s),s.write_shift(4,r),s}function y3(t,e,r,n,s){var i=!s||s.biff==8,a=Q(8+ +i+(1+i)*r.length);return na(t,e,n,a),a.write_shift(2,r.length),i&&a.write_shift(1,1),a.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),a}function w3(t,e,r,n){var s=r&&r.biff==5;n||(n=Q(s?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(s?1:2,e.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}function _3(t,e){var r=e.biff==8||!e.biff?4:2,n=Q(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function Xx(t,e,r,n){var s=r&&r.biff==5;n||(n=Q(s?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var i=0;return t.numFmtId>0&&s&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function S3(t){var e=Q(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function k3(t,e,r,n,s,i){var a=Q(8);return na(t,e,n,a),a_(r,i,a),a}function E3(t,e,r,n){var s=Q(14);return na(t,e,n,s),ra(r,s),s}function T3(t,e,r){if(r.biff<8)return C3(t,e,r);for(var n=[],s=t.l+e,i=t.read_shift(r.biff>8?4:2);i--!==0;)n.push(h3(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function C3(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=o_(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function A3(t){var e=Q(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)c_(t[r],e);return e}function N3(t){var e=Q(24),r=rr(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(n[s],16));return dr([e,u3(t[1])])}function j3(t){var e=t[1].Tooltip,r=Q(10+2*(e.length+1));r.write_shift(2,2048);var n=rr(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<e.length;++s)r.write_shift(2,e.charCodeAt(s));return r.write_shift(2,0),r}function O3(t){return t||(t=Q(4)),t.write_shift(2,1),t.write_shift(2,1),t}function R3(t,e,r){if(!r.cellStyles)return us(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),i=t.read_shift(n),a=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var c={s,e:i,w:a,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(c.level=l>>8&7),c}function D3(t,e){var r=Q(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function P3(t){for(var e=Q(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}function I3(t,e,r){var n=Q(15);return yc(n,t,e),n.write_shift(8,r,"f"),n}function M3(t,e,r){var n=Q(9);return yc(n,t,e),n.write_shift(2,r),n}var F3=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Zp({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var c=[],h=ta(1);switch(l.type){case"base64":h=Ln(Rs(o));break;case"binary":h=Ln(o);break;case"buffer":case"array":h=o;break}nn(h,0);var d=h.read_shift(1),f=!!(d&136),p=!1,m=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,f=!0;break;case 49:p=!0,f=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var g=0,x=521;d==2&&(g=h.read_shift(2)),h.l+=3,d!=2&&(g=h.read_shift(4)),g>1048576&&(g=1e6),d!=2&&(x=h.read_shift(2));var v=h.read_shift(2),b=l.codepage||1252;d!=2&&(h.l+=16,h.read_shift(1),h[h.l]!==0&&(b=t[h[h.l]]),h.l+=1,h.l+=2),m&&(h.l+=36);for(var y=[],w={},S=Math.min(h.length,d==2?521:x-10-(p?264:0)),N=m?32:11;h.l<S&&h[h.l]!=13;)switch(w={},w.name=dh.utils.decode(b,h.slice(h.l,h.l+N)).replace(/[\u0000\r\n].*$/g,""),h.l+=N,w.type=String.fromCharCode(h.read_shift(1)),d!=2&&!m&&(w.offset=h.read_shift(4)),w.len=h.read_shift(1),d==2&&(w.offset=h.read_shift(2)),w.dec=h.read_shift(1),w.name.length&&y.push(w),d!=2&&(h.l+=m?13:14),w.type){case"B":(!p||w.len!=8)&&l.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(h[h.l]!==13&&(h.l=x-1),h.read_shift(1)!==13)throw new Error("DBF Terminator not found "+h.l+" "+h[h.l]);h.l=x;var k=0,A=0;for(c[0]=[],A=0;A!=y.length;++A)c[0][A]=y[A].name;for(;g-- >0;){if(h[h.l]===42){h.l+=v;continue}for(++h.l,c[++k]=[],A=0,A=0;A!=y.length;++A){var T=h.slice(h.l,h.l+y[A].len);h.l+=y[A].len,nn(T,0);var F=dh.utils.decode(b,T);switch(y[A].type){case"C":F.trim().length&&(c[k][A]=F.replace(/\s+$/,""));break;case"D":F.length===8?c[k][A]=new Date(+F.slice(0,4),+F.slice(4,6)-1,+F.slice(6,8)):c[k][A]=F;break;case"F":c[k][A]=parseFloat(F.trim());break;case"+":case"I":c[k][A]=m?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(F.trim().toUpperCase()){case"Y":case"T":c[k][A]=!0;break;case"N":case"F":c[k][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+F+"|")}break;case"M":if(!f)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));c[k][A]="##MEMO##"+(m?parseInt(F.trim(),10):T.read_shift(4));break;case"N":F=F.replace(/\u0000/g,"").trim(),F&&F!="."&&(c[k][A]=+F||0);break;case"@":c[k][A]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":c[k][A]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":c[k][A]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[k][A]=-T.read_shift(-8,"f");break;case"B":if(p&&y[A].len==8){c[k][A]=T.read_shift(8,"f");break}case"G":case"P":T.l+=y[A].len;break;case"0":if(y[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+y[A].type)}}}if(d!=2&&h.l<h.length&&h[h.l++]!=26)throw new Error("DBF EOF Marker missing "+(h.l-1)+" of "+h.length+" "+h[h.l-1].toString(16));return l&&l.sheetRows&&(c=c.slice(0,l.sheetRows)),l.DBF=y,c}function n(o,l){var c=l||{};c.dateNF||(c.dateNF="yyyymmdd");var h=_o(r(o,c),c);return h["!cols"]=c.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete c.DBF,h}function s(o,l){try{return la(n(o,l),l)}catch(c){if(l&&l.WTF)throw c}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,l){var c=l||{};if(+c.codepage>=0&&Yl(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var h=Hr(),d=Eh(o,{header:1,raw:!0,cellDates:!0}),f=d[0],p=d.slice(1),m=o["!cols"]||[],g=0,x=0,v=0,b=1;for(g=0;g<f.length;++g){if(((m[g]||{}).DBF||{}).name){f[g]=m[g].DBF.name,++v;continue}if(f[g]!=null){if(++v,typeof f[g]=="number"&&(f[g]=f[g].toString(10)),typeof f[g]!="string")throw new Error("DBF Invalid column name "+f[g]+" |"+typeof f[g]+"|");if(f.indexOf(f[g])!==g){for(x=0;x<1024;++x)if(f.indexOf(f[g]+"_"+x)==-1){f[g]+="_"+x;break}}}}var y=St(o["!ref"]),w=[],S=[],N=[];for(g=0;g<=y.e.c-y.s.c;++g){var k="",A="",T=0,F=[];for(x=0;x<p.length;++x)p[x][g]!=null&&F.push(p[x][g]);if(F.length==0||f[g]==null){w[g]="?";continue}for(x=0;x<F.length;++x){switch(typeof F[x]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=F[x]instanceof Date?"D":"C";break;default:A="C"}T=Math.max(T,String(F[x]).length),k=k&&k!=A?"C":A}T>250&&(T=250),A=((m[g]||{}).DBF||{}).type,A=="C"&&m[g].DBF.len>T&&(T=m[g].DBF.len),k=="B"&&A=="N"&&(k="N",N[g]=m[g].DBF.dec,T=m[g].DBF.len),S[g]=k=="C"||A=="N"?T:i[k]||0,b+=S[g],w[g]=k}var I=h.next(32);for(I.write_shift(4,318902576),I.write_shift(4,p.length),I.write_shift(2,296+32*v),I.write_shift(2,b),g=0;g<4;++g)I.write_shift(4,0);for(I.write_shift(4,0|(+e[hw]||3)<<8),g=0,x=0;g<f.length;++g)if(f[g]!=null){var B=h.next(32),Z=(f[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);B.write_shift(1,Z,"sbcs"),B.write_shift(1,w[g]=="?"?"C":w[g],"sbcs"),B.write_shift(4,x),B.write_shift(1,S[g]||i[w[g]]||0),B.write_shift(1,N[g]||0),B.write_shift(1,2),B.write_shift(4,0),B.write_shift(1,0),B.write_shift(4,0),B.write_shift(4,0),x+=S[g]||i[w[g]]||0}var ke=h.next(264);for(ke.write_shift(4,13),g=0;g<65;++g)ke.write_shift(4,0);for(g=0;g<p.length;++g){var ae=h.next(b);for(ae.write_shift(1,0),x=0;x<f.length;++x)if(f[x]!=null)switch(w[x]){case"L":ae.write_shift(1,p[g][x]==null?63:p[g][x]?84:70);break;case"B":ae.write_shift(8,p[g][x]||0,"f");break;case"N":var Te="0";for(typeof p[g][x]=="number"&&(Te=p[g][x].toFixed(N[x]||0)),v=0;v<S[x]-Te.length;++v)ae.write_shift(1,32);ae.write_shift(1,Te,"sbcs");break;case"D":p[g][x]?(ae.write_shift(4,("0000"+p[g][x].getFullYear()).slice(-4),"sbcs"),ae.write_shift(2,("00"+(p[g][x].getMonth()+1)).slice(-2),"sbcs"),ae.write_shift(2,("00"+p[g][x].getDate()).slice(-2),"sbcs")):ae.write_shift(8,"00000000","sbcs");break;case"C":var he=String(p[g][x]!=null?p[g][x]:"").slice(0,S[x]);for(ae.write_shift(1,he,"sbcs"),v=0;v<S[x]-he.length;++v)ae.write_shift(1,32);break}}return h.next(1).write_shift(1,26),h.end()}return{to_workbook:s,to_sheet:n,from_sheet:a}}(),L3=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+xr(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(f,p){var m=t[p];return typeof m=="number"?bx(m):m},n=function(f,p,m){var g=p.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return g==59?f:bx(g)};t["|"]=254;function s(f,p){switch(p.type){case"base64":return i(Rs(f),p);case"binary":return i(f,p);case"buffer":return i(nt&&Buffer.isBuffer(f)?f.toString("binary"):gc(f),p);case"array":return i(nd(f),p)}throw new Error("Unrecognized type "+p.type)}function i(f,p){var m=f.split(/[\n\r]+/),g=-1,x=-1,v=0,b=0,y=[],w=[],S=null,N={},k=[],A=[],T=[],F=0,I;for(+p.codepage>=0&&Yl(+p.codepage);v!==m.length;++v){F=0;var B=m[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),Z=B.replace(/;;/g,"\0").split(";").map(function(P){return P.replace(/\u0000/g,";")}),ke=Z[0],ae;if(B.length>0)switch(ke){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Z[1].charAt(0)=="P"&&w.push(B.slice(3).replace(/;;/g,";"));break;case"C":var Te=!1,he=!1,te=!1,re=!1,le=-1,je=-1;for(b=1;b<Z.length;++b)switch(Z[b].charAt(0)){case"A":break;case"X":x=parseInt(Z[b].slice(1))-1,he=!0;break;case"Y":for(g=parseInt(Z[b].slice(1))-1,he||(x=0),I=y.length;I<=g;++I)y[I]=[];break;case"K":ae=Z[b].slice(1),ae.charAt(0)==='"'?ae=ae.slice(1,ae.length-1):ae==="TRUE"?ae=!0:ae==="FALSE"?ae=!1:isNaN(Ts(ae))?isNaN(ql(ae).getDate())||(ae=Pr(ae)):(ae=Ts(ae),S!==null&&Sw(S)&&(ae=Cw(ae))),Te=!0;break;case"E":re=!0;var M=Mj(Z[b].slice(1),{r:g,c:x});y[g][x]=[y[g][x],M];break;case"S":te=!0,y[g][x]=[y[g][x],"S5S"];break;case"G":break;case"R":le=parseInt(Z[b].slice(1))-1;break;case"C":je=parseInt(Z[b].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+B)}if(Te&&(y[g][x]&&y[g][x].length==2?y[g][x][0]=ae:y[g][x]=ae,S=null),te){if(re)throw new Error("SYLK shared formula cannot have own formula");var U=le>-1&&y[le][je];if(!U||!U[1])throw new Error("SYLK shared formula cannot find base");y[g][x][1]=Fj(U[1],{r:g-le,c:x-je})}break;case"F":var L=0;for(b=1;b<Z.length;++b)switch(Z[b].charAt(0)){case"X":x=parseInt(Z[b].slice(1))-1,++L;break;case"Y":for(g=parseInt(Z[b].slice(1))-1,I=y.length;I<=g;++I)y[I]=[];break;case"M":F=parseInt(Z[b].slice(1))/20;break;case"F":break;case"G":break;case"P":S=w[parseInt(Z[b].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=Z[b].slice(1).split(" "),I=parseInt(T[0],10);I<=parseInt(T[1],10);++I)F=parseInt(T[2],10),A[I-1]=F===0?{hidden:!0}:{wch:F},hg(A[I-1]);break;case"C":x=parseInt(Z[b].slice(1))-1,A[x]||(A[x]={});break;case"R":g=parseInt(Z[b].slice(1))-1,k[g]||(k[g]={}),F>0?(k[g].hpt=F,k[g].hpx=p_(F)):F===0&&(k[g].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+B)}L<1&&(S=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+B)}}return k.length>0&&(N["!rows"]=k),A.length>0&&(N["!cols"]=A),p&&p.sheetRows&&(y=y.slice(0,p.sheetRows)),[y,N]}function a(f,p){var m=s(f,p),g=m[0],x=m[1],v=_o(g,p);return xr(x).forEach(function(b){v[b]=x[b]}),v}function o(f,p){return la(a(f,p),p)}function l(f,p,m,g){var x="C;Y"+(m+1)+";X"+(g+1)+";K";switch(f.t){case"n":x+=f.v||0,f.f&&!f.F&&(x+=";E"+fg(f.f,{r:m,c:g}));break;case"b":x+=f.v?"TRUE":"FALSE";break;case"e":x+=f.w||f.v;break;case"d":x+='"'+(f.w||f.v)+'"';break;case"s":x+='"'+f.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return x}function c(f,p){p.forEach(function(m,g){var x="F;W"+(g+1)+" "+(g+1)+" ";m.hidden?x+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=wh(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=_h(m.wpx)),typeof m.wch=="number"&&(x+=Math.round(m.wch))),x.charAt(x.length-1)!=" "&&f.push(x)})}function h(f,p){p.forEach(function(m,g){var x="F;";m.hidden?x+="M0;":m.hpt?x+="M"+20*m.hpt+";":m.hpx&&(x+="M"+20*Sh(m.hpx)+";"),x.length>2&&f.push(x+"R"+(g+1))})}function d(f,p){var m=["ID;PWXL;N;E"],g=[],x=St(f["!ref"]),v,b=Array.isArray(f),y=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),f["!cols"]&&c(m,f["!cols"]),f["!rows"]&&h(m,f["!rows"]),m.push("B;Y"+(x.e.r-x.s.r+1)+";X"+(x.e.c-x.s.c+1)+";D"+[x.s.c,x.s.r,x.e.c,x.e.r].join(" "));for(var w=x.s.r;w<=x.e.r;++w)for(var S=x.s.c;S<=x.e.c;++S){var N=ut({r:w,c:S});v=b?(f[w]||[])[S]:f[N],!(!v||v.v==null&&(!v.f||v.F))&&g.push(l(v,f,w,S))}return m.join(y)+y+g.join(y)+y+"E"+y}return{to_workbook:o,to_sheet:a,from_sheet:d}}(),B3=function(){function t(i,a){switch(a.type){case"base64":return e(Rs(i),a);case"binary":return e(i,a);case"buffer":return e(nt&&Buffer.isBuffer(i)?i.toString("binary"):gc(i),a);case"array":return e(nd(i),a)}throw new Error("Unrecognized type "+a.type)}function e(i,a){for(var o=i.split(`
`),l=-1,c=-1,h=0,d=[];h!==o.length;++h){if(o[h].trim()==="BOT"){d[++l]=[],c=0;continue}if(!(l<0)){var f=o[h].trim().split(","),p=f[0],m=f[1];++h;for(var g=o[h]||"";(g.match(/["]/g)||[]).length&1&&h<o.length-1;)g+=`
`+o[++h];switch(g=g.trim(),+p){case-1:if(g==="BOT"){d[++l]=[],c=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?d[l][c]=!0:g==="FALSE"?d[l][c]=!1:isNaN(Ts(m))?isNaN(ql(m).getDate())?d[l][c]=m:d[l][c]=Pr(m):d[l][c]=Ts(m),++c;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),d[l][c++]=g!==""?g:null;break}if(g==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function r(i,a){return _o(t(i,a),a)}function n(i,a){return la(r(i,a),a)}var s=function(){var i=function(l,c,h,d,f){l.push(c),l.push(h+","+d),l.push('"'+f.replace(/"/g,'""')+'"')},a=function(l,c,h,d){l.push(c+","+h),l.push(c==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(l){var c=[],h=St(l["!ref"]),d,f=Array.isArray(l);i(c,"TABLE",0,1,"sheetjs"),i(c,"VECTORS",0,h.e.r-h.s.r+1,""),i(c,"TUPLES",0,h.e.c-h.s.c+1,""),i(c,"DATA",0,0,"");for(var p=h.s.r;p<=h.e.r;++p){a(c,-1,0,"BOT");for(var m=h.s.c;m<=h.e.c;++m){var g=ut({r:p,c:m});if(d=f?(l[p]||[])[m]:l[g],!d){a(c,1,0,"");continue}switch(d.t){case"n":var x=d.w;!x&&d.v!=null&&(x=d.v),x==null?d.f&&!d.F?a(c,1,0,"="+d.f):a(c,1,0,""):a(c,0,x,"V");break;case"b":a(c,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(c,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=di(d.z||Ft[14],Gr(Pr(d.v)))),a(c,0,d.w,"V");break;default:a(c,1,0,"")}}}a(c,-1,0,"EOD");var v=`\r
`,b=c.join(v);return b}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),u_=function(){function t(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(d,f){for(var p=d.split(`
`),m=-1,g=-1,x=0,v=[];x!==p.length;++x){var b=p[x].trim().split(":");if(b[0]==="cell"){var y=rr(b[1]);if(v.length<=y.r)for(m=v.length;m<=y.r;++m)v[m]||(v[m]=[]);switch(m=y.r,g=y.c,b[2]){case"t":v[m][g]=t(b[3]);break;case"v":v[m][g]=+b[3];break;case"vtf":var w=b[b.length-1];case"vtc":switch(b[3]){case"nl":v[m][g]=!!+b[4];break;default:v[m][g]=+b[4];break}b[2]=="vtf"&&(v[m][g]=[v[m][g],w])}}}return f&&f.sheetRows&&(v=v.slice(0,f.sheetRows)),v}function n(d,f){return _o(r(d,f),f)}function s(d,f){return la(n(d,f),f)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function c(d){if(!d||!d["!ref"])return"";for(var f=[],p=[],m,g="",x=dn(d["!ref"]),v=Array.isArray(d),b=x.s.r;b<=x.e.r;++b)for(var y=x.s.c;y<=x.e.c;++y)if(g=ut({r:b,c:y}),m=v?(d[b]||[])[y]:d[g],!(!m||m.v==null||m.t==="z")){switch(p=["cell",g,"t"],m.t){case"s":case"str":p.push(e(m.v));break;case"n":m.f?(p[2]="vtf",p[3]="n",p[4]=m.v,p[5]=e(m.f)):(p[2]="v",p[3]=m.v);break;case"b":p[2]="vt"+(m.f?"f":"c"),p[3]="nl",p[4]=m.v?"1":"0",p[5]=e(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var w=Gr(Pr(m.v));p[2]="vtc",p[3]="nd",p[4]=""+w,p[5]=m.w||di(m.z||Ft[14],w);break;case"e":continue}f.push(p.join(":"))}return f.push("sheet:c:"+(x.e.c-x.s.c+1)+":r:"+(x.e.r-x.s.r+1)+":tvf:1"),f.push("valueformat:1:text-wiki"),f.join(`
`)}function h(d){return[i,a,o,a,c(d),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:h}}(),U3=function(){function t(h,d,f,p,m){m.raw?d[f][p]=h:h===""||(h==="TRUE"?d[f][p]=!0:h==="FALSE"?d[f][p]=!1:isNaN(Ts(h))?isNaN(ql(h).getDate())?d[f][p]=h:d[f][p]=Pr(h):d[f][p]=Ts(h))}function e(h,d){var f=d||{},p=[];if(!h||h.length===0)return p;for(var m=h.split(/[\r\n]/),g=m.length-1;g>=0&&m[g].length===0;)--g;for(var x=10,v=0,b=0;b<=g;++b)v=m[b].indexOf(" "),v==-1?v=m[b].length:v++,x=Math.max(x,v);for(b=0;b<=g;++b){p[b]=[];var y=0;for(t(m[b].slice(0,x).trim(),p,b,y,f),y=1;y<=(m[b].length-x)/10+1;++y)t(m[b].slice(x+(y-1)*10,x+y*10).trim(),p,b,y,f)}return f.sheetRows&&(p=p.slice(0,f.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(h){for(var d={},f=!1,p=0,m=0;p<h.length;++p)(m=h.charCodeAt(p))==34?f=!f:!f&&m in r&&(d[m]=(d[m]||0)+1);m=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&m.push([d[p],p]);if(!m.length){d=n;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&m.push([d[p],p])}return m.sort(function(g,x){return g[0]-x[0]||n[g[1]]-n[x[1]]}),r[m.pop()[1]]||44}function i(h,d){var f=d||{},p="",m=f.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};h.slice(0,4)=="sep="?h.charCodeAt(5)==13&&h.charCodeAt(6)==10?(p=h.charAt(4),h=h.slice(7)):h.charCodeAt(5)==13||h.charCodeAt(5)==10?(p=h.charAt(4),h=h.slice(6)):p=s(h.slice(0,1024)):f&&f.FS?p=f.FS:p=s(h.slice(0,1024));var x=0,v=0,b=0,y=0,w=0,S=p.charCodeAt(0),N=!1,k=0,A=h.charCodeAt(0);h=h.replace(/\r\n/mg,`
`);var T=f.dateNF!=null?rN(f.dateNF):null;function F(){var I=h.slice(y,w),B={};if(I.charAt(0)=='"'&&I.charAt(I.length-1)=='"'&&(I=I.slice(1,-1).replace(/""/g,'"')),I.length===0)B.t="z";else if(f.raw)B.t="s",B.v=I;else if(I.trim().length===0)B.t="s",B.v=I;else if(I.charCodeAt(0)==61)I.charCodeAt(1)==34&&I.charCodeAt(I.length-1)==34?(B.t="s",B.v=I.slice(2,-1).replace(/""/g,'"')):Lj(I)?(B.t="n",B.f=I.slice(1)):(B.t="s",B.v=I);else if(I=="TRUE")B.t="b",B.v=!0;else if(I=="FALSE")B.t="b",B.v=!1;else if(!isNaN(b=Ts(I)))B.t="n",f.cellText!==!1&&(B.w=I),B.v=b;else if(!isNaN(ql(I).getDate())||T&&I.match(T)){B.z=f.dateNF||Ft[14];var Z=0;T&&I.match(T)&&(I=nN(I,f.dateNF,I.match(T)||[]),Z=1),f.cellDates?(B.t="d",B.v=Pr(I,Z)):(B.t="n",B.v=Gr(Pr(I,Z))),f.cellText!==!1&&(B.w=di(B.z,B.v instanceof Date?Gr(B.v):B.v)),f.cellNF||delete B.z}else B.t="s",B.v=I;if(B.t=="z"||(f.dense?(m[x]||(m[x]=[]),m[x][v]=B):m[ut({c:v,r:x})]=B),y=w+1,A=h.charCodeAt(y),g.e.c<v&&(g.e.c=v),g.e.r<x&&(g.e.r=x),k==S)++v;else if(v=0,++x,f.sheetRows&&f.sheetRows<=x)return!0}e:for(;w<h.length;++w)switch(k=h.charCodeAt(w)){case 34:A===34&&(N=!N);break;case S:case 10:case 13:if(!N&&F())break e;break}return w-y>0&&F(),m["!ref"]=Wt(g),m}function a(h,d){return!(d&&d.PRN)||d.FS||h.slice(0,4)=="sep="||h.indexOf("	")>=0||h.indexOf(",")>=0||h.indexOf(";")>=0?i(h,d):_o(e(h,d),d)}function o(h,d){var f="",p=d.type=="string"?[0,0,0,0]:Q5(h,d);switch(d.type){case"base64":f=Rs(h);break;case"binary":f=h;break;case"buffer":d.codepage==65001?f=h.toString("utf8"):d.codepage&&typeof dh<"u"||(f=nt&&Buffer.isBuffer(h)?h.toString("binary"):gc(h));break;case"array":f=nd(h);break;case"string":f=h;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?f=gl(f.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?f=gl(f):d.type=="binary"&&typeof dh<"u",f.slice(0,19)=="socialcalc:version:"?u_.to_sheet(d.type=="string"?f:gl(f),d):a(f,d)}function l(h,d){return la(o(h,d),d)}function c(h){for(var d=[],f=St(h["!ref"]),p,m=Array.isArray(h),g=f.s.r;g<=f.e.r;++g){for(var x=[],v=f.s.c;v<=f.e.c;++v){var b=ut({r:g,c:v});if(p=m?(h[g]||[])[v]:h[b],!p||p.v==null){x.push("          ");continue}for(var y=(p.w||(Ds(p),p.w)||"").slice(0,10);y.length<10;)y+=" ";x.push(y+(v===0?" ":""))}d.push(x.join(""))}return d.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:c}}(),qx=function(){function t(M,U,L){if(M){nn(M,M.l||0);for(var P=L.Enum||le;M.l<M.length;){var V=M.read_shift(2),ce=P[V]||P[65535],we=M.read_shift(2),xe=M.l+we,X=ce.f&&ce.f(M,we,L);if(M.l=xe,U(X,ce,V))return}}}function e(M,U){switch(U.type){case"base64":return r(Ln(Rs(M)),U);case"binary":return r(Ln(M),U);case"buffer":case"array":return r(M,U)}throw"Unsupported type "+U.type}function r(M,U){if(!M)return M;var L=U||{},P=L.dense?[]:{},V="Sheet1",ce="",we=0,xe={},X=[],ve=[],Ee={s:{r:0,c:0},e:{r:0,c:0}},Se=L.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)L.Enum=le,t(M,function(fe,xt,st){switch(st){case 0:L.vers=fe,fe>=4096&&(L.qpro=!0);break;case 6:Ee=fe;break;case 204:fe&&(ce=fe);break;case 222:ce=fe;break;case 15:case 51:L.qpro||(fe[1].v=fe[1].v.slice(1));case 13:case 14:case 16:st==14&&(fe[2]&112)==112&&(fe[2]&15)>1&&(fe[2]&15)<15&&(fe[1].z=L.dateNF||Ft[14],L.cellDates&&(fe[1].t="d",fe[1].v=Cw(fe[1].v))),L.qpro&&fe[3]>we&&(P["!ref"]=Wt(Ee),xe[V]=P,X.push(V),P=L.dense?[]:{},Ee={s:{r:0,c:0},e:{r:0,c:0}},we=fe[3],V=ce||"Sheet"+(we+1),ce="");var Zt=L.dense?(P[fe[0].r]||[])[fe[0].c]:P[ut(fe[0])];if(Zt){Zt.t=fe[1].t,Zt.v=fe[1].v,fe[1].z!=null&&(Zt.z=fe[1].z),fe[1].f!=null&&(Zt.f=fe[1].f);break}L.dense?(P[fe[0].r]||(P[fe[0].r]=[]),P[fe[0].r][fe[0].c]=fe[1]):P[ut(fe[0])]=fe[1];break}},L);else if(M[2]==26||M[2]==14)L.Enum=je,M[2]==14&&(L.qpro=!0,M.l=0),t(M,function(fe,xt,st){switch(st){case 204:V=fe;break;case 22:fe[1].v=fe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(fe[3]>we&&(P["!ref"]=Wt(Ee),xe[V]=P,X.push(V),P=L.dense?[]:{},Ee={s:{r:0,c:0},e:{r:0,c:0}},we=fe[3],V="Sheet"+(we+1)),Se>0&&fe[0].r>=Se)break;L.dense?(P[fe[0].r]||(P[fe[0].r]=[]),P[fe[0].r][fe[0].c]=fe[1]):P[ut(fe[0])]=fe[1],Ee.e.c<fe[0].c&&(Ee.e.c=fe[0].c),Ee.e.r<fe[0].r&&(Ee.e.r=fe[0].r);break;case 27:fe[14e3]&&(ve[fe[14e3][0]]=fe[14e3][1]);break;case 1537:ve[fe[0]]=fe[1],fe[0]==we&&(V=fe[1]);break}},L);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(P["!ref"]=Wt(Ee),xe[ce||V]=P,X.push(ce||V),!ve.length)return{SheetNames:X,Sheets:xe};for(var Ce={},rt=[],We=0;We<ve.length;++We)xe[X[We]]?(rt.push(ve[We]||X[We]),Ce[ve[We]]=xe[ve[We]]||xe[X[We]]):(rt.push(ve[We]),Ce[ve[We]]={"!ref":"A1"});return{SheetNames:rt,Sheets:Ce}}function n(M,U){var L=U||{};if(+L.codepage>=0&&Yl(+L.codepage),L.type=="string")throw new Error("Cannot write WK1 to JS string");var P=Hr(),V=St(M["!ref"]),ce=Array.isArray(M),we=[];me(P,0,i(1030)),me(P,6,l(V));for(var xe=Math.min(V.e.r,8191),X=V.s.r;X<=xe;++X)for(var ve=gr(X),Ee=V.s.c;Ee<=V.e.c;++Ee){X===V.s.r&&(we[Ee]=kr(Ee));var Se=we[Ee]+ve,Ce=ce?(M[X]||[])[Ee]:M[Se];if(!(!Ce||Ce.t=="z"))if(Ce.t=="n")(Ce.v|0)==Ce.v&&Ce.v>=-32768&&Ce.v<=32767?me(P,13,p(X,Ee,Ce.v)):me(P,14,g(X,Ee,Ce.v));else{var rt=Ds(Ce);me(P,15,d(X,Ee,rt.slice(0,239)))}}return me(P,1),P.end()}function s(M,U){var L=U||{};if(+L.codepage>=0&&Yl(+L.codepage),L.type=="string")throw new Error("Cannot write WK3 to JS string");var P=Hr();me(P,0,a(M));for(var V=0,ce=0;V<M.SheetNames.length;++V)(M.Sheets[M.SheetNames[V]]||{})["!ref"]&&me(P,27,re(M.SheetNames[V],ce++));var we=0;for(V=0;V<M.SheetNames.length;++V){var xe=M.Sheets[M.SheetNames[V]];if(!(!xe||!xe["!ref"])){for(var X=St(xe["!ref"]),ve=Array.isArray(xe),Ee=[],Se=Math.min(X.e.r,8191),Ce=X.s.r;Ce<=Se;++Ce)for(var rt=gr(Ce),We=X.s.c;We<=X.e.c;++We){Ce===X.s.r&&(Ee[We]=kr(We));var fe=Ee[We]+rt,xt=ve?(xe[Ce]||[])[We]:xe[fe];if(!(!xt||xt.t=="z"))if(xt.t=="n")me(P,23,F(Ce,We,we,xt.v));else{var st=Ds(xt);me(P,22,k(Ce,We,we,st.slice(0,239)))}}++we}}return me(P,1),P.end()}function i(M){var U=Q(2);return U.write_shift(2,M),U}function a(M){var U=Q(26);U.write_shift(2,4096),U.write_shift(2,4),U.write_shift(4,0);for(var L=0,P=0,V=0,ce=0;ce<M.SheetNames.length;++ce){var we=M.SheetNames[ce],xe=M.Sheets[we];if(!(!xe||!xe["!ref"])){++V;var X=dn(xe["!ref"]);L<X.e.r&&(L=X.e.r),P<X.e.c&&(P=X.e.c)}}return L>8191&&(L=8191),U.write_shift(2,L),U.write_shift(1,V),U.write_shift(1,P),U.write_shift(2,0),U.write_shift(2,0),U.write_shift(1,1),U.write_shift(1,2),U.write_shift(4,0),U.write_shift(4,0),U}function o(M,U,L){var P={s:{c:0,r:0},e:{c:0,r:0}};return U==8&&L.qpro?(P.s.c=M.read_shift(1),M.l++,P.s.r=M.read_shift(2),P.e.c=M.read_shift(1),M.l++,P.e.r=M.read_shift(2),P):(P.s.c=M.read_shift(2),P.s.r=M.read_shift(2),U==12&&L.qpro&&(M.l+=2),P.e.c=M.read_shift(2),P.e.r=M.read_shift(2),U==12&&L.qpro&&(M.l+=2),P.s.c==65535&&(P.s.c=P.e.c=P.s.r=P.e.r=0),P)}function l(M){var U=Q(8);return U.write_shift(2,M.s.c),U.write_shift(2,M.s.r),U.write_shift(2,M.e.c),U.write_shift(2,M.e.r),U}function c(M,U,L){var P=[{c:0,r:0},{t:"n",v:0},0,0];return L.qpro&&L.vers!=20768?(P[0].c=M.read_shift(1),P[3]=M.read_shift(1),P[0].r=M.read_shift(2),M.l+=2):(P[2]=M.read_shift(1),P[0].c=M.read_shift(2),P[0].r=M.read_shift(2)),P}function h(M,U,L){var P=M.l+U,V=c(M,U,L);if(V[1].t="s",L.vers==20768){M.l++;var ce=M.read_shift(1);return V[1].v=M.read_shift(ce,"utf8"),V}return L.qpro&&M.l++,V[1].v=M.read_shift(P-M.l,"cstr"),V}function d(M,U,L){var P=Q(7+L.length);P.write_shift(1,255),P.write_shift(2,U),P.write_shift(2,M),P.write_shift(1,39);for(var V=0;V<P.length;++V){var ce=L.charCodeAt(V);P.write_shift(1,ce>=128?95:ce)}return P.write_shift(1,0),P}function f(M,U,L){var P=c(M,U,L);return P[1].v=M.read_shift(2,"i"),P}function p(M,U,L){var P=Q(7);return P.write_shift(1,255),P.write_shift(2,U),P.write_shift(2,M),P.write_shift(2,L,"i"),P}function m(M,U,L){var P=c(M,U,L);return P[1].v=M.read_shift(8,"f"),P}function g(M,U,L){var P=Q(13);return P.write_shift(1,255),P.write_shift(2,U),P.write_shift(2,M),P.write_shift(8,L,"f"),P}function x(M,U,L){var P=M.l+U,V=c(M,U,L);if(V[1].v=M.read_shift(8,"f"),L.qpro)M.l=P;else{var ce=M.read_shift(2);w(M.slice(M.l,M.l+ce),V),M.l+=ce}return V}function v(M,U,L){var P=U&32768;return U&=-32769,U=(P?M:0)+(U>=8192?U-16384:U),(P?"":"$")+(L?kr(U):gr(U))}var b={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},y=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(M,U){nn(M,0);for(var L=[],P=0,V="",ce="",we="",xe="";M.l<M.length;){var X=M[M.l++];switch(X){case 0:L.push(M.read_shift(8,"f"));break;case 1:ce=v(U[0].c,M.read_shift(2),!0),V=v(U[0].r,M.read_shift(2),!1),L.push(ce+V);break;case 2:{var ve=v(U[0].c,M.read_shift(2),!0),Ee=v(U[0].r,M.read_shift(2),!1);ce=v(U[0].c,M.read_shift(2),!0),V=v(U[0].r,M.read_shift(2),!1),L.push(ve+Ee+":"+ce+V)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:L.push("("+L.pop()+")");break;case 5:L.push(M.read_shift(2));break;case 6:{for(var Se="";X=M[M.l++];)Se+=String.fromCharCode(X);L.push('"'+Se.replace(/"/g,'""')+'"')}break;case 8:L.push("-"+L.pop());break;case 23:L.push("+"+L.pop());break;case 22:L.push("NOT("+L.pop()+")");break;case 20:case 21:xe=L.pop(),we=L.pop(),L.push(["AND","OR"][X-20]+"("+we+","+xe+")");break;default:if(X<32&&y[X])xe=L.pop(),we=L.pop(),L.push(we+y[X]+xe);else if(b[X]){if(P=b[X][1],P==69&&(P=M[M.l++]),P>L.length){console.error("WK1 bad formula parse 0x"+X.toString(16)+":|"+L.join("|")+"|");return}var Ce=L.slice(-P);L.length-=P,L.push(b[X][0]+"("+Ce.join(",")+")")}else return X<=7?console.error("WK1 invalid opcode "+X.toString(16)):X<=24?console.error("WK1 unsupported op "+X.toString(16)):X<=30?console.error("WK1 invalid opcode "+X.toString(16)):X<=115?console.error("WK1 unsupported function opcode "+X.toString(16)):console.error("WK1 unrecognized opcode "+X.toString(16))}}L.length==1?U[1].f=""+L[0]:console.error("WK1 bad formula parse |"+L.join("|")+"|")}function S(M){var U=[{c:0,r:0},{t:"n",v:0},0];return U[0].r=M.read_shift(2),U[3]=M[M.l++],U[0].c=M[M.l++],U}function N(M,U){var L=S(M);return L[1].t="s",L[1].v=M.read_shift(U-4,"cstr"),L}function k(M,U,L,P){var V=Q(6+P.length);V.write_shift(2,M),V.write_shift(1,L),V.write_shift(1,U),V.write_shift(1,39);for(var ce=0;ce<P.length;++ce){var we=P.charCodeAt(ce);V.write_shift(1,we>=128?95:we)}return V.write_shift(1,0),V}function A(M,U){var L=S(M);L[1].v=M.read_shift(2);var P=L[1].v>>1;if(L[1].v&1)switch(P&7){case 0:P=(P>>3)*5e3;break;case 1:P=(P>>3)*500;break;case 2:P=(P>>3)/20;break;case 3:P=(P>>3)/200;break;case 4:P=(P>>3)/2e3;break;case 5:P=(P>>3)/2e4;break;case 6:P=(P>>3)/16;break;case 7:P=(P>>3)/64;break}return L[1].v=P,L}function T(M,U){var L=S(M),P=M.read_shift(4),V=M.read_shift(4),ce=M.read_shift(2);if(ce==65535)return P===0&&V===3221225472?(L[1].t="e",L[1].v=15):P===0&&V===3489660928?(L[1].t="e",L[1].v=42):L[1].v=0,L;var we=ce&32768;return ce=(ce&32767)-16446,L[1].v=(1-we*2)*(V*Math.pow(2,ce+32)+P*Math.pow(2,ce)),L}function F(M,U,L,P){var V=Q(14);if(V.write_shift(2,M),V.write_shift(1,L),V.write_shift(1,U),P==0)return V.write_shift(4,0),V.write_shift(4,0),V.write_shift(2,65535),V;var ce=0,we=0,xe=0,X=0;return P<0&&(ce=1,P=-P),we=Math.log2(P)|0,P/=Math.pow(2,we-31),X=P>>>0,X&2147483648||(P/=2,++we,X=P>>>0),P-=X,X|=2147483648,X>>>=0,P*=Math.pow(2,32),xe=P>>>0,V.write_shift(4,xe),V.write_shift(4,X),we+=16383+(ce?32768:0),V.write_shift(2,we),V}function I(M,U){var L=T(M);return M.l+=U-14,L}function B(M,U){var L=S(M),P=M.read_shift(4);return L[1].v=P>>6,L}function Z(M,U){var L=S(M),P=M.read_shift(8,"f");return L[1].v=P,L}function ke(M,U){var L=Z(M);return M.l+=U-10,L}function ae(M,U){return M[M.l+U-1]==0?M.read_shift(U,"cstr"):""}function Te(M,U){var L=M[M.l++];L>U-1&&(L=U-1);for(var P="";P.length<L;)P+=String.fromCharCode(M[M.l++]);return P}function he(M,U,L){if(!(!L.qpro||U<21)){var P=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var V=M.read_shift(U-21,"cstr");return[P,V]}}function te(M,U){for(var L={},P=M.l+U;M.l<P;){var V=M.read_shift(2);if(V==14e3){for(L[V]=[0,""],L[V][0]=M.read_shift(2);M[M.l];)L[V][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return L}function re(M,U){var L=Q(5+M.length);L.write_shift(2,14e3),L.write_shift(2,U);for(var P=0;P<M.length;++P){var V=M.charCodeAt(P);L[L.l++]=V>127?95:V}return L[L.l++]=0,L}var le={0:{n:"BOF",f:i_},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f},14:{n:"NUMBER",f:m},15:{n:"LABEL",f:h},16:{n:"FORMULA",f:x},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:h},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ae},222:{n:"SHEETNAMELP",f:Te},65535:{n:""}},je={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:N},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:I},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:te},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:B},38:{n:"??"},39:{n:"NUMBER27",f:Z},40:{n:"FORMULA28",f:ke},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ae},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:he},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}(),z3=/^\s|\s$|[\t\n\r]/;function h_(t,e){if(!e.bookSST)return"";var r=[Ht];r[r.length]=ge("sst",null,{xmlns:wo[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var s=t[n],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(z3)&&(i+=' xml:space="preserve"'),i+=">"+lt(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function $3(t){return[t.read_shift(4),t.read_shift(4)]}function W3(t,e){return e||(e=Q(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var V3=PN;function H3(t){var e=Hr();se(e,159,W3(t));for(var r=0;r<t.length;++r)se(e,19,V3(t[r]));return se(e,160),e.end()}function G3(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function d_(t){var e=0,r,n=G3(t),s=n.length+1,i,a,o,l,c;for(r=ta(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)a=r[i],o=e&16384?1:0,l=e<<1&32767,c=o|l,e=c^a;return e^52811}var K3=function(){function t(s,i){switch(i.type){case"base64":return e(Rs(s),i);case"binary":return e(s,i);case"buffer":return e(nt&&Buffer.isBuffer(s)?s.toString("binary"):gc(s),i);case"array":return e(nd(s),i)}throw new Error("Unrecognized type "+i.type)}function e(s,i){var a=i||{},o=a.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(h,d){Array.isArray(o)&&(o[d]=[]);for(var f=/\\\w+\b/g,p=0,m,g=-1;m=f.exec(h);){switch(m[0]){case"\\cell":var x=h.slice(p,f.lastIndex-m[0].length);if(x[0]==" "&&(x=x.slice(1)),++g,x.length){var v={v:x,t:"s"};Array.isArray(o)?o[d][g]=v:o[ut({r:d,c:g})]=v}break}p=f.lastIndex}g>c.e.c&&(c.e.c=g)}),o["!ref"]=Wt(c),o}function r(s,i){return la(t(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],a=St(s["!ref"]),o,l=Array.isArray(s),c=a.s.r;c<=a.e.r;++c){i.push("\\trowd\\trautofit1");for(var h=a.s.c;h<=a.e.c;++h)i.push("\\cellx"+(h+1));for(i.push("\\pard\\intbl"),h=a.s.c;h<=a.e.c;++h){var d=ut({r:c,c:h});o=l?(s[c]||[])[h]:s[d],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(Ds(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function Jx(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}var Y3=6,Cs=Y3;function wh(t){return Math.floor((t+Math.round(128/Cs)/256)*Cs)}function _h(t){return Math.floor((t-5)/Cs*100+.5)/100}function R0(t){return Math.round((t*Cs+5)/Cs*256)/256}function hg(t){t.width?(t.wpx=wh(t.width),t.wch=_h(t.wpx),t.MDW=Cs):t.wpx?(t.wch=_h(t.wpx),t.width=R0(t.wch),t.MDW=Cs):typeof t.wch=="number"&&(t.width=R0(t.wch),t.wpx=wh(t.width),t.MDW=Cs),t.customWidth&&delete t.customWidth}var X3=96,f_=X3;function Sh(t){return t*96/f_}function p_(t){return t*f_/96}function q3(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=ge("numFmt",null,{numFmtId:n,formatCode:lt(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=ge("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function J3(t){var e=[];return e[e.length]=ge("cellXfs",null),t.forEach(function(r){e[e.length]=ge("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=ge("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function g_(t,e){var r=[Ht,ge("styleSheet",null,{xmlns:wo[0],"xmlns:vt":tr.vt})],n;return t.SSF&&(n=q3(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=J3(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Q3(t,e){var r=t.read_shift(2),n=Er(t);return[r,n]}function Z3(t,e,r){r||(r=Q(6+4*e.length)),r.write_shift(2,t),nr(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function ej(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=zN(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=t.read_shift(2);switch(i===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=t.read_shift(1);a!=0&&(n.underline=a);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=UN(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Er(t),n}function tj(t,e){e||(e=Q(25+4*32)),e.write_shift(2,t.sz*20),$N(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),bh(t.color,e);var n=0;return n=2,e.write_shift(1,n),nr(t.name,e),e.length>e.l?e.slice(0,e.l):e}var rj=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],tf,nj=us;function Qx(t,e){e||(e=Q(4*3+8*7+16*1)),tf||(tf=Zp(rj));var r=tf[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(bh({auto:1},e),bh({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function sj(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}function m_(t,e,r){r||(r=Q(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Io(t,e){return e||(e=Q(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var ij=us;function aj(t,e){return e||(e=Q(51)),e.write_shift(1,0),Io(null,e),Io(null,e),Io(null,e),Io(null,e),Io(null,e),e.length>e.l?e.slice(0,e.l):e}function oj(t,e){return e||(e=Q(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),vh(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function lj(t,e,r){var n=Q(2052);return n.write_shift(4,t),vh(e,n),vh(r,n),n.length>n.l?n.slice(0,n.l):n}function cj(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&++r}),r!=0&&(se(t,615,Wn(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&se(t,44,Z3(s,e[s]))}),se(t,616))}}function uj(t){var e=1;se(t,611,Wn(e)),se(t,43,tj({sz:12,color:{theme:1},name:"Calibri",family:2})),se(t,612)}function hj(t){var e=2;se(t,603,Wn(e)),se(t,45,Qx({patternType:"none"})),se(t,45,Qx({patternType:"gray125"})),se(t,604)}function dj(t){var e=1;se(t,613,Wn(e)),se(t,46,aj()),se(t,614)}function fj(t){var e=1;se(t,626,Wn(e)),se(t,47,m_({numFmtId:0},65535)),se(t,627)}function pj(t,e){se(t,617,Wn(e.length)),e.forEach(function(r){se(t,47,m_(r,0))}),se(t,618)}function gj(t){var e=1;se(t,619,Wn(e)),se(t,48,oj({xfId:0,name:"Normal"})),se(t,620)}function mj(t){var e=0;se(t,505,Wn(e)),se(t,506)}function xj(t){var e=0;se(t,508,lj(e,"TableStyleMedium9","PivotStyleMedium4")),se(t,509)}function vj(t,e){var r=Hr();return se(r,278),cj(r,t.SSF),uj(r),hj(r),dj(r),fj(r),pj(r,e.cellXfs),gj(r),mj(r),xj(r),se(r,279),r.end()}function x_(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Ht];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function bj(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:Er(t)}}function yj(t){var e=Q(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),nr(t.name,e),e.slice(0,e.l)}function wj(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function _j(t){var e=Q(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function Sj(t,e){var r=Q(8+2*e.length);return r.write_shift(4,t),nr(e,r),r.slice(0,r.l)}function kj(t){return t.l+=4,t.read_shift(4)!=0}function Ej(t,e){var r=Q(8);return r.write_shift(4,t),r.write_shift(4,1),r}function Tj(){var t=Hr();return se(t,332),se(t,334,Wn(1)),se(t,335,yj({name:"XLDAPR",version:12e4,flags:3496657072})),se(t,336),se(t,339,Sj(1,"XLDAPR")),se(t,52),se(t,35,Wn(514)),se(t,4096,Wn(0)),se(t,4097,vn(1)),se(t,36),se(t,53),se(t,340),se(t,337,Ej(1)),se(t,51,_j([[1,0]])),se(t,338),se(t,333),t.end()}function v_(){var t=[Ht];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function Cj(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=ut(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var Ha=1024;function b_(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[ge("xml",null,{"xmlns:v":sn.v,"xmlns:o":sn.o,"xmlns:x":sn.x,"xmlns:mv":sn.mv}).replace(/\/>/,">"),ge("o:shapelayout",ge("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),ge("v:shapetype",[ge("v:stroke",null,{joinstyle:"miter"}),ge("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Ha<t*1e3;)Ha+=1e3;return e.forEach(function(i){var a=rr(i[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?ge("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=ge("v:fill",l,o),h={on:"t",obscured:"t"};++Ha,s=s.concat(["<v:shape"+Ql({id:"_x0000_s"+Ha,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,ge("v:shadow",null,h),ge("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",fr("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),fr("x:AutoFill","False"),fr("x:Row",String(a.r)),fr("x:Column",String(a.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function y_(t){var e=[Ht,ge("comments",null,{xmlns:wo[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(s){var i=lt(s.a);r.indexOf(i)==-1&&(r.push(i),e.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var s=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(s=r.indexOf(lt(l.a))),i.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),i.length<=1)e.push(fr("t",lt(i[0]||"")));else{for(var a=`Comment:
    `+i[0]+`
`,o=1;o<i.length;++o)a+=`Reply:
    `+i[o]+`
`;e.push(fr("t",lt(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function Aj(t,e,r){var n=[Ht,ge("ThreadedComments",null,{xmlns:tr.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var i="";(s[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?i=l.id:l.parentId=i,a.ID=l.id,a.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),n.push(ge("threadedComment",fr("text",a.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function Nj(t){var e=[Ht,ge("personList",null,{xmlns:tr.TCMNT,"xmlns:x":wo[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(ge("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function jj(t){var e={};e.iauthor=t.read_shift(4);var r=da(t);return e.rfx=r.s,e.ref=ut(r.s),t.l+=16,e}function Oj(t,e){return e==null&&(e=Q(36)),e.write_shift(4,t[1].iauthor),So(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var Rj=Er;function Dj(t){return nr(t.slice(0,54))}function Pj(t){var e=Hr(),r=[];return se(e,628),se(e,630),t.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),se(e,632,Dj(s.a)))})}),se(e,631),se(e,633),t.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:rr(n[0]),e:rr(n[0])};se(e,635,Oj([i,s])),s.t&&s.t.length>0&&se(e,637,MN(s)),se(e,636),delete s.iauthor})}),se(e,634),se(e,629),e.end()}function Ij(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&ht.utils.cfb_add(t,s,e.FileIndex[n].content)}})}var w_=["xlsb","xlsm","xlam","biff8","xla"],Mj=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,i,a){var o=!1,l=!1;i.length==0?l=!0:i.charAt(0)=="["&&(l=!0,i=i.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var c=i.length>0?parseInt(i,10)|0:0,h=a.length>0?parseInt(a,10)|0:0;return o?h+=e.c:--h,l?c+=e.r:--c,s+(o?"":"$")+kr(h)+(l?"":"$")+gr(c)}return function(s,i){return e=i,s.replace(t,r)}}(),dg=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,fg=function(){return function(e,r){return e.replace(dg,function(n,s,i,a,o,l){var c=ag(a)-(i?0:r.c),h=ig(l)-(o?0:r.r),d=h==0?"":o?h+1:"["+h+"]",f=c==0?"":i?c+1:"["+c+"]";return s+"R"+d+"C"+f})}}();function Fj(t,e){return t.replace(dg,function(r,n,s,i,a,o){return n+(s=="$"?s+i:kr(ag(i)+e.c))+(a=="$"?a+o:gr(ig(o)+e.r))})}function Lj(t){return t.length!=1}function Ut(t){t.l+=1}function fi(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function __(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return S_(t);r.biff==12&&(n=4)}var s=t.read_shift(n),i=t.read_shift(n),a=fi(t),o=fi(t);return{s:{r:s,c:a[0],cRel:a[1],rRel:a[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function S_(t){var e=fi(t),r=fi(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function Bj(t,e,r){if(r.biff<8)return S_(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),i=fi(t),a=fi(t);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}function k_(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return Uj(t);var n=t.read_shift(r&&r.biff==12?4:2),s=fi(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function Uj(t){var e=fi(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function zj(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function $j(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return Wj(t);var s=t.read_shift(n>=12?4:2),i=t.read_shift(2),a=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;s>524287;)s-=1048576;if(a==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:a,rRel:o}}function Wj(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function Vj(t,e,r){var n=(t[t.l++]&96)>>5,s=__(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function Hj(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}var a=__(t,i,r);return[n,s,a]}function Gj(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Kj(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=8;if(r)switch(r.biff){case 5:t.l+=12,i=6;break;case 12:i=12;break}return t.l+=i,[n,s]}function Yj(t,e,r){var n=(t[t.l++]&96)>>5,s=Bj(t,e-1,r);return[n,s]}function Xj(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function Zx(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function qj(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function Jj(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Qj(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function Zj(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function eO(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function E_(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function tO(t){return t.read_shift(2),E_(t)}function rO(t){return t.read_shift(2),E_(t)}function nO(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=k_(t,0,r);return[n,s]}function sO(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=$j(t,0,r);return[n,s]}function iO(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var i=k_(t,0,r);return[n,s,i]}function aO(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[aR[s],A_[s],n]}function oO(t,e,r){var n=t[t.l++],s=t.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:lO(t);return[s,(i[0]===0?A_:iR)[i[1]]]}function lO(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function cO(t,e,r){t.l+=r&&r.biff==2?3:4}function uO(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function hO(t){return t.l++,vc[t.read_shift(1)]}function dO(t){return t.l++,t.read_shift(2)}function fO(t){return t.l++,t.read_shift(1)!==0}function pO(t){return t.l++,ko(t)}function gO(t,e,r){return t.l++,o_(t,e-1,r)}function mO(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=i3(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=vc[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=ko(t);break;case 2:r[1]=c3(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function xO(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?da:d3)(t));return s}function vO(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,a=[];i!=n&&(a[i]=[]);++i)for(var o=0;o!=s;++o)a[i][o]=mO(t,r.biff);return a}function bO(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,i]}function yO(t,e,r){if(r.biff==5)return wO(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),i=t.read_shift(4);return[n,s,i]}function wO(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function _O(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function SO(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function kO(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function EO(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return t.l+=i,[n,s]}var TO=us,CO=us,AO=us;function bc(t,e,r){return t.l+=2,[zj(t)]}function pg(t){return t.l+=6,[]}var NO=bc,jO=pg,OO=pg,RO=bc;function T_(t){return t.l+=2,[i_(t),t.read_shift(2)&1]}var DO=bc,PO=T_,IO=pg,MO=bc,FO=bc,LO=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function BO(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),i=t.read_shift(2),a=LO[r>>2&31];return{ixti:e,coltype:r&3,rt:a,idx:n,c:s,C:i}}function UO(t){return t.l+=2,[t.read_shift(4)]}function zO(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function $O(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function WO(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function VO(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function HO(t){return t.l+=4,[0,0]}var e1={1:{n:"PtgExp",f:uO},2:{n:"PtgTbl",f:AO},3:{n:"PtgAdd",f:Ut},4:{n:"PtgSub",f:Ut},5:{n:"PtgMul",f:Ut},6:{n:"PtgDiv",f:Ut},7:{n:"PtgPower",f:Ut},8:{n:"PtgConcat",f:Ut},9:{n:"PtgLt",f:Ut},10:{n:"PtgLe",f:Ut},11:{n:"PtgEq",f:Ut},12:{n:"PtgGe",f:Ut},13:{n:"PtgGt",f:Ut},14:{n:"PtgNe",f:Ut},15:{n:"PtgIsect",f:Ut},16:{n:"PtgUnion",f:Ut},17:{n:"PtgRange",f:Ut},18:{n:"PtgUplus",f:Ut},19:{n:"PtgUminus",f:Ut},20:{n:"PtgPercent",f:Ut},21:{n:"PtgParen",f:Ut},22:{n:"PtgMissArg",f:Ut},23:{n:"PtgStr",f:gO},26:{n:"PtgSheet",f:zO},27:{n:"PtgEndSheet",f:$O},28:{n:"PtgErr",f:hO},29:{n:"PtgBool",f:fO},30:{n:"PtgInt",f:dO},31:{n:"PtgNum",f:pO},32:{n:"PtgArray",f:Xj},33:{n:"PtgFunc",f:aO},34:{n:"PtgFuncVar",f:oO},35:{n:"PtgName",f:bO},36:{n:"PtgRef",f:nO},37:{n:"PtgArea",f:Vj},38:{n:"PtgMemArea",f:_O},39:{n:"PtgMemErr",f:TO},40:{n:"PtgMemNoMem",f:CO},41:{n:"PtgMemFunc",f:SO},42:{n:"PtgRefErr",f:kO},43:{n:"PtgAreaErr",f:Gj},44:{n:"PtgRefN",f:sO},45:{n:"PtgAreaN",f:Yj},46:{n:"PtgMemAreaN",f:WO},47:{n:"PtgMemNoMemN",f:VO},57:{n:"PtgNameX",f:yO},58:{n:"PtgRef3d",f:iO},59:{n:"PtgArea3d",f:Hj},60:{n:"PtgRefErr3d",f:EO},61:{n:"PtgAreaErr3d",f:Kj},255:{}},GO={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},KO={1:{n:"PtgElfLel",f:T_},2:{n:"PtgElfRw",f:MO},3:{n:"PtgElfCol",f:NO},6:{n:"PtgElfRwV",f:FO},7:{n:"PtgElfColV",f:RO},10:{n:"PtgElfRadical",f:DO},11:{n:"PtgElfRadicalS",f:IO},13:{n:"PtgElfColS",f:jO},15:{n:"PtgElfColSV",f:OO},16:{n:"PtgElfRadicalLel",f:PO},25:{n:"PtgList",f:BO},29:{n:"PtgSxName",f:UO},255:{}},YO={0:{n:"PtgAttrNoop",f:HO},1:{n:"PtgAttrSemi",f:eO},2:{n:"PtgAttrIf",f:Qj},4:{n:"PtgAttrChoose",f:qj},8:{n:"PtgAttrGoto",f:Jj},16:{n:"PtgAttrSum",f:cO},32:{n:"PtgAttrBaxcel",f:Zx},33:{n:"PtgAttrBaxcel",f:Zx},64:{n:"PtgAttrSpace",f:tO},65:{n:"PtgAttrSpaceSemi",f:rO},128:{n:"PtgAttrIfError",f:Zj},255:{}};function XO(t,e,r,n){if(n.biff<8)return us(t,e);for(var s=t.l+e,i=[],a=0;a!==r.length;++a)switch(r[a][0]){case"PtgArray":r[a][1]=vO(t,0,n),i.push(r[a][1]);break;case"PtgMemArea":r[a][2]=xO(t,r[a][1],n),i.push(r[a][2]);break;case"PtgExp":n&&n.biff==12&&(r[a][1][1]=t.read_shift(4),i.push(r[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[a][0]}return e=s-t.l,e!==0&&i.push(us(t,e)),i}function qO(t,e,r){for(var n=t.l+e,s,i,a=[];n!=t.l;)e=n-t.l,i=t[t.l],s=e1[i]||e1[GO[i]],(i===24||i===25)&&(s=(i===24?KO:YO)[t[t.l+1]]),!s||!s.f?us(t,e):a.push([s.n,s.f(t,e,r)]);return a}function JO(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],i=0;i<n.length;++i){var a=n[i];if(a)switch(a[0]){case 2:s.push('"'+a[1].replace(/"/g,'""')+'"');break;default:s.push(a[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var QO={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function ZO(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function C_(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function t1(t,e,r){var n=C_(t,e,r);return n=="#REF"?n:ZO(n,r)}function fo(t,e,r,n,s){var i=s&&s.biff||8,a={s:{c:0,r:0}},o=[],l,c,h,d=0,f=0,p,m="";if(!t[0]||!t[0][0])return"";for(var g=-1,x="",v=0,b=t[0].length;v<b;++v){var y=t[0][v];switch(y[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),c=o.pop(),g>=0){switch(t[0][g][1][0]){case 0:x=It(" ",t[0][g][1][1]);break;case 1:x=It("\r",t[0][g][1][1]);break;default:if(x="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}c=c+x,g=-1}o.push(c+QO[y[0]]+l);break;case"PtgIsect":l=o.pop(),c=o.pop(),o.push(c+" "+l);break;case"PtgUnion":l=o.pop(),c=o.pop(),o.push(c+","+l);break;case"PtgRange":l=o.pop(),c=o.pop(),o.push(c+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":h=xl(y[1][1],a,s),o.push(vl(h,i));break;case"PtgRefN":h=r?xl(y[1][1],r,s):y[1][1],o.push(vl(h,i));break;case"PtgRef3d":d=y[1][1],h=xl(y[1][2],a,s),m=t1(n,d,s),o.push(m+"!"+vl(h,i));break;case"PtgFunc":case"PtgFuncVar":var w=y[1][0],S=y[1][1];w||(w=0),w&=127;var N=w==0?[]:o.slice(-w);o.length-=w,S==="User"&&(S=N.shift()),o.push(S+"("+N.join(",")+")");break;case"PtgBool":o.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(y[1]);break;case"PtgNum":o.push(String(y[1]));break;case"PtgStr":o.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(y[1]);break;case"PtgAreaN":p=Bx(y[1][1],r?{s:r}:a,s),o.push(Zd(p,s));break;case"PtgArea":p=Bx(y[1][1],a,s),o.push(Zd(p,s));break;case"PtgArea3d":d=y[1][1],p=y[1][2],m=t1(n,d,s),o.push(m+"!"+Zd(p,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":f=y[1][2];var k=(n.names||[])[f-1]||(n[0]||[])[f],A=k?k.Name:"SH33TJSNAME"+String(f);A&&A.slice(0,6)=="_xlfn."&&!s.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var T=y[1][1];f=y[1][2];var F;if(s.biff<=5)T<0&&(T=-T),n[T]&&(F=n[T][f]);else{var I="";if(((n[T]||[])[0]||[])[0]==14849||(((n[T]||[])[0]||[])[0]==1025?n[T][f]&&n[T][f].itab>0&&(I=n.SheetNames[n[T][f].itab-1]+"!"):I=n.SheetNames[f-1]+"!"),n[T]&&n[T][f])I+=n[T][f].Name;else if(n[0]&&n[0][f])I+=n[0][f].Name;else{var B=(C_(n,T,s)||"").split(";;");B[f-1]?I=B[f-1]:I+="SH33TJSERRX"}o.push(I);break}F||(F={Name:"SH33TJSERRY"}),o.push(F.Name);break;case"PtgParen":var Z="(",ke=")";if(g>=0){switch(x="",t[0][g][1][0]){case 2:Z=It(" ",t[0][g][1][1])+Z;break;case 3:Z=It("\r",t[0][g][1][1])+Z;break;case 4:ke=It(" ",t[0][g][1][1])+ke;break;case 5:ke=It("\r",t[0][g][1][1])+ke;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][g][1][0])}g=-1}o.push(Z+o.pop()+ke);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":h={c:y[1][1],r:y[1][0]};var ae={c:r.c,r:r.r};if(n.sharedf[ut(h)]){var Te=n.sharedf[ut(h)];o.push(fo(Te,a,ae,n,s))}else{var he=!1;for(l=0;l!=n.arrayf.length;++l)if(c=n.arrayf[l],!(h.c<c[0].s.c||h.c>c[0].e.c)&&!(h.r<c[0].s.r||h.r>c[0].e.r)){o.push(fo(c[1],a,ae,n,s)),he=!0;break}he||o.push(y[1])}break;case"PtgArray":o.push("{"+JO(y[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(y));default:throw new Error("Unrecognized Formula Token: "+String(y))}var te=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&g>=0&&te.indexOf(t[0][v][0])==-1){y=t[0][g];var re=!0;switch(y[1][0]){case 4:re=!1;case 0:x=It(" ",y[1][1]);break;case 5:re=!1;case 1:x=It("\r",y[1][1]);break;default:if(x="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}o.push((re?x:"")+o.pop()+(re?"":x)),g=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function eR(t){if(t==null){var e=Q(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return ra(t);return ra(0)}function tR(t,e,r,n,s){var i=na(e,r,s),a=eR(t.v),o=Q(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var c=Q(t.bf.length),h=0;h<t.bf.length;++h)c[h]=t.bf[h];var d=dr([i,a,o,c]);return d}function sd(t,e,r){var n=t.read_shift(4),s=qO(t,n,r),i=t.read_shift(4),a=i>0?XO(t,i,s,r):null;return[s,a]}var rR=sd,id=sd,nR=sd,sR=sd,iR={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},A_={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},aR={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function oR(t){var e="of:="+t.replace(dg,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function lR(t){return t.replace(/\./,"!")}var bl=typeof Map<"u";function gg(t,e,r){var n=0,s=t.length;if(r){if(bl?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var i=bl?r.get(e):r[e];n<i.length;++n)if(t[i[n]].t===e)return t.Count++,i[n]}}else for(;n<s;++n)if(t[n].t===e)return t.Count++,n;return t[s]={t:e},t.Count++,t.Unique++,r&&(bl?(r.has(e)||r.set(e,[]),r.get(e).push(s)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(s))),s}function ad(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Cs=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=_h(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=R0(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function N_(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function yi(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],s=60,i=t.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){kw(e.z,s),r.ssf[s]=e.z,r.revssf[e.z]=n=s;break}}for(s=0;s!=i;++s)if(t[s].numFmtId===n)return s;return t[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function cR(t,e,r){if(t&&t["!ref"]){var n=St(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function uR(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Wt(t[r])+'"/>';return e+"</mergeCells>"}function hR(t,e,r,n,s){var i=!1,a={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}i=!0,a.codeName=Jl(lt(l))}if(t&&t["!outline"]){var c={summaryBelow:1,summaryRight:1};t["!outline"].above&&(c.summaryBelow=0),t["!outline"].left&&(c.summaryRight=0),o=(o||"")+ge("outlinePr",null,c)}!i&&!o||(s[s.length]=ge("sheetPr",o,a))}var dR=["objects","scenarios","selectLockedCells","selectUnlockedCells"],fR=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function pR(t){var e={sheet:1};return dR.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),fR.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=d_(t.password).toString(16).toUpperCase()),ge("sheetProtection",null,e)}function gR(t){return N_(t),ge("pageMargins",null,t)}function mR(t,e){for(var r=["<cols>"],n,s=0;s!=e.length;++s)(n=e[s])&&(r[r.length]=ge("col",null,ad(s,n)));return r[r.length]="</cols>",r.join("")}function xR(t,e,r,n){var s=typeof t.ref=="string"?t.ref:Wt(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,a=dn(s);a.s.r==a.e.r&&(a.e.r=dn(e["!ref"]).e.r,s=Wt(a));for(var o=0;o<i.length;++o){var l=i[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),ge("autoFilter",null,{ref:s})}function vR(t,e,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),ge("sheetViews",ge("sheetView",null,s),{})}function bR(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",i=t.t,a=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=vc[t.v];break;case"d":n&&n.cellDates?s=Pr(t.v,-1).toISOString():(t=Kr(t),t.t="n",s=""+(t.v=Gr(Pr(t.v)))),typeof t.z>"u"&&(t.z=Ft[14]);break;default:s=t.v;break}var o=fr("v",lt(s)),l={r:e},c=yi(n.cellXfs,t,n);switch(c!==0&&(l.s=c),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=fr("v",""+gg(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=i&&(t.t=i,t.v=a),typeof t.f=="string"&&t.f){var h=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=ge("f",lt(t.f),h)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),ge("c",o,l)}function yR(t,e,r,n){var s=[],i=[],a=St(t["!ref"]),o="",l,c="",h=[],d=0,f=0,p=t["!rows"],m=Array.isArray(t),g={r:c},x,v=-1;for(f=a.s.c;f<=a.e.c;++f)h[f]=kr(f);for(d=a.s.r;d<=a.e.r;++d){for(i=[],c=gr(d),f=a.s.c;f<=a.e.c;++f){l=h[f]+c;var b=m?(t[d]||[])[f]:t[l];b!==void 0&&(o=bR(b,l,t,e))!=null&&i.push(o)}(i.length>0||p&&p[d])&&(g={r:c},p&&p[d]&&(x=p[d],x.hidden&&(g.hidden=1),v=-1,x.hpx?v=Sh(x.hpx):x.hpt&&(v=x.hpt),v>-1&&(g.ht=v,g.customHeight=1),x.level&&(g.outlineLevel=x.level)),s[s.length]=ge("row",i.join(""),g))}if(p)for(;d<p.length;++d)p&&p[d]&&(g={r:d+1},x=p[d],x.hidden&&(g.hidden=1),v=-1,x.hpx?v=Sh(x.hpx):x.hpt&&(v=x.hpt),v>-1&&(g.ht=v,g.customHeight=1),x.level&&(g.outlineLevel=x.level),s[s.length]=ge("row","",g));return s.join("")}function j_(t,e,r,n){var s=[Ht,ge("worksheet",null,{xmlns:wo[0],"xmlns:r":tr.r})],i=r.SheetNames[t],a=0,o="",l=r.Sheets[i];l==null&&(l={});var c=l["!ref"]||"A1",h=St(c);if(h.e.c>16383||h.e.r>1048575){if(e.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575),c=Wt(h)}n||(n={}),l["!comments"]=[];var d=[];hR(l,r,t,e,s),s[s.length]=ge("dimension",null,{ref:c}),s[s.length]=vR(l,e,t,r),e.sheetFormat&&(s[s.length]=ge("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=mR(l,l["!cols"])),s[a=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=yR(l,e),o.length>0&&(s[s.length]=o)),s.length>a+1&&(s[s.length]="</sheetData>",s[a]=s[a].replace("/>",">")),l["!protect"]&&(s[s.length]=pR(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=xR(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=uR(l["!merges"]));var f=-1,p,m=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(g){g[1].Target&&(p={ref:g[0]},g[1].Target.charAt(0)!="#"&&(m=at(n,-1,lt(g[1].Target).replace(/#.*$/,""),et.HLINK),p["r:id"]="rId"+m),(f=g[1].Target.indexOf("#"))>-1&&(p.location=lt(g[1].Target.slice(f+1))),g[1].Tooltip&&(p.tooltip=lt(g[1].Tooltip)),s[s.length]=ge("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=gR(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=fr("ignoredErrors",ge("ignoredError",null,{numberStoredAsText:1,sqref:c}))),d.length>0&&(m=at(n,-1,"../drawings/drawing"+(t+1)+".xml",et.DRAW),s[s.length]=ge("drawing",null,{"r:id":"rId"+m}),l["!drawing"]=d),l["!comments"].length>0&&(m=at(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",et.VML),s[s.length]=ge("legacyDrawing",null,{"r:id":"rId"+m}),l["!legacy"]=m),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function wR(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var i=t.read_shift(1);return t.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function _R(t,e,r){var n=Q(145),s=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var i=320;s.hpx?i=Sh(s.hpx)*20:s.hpt&&(i=s.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var a=0;s.level&&(a|=s.level),s.hidden&&(a|=16),(s.hpx||s.hpt)&&(a|=32),n.write_shift(1,a),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var c={r:t,c:0},h=0;h<16;++h)if(!(e.s.c>h+1<<10||e.e.c<h<<10)){for(var d=-1,f=-1,p=h<<10;p<h+1<<10;++p){c.c=p;var m=Array.isArray(r)?(r[c.r]||[])[c.c]:r[ut(c)];m&&(d<0&&(d=p),f=p)}d<0||(++o,n.write_shift(4,d),n.write_shift(4,f))}var g=n.l;return n.l=l,n.write_shift(4,o),n.l=g,n.length>n.l?n.slice(0,n.l):n}function SR(t,e,r,n){var s=_R(n,r,e);(s.length>17||(e["!rows"]||[])[n])&&se(t,0,s)}var kR=da,ER=So;function TR(){}function CR(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=FN(t),r}function AR(t,e,r){r==null&&(r=Q(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return bh({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Hw(t,r),r.slice(0,r.l)}function NR(t){var e=En(t);return[e]}function jR(t,e,r){return r==null&&(r=Q(8)),ca(e,r)}function OR(t){var e=ua(t);return[e]}function RR(t,e,r){return r==null&&(r=Q(4)),ha(e,r)}function DR(t){var e=En(t),r=t.read_shift(1);return[e,r,"b"]}function PR(t,e,r){return r==null&&(r=Q(9)),ca(e,r),r.write_shift(1,t.v?1:0),r}function IR(t){var e=ua(t),r=t.read_shift(1);return[e,r,"b"]}function MR(t,e,r){return r==null&&(r=Q(5)),ha(e,r),r.write_shift(1,t.v?1:0),r}function FR(t){var e=En(t),r=t.read_shift(1);return[e,r,"e"]}function LR(t,e,r){return r==null&&(r=Q(9)),ca(e,r),r.write_shift(1,t.v),r}function BR(t){var e=ua(t),r=t.read_shift(1);return[e,r,"e"]}function UR(t,e,r){return r==null&&(r=Q(8)),ha(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function zR(t){var e=En(t),r=t.read_shift(4);return[e,r,"s"]}function $R(t,e,r){return r==null&&(r=Q(12)),ca(e,r),r.write_shift(4,e.v),r}function WR(t){var e=ua(t),r=t.read_shift(4);return[e,r,"s"]}function VR(t,e,r){return r==null&&(r=Q(8)),ha(e,r),r.write_shift(4,e.v),r}function HR(t){var e=En(t),r=ko(t);return[e,r,"n"]}function GR(t,e,r){return r==null&&(r=Q(16)),ca(e,r),ra(t.v,r),r}function KR(t){var e=ua(t),r=ko(t);return[e,r,"n"]}function YR(t,e,r){return r==null&&(r=Q(12)),ha(e,r),ra(t.v,r),r}function XR(t){var e=En(t),r=Gw(t);return[e,r,"n"]}function qR(t,e,r){return r==null&&(r=Q(12)),ca(e,r),Kw(t.v,r),r}function JR(t){var e=ua(t),r=Gw(t);return[e,r,"n"]}function QR(t,e,r){return r==null&&(r=Q(8)),ha(e,r),Kw(t.v,r),r}function ZR(t){var e=En(t),r=og(t);return[e,r,"is"]}function eD(t){var e=En(t),r=Er(t);return[e,r,"str"]}function tD(t,e,r){return r==null&&(r=Q(12+4*t.v.length)),ca(e,r),nr(t.v,r),r.length>r.l?r.slice(0,r.l):r}function rD(t){var e=ua(t),r=Er(t);return[e,r,"str"]}function nD(t,e,r){return r==null&&(r=Q(8+4*t.v.length)),ha(e,r),nr(t.v,r),r.length>r.l?r.slice(0,r.l):r}function sD(t,e,r){var n=t.l+e,s=En(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"b"];if(r.cellFormula){t.l+=2;var o=id(t,n-t.l,r);a[3]=fo(o,null,s,r.supbooks,r)}else t.l=n;return a}function iD(t,e,r){var n=t.l+e,s=En(t);s.r=r["!row"];var i=t.read_shift(1),a=[s,i,"e"];if(r.cellFormula){t.l+=2;var o=id(t,n-t.l,r);a[3]=fo(o,null,s,r.supbooks,r)}else t.l=n;return a}function aD(t,e,r){var n=t.l+e,s=En(t);s.r=r["!row"];var i=ko(t),a=[s,i,"n"];if(r.cellFormula){t.l+=2;var o=id(t,n-t.l,r);a[3]=fo(o,null,s,r.supbooks,r)}else t.l=n;return a}function oD(t,e,r){var n=t.l+e,s=En(t);s.r=r["!row"];var i=Er(t),a=[s,i,"str"];if(r.cellFormula){t.l+=2;var o=id(t,n-t.l,r);a[3]=fo(o,null,s,r.supbooks,r)}else t.l=n;return a}var lD=da,cD=So;function uD(t,e){return e==null&&(e=Q(4)),e.write_shift(4,t),e}function hD(t,e){var r=t.l+e,n=da(t),s=lg(t),i=Er(t),a=Er(t),o=Er(t);t.l=r;var l={rfx:n,relId:s,loc:i,display:o};return a&&(l.Tooltip=a),l}function dD(t,e){var r=Q(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));So({s:rr(t[0]),e:rr(t[0])},r),cg("rId"+e,r);var n=t[1].Target.indexOf("#"),s=n==-1?"":t[1].Target.slice(n+1);return nr(s||"",r),nr(t[1].Tooltip||"",r),nr("",r),r.slice(0,r.l)}function fD(){}function pD(t,e,r){var n=t.l+e,s=Yw(t),i=t.read_shift(1),a=[s];if(a[2]=i,r.cellFormula){var o=rR(t,n-t.l,r);a[1]=o}else t.l=n;return a}function gD(t,e,r){var n=t.l+e,s=da(t),i=[s];if(r.cellFormula){var a=sR(t,n-t.l,r);i[1]=a,t.l=n}else t.l=n;return i}function mD(t,e,r){r==null&&(r=Q(18));var n=ad(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),r.write_shift(2,s),r}var O_=["left","right","top","bottom","header","footer"];function xD(t){var e={};return O_.forEach(function(r){e[r]=ko(t)}),e}function vD(t,e){return e==null&&(e=Q(6*8)),N_(t),O_.forEach(function(r){ra(t[r],e)}),e}function bD(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function yD(t,e,r){r==null&&(r=Q(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function wD(t){var e=Q(24);return e.write_shift(4,4),e.write_shift(4,1),So(t,e),e}function _D(t,e){return e==null&&(e=Q(16*4+2)),e.write_shift(2,t.password?d_(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function SD(){}function kD(){}function ED(t,e,r,n,s,i,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=Kr(e),e.z=e.z||Ft[14],e.v=Gr(Pr(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=yi(s.cellXfs,e,s),e.l&&i["!links"].push([ut(l),e.l]),e.c&&i["!comments"].push([ut(l),e.c]),e.t){case"s":case"str":return s.bookSST?(o=gg(s.Strings,e.v,s.revStrings),l.t="s",l.v=o,a?se(t,18,VR(e,l)):se(t,7,$R(e,l))):(l.t="str",a?se(t,17,nD(e,l)):se(t,6,tD(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?se(t,13,QR(e,l)):se(t,2,qR(e,l)):a?se(t,16,YR(e,l)):se(t,5,GR(e,l)),!0;case"b":return l.t="b",a?se(t,15,MR(e,l)):se(t,4,PR(e,l)),!0;case"e":return l.t="e",a?se(t,14,UR(e,l)):se(t,3,LR(e,l)),!0}return a?se(t,12,RR(e,l)):se(t,1,jR(e,l)),!0}function TD(t,e,r,n){var s=St(e["!ref"]||"A1"),i,a="",o=[];se(t,145);var l=Array.isArray(e),c=s.e.r;e["!rows"]&&(c=Math.max(s.e.r,e["!rows"].length-1));for(var h=s.s.r;h<=c;++h){a=gr(h),SR(t,e,s,h);var d=!1;if(h<=s.e.r)for(var f=s.s.c;f<=s.e.c;++f){h===s.s.r&&(o[f]=kr(f)),i=o[f]+a;var p=l?(e[h]||[])[f]:e[i];if(!p){d=!1;continue}d=ED(t,p,h,f,n,e,d)}}se(t,146)}function CD(t,e){!e||!e["!merges"]||(se(t,177,uD(e["!merges"].length)),e["!merges"].forEach(function(r){se(t,176,cD(r))}),se(t,178))}function AD(t,e){!e||!e["!cols"]||(se(t,390),e["!cols"].forEach(function(r,n){r&&se(t,60,mD(n,r))}),se(t,391))}function ND(t,e){!e||!e["!ref"]||(se(t,648),se(t,649,wD(St(e["!ref"]))),se(t,650))}function jD(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var s=at(r,-1,n[1].Target.replace(/#.*$/,""),et.HLINK);se(t,494,dD(n,s))}}),delete e["!links"]}function OD(t,e,r,n){if(e["!comments"].length>0){var s=at(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",et.VML);se(t,551,cg("rId"+s)),e["!legacy"]=s}}function RD(t,e,r,n){if(e["!autofilter"]){var s=e["!autofilter"],i=typeof s.ref=="string"?s.ref:Wt(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,o=dn(i);o.s.r==o.e.r&&(o.e.r=dn(e["!ref"]).e.r,i=Wt(o));for(var l=0;l<a.length;++l){var c=a[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+i;break}}l==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),se(t,161,So(St(i))),se(t,162)}}function DD(t,e,r){se(t,133),se(t,137,yD(e,r)),se(t,138),se(t,134)}function PD(t,e){e["!protect"]&&se(t,535,_D(e["!protect"]))}function ID(t,e,r,n){var s=Hr(),i=r.SheetNames[t],a=r.Sheets[i]||{},o=i;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=St(a["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],se(s,129),(r.vbaraw||a["!outline"])&&se(s,147,AR(o,a["!outline"])),se(s,148,ER(l)),DD(s,a,r.Workbook),AD(s,a),TD(s,a,t,e),PD(s,a),RD(s,a,r,t),CD(s,a),jD(s,a,n),a["!margins"]&&se(s,476,vD(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&ND(s,a),OD(s,a,t,n),se(s,130),s.end()}function MD(t,e){t.l+=10;var r=Er(t);return{name:r}}var FD=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function LD(t){return!t.Workbook||!t.Workbook.WBProps?"false":gN(t.Workbook.WBProps.date1904)?"true":"false"}var BD="][*?/\\".split("");function R_(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return BD.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function UD(t,e,r){t.forEach(function(n,s){R_(n);for(var i=0;i<s;++i)if(n==t[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var a=e&&e[s]&&e[s].CodeName||n;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function zD(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];UD(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)cR(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}function D_(t){var e=[Ht];e[e.length]=ge("workbook",null,{xmlns:wo[0],"xmlns:r":tr.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(FD.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=ge("workbookPr",null,n);var s=t.Workbook&&t.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",i=0;i!=t.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==t.SheetNames.length&&(i=0),e[e.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",i=0;i!=t.SheetNames.length;++i){var a={name:lt(t.SheetNames[i].slice(0,31))};if(a.sheetId=""+(i+1),a["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=ge("sheet",null,a)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=ge("definedName",lt(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function $D(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=O0(t),r.name=Er(t),r}function WD(t,e){return e||(e=Q(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),cg(t.strRelID,e),nr(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function VD(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?Er(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function HD(t,e){e||(e=Q(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),Hw(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function GD(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),i=LN(t),a=nR(t,0,r),o=lg(t);t.l=n;var l={Name:i,Ptg:a};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function KD(t,e){se(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};se(t,156,WD(s))}se(t,144)}function YD(t,e){e||(e=Q(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return nr("SheetJS",e),nr(hh.version,e),nr(hh.version,e),nr("7262",e),e.length>e.l?e.slice(0,e.l):e}function XD(t,e){e||(e=Q(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function qD(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,s=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&i==-1&&(i=n);i>s||(se(t,135),se(t,158,XD(s)),se(t,136))}}function JD(t,e){var r=Hr();return se(r,131),se(r,128,YD()),se(r,153,HD(t.Workbook&&t.Workbook.WBProps||null)),qD(r,t),KD(r,t),se(r,132),r.end()}function QD(t,e,r){return(e.slice(-4)===".bin"?JD:D_)(t)}function ZD(t,e,r,n,s){return(e.slice(-4)===".bin"?ID:j_)(t,r,n,s)}function e5(t,e,r){return(e.slice(-4)===".bin"?vj:g_)(t,r)}function t5(t,e,r){return(e.slice(-4)===".bin"?H3:h_)(t,r)}function r5(t,e,r){return(e.slice(-4)===".bin"?Pj:y_)(t)}function n5(t){return(t.slice(-4)===".bin"?Tj:v_)()}function s5(t,e){var r=[];return t.Props&&r.push(e3(t.Props,e)),t.Custprops&&r.push(t3(t.Props,t.Custprops)),r.join("")}function i5(){return""}function a5(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,s){var i=[];i.push(ge("NumberFormat",null,{"ss:Format":lt(Ft[n.numFmtId])}));var a={"ss:ID":"s"+(21+s)};r.push(ge("Style",i.join(""),a))}),ge("Styles",r.join(""))}function P_(t){return ge("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+fg(t.Ref,{r:0,c:0})})}function o5(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var s=e[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(P_(s)))}return ge("Names",r.join(""))}function l5(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,i=[],a=0;a<s.length;++a){var o=s[a];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||i.push(P_(o)))}return i.join("")}function c5(t,e,r,n){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(ge("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(ge("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(ge("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(ge("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(fr("ProtectContents","True")),t["!protect"].objects&&s.push(fr("ProtectObjects","True")),t["!protect"].scenarios&&s.push(fr("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(fr("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(fr("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){t["!protect"][a[0]]&&s.push("<"+a[1]+"/>")})),s.length==0?"":ge("WorksheetOptions",s.join(""),{xmlns:sn.x})}function u5(t){return t.map(function(e){var r=pN(e.t||""),n=ge("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return ge("Comment",n,{"ss:Author":e.a})}).join("")}function h5(t,e,r,n,s,i,a){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+lt(fg(t.f,a))),t.F&&t.F.slice(0,e.length)==e){var l=rr(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==a.r?"":"["+(l.r-a.r)+"]")+"C"+(l.c==a.c?"":"["+(l.c-a.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=lt(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=lt(t.l.Tooltip))),r["!merges"])for(var c=r["!merges"],h=0;h!=c.length;++h)c[h].s.c!=a.c||c[h].s.r!=a.r||(c[h].e.c>c[h].s.c&&(o["ss:MergeAcross"]=c[h].e.c-c[h].s.c),c[h].e.r>c[h].s.r&&(o["ss:MergeDown"]=c[h].e.r-c[h].s.r));var d="",f="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":d="Number",f=String(t.v);break;case"b":d="Boolean",f=t.v?"1":"0";break;case"e":d="Error",f=vc[t.v];break;case"d":d="DateTime",f=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||Ft[14]);break;case"s":d="String",f=fN(t.v||"");break}var p=yi(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=a.c+1;var m=t.v!=null?f:"",g=t.t=="z"?"":'<Data ss:Type="'+d+'">'+m+"</Data>";return(t.c||[]).length>0&&(g+=u5(t.c)),ge("Cell",g,o)}function d5(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=p_(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function f5(t,e,r,n){if(!t["!ref"])return"";var s=St(t["!ref"]),i=t["!merges"]||[],a=0,o=[];t["!cols"]&&t["!cols"].forEach(function(x,v){hg(x);var b=!!x.width,y=ad(v,x),w={"ss:Index":v+1};b&&(w["ss:Width"]=wh(y.width)),x.hidden&&(w["ss:Hidden"]="1"),o.push(ge("Column",null,w))});for(var l=Array.isArray(t),c=s.s.r;c<=s.e.r;++c){for(var h=[d5(c,(t["!rows"]||[])[c])],d=s.s.c;d<=s.e.c;++d){var f=!1;for(a=0;a!=i.length;++a)if(!(i[a].s.c>d)&&!(i[a].s.r>c)&&!(i[a].e.c<d)&&!(i[a].e.r<c)){(i[a].s.c!=d||i[a].s.r!=c)&&(f=!0);break}if(!f){var p={r:c,c:d},m=ut(p),g=l?(t[c]||[])[d]:t[m];h.push(h5(g,m,t,e,r,n,p))}}h.push("</Row>"),h.length>2&&o.push(h.join(""))}return o.join("")}function p5(t,e,r){var n=[],s=r.SheetNames[t],i=r.Sheets[s],a=i?l5(i,e,t,r):"";return a.length>0&&n.push("<Names>"+a+"</Names>"),a=i?f5(i,e,t,r):"",a.length>0&&n.push("<Table>"+a+"</Table>"),n.push(c5(i,e,t,r)),n.join("")}function g5(t,e){e||(e={}),t.SSF||(t.SSF=Kr(Ft)),t.SSF&&(td(),ed(t.SSF),e.revssf=rd(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],yi(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(s5(t,e)),r.push(i5()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(ge("Worksheet",p5(n,e,t),{"ss:Name":lt(t.SheetNames[n])}));return r[2]=a5(t,e),r[3]=o5(t),Ht+ge("Workbook",r.join(""),{xmlns:sn.ss,"xmlns:o":sn.o,"xmlns:x":sn.x,"xmlns:ss":sn.ss,"xmlns:dt":sn.dt,"xmlns:html":sn.html})}var rf={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function m5(t,e){var r=[],n=[],s=[],i=0,a,o=Ax(zx,"n"),l=Ax($x,"n");if(t.Props)for(a=xr(t.Props),i=0;i<a.length;++i)(Object.prototype.hasOwnProperty.call(o,a[i])?r:Object.prototype.hasOwnProperty.call(l,a[i])?n:s).push([a[i],t.Props[a[i]]]);if(t.Custprops)for(a=xr(t.Custprops),i=0;i<a.length;++i)Object.prototype.hasOwnProperty.call(t.Props||{},a[i])||(Object.prototype.hasOwnProperty.call(o,a[i])?r:Object.prototype.hasOwnProperty.call(l,a[i])?n:s).push([a[i],t.Custprops[a[i]]]);var c=[];for(i=0;i<s.length;++i)s_.indexOf(s[i][0])>-1||t_.indexOf(s[i][0])>-1||s[i][1]!=null&&c.push(s[i]);n.length&&ht.utils.cfb_add(e,"/SummaryInformation",Kx(n,rf.SI,l,$x)),(r.length||c.length)&&ht.utils.cfb_add(e,"/DocumentSummaryInformation",Kx(r,rf.DSI,o,zx,c.length?c:null,rf.UDI))}function x5(t,e){var r=e||{},n=ht.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return ht.utils.cfb_add(n,s,I_(t,r)),r.biff==8&&(t.Props||t.Custprops)&&m5(t,n),r.biff==8&&t.vbaraw&&Ij(n,ht.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var v5={0:{f:wR},1:{f:NR},2:{f:XR},3:{f:FR},4:{f:DR},5:{f:HR},6:{f:eD},7:{f:zR},8:{f:oD},9:{f:aD},10:{f:sD},11:{f:iD},12:{f:OR},13:{f:JR},14:{f:BR},15:{f:IR},16:{f:KR},17:{f:rD},18:{f:WR},19:{f:og},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:GD},40:{},42:{},43:{f:ej},44:{f:Q3},45:{f:nj},46:{f:ij},47:{f:sj},48:{},49:{f:ON},50:{},51:{f:wj},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:R3},62:{f:ZR},63:{f:Cj},64:{f:SD},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:us,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:bD},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:CR},148:{f:kR,p:16},151:{f:fD},152:{},153:{f:VD},154:{},155:{},156:{f:$D},157:{},158:{},159:{T:1,f:$3},160:{T:-1},161:{T:1,f:da},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:lD},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:bj},336:{T:-1},337:{f:kj,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:O0},357:{},358:{},359:{},360:{T:1},361:{},362:{f:T3},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:pD},427:{f:gD},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:xD},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:TR},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:hD},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:O0},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Rj},633:{T:1},634:{T:-1},635:{T:1,f:jj},636:{T:-1},637:{f:IN},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:MD},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:kD},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function me(t,e,r,n){var s=e;if(!isNaN(s)){var i=n||(r||[]).length||0,a=t.next(4);a.write_shift(2,s),a.write_shift(2,i),i>0&&sg(r)&&t.push(r)}}function b5(t,e,r,n){var s=(r||[]).length||0;if(s<=8224)return me(t,e,r,s);var i=e;if(!isNaN(i)){for(var a=r.parts||[],o=0,l=0,c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;var h=t.next(4);for(h.write_shift(2,i),h.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c;l<s;){for(h=t.next(4),h.write_shift(2,60),c=0;c+(a[o]||8224)<=8224;)c+=a[o]||8224,o++;h.write_shift(2,c),t.push(r.slice(l,l+c)),l+=c}}}function yc(t,e,r){return t||(t=Q(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function y5(t,e,r,n){var s=Q(9);return yc(s,t,e),a_(r,n||"b",s),s}function w5(t,e,r){var n=Q(8+2*r.length);return yc(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function _5(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?Gr(Pr(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?me(t,2,M3(r,n,s)):me(t,3,I3(r,n,s));return;case"b":case"e":me(t,5,y5(r,n,e.v,e.t));return;case"s":case"str":me(t,4,w5(r,n,(e.v||"").slice(0,255)));return}me(t,1,yc(null,r,n))}function S5(t,e,r,n){var s=Array.isArray(e),i=St(e["!ref"]||"A1"),a,o="",l=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),a=Wt(i)}for(var c=i.s.r;c<=i.e.r;++c){o=gr(c);for(var h=i.s.c;h<=i.e.c;++h){c===i.s.r&&(l[h]=kr(h)),a=l[h]+o;var d=s?(e[c]||[])[h]:e[a];d&&_5(t,d,c,h)}}}function k5(t,e){for(var r=e||{},n=Hr(),s=0,i=0;i<t.SheetNames.length;++i)t.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return me(n,r.biff==4?1033:r.biff==3?521:9,ug(t,16,r)),S5(n,t.Sheets[t.SheetNames[s]],s,r),me(n,10),n.end()}function E5(t,e,r){me(t,49,v3({sz:12,name:"Arial"},r))}function T5(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&me(t,1054,w3(s,e[s],r))})}function C5(t,e){var r=Q(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),me(t,2151,r),r=Q(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),c_(St(e["!ref"]||"A1"),r),r.write_shift(4,4),me(t,2152,r)}function A5(t,e){for(var r=0;r<16;++r)me(t,224,Xx({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){me(t,224,Xx(n,0,e))})}function N5(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];me(t,440,N3(n)),n[1].Tooltip&&me(t,2048,j3(n))}delete e["!links"]}function j5(t,e){if(e){var r=0;e.forEach(function(n,s){++r<=256&&n&&me(t,125,D3(ad(s,n),s))})}}function O5(t,e,r,n,s){var i=16+yi(s.cellXfs,e,s);if(e.v==null&&!e.bf){me(t,513,na(r,n,i));return}if(e.bf)me(t,6,tR(e,r,n,s,i));else switch(e.t){case"d":case"n":var a=e.t=="d"?Gr(Pr(e.v)):e.v;me(t,515,E3(r,n,a,i));break;case"b":case"e":me(t,517,k3(r,n,e.v,i,s,e.t));break;case"s":case"str":if(s.bookSST){var o=gg(s.Strings,e.v,s.revStrings);me(t,253,b3(r,n,o,i))}else me(t,516,y3(r,n,(e.v||"").slice(0,255),i,s));break;default:me(t,513,na(r,n,i))}}function R5(t,e,r){var n=Hr(),s=r.SheetNames[t],i=r.Sheets[s]||{},a=(r||{}).Workbook||{},o=(a.Sheets||[])[t]||{},l=Array.isArray(i),c=e.biff==8,h,d="",f=[],p=St(i["!ref"]||"A1"),m=c?65536:16384;if(p.e.c>255||p.e.r>=m){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,m-1)}me(n,2057,ug(r,16,e)),me(n,13,vn(1)),me(n,12,vn(100)),me(n,15,Rr(!0)),me(n,17,Rr(!1)),me(n,16,ra(.001)),me(n,95,Rr(!0)),me(n,42,Rr(!1)),me(n,43,Rr(!1)),me(n,130,vn(1)),me(n,128,S3()),me(n,131,Rr(!1)),me(n,132,Rr(!1)),c&&j5(n,i["!cols"]),me(n,512,_3(p,e)),c&&(i["!links"]=[]);for(var g=p.s.r;g<=p.e.r;++g){d=gr(g);for(var x=p.s.c;x<=p.e.c;++x){g===p.s.r&&(f[x]=kr(x)),h=f[x]+d;var v=l?(i[g]||[])[x]:i[h];v&&(O5(n,v,g,x,e),c&&v.l&&i["!links"].push([h,v.l]))}}var b=o.CodeName||o.name||s;return c&&me(n,574,x3((a.Views||[])[0])),c&&(i["!merges"]||[]).length&&me(n,229,A3(i["!merges"])),c&&N5(n,i),me(n,442,l_(b)),c&&C5(n,i),me(n,10),n.end()}function D5(t,e,r){var n=Hr(),s=(t||{}).Workbook||{},i=s.Sheets||[],a=s.WBProps||{},o=r.biff==8,l=r.biff==5;if(me(n,2057,ug(t,5,r)),r.bookType=="xla"&&me(n,135),me(n,225,o?vn(1200):null),me(n,193,s3(2)),l&&me(n,191),l&&me(n,192),me(n,226),me(n,92,f3("SheetJS",r)),me(n,66,vn(o?1200:1252)),o&&me(n,353,vn(0)),o&&me(n,448),me(n,317,P3(t.SheetNames.length)),o&&t.vbaraw&&me(n,211),o&&t.vbaraw){var c=a.CodeName||"ThisWorkbook";me(n,442,l_(c))}me(n,156,vn(17)),me(n,25,Rr(!1)),me(n,18,Rr(!1)),me(n,19,vn(0)),o&&me(n,431,Rr(!1)),o&&me(n,444,vn(0)),me(n,61,m3()),me(n,64,Rr(!1)),me(n,141,vn(0)),me(n,34,Rr(LD(t)=="true")),me(n,14,Rr(!0)),o&&me(n,439,Rr(!1)),me(n,218,vn(0)),E5(n,t,r),T5(n,t.SSF,r),A5(n,r),o&&me(n,352,Rr(!1));var h=n.end(),d=Hr();o&&me(d,140,O3()),o&&r.Strings&&b5(d,252,g3(r.Strings)),me(d,10);var f=d.end(),p=Hr(),m=0,g=0;for(g=0;g<t.SheetNames.length;++g)m+=(o?12:11)+(o?2:1)*t.SheetNames[g].length;var x=h.length+m+f.length;for(g=0;g<t.SheetNames.length;++g){var v=i[g]||{};me(p,133,p3({pos:x,hs:v.Hidden||0,dt:0,name:t.SheetNames[g]},r)),x+=e[g].length}var b=p.end();if(m!=b.length)throw new Error("BS8 "+m+" != "+b.length);var y=[];return h.length&&y.push(h),b.length&&y.push(b),f.length&&y.push(f),dr(y)}function P5(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=Kr(Ft)),t&&t.SSF&&(td(),ed(t.SSF),r.revssf=rd(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,mg(r),r.cellXfs=[],yi(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)n[n.length]=R5(s,r,t);return n.unshift(D5(t,n,r)),dr(n)}function I_(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var s=dn(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=e||{};switch(i.biff||2){case 8:case 5:return P5(t,e);case 4:case 3:case 2:return k5(t,e)}throw new Error("invalid type "+i.bookType+" for BIFF")}function I5(t,e,r,n){for(var s=t["!merges"]||[],i=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>r||s[c].s.c>a)&&!(s[c].e.r<r||s[c].e.c<a)){if(s[c].s.r<r||s[c].s.c<a){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var h=ut({r,c:a}),d=n.dense?(t[r]||[])[a]:t[h],f=d&&d.v!=null&&(d.h||dN(d.w||(Ds(d),d.w)||""))||"",p={};o>1&&(p.rowspan=o),l>1&&(p.colspan=l),n.editable?f='<span contenteditable="true">'+f+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(f='<a href="'+d.l.Target+'">'+f+"</a>")),p.id=(n.id||"sjs")+"-"+h,i.push(ge("td",f,p))}}var m="<tr>";return m+i.join("")+"</tr>"}var M5='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',F5="</body></html>";function L5(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function M_(t,e){var r=e||{},n=r.header!=null?r.header:M5,s=r.footer!=null?r.footer:F5,i=[n],a=dn(t["!ref"]);r.dense=Array.isArray(t),i.push(L5(t,a,r));for(var o=a.s.r;o<=a.e.r;++o)i.push(I5(t,a,o,r));return i.push("</table>"+s),i.join("")}function F_(t,e,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var a=typeof n.origin=="string"?rr(n.origin):n.origin;s=a.r,i=a.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:i}};if(t["!ref"]){var h=dn(t["!ref"]);c.s.r=Math.min(c.s.r,h.s.r),c.s.c=Math.min(c.s.c,h.s.c),c.e.r=Math.max(c.e.r,h.e.r),c.e.c=Math.max(c.e.c,h.e.c),s==-1&&(c.e.r=s=h.e.r+1)}var d=[],f=0,p=t["!rows"]||(t["!rows"]=[]),m=0,g=0,x=0,v=0,b=0,y=0;for(t["!cols"]||(t["!cols"]=[]);m<o.length&&g<l;++m){var w=o[m];if(r1(w)){if(n.display)continue;p[g]={hidden:!0}}var S=w.children;for(x=v=0;x<S.length;++x){var N=S[x];if(!(n.display&&r1(N))){var k=N.hasAttribute("data-v")?N.getAttribute("data-v"):N.hasAttribute("v")?N.getAttribute("v"):mN(N.innerHTML),A=N.getAttribute("data-z")||N.getAttribute("z");for(f=0;f<d.length;++f){var T=d[f];T.s.c==v+i&&T.s.r<g+s&&g+s<=T.e.r&&(v=T.e.c+1-i,f=-1)}y=+N.getAttribute("colspan")||1,((b=+N.getAttribute("rowspan")||1)>1||y>1)&&d.push({s:{r:g+s,c:v+i},e:{r:g+s+(b||1)-1,c:v+i+(y||1)-1}});var F={t:"s",v:k},I=N.getAttribute("data-t")||N.getAttribute("t")||"";k!=null&&(k.length==0?F.t=I||"z":n.raw||k.trim().length==0||I=="s"||(k==="TRUE"?F={t:"b",v:!0}:k==="FALSE"?F={t:"b",v:!1}:isNaN(Ts(k))?isNaN(ql(k).getDate())||(F={t:"d",v:Pr(k)},n.cellDates||(F={t:"n",v:Gr(F.v)}),F.z=n.dateNF||Ft[14]):F={t:"n",v:Ts(k)})),F.z===void 0&&A!=null&&(F.z=A);var B="",Z=N.getElementsByTagName("A");if(Z&&Z.length)for(var ke=0;ke<Z.length&&!(Z[ke].hasAttribute("href")&&(B=Z[ke].getAttribute("href"),B.charAt(0)!="#"));++ke);B&&B.charAt(0)!="#"&&(F.l={Target:B}),n.dense?(t[g+s]||(t[g+s]=[]),t[g+s][v+i]=F):t[ut({c:v+i,r:g+s})]=F,c.e.c<v+i&&(c.e.c=v+i),v+=y}}++g}return d.length&&(t["!merges"]=(t["!merges"]||[]).concat(d)),c.e.r=Math.max(c.e.r,g-1+s),t["!ref"]=Wt(c),g>=l&&(t["!fullref"]=Wt((c.e.r=o.length-m+g-1+s,c))),t}function L_(t,e){var r=e||{},n=r.dense?[]:{};return F_(n,t,e)}function B5(t,e){return la(L_(t,e),e)}function r1(t){var e="",r=U5(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function U5(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var z5=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Ql({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Ht+e}}(),n1=function(){var t=function(i){return lt(i).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,a,o){var l=[];l.push('      <table:table table:name="'+lt(a.SheetNames[o])+`" table:style-name="ta1">
`);var c=0,h=0,d=dn(i["!ref"]||"A1"),f=i["!merges"]||[],p=0,m=Array.isArray(i);if(i["!cols"])for(h=0;h<=d.e.c;++h)l.push("        <table:table-column"+(i["!cols"][h]?' table:style-name="co'+i["!cols"][h].ods+'"':"")+`></table:table-column>
`);var g="",x=i["!rows"]||[];for(c=0;c<d.s.r;++c)g=x[c]?' table:style-name="ro'+x[c].ods+'"':"",l.push("        <table:table-row"+g+`></table:table-row>
`);for(;c<=d.e.r;++c){for(g=x[c]?' table:style-name="ro'+x[c].ods+'"':"",l.push("        <table:table-row"+g+`>
`),h=0;h<d.s.c;++h)l.push(e);for(;h<=d.e.c;++h){var v=!1,b={},y="";for(p=0;p!=f.length;++p)if(!(f[p].s.c>h)&&!(f[p].s.r>c)&&!(f[p].e.c<h)&&!(f[p].e.r<c)){(f[p].s.c!=h||f[p].s.r!=c)&&(v=!0),b["table:number-columns-spanned"]=f[p].e.c-f[p].s.c+1,b["table:number-rows-spanned"]=f[p].e.r-f[p].s.r+1;break}if(v){l.push(r);continue}var w=ut({r:c,c:h}),S=m?(i[c]||[])[h]:i[w];if(S&&S.f&&(b["table:formula"]=lt(oR(S.f)),S.F&&S.F.slice(0,w.length)==w)){var N=dn(S.F);b["table:number-matrix-columns-spanned"]=N.e.c-N.s.c+1,b["table:number-matrix-rows-spanned"]=N.e.r-N.s.r+1}if(!S){l.push(e);continue}switch(S.t){case"b":y=S.v?"TRUE":"FALSE",b["office:value-type"]="boolean",b["office:boolean-value"]=S.v?"true":"false";break;case"n":y=S.w||String(S.v||0),b["office:value-type"]="float",b["office:value"]=S.v||0;break;case"s":case"str":y=S.v==null?"":S.v,b["office:value-type"]="string";break;case"d":y=S.w||Pr(S.v).toISOString(),b["office:value-type"]="date",b["office:date-value"]=Pr(S.v).toISOString(),b["table:style-name"]="ce1";break;default:l.push(e);continue}var k=t(y);if(S.l&&S.l.Target){var A=S.l.Target;A=A.charAt(0)=="#"?"#"+lR(A.slice(1)):A,A.charAt(0)!="#"&&!A.match(/^\w+:/)&&(A="../"+A),k=ge("text:a",k,{"xlink:href":A.replace(/&/g,"&amp;")})}l.push("          "+ge("table:table-cell",ge("text:p",k,{}),b)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(i,a){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(c){return a.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var h=0;h<c["!cols"].length;++h)if(c["!cols"][h]){var d=c["!cols"][h];if(d.width==null&&d.wpx==null&&d.wch==null)continue;hg(d),d.ods=o;var f=c["!cols"][h].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+f+`"/>
`),i.push(`  </style:style>
`),++o}}});var l=0;a.SheetNames.map(function(c){return a.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var h=0;h<c["!rows"].length;++h)if(c["!rows"][h]){c["!rows"][h].ods=l;var d=c["!rows"][h].hpx+"px";i.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),i.push(`  </style:style>
`),++l}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(a,o){var l=[Ht],c=Ql({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),h=Ql({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+c+h+`>
`),l.push(Zw().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+c+`>
`),s(l,a),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var d=0;d!=a.SheetNames.length;++d)l.push(n(a.Sheets[a.SheetNames[d]],a,d));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function B_(t,e){if(e.bookType=="fods")return n1(t,e);var r=eg(),n="",s=[],i=[];return n="mimetype",ze(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",ze(r,n,n1(t,e)),s.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",ze(r,n,z5(t,e)),s.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",ze(r,n,Ht+Zw()),s.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",ze(r,n,ZN(i)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",ze(r,n,JN(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function kh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function $5(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):Ln(Jl(t))}function W5(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function pi(t){var e=t.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function V5(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var i=0;s>=1;++i,s/=256)t[e+i]=s&255;t[e+15]|=r>=0?0:128}function Zl(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function it(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function ro(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Xt(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=Zl(t,r),i=s&7;s=Math.floor(s/8);var a=0,o;if(s==0)break;switch(i){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:a=4,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 1:a=8,o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 2:a=Zl(t,r),o=t.slice(r[0],r[0]+a),r[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var c={data:o,type:i};e[s]==null?e[s]=[c]:e[s].push(c)}return e}function cr(t){var e=[];return t.forEach(function(r,n){r.forEach(function(s){s.data&&(e.push(it(n*8+s.type)),s.type==2&&e.push(it(s.data.length)),e.push(s.data))})}),pi(e)}function jn(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=Zl(t,n),i=Xt(t.slice(n[0],n[0]+s));n[0]+=s;var a={id:ro(i[1][0].data),messages:[]};i[2].forEach(function(o){var l=Xt(o.data),c=ro(l[3][0].data);a.messages.push({meta:l,data:t.slice(n[0],n[0]+c)}),n[0]+=c}),(e=i[3])!=null&&e[0]&&(a.merge=ro(i[3][0].data)>>>0>0),r.push(a)}return r}function ka(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:it(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:it(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(a){s.push(a.data),a.meta[3]=[{type:0,data:it(a.data.length)}],n[2].push({data:cr(a.meta),type:2})});var i=cr(n);e.push(it(i.length)),e.push(i),s.forEach(function(a){return e.push(a)})}),pi(e)}function H5(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=Zl(e,r),s=[];r[0]<e.length;){var i=e[r[0]]&3;if(i==0){var a=e[r[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[r[0]],o>1&&(a|=e[r[0]+1]<<8),o>2&&(a|=e[r[0]+2]<<16),o>3&&(a|=e[r[0]+3]<<24),a>>>=0,a++,r[0]+=o}s.push(e.slice(r[0],r[0]+a)),r[0]+=a;continue}else{var l=0,c=0;if(i==1?(c=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(c=(e[r[0]++]>>2)+1,i==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[pi(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(c>=l)for(s.push(s[0].slice(-l)),c-=l;c>=s[s.length-1].length;)s.push(s[s.length-1]),c-=s[s.length-1].length;s.push(s[0].slice(-l,-l+c))}}var h=pi(s);if(h.length!=n)throw new Error("Unexpected length: ".concat(h.length," != ").concat(n));return h}function On(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(H5(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return pi(e)}function Ea(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),s=new Uint8Array(4);e.push(s);var i=it(n),a=i.length;e.push(i),n<=60?(a++,e.push(new Uint8Array([n-1<<2]))):n<=256?(a+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(a+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(a+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(a+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),a+=n,s[0]=0,s[1]=a&255,s[2]=a>>8&255,s[3]=a>>16&255,r+=n}return pi(e)}function nf(t,e){var r=new Uint8Array(32),n=kh(r),s=12,i=0;switch(r[0]=5,t.t){case"n":r[1]=2,V5(r,s,t.v),i|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,t.v?1:0,!0),i|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(s,e.indexOf(t.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,i,!0),r.slice(0,s)}function sf(t,e){var r=new Uint8Array(32),n=kh(r),s=12,i=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(s,t.v,!0),i|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,t.v?1:0,!0),i|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(s,e.indexOf(t.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,i,!0),r.slice(0,s)}function Bs(t){var e=Xt(t);return Zl(e[1][0].data)}function G5(t,e,r){var n,s,i,a;if(!((n=t[6])!=null&&n[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(i=t[8])==null?void 0:i[0])==null?void 0:a.data)&&ro(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,c=kh(t[7][0].data),h=0,d=[],f=kh(t[4][0].data),p=0,m=[],g=0;g<e.length;++g){if(e[g]==null){c.setUint16(g*2,65535,!0),f.setUint16(g*2,65535);continue}c.setUint16(g*2,h,!0),f.setUint16(g*2,p,!0);var x,v;switch(typeof e[g]){case"string":x=nf({t:"s",v:e[g]},r),v=sf({t:"s",v:e[g]},r);break;case"number":x=nf({t:"n",v:e[g]},r),v=sf({t:"n",v:e[g]},r);break;case"boolean":x=nf({t:"b",v:e[g]},r),v=sf({t:"b",v:e[g]},r);break;default:throw new Error("Unsupported value "+e[g])}d.push(x),h+=x.length,m.push(v),p+=v.length,++l}for(t[2][0].data=it(l);g<t[7][0].data.length/2;++g)c.setUint16(g*2,65535,!0),f.setUint16(g*2,65535,!0);return t[6][0].data=pi(d),t[3][0].data=pi(m),l}function K5(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=dn(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Wt(n)));var i=Eh(r,{range:n,header:1}),a=["~Sh33tJ5~"];i.forEach(function(U){return U.forEach(function(L){typeof L=="string"&&a.push(L)})});var o={},l=[],c=ht.read(e.numbers,{type:"base64"});c.FileIndex.map(function(U,L){return[U,c.FullPaths[L]]}).forEach(function(U){var L=U[0],P=U[1];if(L.type==2&&L.name.match(/\.iwa/)){var V=L.content,ce=On(V),we=jn(ce);we.forEach(function(xe){l.push(xe.id),o[xe.id]={deps:[],location:P,type:ro(xe.messages[0].meta[1][0].data)}})}}),l.sort(function(U,L){return U-L});var h=l.filter(function(U){return U>1}).map(function(U){return[U,it(U)]});c.FileIndex.map(function(U,L){return[U,c.FullPaths[L]]}).forEach(function(U){var L=U[0];if(U[1],!!L.name.match(/\.iwa/)){var P=jn(On(L.content));P.forEach(function(V){V.messages.forEach(function(ce){h.forEach(function(we){V.messages.some(function(xe){return ro(xe.meta[1][0].data)!=11006&&W5(xe.data,we[1])})&&o[we[0]].deps.push(V.id)})})})}});for(var d=ht.find(c,o[1].location),f=jn(On(d.content)),p,m=0;m<f.length;++m){var g=f[m];g.id==1&&(p=g)}var x=Bs(Xt(p.messages[0].data)[1][0].data);for(d=ht.find(c,o[x].location),f=jn(On(d.content)),m=0;m<f.length;++m)g=f[m],g.id==x&&(p=g);for(x=Bs(Xt(p.messages[0].data)[2][0].data),d=ht.find(c,o[x].location),f=jn(On(d.content)),m=0;m<f.length;++m)g=f[m],g.id==x&&(p=g);for(x=Bs(Xt(p.messages[0].data)[2][0].data),d=ht.find(c,o[x].location),f=jn(On(d.content)),m=0;m<f.length;++m)g=f[m],g.id==x&&(p=g);var v=Xt(p.messages[0].data);{v[6][0].data=it(n.e.r+1),v[7][0].data=it(n.e.c+1);var b=Bs(v[46][0].data),y=ht.find(c,o[b].location),w=jn(On(y.content));{for(var S=0;S<w.length&&w[S].id!=b;++S);if(w[S].id!=b)throw"Bad ColumnRowUIDMapArchive";var N=Xt(w[S].messages[0].data);N[1]=[],N[2]=[],N[3]=[];for(var k=0;k<=n.e.c;++k){var A=[];A[1]=A[2]=[{type:0,data:it(k+420690)}],N[1].push({type:2,data:cr(A)}),N[2].push({type:0,data:it(k)}),N[3].push({type:0,data:it(k)})}N[4]=[],N[5]=[],N[6]=[];for(var T=0;T<=n.e.r;++T)A=[],A[1]=A[2]=[{type:0,data:it(T+726270)}],N[4].push({type:2,data:cr(A)}),N[5].push({type:0,data:it(T)}),N[6].push({type:0,data:it(T)});w[S].messages[0].data=cr(N)}y.content=Ea(ka(w)),y.size=y.content.length,delete v[46];var F=Xt(v[4][0].data);{F[7][0].data=it(n.e.r+1);var I=Xt(F[1][0].data),B=Bs(I[2][0].data);y=ht.find(c,o[B].location),w=jn(On(y.content));{if(w[0].id!=B)throw"Bad HeaderStorageBucket";var Z=Xt(w[0].messages[0].data);for(T=0;T<i.length;++T){var ke=Xt(Z[2][0].data);ke[1][0].data=it(T),ke[4][0].data=it(i[T].length),Z[2][T]={type:Z[2][0].type,data:cr(ke)}}w[0].messages[0].data=cr(Z)}y.content=Ea(ka(w)),y.size=y.content.length;var ae=Bs(F[2][0].data);y=ht.find(c,o[ae].location),w=jn(On(y.content));{if(w[0].id!=ae)throw"Bad HeaderStorageBucket";for(Z=Xt(w[0].messages[0].data),k=0;k<=n.e.c;++k)ke=Xt(Z[2][0].data),ke[1][0].data=it(k),ke[4][0].data=it(n.e.r+1),Z[2][k]={type:Z[2][0].type,data:cr(ke)};w[0].messages[0].data=cr(Z)}y.content=Ea(ka(w)),y.size=y.content.length;var Te=Bs(F[4][0].data);(function(){for(var U=ht.find(c,o[Te].location),L=jn(On(U.content)),P,V=0;V<L.length;++V){var ce=L[V];ce.id==Te&&(P=ce)}var we=Xt(P.messages[0].data);{we[3]=[];var xe=[];a.forEach(function(Ee,Se){xe[1]=[{type:0,data:it(Se)}],xe[2]=[{type:0,data:it(1)}],xe[3]=[{type:2,data:$5(Ee)}],we[3].push({type:2,data:cr(xe)})})}P.messages[0].data=cr(we);var X=ka(L),ve=Ea(X);U.content=ve,U.size=U.content.length})();var he=Xt(F[3][0].data);{var te=he[1][0];delete he[2];var re=Xt(te.data);{var le=Bs(re[2][0].data);(function(){for(var U=ht.find(c,o[le].location),L=jn(On(U.content)),P,V=0;V<L.length;++V){var ce=L[V];ce.id==le&&(P=ce)}var we=Xt(P.messages[0].data);{delete we[6],delete he[7];var xe=new Uint8Array(we[5][0].data);we[5]=[];for(var X=0,ve=0;ve<=n.e.r;++ve){var Ee=Xt(xe);X+=G5(Ee,i[ve],a),Ee[1][0].data=it(ve),we[5].push({data:cr(Ee),type:2})}we[1]=[{type:0,data:it(n.e.c+1)}],we[2]=[{type:0,data:it(n.e.r+1)}],we[3]=[{type:0,data:it(X)}],we[4]=[{type:0,data:it(n.e.r+1)}]}P.messages[0].data=cr(we);var Se=ka(L),Ce=Ea(Se);U.content=Ce,U.size=U.content.length})()}te.data=cr(re)}F[3][0].data=cr(he)}v[4][0].data=cr(F)}p.messages[0].data=cr(v);var je=ka(f),M=Ea(je);return d.content=M,d.size=d.content.length,c}function Y5(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function mg(t){Y5([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function X5(t,e){return e.bookType=="ods"?B_(t,e):e.bookType=="numbers"?K5(t,e):e.bookType=="xlsb"?q5(t,e):J5(t,e)}function q5(t,e){Ha=1024,t&&!t.SSF&&(t.SSF=Kr(Ft)),t&&t.SSF&&(td(),ed(t.SSF),e.revssf=rd(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,bl?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=w_.indexOf(e.bookType)>-1,s=qw();mg(e=e||{});var i=eg(),a="",o=0;if(e.cellXfs=[],yi(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",ze(i,a,e_(t.Props,e)),s.coreprops.push(a),at(e.rels,2,a,et.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,ze(i,a,r_(t.Props)),s.extprops.push(a),at(e.rels,3,a,et.EXT_PROPS),t.Custprops!==t.Props&&xr(t.Custprops||{}).length>0&&(a="docProps/custom.xml",ze(i,a,n_(t.Custprops)),s.custprops.push(a),at(e.rels,4,a,et.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},d=t.Sheets[t.SheetNames[o-1]],f=(d||{})["!type"]||"sheet";switch(f){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,ze(i,a,ZD(o-1,a,e,t,h)),s.sheets.push(a),at(e.wbrels,-1,"worksheets/sheet"+o+"."+r,et.WS[0])}if(d){var p=d["!comments"],m=!1,g="";p&&p.length>0&&(g="xl/comments"+o+"."+r,ze(i,g,r5(p,g)),s.comments.push(g),at(h,-1,"../comments"+o+"."+r,et.CMNT),m=!0),d["!legacy"]&&m&&ze(i,"xl/drawings/vmlDrawing"+o+".vml",b_(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}h["!id"].rId1&&ze(i,Qw(a),eo(h))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,ze(i,a,t5(e.Strings,a,e)),s.strs.push(a),at(e.wbrels,-1,"sharedStrings."+r,et.SST)),a="xl/workbook."+r,ze(i,a,QD(t,a)),s.workbooks.push(a),at(e.rels,1,a,et.WB),a="xl/theme/theme1.xml",ze(i,a,x_(t.Themes,e)),s.themes.push(a),at(e.wbrels,-1,"theme/theme1.xml",et.THEME),a="xl/styles."+r,ze(i,a,e5(t,a,e)),s.styles.push(a),at(e.wbrels,-1,"styles."+r,et.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",ze(i,a,t.vbaraw),s.vba.push(a),at(e.wbrels,-1,"vbaProject.bin",et.VBA)),a="xl/metadata."+r,ze(i,a,n5(a)),s.metadata.push(a),at(e.wbrels,-1,"metadata."+r,et.XLMETA),ze(i,"[Content_Types].xml",Jw(s,e)),ze(i,"_rels/.rels",eo(e.rels)),ze(i,"xl/_rels/workbook."+r+".rels",eo(e.wbrels)),delete e.revssf,delete e.ssf,i}function J5(t,e){Ha=1024,t&&!t.SSF&&(t.SSF=Kr(Ft)),t&&t.SSF&&(td(),ed(t.SSF),e.revssf=rd(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,bl?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=w_.indexOf(e.bookType)>-1,s=qw();mg(e=e||{});var i=eg(),a="",o=0;if(e.cellXfs=[],yi(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),a="docProps/core.xml",ze(i,a,e_(t.Props,e)),s.coreprops.push(a),at(e.rels,2,a,et.CORE_PROPS),a="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],c=0;c<t.SheetNames.length;++c)(t.Workbook.Sheets[c]||{}).Hidden!=2&&l.push(t.SheetNames[c]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,ze(i,a,r_(t.Props)),s.extprops.push(a),at(e.rels,3,a,et.EXT_PROPS),t.Custprops!==t.Props&&xr(t.Custprops||{}).length>0&&(a="docProps/custom.xml",ze(i,a,n_(t.Custprops)),s.custprops.push(a),at(e.rels,4,a,et.CUST_PROPS));var h=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},f=t.Sheets[t.SheetNames[o-1]],p=(f||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+r,ze(i,a,j_(o-1,e,t,d)),s.sheets.push(a),at(e.wbrels,-1,"worksheets/sheet"+o+"."+r,et.WS[0])}if(f){var m=f["!comments"],g=!1,x="";if(m&&m.length>0){var v=!1;m.forEach(function(b){b[1].forEach(function(y){y.T==!0&&(v=!0)})}),v&&(x="xl/threadedComments/threadedComment"+o+"."+r,ze(i,x,Aj(m,h,e)),s.threadedcomments.push(x),at(d,-1,"../threadedComments/threadedComment"+o+"."+r,et.TCMNT)),x="xl/comments"+o+"."+r,ze(i,x,y_(m)),s.comments.push(x),at(d,-1,"../comments"+o+"."+r,et.CMNT),g=!0}f["!legacy"]&&g&&ze(i,"xl/drawings/vmlDrawing"+o+".vml",b_(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&ze(i,Qw(a),eo(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+r,ze(i,a,h_(e.Strings,e)),s.strs.push(a),at(e.wbrels,-1,"sharedStrings."+r,et.SST)),a="xl/workbook."+r,ze(i,a,D_(t)),s.workbooks.push(a),at(e.rels,1,a,et.WB),a="xl/theme/theme1.xml",ze(i,a,x_(t.Themes,e)),s.themes.push(a),at(e.wbrels,-1,"theme/theme1.xml",et.THEME),a="xl/styles."+r,ze(i,a,g_(t,e)),s.styles.push(a),at(e.wbrels,-1,"styles."+r,et.STY),t.vbaraw&&n&&(a="xl/vbaProject.bin",ze(i,a,t.vbaraw),s.vba.push(a),at(e.wbrels,-1,"vbaProject.bin",et.VBA)),a="xl/metadata."+r,ze(i,a,v_()),s.metadata.push(a),at(e.wbrels,-1,"metadata."+r,et.XLMETA),h.length>1&&(a="xl/persons/person.xml",ze(i,a,Nj(h)),s.people.push(a),at(e.wbrels,-1,"persons/person.xml",et.PEOPLE)),ze(i,"[Content_Types].xml",Jw(s,e)),ze(i,"_rels/.rels",eo(e.rels)),ze(i,"xl/_rels/workbook."+r+".rels",eo(e.wbrels)),delete e.revssf,delete e.ssf,i}function Q5(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Rs(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function U_(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return mc(e.file,ht.write(t,{type:nt?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return ht.write(t,e)}function Z5(t,e){var r=Kr(e||{}),n=X5(t,r);return eP(n,r)}function eP(t,e){var r={},n=nt?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?ht.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(Zh(s))}return e.password&&typeof encrypt_agile<"u"?U_(encrypt_agile(s,e.password),e):e.type==="file"?mc(e.file,s):e.type=="string"?gl(s):s}function tP(t,e){var r=e||{},n=x5(t,r);return U_(n,r)}function rs(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return Xl(Jl(n));case"binary":return Jl(n);case"string":return t;case"file":return mc(e.file,n,"utf8");case"buffer":return nt?Ms(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):rs(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function rP(t,e){switch(e.type){case"base64":return Xl(t);case"binary":return t;case"string":return t;case"file":return mc(e.file,t,"binary");case"buffer":return nt?Ms(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Qc(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?Xl(r):e.type=="string"?gl(r):r;case"file":return mc(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function z_(t,e){jA(),zD(t);var r=Kr(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=z_(t,r);return r.type="array",Zh(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=t.SheetNames.indexOf(r.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return rs(g5(t,r),r);case"slk":case"sylk":return rs(L3.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"htm":case"html":return rs(M_(t.Sheets[t.SheetNames[s]],r),r);case"txt":return rP($_(t.Sheets[t.SheetNames[s]],r),r);case"csv":return rs(xg(t.Sheets[t.SheetNames[s]],r),r,"\uFEFF");case"dif":return rs(B3.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"dbf":return Qc(F3.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"prn":return rs(U3.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"rtf":return rs(K3.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"eth":return rs(u_.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"fods":return rs(B_(t,r),r);case"wk1":return Qc(qx.sheet_to_wk1(t.Sheets[t.SheetNames[s]],r),r);case"wk3":return Qc(qx.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Qc(I_(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),tP(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Z5(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function nP(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function sP(t,e,r){var n={};return n.type="file",n.file=e,nP(n),z_(t,n)}function iP(t,e,r,n,s,i,a,o){var l=gr(r),c=o.defval,h=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,f=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(f,"__rowNum__",{value:r,enumerable:!1})}catch{f.__rowNum__=r}else f.__rowNum__=r;if(!a||t[r])for(var p=e.s.c;p<=e.e.c;++p){var m=a?t[r][p]:t[n[p]+l];if(m===void 0||m.t===void 0){if(c===void 0)continue;i[p]!=null&&(f[i[p]]=c);continue}var g=m.v;switch(m.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(i[p]!=null){if(g==null)if(m.t=="e"&&g===null)f[i[p]]=null;else if(c!==void 0)f[i[p]]=c;else if(h&&g===null)f[i[p]]=null;else continue;else f[i[p]]=h&&(m.t!=="n"||m.t==="n"&&o.rawNumbers!==!1)?g:Ds(m,g,o);g!=null&&(d=!1)}}return{row:f,isempty:d}}function Eh(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=e||{},h=c.range!=null?c.range:t["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof h){case"string":l=St(h);break;case"number":l=St(t["!ref"]),l.s.r=h;break;default:l=h}n>0&&(s=0);var d=gr(l.s.r),f=[],p=[],m=0,g=0,x=Array.isArray(t),v=l.s.r,b=0,y={};x&&!t[v]&&(t[v]=[]);var w=c.skipHidden&&t["!cols"]||[],S=c.skipHidden&&t["!rows"]||[];for(b=l.s.c;b<=l.e.c;++b)if(!(w[b]||{}).hidden)switch(f[b]=kr(b),r=x?t[v][b]:t[f[b]+d],n){case 1:i[b]=b-l.s.c;break;case 2:i[b]=f[b];break;case 3:i[b]=c.header[b-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=a=Ds(r,null,c),g=y[a]||0,!g)y[a]=1;else{do o=a+"_"+g++;while(y[o]);y[a]=g,y[o]=1}i[b]=o}for(v=l.s.r+s;v<=l.e.r;++v)if(!(S[v]||{}).hidden){var N=iP(t,l,v,f,n,i,x,c);(N.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(p[m++]=N.row)}return p.length=m,p}var s1=/"/g;function aP(t,e,r,n,s,i,a,o){for(var l=!0,c=[],h="",d=gr(r),f=e.s.c;f<=e.e.c;++f)if(n[f]){var p=o.dense?(t[r]||[])[f]:t[n[f]+d];if(p==null)h="";else if(p.v!=null){l=!1,h=""+(o.rawNumbers&&p.t=="n"?p.v:Ds(p,null,o));for(var m=0,g=0;m!==h.length;++m)if((g=h.charCodeAt(m))===s||g===i||g===34||o.forceQuotes){h='"'+h.replace(s1,'""')+'"';break}h=="ID"&&(h='"ID"')}else p.f!=null&&!p.F?(l=!1,h="="+p.f,h.indexOf(",")>=0&&(h='"'+h.replace(s1,'""')+'"')):h="";c.push(h)}return o.blankrows===!1&&l?null:c.join(a)}function xg(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=St(t["!ref"]),i=n.FS!==void 0?n.FS:",",a=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),c=new RegExp((i=="|"?"\\|":i)+"+$"),h="",d=[];n.dense=Array.isArray(t);for(var f=n.skipHidden&&t["!cols"]||[],p=n.skipHidden&&t["!rows"]||[],m=s.s.c;m<=s.e.c;++m)(f[m]||{}).hidden||(d[m]=kr(m));for(var g=0,x=s.s.r;x<=s.e.r;++x)(p[x]||{}).hidden||(h=aP(t,s,x,d,a,l,i,n),h!=null&&(n.strip&&(h=h.replace(c,"")),(h||n.blankrows!==!1)&&r.push((g++?o:"")+h)));return delete n.dense,r.join("")}function $_(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=xg(t,e);return r}function oP(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=St(t["!ref"]),i="",a=[],o,l=[],c=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)a[o]=kr(o);for(var h=s.s.r;h<=s.e.r;++h)for(i=gr(h),o=s.s.c;o<=s.e.c;++o)if(e=a[o]+i,r=c?(t[h]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function W_(t,e,r){var n=r||{},s=+!n.skipHeader,i=t||{},a=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?rr(n.origin):n.origin;a=l.r,o=l.c}var c,h={s:{c:0,r:0},e:{c:o,r:a+e.length-1+s}};if(i["!ref"]){var d=St(i["!ref"]);h.e.c=Math.max(h.e.c,d.e.c),h.e.r=Math.max(h.e.r,d.e.r),a==-1&&(a=d.e.r+1,h.e.r=a+e.length-1+s)}else a==-1&&(a=0,h.e.r=e.length-1+s);var f=n.header||[],p=0;e.forEach(function(g,x){xr(g).forEach(function(v){(p=f.indexOf(v))==-1&&(f[p=f.length]=v);var b=g[v],y="z",w="",S=ut({c:o+p,r:a+x+s});c=ec(i,S),b&&typeof b=="object"&&!(b instanceof Date)?i[S]=b:(typeof b=="number"?y="n":typeof b=="boolean"?y="b":typeof b=="string"?y="s":b instanceof Date?(y="d",n.cellDates||(y="n",b=Gr(b)),w=n.dateNF||Ft[14]):b===null&&n.nullError&&(y="e",b=0),c?(c.t=y,c.v=b,delete c.w,delete c.R,w&&(c.z=w)):i[S]=c={t:y,v:b},w&&(c.z=w))})}),h.e.c=Math.max(h.e.c,o+f.length-1);var m=gr(a);if(s)for(p=0;p<f.length;++p)i[kr(p+o)+m]={t:"s",v:f[p]};return i["!ref"]=Wt(h),i}function lP(t,e){return W_(null,t,e)}function ec(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=rr(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?ec(t,ut(e)):ec(t,ut({r:e,c:r||0}))}function cP(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function uP(){return{SheetNames:[],Sheets:{}}}function hP(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var a=i&&i[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=a+s)!=-1;++s);}if(R_(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function dP(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=cP(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function fP(t,e){return t.z=e,t}function V_(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function pP(t,e,r){return V_(t,"#"+e,r)}function gP(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function mP(t,e,r,n){for(var s=typeof e!="string"?e:St(e),i=typeof e=="string"?e:Wt(e),a=s.s.r;a<=s.e.r;++a)for(var o=s.s.c;o<=s.e.c;++o){var l=ec(t,a,o);l.t="n",l.F=i,delete l.v,a==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return t}var af={encode_col:kr,encode_row:gr,encode_cell:ut,encode_range:Wt,decode_col:ag,decode_row:ig,split_cell:jN,decode_cell:rr,decode_range:dn,format_cell:Ds,sheet_add_aoa:Vw,sheet_add_json:W_,sheet_add_dom:F_,aoa_to_sheet:_o,json_to_sheet:lP,table_to_sheet:L_,table_to_book:B5,sheet_to_csv:xg,sheet_to_txt:$_,sheet_to_json:Eh,sheet_to_html:M_,sheet_to_formulae:oP,sheet_to_row_object_array:Eh,sheet_get_cell:ec,book_new:uP,book_append_sheet:hP,book_set_sheet_visibility:dP,cell_set_number_format:fP,cell_set_hyperlink:V_,cell_set_internal_link:pP,cell_add_comment:gP,sheet_set_array_formula:mP,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function xP(t,e,r=null){if(!Array.isArray(t)||t.length===0)return console.error("Impossible d'exporter : les donnes sont vides ou invalides."),r&&r("Impossible d'exporter : les donnes sont vides ou invalides."),!1;try{const n=af.json_to_sheet(t),s=af.book_new();return af.book_append_sheet(s,n,"Donnes"),sP(s,`${e}.xlsx`),!0}catch(n){return console.error("Erreur lors de la gnration du fichier Excel:",n),r&&r("Une erreur est survenue lors de l'exportation des donnes."),!1}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function wc(t){return t+.5|0}const qs=(t,e,r)=>Math.max(Math.min(t,r),e);function Xo(t){return qs(wc(t*2.55),0,255)}function ci(t){return qs(wc(t*255),0,255)}function vs(t){return qs(wc(t/2.55)/100,0,1)}function i1(t){return qs(wc(t*100),0,100)}const mn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},D0=[..."0123456789ABCDEF"],vP=t=>D0[t&15],bP=t=>D0[(t&240)>>4]+D0[t&15],Zc=t=>(t&240)>>4===(t&15),yP=t=>Zc(t.r)&&Zc(t.g)&&Zc(t.b)&&Zc(t.a);function wP(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&mn[t[1]]*17,g:255&mn[t[2]]*17,b:255&mn[t[3]]*17,a:e===5?mn[t[4]]*17:255}:(e===7||e===9)&&(r={r:mn[t[1]]<<4|mn[t[2]],g:mn[t[3]]<<4|mn[t[4]],b:mn[t[5]]<<4|mn[t[6]],a:e===9?mn[t[7]]<<4|mn[t[8]]:255})),r}const _P=(t,e)=>t<255?e(t):"";function SP(t){var e=yP(t)?vP:bP;return t?"#"+e(t.r)+e(t.g)+e(t.b)+_P(t.a,e):void 0}const kP=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function H_(t,e,r){const n=e*Math.min(r,1-r),s=(i,a=(i+t/30)%12)=>r-n*Math.max(Math.min(a-3,9-a,1),-1);return[s(0),s(8),s(4)]}function EP(t,e,r){const n=(s,i=(s+t/60)%6)=>r-r*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function TP(t,e,r){const n=H_(t,1,.5);let s;for(e+r>1&&(s=1/(e+r),e*=s,r*=s),s=0;s<3;s++)n[s]*=1-e-r,n[s]+=e;return n}function CP(t,e,r,n,s){return t===s?(e-r)/n+(e<r?6:0):e===s?(r-t)/n+2:(t-e)/n+4}function vg(t){const r=t.r/255,n=t.g/255,s=t.b/255,i=Math.max(r,n,s),a=Math.min(r,n,s),o=(i+a)/2;let l,c,h;return i!==a&&(h=i-a,c=o>.5?h/(2-i-a):h/(i+a),l=CP(r,n,s,h,i),l=l*60+.5),[l|0,c||0,o]}function bg(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(ci)}function yg(t,e,r){return bg(H_,t,e,r)}function AP(t,e,r){return bg(TP,t,e,r)}function NP(t,e,r){return bg(EP,t,e,r)}function G_(t){return(t%360+360)%360}function jP(t){const e=kP.exec(t);let r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?Xo(+e[5]):ci(+e[5]));const s=G_(+e[2]),i=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?n=AP(s,i,a):e[1]==="hsv"?n=NP(s,i,a):n=yg(s,i,a),{r:n[0],g:n[1],b:n[2],a:r}}function OP(t,e){var r=vg(t);r[0]=G_(r[0]+e),r=yg(r),t.r=r[0],t.g=r[1],t.b=r[2]}function RP(t){if(!t)return;const e=vg(t),r=e[0],n=i1(e[1]),s=i1(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${s}%, ${vs(t.a)})`:`hsl(${r}, ${n}%, ${s}%)`}const a1={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},o1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function DP(){const t={},e=Object.keys(o1),r=Object.keys(a1);let n,s,i,a,o;for(n=0;n<e.length;n++){for(a=o=e[n],s=0;s<r.length;s++)i=r[s],o=o.replace(i,a1[i]);i=parseInt(o1[a],16),t[o]=[i>>16&255,i>>8&255,i&255]}return t}let eu;function PP(t){eu||(eu=DP(),eu.transparent=[0,0,0,0]);const e=eu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const IP=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function MP(t){const e=IP.exec(t);let r=255,n,s,i;if(e){if(e[7]!==n){const a=+e[7];r=e[8]?Xo(a):qs(a*255,0,255)}return n=+e[1],s=+e[3],i=+e[5],n=255&(e[2]?Xo(n):qs(n,0,255)),s=255&(e[4]?Xo(s):qs(s,0,255)),i=255&(e[6]?Xo(i):qs(i,0,255)),{r:n,g:s,b:i,a:r}}}function FP(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${vs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const of=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ta=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function LP(t,e,r){const n=Ta(vs(t.r)),s=Ta(vs(t.g)),i=Ta(vs(t.b));return{r:ci(of(n+r*(Ta(vs(e.r))-n))),g:ci(of(s+r*(Ta(vs(e.g))-s))),b:ci(of(i+r*(Ta(vs(e.b))-i))),a:t.a+r*(e.a-t.a)}}function tu(t,e,r){if(t){let n=vg(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=yg(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function K_(t,e){return t&&Object.assign(e||{},t)}function l1(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=ci(t[3]))):(e=K_(t,{r:0,g:0,b:0,a:1}),e.a=ci(e.a)),e}function BP(t){return t.charAt(0)==="r"?MP(t):jP(t)}class tc{constructor(e){if(e instanceof tc)return e;const r=typeof e;let n;r==="object"?n=l1(e):r==="string"&&(n=wP(e)||PP(e)||BP(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=K_(this._rgb);return e&&(e.a=vs(e.a)),e}set rgb(e){this._rgb=l1(e)}rgbString(){return this._valid?FP(this._rgb):void 0}hexString(){return this._valid?SP(this._rgb):void 0}hslString(){return this._valid?RP(this._rgb):void 0}mix(e,r){if(e){const n=this.rgb,s=e.rgb;let i;const a=r===i?.5:r,o=2*a-1,l=n.a-s.a,c=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;i=1-c,n.r=255&c*n.r+i*s.r+.5,n.g=255&c*n.g+i*s.g+.5,n.b=255&c*n.b+i*s.b+.5,n.a=a*n.a+(1-a)*s.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=LP(this._rgb,e._rgb,r)),this}clone(){return new tc(this.rgb)}alpha(e){return this._rgb.a=ci(e),this}clearer(e){const r=this._rgb;return r.a*=1-e,this}greyscale(){const e=this._rgb,r=wc(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){const r=this._rgb;return r.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return tu(this._rgb,2,e),this}darken(e){return tu(this._rgb,2,-e),this}saturate(e){return tu(this._rgb,1,e),this}desaturate(e){return tu(this._rgb,1,-e),this}rotate(e){return OP(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ds(){}const UP=(()=>{let t=0;return()=>t++})();function Ye(t){return t==null}function Et(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function qe(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Mt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function en(t,e){return Mt(t)?t:e}function Be(t,e){return typeof t>"u"?e:t}const zP=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Y_=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function gt(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function ot(t,e,r,n){let s,i,a;if(Et(t))for(i=t.length,s=0;s<i;s++)e.call(r,t[s],s);else if(qe(t))for(a=Object.keys(t),i=a.length,s=0;s<i;s++)e.call(r,t[a[s]],a[s])}function Th(t,e){let r,n,s,i;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(s=t[r],i=e[r],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Ch(t){if(Et(t))return t.map(Ch);if(qe(t)){const e=Object.create(null),r=Object.keys(t),n=r.length;let s=0;for(;s<n;++s)e[r[s]]=Ch(t[r[s]]);return e}return t}function X_(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function $P(t,e,r,n){if(!X_(t))return;const s=e[t],i=r[t];qe(s)&&qe(i)?rc(s,i,n):e[t]=Ch(i)}function rc(t,e,r){const n=Et(e)?e:[e],s=n.length;if(!qe(t))return t;r=r||{};const i=r.merger||$P;let a;for(let o=0;o<s;++o){if(a=n[o],!qe(a))continue;const l=Object.keys(a);for(let c=0,h=l.length;c<h;++c)i(l[c],t,a,r)}return t}function yl(t,e){return rc(t,e,{merger:WP})}function WP(t,e,r){if(!X_(t))return;const n=e[t],s=r[t];qe(n)&&qe(s)?yl(n,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ch(s))}const c1={"":t=>t,x:t=>t.x,y:t=>t.y};function VP(t){const e=t.split("."),r=[];let n="";for(const s of e)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function HP(t){const e=VP(t);return r=>{for(const n of e){if(n==="")break;r=r&&r[n]}return r}}function gi(t,e){return(c1[e]||(c1[e]=HP(e)))(t)}function wg(t){return t.charAt(0).toUpperCase()+t.slice(1)}const nc=t=>typeof t<"u",mi=t=>typeof t=="function",u1=(t,e)=>{if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0};function GP(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const tt=Math.PI,_t=2*tt,KP=_t+tt,Ah=Number.POSITIVE_INFINITY,YP=tt/180,Bt=tt/2,Ci=tt/4,h1=tt*2/3,Js=Math.log10,cs=Math.sign;function wl(t,e,r){return Math.abs(t-e)<r}function d1(t){const e=Math.round(t);t=wl(t,e,t/1e3)?e:t;const r=Math.pow(10,Math.floor(Js(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function XP(t){const e=[],r=Math.sqrt(t);let n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((s,i)=>s-i).pop(),e}function qP(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function po(t){return!qP(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function JP(t,e){const r=Math.round(t);return r-e<=t&&r+e>=t}function q_(t,e,r){let n,s,i;for(n=0,s=t.length;n<s;n++)i=t[n][r],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Un(t){return t*(tt/180)}function _g(t){return t*(180/tt)}function f1(t){if(!Mt(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function J_(t,e){const r=e.x-t.x,n=e.y-t.y,s=Math.sqrt(r*r+n*n);let i=Math.atan2(n,r);return i<-.5*tt&&(i+=_t),{angle:i,distance:s}}function P0(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function QP(t,e){return(t-e+KP)%_t-tt}function wr(t){return(t%_t+_t)%_t}function sc(t,e,r,n){const s=wr(t),i=wr(e),a=wr(r),o=wr(i-s),l=wr(a-s),c=wr(s-i),h=wr(s-a);return s===i||s===a||n&&i===a||o>l&&c<h}function sr(t,e,r){return Math.max(e,Math.min(r,t))}function ZP(t){return sr(t,-32768,32767)}function ws(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function Sg(t,e,r){r=r||(a=>t[a]<e);let n=t.length-1,s=0,i;for(;n-s>1;)i=s+n>>1,r(i)?s=i:n=i;return{lo:s,hi:n}}const _s=(t,e,r,n)=>Sg(t,r,n?s=>{const i=t[s][e];return i<r||i===r&&t[s+1][e]===r}:s=>t[s][e]<r),eI=(t,e,r)=>Sg(t,r,n=>t[n][e]>=r);function tI(t,e,r){let n=0,s=t.length;for(;n<s&&t[n]<e;)n++;for(;s>n&&t[s-1]>r;)s--;return n>0||s<t.length?t.slice(n,s):t}const Q_=["push","pop","shift","splice","unshift"];function rI(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Q_.forEach(r=>{const n="_onData"+wg(r),s=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...i){const a=s.apply(this,i);return t._chartjs.listeners.forEach(o=>{typeof o[n]=="function"&&o[n](...i)}),a}})})}function p1(t,e){const r=t._chartjs;if(!r)return;const n=r.listeners,s=n.indexOf(e);s!==-1&&n.splice(s,1),!(n.length>0)&&(Q_.forEach(i=>{delete t[i]}),delete t._chartjs)}function Z_(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const e2=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function t2(t,e){let r=[],n=!1;return function(...s){r=s,n||(n=!0,e2.call(window,()=>{n=!1,t.apply(e,r)}))}}function nI(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}const kg=t=>t==="start"?"left":t==="end"?"right":"center",yr=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,sI=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e;function r2(t,e,r){const n=e.length;let s=0,i=n;if(t._sorted){const{iScale:a,vScale:o,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=a.axis,{min:d,max:f,minDefined:p,maxDefined:m}=a.getUserBounds();if(p){if(s=Math.min(_s(l,h,d).lo,r?n:_s(e,h,a.getPixelForValue(d)).lo),c){const g=l.slice(0,s+1).reverse().findIndex(x=>!Ye(x[o.axis]));s-=Math.max(0,g)}s=sr(s,0,n-1)}if(m){let g=Math.max(_s(l,a.axis,f,!0).hi+1,r?0:_s(e,h,a.getPixelForValue(f),!0).hi+1);if(c){const x=l.slice(g-1).findIndex(v=>!Ye(v[o.axis]));g+=Math.max(0,x)}i=sr(g,s,n)-s}else i=n-s}return{start:s,count:i}}function n2(t){const{xScale:e,yScale:r,_scaleRanges:n}=t,s={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=s,!0;const i=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,s),i}const ru=t=>t===0||t===1,g1=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*_t/r)),m1=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*_t/r)+1,_l={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Bt)+1,easeOutSine:t=>Math.sin(t*Bt),easeInOutSine:t=>-.5*(Math.cos(tt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>ru(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ru(t)?t:g1(t,.075,.3),easeOutElastic:t=>ru(t)?t:m1(t,.075,.3),easeInOutElastic(t){return ru(t)?t:t<.5?.5*g1(t*2,.1125,.45):.5+.5*m1(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-_l.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?_l.easeInBounce(t*2)*.5:_l.easeOutBounce(t*2-1)*.5+.5};function Eg(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function x1(t){return Eg(t)?t:new tc(t)}function lf(t){return Eg(t)?t:new tc(t).saturate(.5).darken(.1).hexString()}const iI=["x","y","borderWidth","radius","tension"],aI=["color","borderColor","backgroundColor"];function oI(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:aI},numbers:{type:"number",properties:iI}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function lI(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const v1=new Map;function cI(t,e){e=e||{};const r=t+JSON.stringify(e);let n=v1.get(r);return n||(n=new Intl.NumberFormat(t,e),v1.set(r,n)),n}function _c(t,e,r){return cI(e,r).format(t)}const s2={values(t){return Et(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";const n=this.chart.options.locale;let s,i=t;if(r.length>1){const c=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=uI(t,r)}const a=Js(Math.abs(i)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),_c(t,n,l)},logarithmic(t,e,r){if(t===0)return"0";const n=r[e].significand||t/Math.pow(10,Math.floor(Js(t)));return[1,2,3,5,10,15].includes(n)||e>.8*r.length?s2.numeric.call(this,t,e,r):""}};function uI(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var od={formatters:s2};function hI(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:od.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const sa=Object.create(null),I0=Object.create(null);function Sl(t,e){if(!e)return t;const r=e.split(".");for(let n=0,s=r.length;n<s;++n){const i=r[n];t=t[i]||(t[i]=Object.create(null))}return t}function cf(t,e,r){return typeof e=="string"?rc(Sl(t,e),r):rc(Sl(t,""),e)}class dI{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>lf(s.backgroundColor),this.hoverBorderColor=(n,s)=>lf(s.borderColor),this.hoverColor=(n,s)=>lf(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return cf(this,e,r)}get(e){return Sl(this,e)}describe(e,r){return cf(I0,e,r)}override(e,r){return cf(sa,e,r)}route(e,r,n,s){const i=Sl(this,e),a=Sl(this,n),o="_"+r;Object.defineProperties(i,{[o]:{value:i[r],writable:!0},[r]:{enumerable:!0,get(){const l=this[o],c=a[s];return qe(l)?Object.assign({},c,l):Be(l,c)},set(l){this[o]=l}}})}apply(e){e.forEach(r=>r(this))}}var Tt=new dI({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[oI,lI,hI]);function fI(t){return!t||Ye(t.size)||Ye(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Nh(t,e,r,n,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,r.push(s)),i>n&&(n=i),n}function pI(t,e,r,n){n=n||{};let s=n.data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(s=n.data={},i=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let a=0;const o=r.length;let l,c,h,d,f;for(l=0;l<o;l++)if(d=r[l],d!=null&&!Et(d))a=Nh(t,s,i,a,d);else if(Et(d))for(c=0,h=d.length;c<h;c++)f=d[c],f!=null&&!Et(f)&&(a=Nh(t,s,i,a,f));t.restore();const p=i.length/2;if(p>r.length){for(l=0;l<p;l++)delete s[i[l]];i.splice(0,p)}return a}function Ai(t,e,r){const n=t.currentDevicePixelRatio,s=r!==0?Math.max(r/2,.5):0;return Math.round((e-s)*n)/n+s}function b1(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function M0(t,e,r,n){i2(t,e,r,n,null)}function i2(t,e,r,n,s){let i,a,o,l,c,h,d,f;const p=e.pointStyle,m=e.rotation,g=e.radius;let x=(m||0)*YP;if(p&&typeof p=="object"&&(i=p.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(x),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(g)||g<=0)){switch(t.beginPath(),p){default:s?t.ellipse(r,n,s/2,g,0,0,_t):t.arc(r,n,g,0,_t),t.closePath();break;case"triangle":h=s?s/2:g,t.moveTo(r+Math.sin(x)*h,n-Math.cos(x)*g),x+=h1,t.lineTo(r+Math.sin(x)*h,n-Math.cos(x)*g),x+=h1,t.lineTo(r+Math.sin(x)*h,n-Math.cos(x)*g),t.closePath();break;case"rectRounded":c=g*.516,l=g-c,a=Math.cos(x+Ci)*l,d=Math.cos(x+Ci)*(s?s/2-c:l),o=Math.sin(x+Ci)*l,f=Math.sin(x+Ci)*(s?s/2-c:l),t.arc(r-d,n-o,c,x-tt,x-Bt),t.arc(r+f,n-a,c,x-Bt,x),t.arc(r+d,n+o,c,x,x+Bt),t.arc(r-f,n+a,c,x+Bt,x+tt),t.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*g,h=s?s/2:l,t.rect(r-h,n-l,2*h,2*l);break}x+=Ci;case"rectRot":d=Math.cos(x)*(s?s/2:g),a=Math.cos(x)*g,o=Math.sin(x)*g,f=Math.sin(x)*(s?s/2:g),t.moveTo(r-d,n-o),t.lineTo(r+f,n-a),t.lineTo(r+d,n+o),t.lineTo(r-f,n+a),t.closePath();break;case"crossRot":x+=Ci;case"cross":d=Math.cos(x)*(s?s/2:g),a=Math.cos(x)*g,o=Math.sin(x)*g,f=Math.sin(x)*(s?s/2:g),t.moveTo(r-d,n-o),t.lineTo(r+d,n+o),t.moveTo(r+f,n-a),t.lineTo(r-f,n+a);break;case"star":d=Math.cos(x)*(s?s/2:g),a=Math.cos(x)*g,o=Math.sin(x)*g,f=Math.sin(x)*(s?s/2:g),t.moveTo(r-d,n-o),t.lineTo(r+d,n+o),t.moveTo(r+f,n-a),t.lineTo(r-f,n+a),x+=Ci,d=Math.cos(x)*(s?s/2:g),a=Math.cos(x)*g,o=Math.sin(x)*g,f=Math.sin(x)*(s?s/2:g),t.moveTo(r-d,n-o),t.lineTo(r+d,n+o),t.moveTo(r+f,n-a),t.lineTo(r-f,n+a);break;case"line":a=s?s/2:Math.cos(x)*g,o=Math.sin(x)*g,t.moveTo(r-a,n-o),t.lineTo(r+a,n+o);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(x)*(s?s/2:g),n+Math.sin(x)*g);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ss(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function ld(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function cd(t){t.restore()}function gI(t,e,r,n,s){if(!e)return t.lineTo(r.x,r.y);if(s==="middle"){const i=(e.x+r.x)/2;t.lineTo(i,e.y),t.lineTo(i,r.y)}else s==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function mI(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function xI(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ye(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function vI(t,e,r,n,s){if(s.strikethrough||s.underline){const i=t.measureText(n),a=e-i.actualBoundingBoxLeft,o=e+i.actualBoundingBoxRight,l=r-i.actualBoundingBoxAscent,c=r+i.actualBoundingBoxDescent,h=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(a,h),t.lineTo(o,h),t.stroke()}}function bI(t,e){const r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function ia(t,e,r,n,s,i={}){const a=Et(e)?e:[e],o=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,xI(t,i),l=0;l<a.length;++l)c=a[l],i.backdrop&&bI(t,i.backdrop),o&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),Ye(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,r,n,i.maxWidth)),t.fillText(c,r,n,i.maxWidth),vI(t,r,n,c,i),n+=Number(s.lineHeight);t.restore()}function ic(t,e){const{x:r,y:n,w:s,h:i,radius:a}=e;t.arc(r+a.topLeft,n+a.topLeft,a.topLeft,1.5*tt,tt,!0),t.lineTo(r,n+i-a.bottomLeft),t.arc(r+a.bottomLeft,n+i-a.bottomLeft,a.bottomLeft,tt,Bt,!0),t.lineTo(r+s-a.bottomRight,n+i),t.arc(r+s-a.bottomRight,n+i-a.bottomRight,a.bottomRight,Bt,0,!0),t.lineTo(r+s,n+a.topRight),t.arc(r+s-a.topRight,n+a.topRight,a.topRight,0,-Bt,!0),t.lineTo(r+a.topLeft,n)}const yI=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,wI=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function _I(t,e){const r=(""+t).match(yI);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}const SI=t=>+t||0;function Tg(t,e){const r={},n=qe(e),s=n?Object.keys(e):e,i=qe(t)?n?a=>Be(t[a],t[e[a]]):a=>t[a]:()=>t;for(const a of s)r[a]=SI(i(a));return r}function a2(t){return Tg(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ki(t){return Tg(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Cr(t){const e=a2(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Qt(t,e){t=t||{},e=e||Tt.font;let r=Be(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=Be(t.style,e.style);n&&!(""+n).match(wI)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:Be(t.family,e.family),lineHeight:_I(Be(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:Be(t.weight,e.weight),string:""};return s.string=fI(s),s}function qo(t,e,r,n){let s,i,a;for(s=0,i=t.length;s<i;++s)if(a=t[s],a!==void 0&&a!==void 0)return a}function kI(t,e,r){const{min:n,max:s}=t,i=Y_(e,(s-n)/2),a=(o,l)=>r&&o===0?0:o+l;return{min:a(n,-Math.abs(i)),max:a(s,i)}}function wi(t,e){return Object.assign(Object.create(t),e)}function Cg(t,e=[""],r,n,s=()=>t[0]){const i=r||t;typeof n>"u"&&(n=u2("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:s,override:o=>Cg([o,...t],e,i,n)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete t[0][l],!0},get(o,l){return l2(o,l,()=>RI(l,e,t,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,l){return w1(o).includes(l)},ownKeys(o){return w1(o)},set(o,l,c){const h=o._storage||(o._storage=s());return o[l]=h[l]=c,delete o._keys,!0}})}function go(t,e,r,n){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:o2(t,n),setContext:i=>go(t,i,r,n),override:i=>go(t.override(i),e,r,n)};return new Proxy(s,{deleteProperty(i,a){return delete i[a],delete t[a],!0},get(i,a,o){return l2(i,a,()=>TI(i,a,o))},getOwnPropertyDescriptor(i,a){return i._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(i,a,o){return t[a]=o,delete i[a],!0}})}function o2(t,e={scriptable:!0,indexable:!0}){const{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:r,indexable:n,isScriptable:mi(r)?r:()=>r,isIndexable:mi(n)?n:()=>n}}const EI=(t,e)=>t?t+wg(e):e,Ag=(t,e)=>qe(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function l2(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=r();return t[e]=n,n}function TI(t,e,r){const{_proxy:n,_context:s,_subProxy:i,_descriptors:a}=t;let o=n[e];return mi(o)&&a.isScriptable(e)&&(o=CI(e,o,t,r)),Et(o)&&o.length&&(o=AI(e,o,t,a.isIndexable)),Ag(e,o)&&(o=go(o,s,i&&i[e],a)),o}function CI(t,e,r,n){const{_proxy:s,_context:i,_subProxy:a,_stack:o}=r;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let l=e(i,a||n);return o.delete(t),Ag(t,l)&&(l=Ng(s._scopes,s,t,l)),l}function AI(t,e,r,n){const{_proxy:s,_context:i,_subProxy:a,_descriptors:o}=r;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(qe(e[0])){const l=e,c=s._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=Ng(c,s,t,h);e.push(go(d,i,a&&a[t],o))}}return e}function c2(t,e,r){return mi(t)?t(e,r):t}const NI=(t,e)=>t===!0?e:typeof t=="string"?gi(e,t):void 0;function jI(t,e,r,n,s){for(const i of e){const a=NI(r,i);if(a){t.add(a);const o=c2(a._fallback,r,s);if(typeof o<"u"&&o!==r&&o!==n)return o}else if(a===!1&&typeof n<"u"&&r!==n)return null}return!1}function Ng(t,e,r,n){const s=e._rootScopes,i=c2(e._fallback,r,n),a=[...t,...s],o=new Set;o.add(n);let l=y1(o,a,r,i||r,n);return l===null||typeof i<"u"&&i!==r&&(l=y1(o,a,i,l,n),l===null)?!1:Cg(Array.from(o),[""],s,i,()=>OI(e,r,n))}function y1(t,e,r,n,s){for(;r;)r=jI(t,e,r,n,s);return r}function OI(t,e,r){const n=t._getTarget();e in n||(n[e]={});const s=n[e];return Et(s)&&qe(r)?r:s||{}}function RI(t,e,r,n){let s;for(const i of e)if(s=u2(EI(i,t),r),typeof s<"u")return Ag(t,s)?Ng(r,n,t,s):s}function u2(t,e){for(const r of e){if(!r)continue;const n=r[t];if(typeof n<"u")return n}}function w1(t){let e=t._keys;return e||(e=t._keys=DI(t._scopes)),e}function DI(t){const e=new Set;for(const r of t)for(const n of Object.keys(r).filter(s=>!s.startsWith("_")))e.add(n);return Array.from(e)}function h2(t,e,r,n){const{iScale:s}=t,{key:i="r"}=this._parsing,a=new Array(n);let o,l,c,h;for(o=0,l=n;o<l;++o)c=o+r,h=e[c],a[o]={r:s.parse(gi(h,i),c)};return a}const PI=Number.EPSILON||1e-14,mo=(t,e)=>e<t.length&&!t[e].skip&&t[e],d2=t=>t==="x"?"y":"x";function II(t,e,r,n){const s=t.skip?e:t,i=e,a=r.skip?e:r,o=P0(i,s),l=P0(a,i);let c=o/(o+l),h=l/(o+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const d=n*c,f=n*h;return{previous:{x:i.x-d*(a.x-s.x),y:i.y-d*(a.y-s.y)},next:{x:i.x+f*(a.x-s.x),y:i.y+f*(a.y-s.y)}}}function MI(t,e,r){const n=t.length;let s,i,a,o,l,c=mo(t,0);for(let h=0;h<n-1;++h)if(l=c,c=mo(t,h+1),!(!l||!c)){if(wl(e[h],0,PI)){r[h]=r[h+1]=0;continue}s=r[h]/e[h],i=r[h+1]/e[h],o=Math.pow(s,2)+Math.pow(i,2),!(o<=9)&&(a=3/Math.sqrt(o),r[h]=s*a*e[h],r[h+1]=i*a*e[h])}}function FI(t,e,r="x"){const n=d2(r),s=t.length;let i,a,o,l=mo(t,0);for(let c=0;c<s;++c){if(a=o,o=l,l=mo(t,c+1),!o)continue;const h=o[r],d=o[n];a&&(i=(h-a[r])/3,o[`cp1${r}`]=h-i,o[`cp1${n}`]=d-i*e[c]),l&&(i=(l[r]-h)/3,o[`cp2${r}`]=h+i,o[`cp2${n}`]=d+i*e[c])}}function LI(t,e="x"){const r=d2(e),n=t.length,s=Array(n).fill(0),i=Array(n);let a,o,l,c=mo(t,0);for(a=0;a<n;++a)if(o=l,l=c,c=mo(t,a+1),!!l){if(c){const h=c[e]-l[e];s[a]=h!==0?(c[r]-l[r])/h:0}i[a]=o?c?cs(s[a-1])!==cs(s[a])?0:(s[a-1]+s[a])/2:s[a-1]:s[a]}MI(t,s,i),FI(t,i,e)}function nu(t,e,r){return Math.max(Math.min(t,r),e)}function BI(t,e){let r,n,s,i,a,o=Ss(t[0],e);for(r=0,n=t.length;r<n;++r)a=i,i=o,o=r<n-1&&Ss(t[r+1],e),i&&(s=t[r],a&&(s.cp1x=nu(s.cp1x,e.left,e.right),s.cp1y=nu(s.cp1y,e.top,e.bottom)),o&&(s.cp2x=nu(s.cp2x,e.left,e.right),s.cp2y=nu(s.cp2y,e.top,e.bottom)))}function UI(t,e,r,n,s){let i,a,o,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")LI(t,s);else{let c=n?t[t.length-1]:t[0];for(i=0,a=t.length;i<a;++i)o=t[i],l=II(c,o,t[Math.min(i+1,a-(n?0:1))%a],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,c=o}e.capBezierPoints&&BI(t,r)}function jg(){return typeof window<"u"&&typeof document<"u"}function Og(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function jh(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}const ud=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function zI(t,e){return ud(t).getPropertyValue(e)}const $I=["top","right","bottom","left"];function Yi(t,e,r){const n={};r=r?"-"+r:"";for(let s=0;s<4;s++){const i=$I[s];n[i]=parseFloat(t[e+"-"+i+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const WI=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function VI(t,e){const r=t.touches,n=r&&r.length?r[0]:t,{offsetX:s,offsetY:i}=n;let a=!1,o,l;if(WI(s,i,t.target))o=s,l=i;else{const c=e.getBoundingClientRect();o=n.clientX-c.left,l=n.clientY-c.top,a=!0}return{x:o,y:l,box:a}}function Pi(t,e){if("native"in t)return t;const{canvas:r,currentDevicePixelRatio:n}=e,s=ud(r),i=s.boxSizing==="border-box",a=Yi(s,"padding"),o=Yi(s,"border","width"),{x:l,y:c,box:h}=VI(t,r),d=a.left+(h&&o.left),f=a.top+(h&&o.top);let{width:p,height:m}=e;return i&&(p-=a.width+o.width,m-=a.height+o.height),{x:Math.round((l-d)/p*r.width/n),y:Math.round((c-f)/m*r.height/n)}}function HI(t,e,r){let n,s;if(e===void 0||r===void 0){const i=t&&Og(t);if(!i)e=t.clientWidth,r=t.clientHeight;else{const a=i.getBoundingClientRect(),o=ud(i),l=Yi(o,"border","width"),c=Yi(o,"padding");e=a.width-c.width-l.width,r=a.height-c.height-l.height,n=jh(o.maxWidth,i,"clientWidth"),s=jh(o.maxHeight,i,"clientHeight")}}return{width:e,height:r,maxWidth:n||Ah,maxHeight:s||Ah}}const Qs=t=>Math.round(t*10)/10;function GI(t,e,r,n){const s=ud(t),i=Yi(s,"margin"),a=jh(s.maxWidth,t,"clientWidth")||Ah,o=jh(s.maxHeight,t,"clientHeight")||Ah,l=HI(t,e,r);let{width:c,height:h}=l;if(s.boxSizing==="content-box"){const f=Yi(s,"border","width"),p=Yi(s,"padding");c-=p.width+f.width,h-=p.height+f.height}return c=Math.max(0,c-i.width),h=Math.max(0,n?c/n:h-i.height),c=Qs(Math.min(c,a,l.maxWidth)),h=Qs(Math.min(h,o,l.maxHeight)),c&&!h&&(h=Qs(c/2)),(e!==void 0||r!==void 0)&&n&&l.height&&h>l.height&&(h=l.height,c=Qs(Math.floor(h*n))),{width:c,height:h}}function _1(t,e,r){const n=e||1,s=Qs(t.height*n),i=Qs(t.width*n);t.height=Qs(t.height),t.width=Qs(t.width);const a=t.canvas;return a.style&&(r||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||a.height!==s||a.width!==i?(t.currentDevicePixelRatio=n,a.height=s,a.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const KI=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};jg()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function S1(t,e){const r=zI(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Ii(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function YI(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function XI(t,e,r,n){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},a=Ii(t,s,r),o=Ii(s,i,r),l=Ii(i,e,r),c=Ii(a,o,r),h=Ii(o,l,r);return Ii(c,h,r)}const qI=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},JI=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function no(t,e,r){return t?qI(e,r):JI()}function f2(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function p2(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function g2(t){return t==="angle"?{between:sc,compare:QP,normalize:wr}:{between:ws,compare:(e,r)=>e-r,normalize:e=>e}}function k1({start:t,end:e,count:r,loop:n,style:s}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:s}}function QI(t,e,r){const{property:n,start:s,end:i}=r,{between:a,normalize:o}=g2(n),l=e.length;let{start:c,end:h,loop:d}=t,f,p;if(d){for(c+=l,h+=l,f=0,p=l;f<p&&a(o(e[c%l][n]),s,i);++f)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:d,style:t.style}}function m2(t,e,r){if(!r)return[t];const{property:n,start:s,end:i}=r,a=e.length,{compare:o,between:l,normalize:c}=g2(n),{start:h,end:d,loop:f,style:p}=QI(t,e,r),m=[];let g=!1,x=null,v,b,y;const w=()=>l(s,y,v)&&o(s,y)!==0,S=()=>o(i,v)===0||l(i,y,v),N=()=>g||w(),k=()=>!g||S();for(let A=h,T=h;A<=d;++A)b=e[A%a],!b.skip&&(v=c(b[n]),v!==y&&(g=l(v,s,i),x===null&&N()&&(x=o(v,s)===0?A:T),x!==null&&k()&&(m.push(k1({start:x,end:A,loop:f,count:a,style:p})),x=null),T=A,y=v));return x!==null&&m.push(k1({start:x,end:d,loop:f,count:a,style:p})),m}function x2(t,e){const r=[],n=t.segments;for(let s=0;s<n.length;s++){const i=m2(n[s],t.points,e);i.length&&r.push(...i)}return r}function ZI(t,e,r,n){let s=0,i=e-1;if(r&&!n)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,r&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function eM(t,e,r,n){const s=t.length,i=[];let a=e,o=t[e],l;for(l=e+1;l<=r;++l){const c=t[l%s];c.skip||c.stop?o.skip||(n=!1,i.push({start:e%s,end:(l-1)%s,loop:n}),e=a=c.stop?l:null):(a=l,o.skip&&(e=l)),o=c}return a!==null&&i.push({start:e%s,end:a%s,loop:n}),i}function tM(t,e){const r=t.points,n=t.options.spanGaps,s=r.length;if(!s)return[];const i=!!t._loop,{start:a,end:o}=ZI(r,s,i,n);if(n===!0)return E1(t,[{start:a,end:o,loop:i}],r,e);const l=o<a?o+s:o,c=!!t._fullLoop&&a===0&&o===s-1;return E1(t,eM(r,a,l,c),r,e)}function E1(t,e,r,n){return!n||!n.setContext||!r?e:rM(t,e,r,n)}function rM(t,e,r,n){const s=t._chart.getContext(),i=T1(t.options),{_datasetIndex:a,options:{spanGaps:o}}=t,l=r.length,c=[];let h=i,d=e[0].start,f=d;function p(m,g,x,v){const b=o?-1:1;if(m!==g){for(m+=l;r[m%l].skip;)m-=b;for(;r[g%l].skip;)g+=b;m%l!==g%l&&(c.push({start:m%l,end:g%l,loop:x,style:v}),h=v,d=g%l)}}for(const m of e){d=o?d:m.start;let g=r[d%l],x;for(f=d+1;f<=m.end;f++){const v=r[f%l];x=T1(n.setContext(wi(s,{type:"segment",p0:g,p1:v,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:a}))),nM(x,h)&&p(d,f-1,m.loop,h),g=v,h=x}d<f-1&&p(d,f-1,m.loop,h)}return c}function T1(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function nM(t,e){if(!e)return!1;const r=[],n=function(s,i){return Eg(i)?(r.includes(i)||r.push(i),r.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function su(t,e,r){return t.options.clip?t[r]:e[r]}function sM(t,e){const{xScale:r,yScale:n}=t;return r&&n?{left:su(r,e,"left"),right:su(r,e,"right"),top:su(n,e,"top"),bottom:su(n,e,"bottom")}:e}function v2(t,e){const r=e._clip;if(r.disabled)return!1;const n=sM(e,t.chartArea);return{left:r.left===!1?0:n.left-(r.left===!0?0:r.left),right:r.right===!1?t.width:n.right+(r.right===!0?0:r.right),top:r.top===!1?0:n.top-(r.top===!0?0:r.top),bottom:r.bottom===!1?t.height:n.bottom+(r.bottom===!0?0:r.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class iM{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,s){const i=r.listeners[s],a=r.duration;i.forEach(o=>o({chart:e,initial:r.initial,numSteps:a,currentStep:Math.min(n-r.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=e2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const i=n.items;let a=i.length-1,o=!1,l;for(;a>=0;--a)l=i[a],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),o=!0):(i[a]=i[i.length-1],i.pop());o&&(s.draw(),this._notify(s,n,e,"progress")),i.length||(n.running=!1,this._notify(s,n,e,"complete"),n.initial=!1),r+=i.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){const r=this._charts;let n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){const r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){const r=this._charts.get(e);if(!r||!r.items.length)return;const n=r.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var fs=new iM;const C1="transparent",aM={boolean(t,e,r){return r>.5?e:t},color(t,e,r){const n=x1(t||C1),s=n.valid&&x1(e||C1);return s&&s.valid?s.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}};class oM{constructor(e,r,n,s){const i=r[n];s=qo([e.to,s,i,e.from]);const a=qo([e.from,i,s]);this._active=!0,this._fn=e.fn||aM[e.type||typeof a],this._easing=_l[e.easing]||_l.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=a,this._to=s,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);const s=this._target[this._prop],i=n-this._start,a=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=qo([e.to,r,s,e.from]),this._from=qo([e.from,s,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const r=e-this._start,n=this._duration,s=this._prop,i=this._from,a=this._loop,o=this._to;let l;if(this._active=i!==o&&(a||r<n),!this._active){this._target[s]=o,this._notify(!0);return}if(r<0){this._target[s]=i;return}l=r/n%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,o,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){const r=e?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][r]()}}class b2{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!qe(e))return;const r=Object.keys(Tt.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!qe(i))return;const a={};for(const o of r)a[o]=i[o];(Et(i.properties)&&i.properties||[s]).forEach(o=>{(o===s||!n.has(o))&&n.set(o,a)})})}_animateOptions(e,r){const n=r.options,s=cM(e,n);if(!s)return[];const i=this._createAnimations(s,n);return n.$shared&&lM(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,r){const n=this._properties,s=[],i=e.$animations||(e.$animations={}),a=Object.keys(r),o=Date.now();let l;for(l=a.length-1;l>=0;--l){const c=a[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,r));continue}const h=r[c];let d=i[c];const f=n.get(c);if(d)if(f&&d.active()){d.update(f,h,o);continue}else d.cancel();if(!f||!f.duration){e[c]=h;continue}i[c]=d=new oM(f,e,c,h),s.push(d)}return s}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}const n=this._createAnimations(e,r);if(n.length)return fs.add(this._chart,n),!0}}function lM(t,e){const r=[],n=Object.keys(e);for(let s=0;s<n.length;s++){const i=t[n[s]];i&&i.active()&&r.push(i.wait())}return Promise.all(r)}function cM(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function A1(t,e){const r=t&&t.options||{},n=r.reverse,s=r.min===void 0?e:0,i=r.max===void 0?e:0;return{start:n?i:s,end:n?s:i}}function uM(t,e,r){if(r===!1)return!1;const n=A1(t,r),s=A1(e,r);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function hM(t){let e,r,n,s;return qe(t)?(e=t.top,r=t.right,n=t.bottom,s=t.left):e=r=n=s=t,{top:e,right:r,bottom:n,left:s,disabled:t===!1}}function y2(t,e){const r=[],n=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=n.length;s<i;++s)r.push(n[s].index);return r}function N1(t,e,r,n={}){const s=t.keys,i=n.mode==="single";let a,o,l,c;if(e===null)return;let h=!1;for(a=0,o=s.length;a<o;++a){if(l=+s[a],l===r){if(h=!0,n.all)continue;break}c=t.values[l],Mt(c)&&(i||e===0||cs(e)===cs(c))&&(e+=c)}return!h&&!n.all?0:e}function dM(t,e){const{iScale:r,vScale:n}=e,s=r.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",a=Object.keys(t),o=new Array(a.length);let l,c,h;for(l=0,c=a.length;l<c;++l)h=a[l],o[l]={[s]:h,[i]:t[h]};return o}function uf(t,e){const r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function fM(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function pM(t){const{min:e,max:r,minDefined:n,maxDefined:s}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:s?r:Number.POSITIVE_INFINITY}}function gM(t,e,r){const n=t[e]||(t[e]={});return n[r]||(n[r]={})}function j1(t,e,r,n){for(const s of e.getMatchingVisibleMetas(n).reverse()){const i=t[s.index];if(r&&i>0||!r&&i<0)return s.index}return null}function O1(t,e){const{chart:r,_cachedMeta:n}=t,s=r._stacks||(r._stacks={}),{iScale:i,vScale:a,index:o}=n,l=i.axis,c=a.axis,h=fM(i,a,n),d=e.length;let f;for(let p=0;p<d;++p){const m=e[p],{[l]:g,[c]:x}=m,v=m._stacks||(m._stacks={});f=v[c]=gM(s,h,g),f[o]=x,f._top=j1(f,a,!0,n.type),f._bottom=j1(f,a,!1,n.type);const b=f._visualValues||(f._visualValues={});b[o]=x}}function hf(t,e){const r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function mM(t,e){return wi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function xM(t,e,r){return wi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function Mo(t,e){const r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[n]===void 0||i[n][r]===void 0)return;delete i[n][r],i[n]._visualValues!==void 0&&i[n]._visualValues[r]!==void 0&&delete i[n]._visualValues[r]}}}const df=t=>t==="reset"||t==="none",R1=(t,e)=>e?t:Object.assign({},t),vM=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:y2(r,!0),values:null};class Vn{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=uf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Mo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,r=this._cachedMeta,n=this.getDataset(),s=(d,f,p,m)=>d==="x"?f:d==="r"?m:p,i=r.xAxisID=Be(n.xAxisID,hf(e,"x")),a=r.yAxisID=Be(n.yAxisID,hf(e,"y")),o=r.rAxisID=Be(n.rAxisID,hf(e,"r")),l=r.indexAxis,c=r.iAxisID=s(l,i,a,o),h=r.vAxisID=s(l,a,i,o);r.xScale=this.getScaleForId(i),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(o),r.iScale=this.getScaleForId(c),r.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&p1(this._data,this),e._stacked&&Mo(e)}_dataCheck(){const e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if(qe(r)){const s=this._cachedMeta;this._data=dM(r,s)}else if(n!==r){if(n){p1(n,this);const s=this._cachedMeta;Mo(s),s._parsed=[]}r&&Object.isExtensible(r)&&rI(r,this),this._syncList=[],this._data=r}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const r=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const i=r._stacked;r._stacked=uf(r.vScale,r),r.stack!==n.stack&&(s=!0,Mo(r),r.stack=n.stack),this._resyncElements(e),(s||i!==r._stacked)&&(O1(this,r._parsed),r._stacked=uf(r.vScale,r))}configure(){const e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){const{_cachedMeta:n,_data:s}=this,{iScale:i,_stacked:a}=n,o=i.axis;let l=e===0&&r===s.length?!0:n._sorted,c=e>0&&n._parsed[e-1],h,d,f;if(this._parsing===!1)n._parsed=s,n._sorted=!0,f=s;else{Et(s[e])?f=this.parseArrayData(n,s,e,r):qe(s[e])?f=this.parseObjectData(n,s,e,r):f=this.parsePrimitiveData(n,s,e,r);const p=()=>d[o]===null||c&&d[o]<c[o];for(h=0;h<r;++h)n._parsed[h+e]=d=f[h],l&&(p()&&(l=!1),c=d);n._sorted=l}a&&O1(this,f)}parsePrimitiveData(e,r,n,s){const{iScale:i,vScale:a}=e,o=i.axis,l=a.axis,c=i.getLabels(),h=i===a,d=new Array(s);let f,p,m;for(f=0,p=s;f<p;++f)m=f+n,d[f]={[o]:h||i.parse(c[m],m),[l]:a.parse(r[m],m)};return d}parseArrayData(e,r,n,s){const{xScale:i,yScale:a}=e,o=new Array(s);let l,c,h,d;for(l=0,c=s;l<c;++l)h=l+n,d=r[h],o[l]={x:i.parse(d[0],h),y:a.parse(d[1],h)};return o}parseObjectData(e,r,n,s){const{xScale:i,yScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let h,d,f,p;for(h=0,d=s;h<d;++h)f=h+n,p=r[f],c[h]={x:i.parse(gi(p,o),f),y:a.parse(gi(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){const s=this.chart,i=this._cachedMeta,a=r[e.axis],o={keys:y2(s,!0),values:r._stacks[e.axis]._visualValues};return N1(o,a,i.index,{mode:n})}updateRangeFromParsed(e,r,n,s){const i=n[r.axis];let a=i===null?NaN:i;const o=s&&n._stacks[r.axis];s&&o&&(s.values=o,a=N1(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,r){const n=this._cachedMeta,s=n._parsed,i=n._sorted&&e===n.iScale,a=s.length,o=this._getOtherScale(e),l=vM(r,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=pM(o);let f,p;function m(){p=s[f];const g=p[o.axis];return!Mt(p[e.axis])||h>g||d<g}for(f=0;f<a&&!(!m()&&(this.updateRangeFromParsed(c,e,p,l),i));++f);if(i){for(f=a-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const r=this._cachedMeta._parsed,n=[];let s,i,a;for(s=0,i=r.length;s<i;++s)a=r[s][e.axis],Mt(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const r=this._cachedMeta,n=r.iScale,s=r.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const r=this._cachedMeta;this.update(e||"default"),r._clip=hM(Be(this.options.clip,uM(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,r=this.chart,n=this._cachedMeta,s=n.data||[],i=r.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||s.length-o,c=this.options.drawActiveElementsOnTop;let h;for(n.dataset&&n.dataset.draw(e,i,o,l),h=o;h<o+l;++h){const d=s[h];d.hidden||(d.active&&c?a.push(d):d.draw(e,i))}for(h=0;h<a.length;++h)a[h].draw(e,i)}getStyle(e,r){const n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];i=a.$context||(a.$context=xM(this.getContext(),e,a)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=mM(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!r,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){const s=r==="active",i=this._cachedDataOpts,a=e+"-"+r,o=i[a],l=this.enableOptionSharing&&nc(n);if(o)return R1(o,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),d=s?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),h),p=Object.keys(Tt.elements[e]),m=()=>this.getContext(n,s,r),g=c.resolveNamedOptions(f,p,m,d);return g.$shared&&(g.$shared=l,i[a]=Object.freeze(R1(g,l))),g}_resolveAnimations(e,r,n){const s=this.chart,i=this._cachedDataOpts,a=`animation-${r}`,o=i[a];if(o)return o;let l;if(s.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,r),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,n,r))}const c=new b2(s,l&&l.animations);return l&&l._cacheable&&(i[a]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||df(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){const n=this.resolveDataElementOptions(e,r),s=this._sharedOptions,i=this.getSharedOptions(n),a=this.includeOptions(r,i)||i!==s;return this.updateSharedOptions(i,r,n),{sharedOptions:i,includeOptions:a}}updateElement(e,r,n,s){df(s)?Object.assign(e,n):this._resolveAnimations(r,s).update(e,n)}updateSharedOptions(e,r,n){e&&!df(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,s){e.active=s;const i=this.getStyle(r,s);this._resolveAnimations(r,n,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const r=this._data,n=this._cachedMeta.data;for(const[o,l,c]of this._syncList)this[o](l,c);this._syncList=[];const s=n.length,i=r.length,a=Math.min(i,s);a&&this.parse(0,a),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,r,n=!0){const s=this._cachedMeta,i=s.data,a=e+r;let o;const l=c=>{for(c.length+=r,o=c.length-1;o>=a;o--)c[o]=c[o-r]};for(l(i),o=e;o<a;++o)i[o]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,r),n&&this.updateElements(i,e,r,"reset")}updateElements(e,r,n,s){}_removeElements(e,r){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(e,r);n._stacked&&Mo(n,s)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[r,n,s]=e;this[r](n,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}be(Vn,"defaults",{}),be(Vn,"datasetElementType",null),be(Vn,"dataElementType",null);function bM(t,e){if(!t._cache.$bar){const r=t.getMatchingVisibleMetas(e);let n=[];for(let s=0,i=r.length;s<i;s++)n=n.concat(r[s].controller.getAllParsedValues(t));t._cache.$bar=Z_(n.sort((s,i)=>s-i))}return t._cache.$bar}function yM(t){const e=t.iScale,r=bM(e,t.type);let n=e._length,s,i,a,o;const l=()=>{a===32767||a===-32768||(nc(o)&&(n=Math.min(n,Math.abs(a-o)||n)),o=a)};for(s=0,i=r.length;s<i;++s)a=e.getPixelForValue(r[s]),l();for(o=void 0,s=0,i=e.ticks.length;s<i;++s)a=e.getPixelForTick(s),l();return n}function wM(t,e,r,n){const s=r.barThickness;let i,a;return Ye(s)?(i=e.min*r.categoryPercentage,a=r.barPercentage):(i=s*n,a=1),{chunk:i/n,ratio:a,start:e.pixels[t]-i/2}}function _M(t,e,r,n){const s=e.pixels,i=s[t];let a=t>0?s[t-1]:null,o=t<s.length-1?s[t+1]:null;const l=r.categoryPercentage;a===null&&(a=i-(o===null?e.end-e.start:o-i)),o===null&&(o=i+i-a);const c=i-(i-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/n,ratio:r.barPercentage,start:c}}function SM(t,e,r,n){const s=r.parse(t[0],n),i=r.parse(t[1],n),a=Math.min(s,i),o=Math.max(s,i);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),e[r.axis]=c,e._custom={barStart:l,barEnd:c,start:s,end:i,min:a,max:o}}function w2(t,e,r,n){return Et(t)?SM(t,e,r,n):e[r.axis]=r.parse(t,n),e}function D1(t,e,r,n){const s=t.iScale,i=t.vScale,a=s.getLabels(),o=s===i,l=[];let c,h,d,f;for(c=r,h=r+n;c<h;++c)f=e[c],d={},d[s.axis]=o||s.parse(a[c],c),l.push(w2(f,d,i,c));return l}function ff(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function kM(t,e,r){return t!==0?cs(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function EM(t){let e,r,n,s,i;return t.horizontal?(e=t.base>t.x,r="left",n="right"):(e=t.base<t.y,r="bottom",n="top"),e?(s="end",i="start"):(s="start",i="end"),{start:r,end:n,reverse:e,top:s,bottom:i}}function TM(t,e,r,n){let s=e.borderSkipped;const i={};if(!s){t.borderSkipped=i;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:l,top:c,bottom:h}=EM(t);s==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===n?s=c:(r._bottom||0)===n?s=h:(i[P1(h,a,o,l)]=!0,s=c)),i[P1(s,a,o,l)]=!0,t.borderSkipped=i}function P1(t,e,r,n){return n?(t=CM(t,e,r),t=I1(t,r,e)):t=I1(t,e,r),t}function CM(t,e,r){return t===e?r:t===r?e:t}function I1(t,e,r){return t==="start"?e:t==="end"?r:t}function AM(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}class Cu extends Vn{parsePrimitiveData(e,r,n,s){return D1(e,r,n,s)}parseArrayData(e,r,n,s){return D1(e,r,n,s)}parseObjectData(e,r,n,s){const{iScale:i,vScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=i.axis==="x"?o:l,h=a.axis==="x"?o:l,d=[];let f,p,m,g;for(f=n,p=n+s;f<p;++f)g=r[f],m={},m[i.axis]=i.parse(gi(g,c),f),d.push(w2(gi(g,h),m,a,f));return d}updateRangeFromParsed(e,r,n,s){super.updateRangeFromParsed(e,r,n,s);const i=n._custom;i&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const r=this._cachedMeta,{iScale:n,vScale:s}=r,i=this.getParsed(e),a=i._custom,o=ff(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(i[s.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,n,s){const i=s==="reset",{index:a,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),c=o.isHorizontal(),h=this._getRuler(),{sharedOptions:d,includeOptions:f}=this._getSharedOptions(r,s);for(let p=r;p<r+n;p++){const m=this.getParsed(p),g=i||Ye(m[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),x=this._calculateBarIndexPixels(p,h),v=(m._stacks||{})[o.axis],b={horizontal:c,base:g.base,enableBorderRadius:!v||ff(m._custom)||a===v._top||a===v._bottom,x:c?g.head:x.center,y:c?x.center:g.head,height:c?x.size:Math.abs(g.size),width:c?Math.abs(g.size):x.size};f&&(b.options=d||this.resolveDataElementOptions(p,e[p].active?"active":s));const y=b.options||e[p].options;TM(b,y,v,a),AM(b,y,h.ratio),this.updateElement(e[p],p,b,s)}}_getStacks(e,r){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),i=n.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(r),l=o&&o[n.axis],c=h=>{const d=h._parsed.find(p=>p[n.axis]===l),f=d&&d[h.vScale.axis];if(Ye(f)||isNaN(f))return!0};for(const h of s)if(!(r!==void 0&&c(h))&&((i===!1||a.indexOf(h.stack)===-1||i===void 0&&h.stack===void 0)&&a.push(h.stack),h.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===r).shift()}_getAxis(){const e={},r=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[Be(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,r)]=!0;return Object.keys(e)}_getStackIndex(e,r,n){const s=this._getStacks(e,n),i=r!==void 0?s.indexOf(r):-1;return i===-1?s.length-1:i}_getRuler(){const e=this.options,r=this._cachedMeta,n=r.iScale,s=[];let i,a;for(i=0,a=r.data.length;i<a;++i)s.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const o=e.barThickness;return{min:o||yM(r),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:r,_stacked:n,index:s},options:{base:i,minBarLength:a}}=this,o=i||0,l=this.getParsed(e),c=l._custom,h=ff(c);let d=l[r.axis],f=0,p=n?this.applyStack(r,l,n):d,m,g;p!==d&&(f=p-d,p=d),h&&(d=c.barStart,p=c.barEnd-c.barStart,d!==0&&cs(d)!==cs(c.barEnd)&&(f=0),f+=d);const x=!Ye(i)&&!h?i:f;let v=r.getPixelForValue(x);if(this.chart.getDataVisibility(e)?m=r.getPixelForValue(f+p):m=v,g=m-v,Math.abs(g)<a){g=kM(g,r,o)*a,d===o&&(v-=g/2);const b=r.getPixelForDecimal(0),y=r.getPixelForDecimal(1),w=Math.min(b,y),S=Math.max(b,y);v=Math.max(Math.min(v,S),w),m=v+g,n&&!h&&(l._stacks[r.axis]._visualValues[s]=r.getValueForPixel(m)-r.getValueForPixel(v))}if(v===r.getPixelForValue(o)){const b=cs(g)*r.getLineWidthForValue(o)/2;v+=b,g-=b}return{size:g,base:v,head:m,center:m+g/2}}_calculateBarIndexPixels(e,r){const n=r.scale,s=this.options,i=s.skipNull,a=Be(s.maxBarThickness,1/0);let o,l;const c=this._getAxisCount();if(r.grouped){const h=i?this._getStackCount(e):r.stackCount,d=s.barThickness==="flex"?_M(e,r,s,h*c):wM(e,r,s,h*c),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(Be(f,this.getFirstScaleIdForIndexAxis())),m=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+p;o=d.start+d.chunk*m+d.chunk/2,l=Math.min(a,d.chunk*d.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),l=Math.min(a,r.min*r.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const e=this._cachedMeta,r=e.vScale,n=e.data,s=n.length;let i=0;for(;i<s;++i)this.getParsed(i)[r.axis]!==null&&!n[i].hidden&&n[i].draw(this._ctx)}}be(Cu,"id","bar"),be(Cu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),be(Cu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Au extends Vn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,r,n,s){const i=super.parsePrimitiveData(e,r,n,s);for(let a=0;a<i.length;a++)i[a]._custom=this.resolveDataElementOptions(a+n).radius;return i}parseArrayData(e,r,n,s){const i=super.parseArrayData(e,r,n,s);for(let a=0;a<i.length;a++){const o=r[n+a];i[a]._custom=Be(o[2],this.resolveDataElementOptions(a+n).radius)}return i}parseObjectData(e,r,n,s){const i=super.parseObjectData(e,r,n,s);for(let a=0;a<i.length;a++){const o=r[n+a];i[a]._custom=Be(o&&o.r&&+o.r,this.resolveDataElementOptions(a+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let r=0;for(let n=e.length-1;n>=0;--n)r=Math.max(r,e[n].size(this.resolveDataElementOptions(n))/2);return r>0&&r}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:i}=r,a=this.getParsed(e),o=s.getLabelForValue(a.x),l=i.getLabelForValue(a.y),c=a._custom;return{label:n[e]||"",value:"("+o+", "+l+(c?", "+c:"")+")"}}update(e){const r=this._cachedMeta.data;this.updateElements(r,0,r.length,e)}updateElements(e,r,n,s){const i=s==="reset",{iScale:a,vScale:o}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(r,s),h=a.axis,d=o.axis;for(let f=r;f<r+n;f++){const p=e[f],m=!i&&this.getParsed(f),g={},x=g[h]=i?a.getPixelForDecimal(.5):a.getPixelForValue(m[h]),v=g[d]=i?o.getBasePixel():o.getPixelForValue(m[d]);g.skip=isNaN(x)||isNaN(v),c&&(g.options=l||this.resolveDataElementOptions(f,p.active?"active":s),i&&(g.options.radius=0)),this.updateElement(p,f,g,s)}}resolveDataElementOptions(e,r){const n=this.getParsed(e);let s=super.resolveDataElementOptions(e,r);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const i=s.radius;return r!=="active"&&(s.radius=0),s.radius+=Be(n&&n._custom,i),s}}be(Au,"id","bubble"),be(Au,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),be(Au,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function NM(t,e,r){let n=1,s=1,i=0,a=0;if(e<_t){const o=t,l=o+e,c=Math.cos(o),h=Math.sin(o),d=Math.cos(l),f=Math.sin(l),p=(y,w,S)=>sc(y,o,l,!0)?1:Math.max(w,w*r,S,S*r),m=(y,w,S)=>sc(y,o,l,!0)?-1:Math.min(w,w*r,S,S*r),g=p(0,c,d),x=p(Bt,h,f),v=m(tt,c,d),b=m(tt+Bt,h,f);n=(g-v)/2,s=(x-b)/2,i=-(g+v)/2,a=-(x+b)/2}return{ratioX:n,ratioY:s,offsetX:i,offsetY:a}}class Wi extends Vn{constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let i=l=>+n[l];if(qe(n[e])){const{key:l="value"}=this._parsing;i=c=>+gi(n[c],l)}let a,o;for(a=e,o=e+r;a<o;++a)s._parsed[a]=i(a)}}_getRotation(){return Un(this.options.rotation-90)}_getCircumference(){return Un(this.options.circumference)}_getRotationExtents(){let e=_t,r=-_t;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,i=s._getRotation(),a=s._getCircumference();e=Math.min(e,i),r=Math.max(r,i+a)}return{rotation:e,circumference:r-e}}update(e){const r=this.chart,{chartArea:n}=r,s=this._cachedMeta,i=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-a)/2,0),l=Math.min(zP(this.options.cutout,o),1),c=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=NM(d,h,l),x=(n.width-a)/f,v=(n.height-a)/p,b=Math.max(Math.min(x,v)/2,0),y=Y_(this.options.radius,b),w=Math.max(y*l,0),S=(y-w)/this._getVisibleDatasetWeightTotal();this.offsetX=m*y,this.offsetY=g*y,s.total=this.calculateTotal(),this.outerRadius=y-S*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-S*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,r){const n=this.options,s=this._cachedMeta,i=this._getCircumference();return r&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/_t)}updateElements(e,r,n,s){const i=s==="reset",a=this.chart,o=a.chartArea,c=a.options.animation,h=(o.left+o.right)/2,d=(o.top+o.bottom)/2,f=i&&c.animateScale,p=f?0:this.innerRadius,m=f?0:this.outerRadius,{sharedOptions:g,includeOptions:x}=this._getSharedOptions(r,s);let v=this._getRotation(),b;for(b=0;b<r;++b)v+=this._circumference(b,i);for(b=r;b<r+n;++b){const y=this._circumference(b,i),w=e[b],S={x:h+this.offsetX,y:d+this.offsetY,startAngle:v,endAngle:v+y,circumference:y,outerRadius:m,innerRadius:p};x&&(S.options=g||this.resolveDataElementOptions(b,w.active?"active":s)),v+=y,this.updateElement(w,b,S,s)}}calculateTotal(){const e=this._cachedMeta,r=e.data;let n=0,s;for(s=0;s<r.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(n+=Math.abs(i))}return n}calculateCircumference(e){const r=this._cachedMeta.total;return r>0&&!isNaN(e)?_t*(Math.abs(e)/r):0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,s=n.data.labels||[],i=_c(r._parsed[e],n.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let r=0;const n=this.chart;let s,i,a,o,l;if(!e){for(s=0,i=n.data.datasets.length;s<i;++s)if(n.isDatasetVisible(s)){a=n.getDatasetMeta(s),e=a.data,o=a.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=o.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(r=Math.max(r,l.borderWidth||0,l.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let n=0,s=e.length;n<s;++n){const i=this.resolveDataElementOptions(n);r=Math.max(r,i.offset||0,i.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(r+=this._getRingWeight(n));return r}_getRingWeight(e){return Math.max(Be(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}be(Wi,"id","doughnut"),be(Wi,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),be(Wi,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),be(Wi,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data,{labels:{pointStyle:n,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=e.legend.options;return r.labels.length&&r.datasets.length?r.labels.map((l,c)=>{const d=e.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:d.backgroundColor,fontColor:i,hidden:!e.getDataVisibility(c),lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:d.borderWidth,strokeStyle:d.borderColor,textAlign:s,pointStyle:n,borderRadius:a&&(o||d.borderRadius),index:c}}):[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}}});class Nu extends Vn{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const r=this._cachedMeta,{dataset:n,data:s=[],_dataset:i}=r,a=this.chart._animationsDisabled;let{start:o,count:l}=r2(r,s,a);this._drawStart=o,this._drawCount=l,n2(r)&&(o=0,l=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:c},e),this.updateElements(s,o,l,e)}updateElements(e,r,n,s){const i=s==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(r,s),f=a.axis,p=o.axis,{spanGaps:m,segment:g}=this.options,x=po(m)?m:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||s==="none",b=r+n,y=e.length;let w=r>0&&this.getParsed(r-1);for(let S=0;S<y;++S){const N=e[S],k=v?N:{};if(S<r||S>=b){k.skip=!0;continue}const A=this.getParsed(S),T=Ye(A[p]),F=k[f]=a.getPixelForValue(A[f],S),I=k[p]=i||T?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,A,l):A[p],S);k.skip=isNaN(F)||isNaN(I)||T,k.stop=S>0&&Math.abs(A[f]-w[f])>x,g&&(k.parsed=A,k.raw=c.data[S]),d&&(k.options=h||this.resolveDataElementOptions(S,N.active?"active":s)),v||this.updateElement(N,S,k,s),w=A}}getMaxOverflow(){const e=this._cachedMeta,r=e.dataset,n=r.options&&r.options.borderWidth||0,s=e.data||[];if(!s.length)return n;const i=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,i,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}be(Nu,"id","line"),be(Nu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),be(Nu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class kl extends Vn{constructor(e,r){super(e,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const r=this._cachedMeta,n=this.chart,s=n.data.labels||[],i=_c(r._parsed[e].r,n.options.locale);return{label:s[e]||"",value:i}}parseObjectData(e,r,n,s){return h2.bind(this)(e,r,n,s)}update(e){const r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,e)}getMinMax(){const e=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,s)=>{const i=this.getParsed(s).r;!isNaN(i)&&this.chart.getDataVisibility(s)&&(i<r.min&&(r.min=i),i>r.max&&(r.max=i))}),r}_updateRadius(){const e=this.chart,r=e.chartArea,n=e.options,s=Math.min(r.right-r.left,r.bottom-r.top),i=Math.max(s/2,0),a=Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0),o=(i-a)/e.getVisibleDatasetCount();this.outerRadius=i-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,r,n,s){const i=s==="reset",a=this.chart,l=a.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,d=c.yCenter,f=c.getIndexAngle(0)-.5*tt;let p=f,m;const g=360/this.countVisibleElements();for(m=0;m<r;++m)p+=this._computeAngle(m,s,g);for(m=r;m<r+n;m++){const x=e[m];let v=p,b=p+this._computeAngle(m,s,g),y=a.getDataVisibility(m)?c.getDistanceFromCenterForValue(this.getParsed(m).r):0;p=b,i&&(l.animateScale&&(y=0),l.animateRotate&&(v=b=f));const w={x:h,y:d,innerRadius:0,outerRadius:y,startAngle:v,endAngle:b,options:this.resolveDataElementOptions(m,x.active?"active":s)};this.updateElement(x,m,w,s)}}countVisibleElements(){const e=this._cachedMeta;let r=0;return e.data.forEach((n,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&r++}),r}_computeAngle(e,r,n){return this.chart.getDataVisibility(e)?Un(this.resolveDataElementOptions(e,r).angle||n):0}}be(kl,"id","polarArea"),be(kl,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),be(kl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const r=e.data;if(r.labels.length&&r.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return r.labels.map((i,a)=>{const l=e.getDatasetMeta(0).controller.getStyle(a);return{text:i,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class F0 extends Wi{}be(F0,"id","pie"),be(F0,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class ju extends Vn{getLabelAndValue(e){const r=this._cachedMeta.vScale,n=this.getParsed(e);return{label:r.getLabels()[e],value:""+r.getLabelForValue(n[r.axis])}}parseObjectData(e,r,n,s){return h2.bind(this)(e,r,n,s)}update(e){const r=this._cachedMeta,n=r.dataset,s=r.data||[],i=r.iScale.getLabels();if(n.points=s,e!=="resize"){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);const o={_loop:!0,_fullLoop:i.length===s.length,options:a};this.updateElement(n,void 0,o,e)}this.updateElements(s,0,s.length,e)}updateElements(e,r,n,s){const i=this._cachedMeta.rScale,a=s==="reset";for(let o=r;o<r+n;o++){const l=e[o],c=this.resolveDataElementOptions(o,l.active?"active":s),h=i.getPointPositionForValue(o,this.getParsed(o).r),d=a?i.xCenter:h.x,f=a?i.yCenter:h.y,p={x:d,y:f,angle:h.angle,skip:isNaN(d)||isNaN(f),options:c};this.updateElement(l,o,p,s)}}}be(ju,"id","radar"),be(ju,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),be(ju,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Ou extends Vn{getLabelAndValue(e){const r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:i}=r,a=this.getParsed(e),o=s.getLabelForValue(a.x),l=i.getLabelForValue(a.y);return{label:n[e]||"",value:"("+o+", "+l+")"}}update(e){const r=this._cachedMeta,{data:n=[]}=r,s=this.chart._animationsDisabled;let{start:i,count:a}=r2(r,n,s);if(this._drawStart=i,this._drawCount=a,n2(r)&&(i=0,a=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:l}=r;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!l._decimated,o.points=n;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(o,void 0,{animated:!s,options:c},e)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(n,i,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,r,n,s){const i=s==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(r,s),d=this.getSharedOptions(h),f=this.includeOptions(s,d),p=a.axis,m=o.axis,{spanGaps:g,segment:x}=this.options,v=po(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||i||s==="none";let y=r>0&&this.getParsed(r-1);for(let w=r;w<r+n;++w){const S=e[w],N=this.getParsed(w),k=b?S:{},A=Ye(N[m]),T=k[p]=a.getPixelForValue(N[p],w),F=k[m]=i||A?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,N,l):N[m],w);k.skip=isNaN(T)||isNaN(F)||A,k.stop=w>0&&Math.abs(N[p]-y[p])>v,x&&(k.parsed=N,k.raw=c.data[w]),f&&(k.options=d||this.resolveDataElementOptions(w,S.active?"active":s)),b||this.updateElement(S,w,k,s),y=N}this.updateSharedOptions(d,s,h)}getMaxOverflow(){const e=this._cachedMeta,r=e.data||[];if(!this.options.showLine){let o=0;for(let l=r.length-1;l>=0;--l)o=Math.max(o,r[l].size(this.resolveDataElementOptions(l))/2);return o>0&&o}const n=e.dataset,s=n.options&&n.options.borderWidth||0;if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,a)/2}}be(Ou,"id","scatter"),be(Ou,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),be(Ou,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var jM=Object.freeze({__proto__:null,BarController:Cu,BubbleController:Au,DoughnutController:Wi,LineController:Nu,PieController:F0,PolarAreaController:kl,RadarController:ju,ScatterController:Ou});function Ni(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Rg{constructor(e){be(this,"options");this.options=e||{}}static override(e){Object.assign(Rg.prototype,e)}init(){}formats(){return Ni()}parse(){return Ni()}format(){return Ni()}add(){return Ni()}diff(){return Ni()}startOf(){return Ni()}endOf(){return Ni()}}var OM={_date:Rg};function RM(t,e,r,n){const{controller:s,data:i,_sorted:a}=t,o=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&a&&i.length){const c=o._reversePixels?eI:_s;if(n){if(s._sharedOptions){const h=i[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=c(i,e,r-d),p=c(i,e,r+d);return{lo:f.lo,hi:p.hi}}}}else{const h=c(i,e,r);if(l){const{vScale:d}=s._cachedMeta,{_parsed:f}=t,p=f.slice(0,h.lo+1).reverse().findIndex(g=>!Ye(g[d.axis]));h.lo-=Math.max(0,p);const m=f.slice(h.hi).findIndex(g=>!Ye(g[d.axis]));h.hi+=Math.max(0,m)}return h}}return{lo:0,hi:i.length-1}}function hd(t,e,r,n,s){const i=t.getSortedVisibleDatasetMetas(),a=r[e];for(let o=0,l=i.length;o<l;++o){const{index:c,data:h}=i[o],{lo:d,hi:f}=RM(i[o],e,a,s);for(let p=d;p<=f;++p){const m=h[p];m.skip||n(m,c,p)}}}function DM(t){const e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,s){const i=e?Math.abs(n.x-s.x):0,a=r?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}function pf(t,e,r,n,s){const i=[];return!s&&!t.isPointInArea(e)||hd(t,r,e,function(o,l,c){!s&&!Ss(o,t.chartArea,0)||o.inRange(e.x,e.y,n)&&i.push({element:o,datasetIndex:l,index:c})},!0),i}function PM(t,e,r,n){let s=[];function i(a,o,l){const{startAngle:c,endAngle:h}=a.getProps(["startAngle","endAngle"],n),{angle:d}=J_(a,{x:e.x,y:e.y});sc(d,c,h)&&s.push({element:a,datasetIndex:o,index:l})}return hd(t,r,e,i),s}function IM(t,e,r,n,s,i){let a=[];const o=DM(r);let l=Number.POSITIVE_INFINITY;function c(h,d,f){const p=h.inRange(e.x,e.y,s);if(n&&!p)return;const m=h.getCenterPoint(s);if(!(!!i||t.isPointInArea(m))&&!p)return;const x=o(e,m);x<l?(a=[{element:h,datasetIndex:d,index:f}],l=x):x===l&&a.push({element:h,datasetIndex:d,index:f})}return hd(t,r,e,c),a}function gf(t,e,r,n,s,i){return!i&&!t.isPointInArea(e)?[]:r==="r"&&!n?PM(t,e,r,s):IM(t,e,r,n,s,i)}function M1(t,e,r,n,s){const i=[],a=r==="x"?"inXRange":"inYRange";let o=!1;return hd(t,r,e,(l,c,h)=>{l[a]&&l[a](e[r],s)&&(i.push({element:l,datasetIndex:c,index:h}),o=o||l.inRange(e.x,e.y,s))}),n&&!o?[]:i}var MM={modes:{index(t,e,r,n){const s=Pi(e,t),i=r.axis||"x",a=r.includeInvisible||!1,o=r.intersect?pf(t,s,i,n,a):gf(t,s,i,!1,n,a),l=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=o[0].index,d=c.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,r,n){const s=Pi(e,t),i=r.axis||"xy",a=r.includeInvisible||!1;let o=r.intersect?pf(t,s,i,n,a):gf(t,s,i,!1,n,a);if(o.length>0){const l=o[0].datasetIndex,c=t.getDatasetMeta(l).data;o=[];for(let h=0;h<c.length;++h)o.push({element:c[h],datasetIndex:l,index:h})}return o},point(t,e,r,n){const s=Pi(e,t),i=r.axis||"xy",a=r.includeInvisible||!1;return pf(t,s,i,n,a)},nearest(t,e,r,n){const s=Pi(e,t),i=r.axis||"xy",a=r.includeInvisible||!1;return gf(t,s,i,r.intersect,n,a)},x(t,e,r,n){const s=Pi(e,t);return M1(t,s,"x",r.intersect,n)},y(t,e,r,n){const s=Pi(e,t);return M1(t,s,"y",r.intersect,n)}}};const _2=["left","top","right","bottom"];function Fo(t,e){return t.filter(r=>r.pos===e)}function F1(t,e){return t.filter(r=>_2.indexOf(r.pos)===-1&&r.box.axis===e)}function Lo(t,e){return t.sort((r,n)=>{const s=e?n:r,i=e?r:n;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function FM(t){const e=[];let r,n,s,i,a,o;for(r=0,n=(t||[]).length;r<n;++r)s=t[r],{position:i,options:{stack:a,stackWeight:o=1}}=s,e.push({index:r,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:a&&i+a,stackWeight:o});return e}function LM(t){const e={};for(const r of t){const{stack:n,pos:s,stackWeight:i}=r;if(!n||!_2.includes(s))continue;const a=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return e}function BM(t,e){const r=LM(t),{vBoxMaxWidth:n,hBoxMaxHeight:s}=e;let i,a,o;for(i=0,a=t.length;i<a;++i){o=t[i];const{fullSize:l}=o.box,c=r[o.stack],h=c&&o.stackWeight/c.weight;o.horizontal?(o.width=h?h*n:l&&e.availableWidth,o.height=s):(o.width=n,o.height=h?h*s:l&&e.availableHeight)}return r}function UM(t){const e=FM(t),r=Lo(e.filter(c=>c.box.fullSize),!0),n=Lo(Fo(e,"left"),!0),s=Lo(Fo(e,"right")),i=Lo(Fo(e,"top"),!0),a=Lo(Fo(e,"bottom")),o=F1(e,"x"),l=F1(e,"y");return{fullSize:r,leftAndTop:n.concat(i),rightAndBottom:s.concat(l).concat(a).concat(o),chartArea:Fo(e,"chartArea"),vertical:n.concat(s).concat(l),horizontal:i.concat(a).concat(o)}}function L1(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function S2(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function zM(t,e,r,n){const{pos:s,box:i}=r,a=t.maxPadding;if(!qe(s)){r.size&&(t[s]-=r.size);const d=n[r.stack]||{size:0,count:1};d.size=Math.max(d.size,r.horizontal?i.height:i.width),r.size=d.size/d.count,t[s]+=r.size}i.getPadding&&S2(a,i.getPadding());const o=Math.max(0,e.outerWidth-L1(a,t,"left","right")),l=Math.max(0,e.outerHeight-L1(a,t,"top","bottom")),c=o!==t.w,h=l!==t.h;return t.w=o,t.h=l,r.horizontal?{same:c,other:h}:{same:h,other:c}}function $M(t){const e=t.maxPadding;function r(n){const s=Math.max(e[n]-t[n],0);return t[n]+=s,s}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function WM(t,e){const r=e.maxPadding;function n(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(a=>{i[a]=Math.max(e[a],r[a])}),i}return n(t?["left","right"]:["top","bottom"])}function Jo(t,e,r,n){const s=[];let i,a,o,l,c,h;for(i=0,a=t.length,c=0;i<a;++i){o=t[i],l=o.box,l.update(o.width||e.w,o.height||e.h,WM(o.horizontal,e));const{same:d,other:f}=zM(e,r,o,n);c|=d&&s.length,h=h||f,l.fullSize||s.push(o)}return c&&Jo(s,e,r,n)||h}function iu(t,e,r,n,s){t.top=r,t.left=e,t.right=e+n,t.bottom=r+s,t.width=n,t.height=s}function B1(t,e,r,n){const s=r.padding;let{x:i,y:a}=e;for(const o of t){const l=o.box,c=n[o.stack]||{placed:0,weight:1},h=o.stackWeight/c.weight||1;if(o.horizontal){const d=e.w*h,f=c.size||l.height;nc(c.start)&&(a=c.start),l.fullSize?iu(l,s.left,a,r.outerWidth-s.right-s.left,f):iu(l,e.left+c.placed,a,d,f),c.start=a,c.placed+=d,a=l.bottom}else{const d=e.h*h,f=c.size||l.width;nc(c.start)&&(i=c.start),l.fullSize?iu(l,i,s.top,f,r.outerHeight-s.bottom-s.top):iu(l,i,e.top+c.placed,f,d),c.start=i,c.placed+=d,i=l.right}}e.x=i,e.y=a}var Sr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){const r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;const s=Cr(t.options.layout.padding),i=Math.max(e-s.width,0),a=Math.max(r-s.height,0),o=UM(t.boxes),l=o.vertical,c=o.horizontal;ot(t.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const h=l.reduce((g,x)=>x.box.options&&x.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:r,padding:s,availableWidth:i,availableHeight:a,vBoxMaxWidth:i/2/h,hBoxMaxHeight:a/2}),f=Object.assign({},s);S2(f,Cr(n));const p=Object.assign({maxPadding:f,w:i,h:a,x:s.left,y:s.top},s),m=BM(l.concat(c),d);Jo(o.fullSize,p,d,m),Jo(l,p,d,m),Jo(c,p,d,m)&&Jo(l,p,d,m),$M(p),B1(o.leftAndTop,p,d,m),p.x+=p.w,p.y+=p.h,B1(o.rightAndBottom,p,d,m),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},ot(o.chartArea,g=>{const x=g.box;Object.assign(x,t.chartArea),x.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class k2{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,s){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,s?Math.floor(r/s):n)}}isAttached(e){return!0}updateConfig(e){}}class VM extends k2{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ru="$chartjs",HM={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},U1=t=>t===null||t==="";function GM(t,e){const r=t.style,n=t.getAttribute("height"),s=t.getAttribute("width");if(t[Ru]={initial:{height:n,width:s,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",U1(s)){const i=S1(t,"width");i!==void 0&&(t.width=i)}if(U1(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=S1(t,"height");i!==void 0&&(t.height=i)}return t}const E2=KI?{passive:!0}:!1;function KM(t,e,r){t&&t.addEventListener(e,r,E2)}function YM(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,E2)}function XM(t,e){const r=HM[t.type]||t.type,{x:n,y:s}=Pi(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:s!==void 0?s:null}}function Oh(t,e){for(const r of t)if(r===e||r.contains(e))return!0}function qM(t,e,r){const n=t.canvas,s=new MutationObserver(i=>{let a=!1;for(const o of i)a=a||Oh(o.addedNodes,n),a=a&&!Oh(o.removedNodes,n);a&&r()});return s.observe(document,{childList:!0,subtree:!0}),s}function JM(t,e,r){const n=t.canvas,s=new MutationObserver(i=>{let a=!1;for(const o of i)a=a||Oh(o.removedNodes,n),a=a&&!Oh(o.addedNodes,n);a&&r()});return s.observe(document,{childList:!0,subtree:!0}),s}const ac=new Map;let z1=0;function T2(){const t=window.devicePixelRatio;t!==z1&&(z1=t,ac.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function QM(t,e){ac.size||window.addEventListener("resize",T2),ac.set(t,e)}function ZM(t){ac.delete(t),ac.size||window.removeEventListener("resize",T2)}function eF(t,e,r){const n=t.canvas,s=n&&Og(n);if(!s)return;const i=t2((o,l)=>{const c=s.clientWidth;r(o,l),c<s.clientWidth&&r()},window),a=new ResizeObserver(o=>{const l=o[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||i(c,h)});return a.observe(s),QM(t,i),a}function mf(t,e,r){r&&r.disconnect(),e==="resize"&&ZM(t)}function tF(t,e,r){const n=t.canvas,s=t2(i=>{t.ctx!==null&&r(XM(i,t))},t);return KM(n,e,s),s}class rF extends k2{acquireContext(e,r){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(GM(e,r),n):null}releaseContext(e){const r=e.canvas;if(!r[Ru])return!1;const n=r[Ru].initial;["height","width"].forEach(i=>{const a=n[i];Ye(a)?r.removeAttribute(i):r.setAttribute(i,a)});const s=n.style||{};return Object.keys(s).forEach(i=>{r.style[i]=s[i]}),r.width=r.width,delete r[Ru],!0}addEventListener(e,r,n){this.removeEventListener(e,r);const s=e.$proxies||(e.$proxies={}),a={attach:qM,detach:JM,resize:eF}[r]||tF;s[r]=a(e,r,n)}removeEventListener(e,r){const n=e.$proxies||(e.$proxies={}),s=n[r];if(!s)return;({attach:mf,detach:mf,resize:mf}[r]||YM)(e,r,s),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,s){return GI(e,r,n,s)}isAttached(e){const r=e&&Og(e);return!!(r&&r.isConnected)}}function nF(t){return!jg()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?VM:rF}class Gn{constructor(){be(this,"x");be(this,"y");be(this,"active",!1);be(this,"options");be(this,"$animations")}tooltipPosition(e){const{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return po(this.x)&&po(this.y)}getProps(e,r){const n=this.$animations;if(!r||!n)return this;const s={};return e.forEach(i=>{s[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),s}}be(Gn,"defaults",{}),be(Gn,"defaultRoutes");function sF(t,e){const r=t.options.ticks,n=iF(t),s=Math.min(r.maxTicksLimit||n,n),i=r.major.enabled?oF(e):[],a=i.length,o=i[0],l=i[a-1],c=[];if(a>s)return lF(e,c,i,a/s),c;const h=aF(i,e,s);if(a>0){let d,f;const p=a>1?Math.round((l-o)/(a-1)):null;for(au(e,c,h,Ye(p)?0:o-p,o),d=0,f=a-1;d<f;d++)au(e,c,h,i[d],i[d+1]);return au(e,c,h,l,Ye(p)?e.length:l+p),c}return au(e,c,h),c}function iF(t){const e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),s=t._maxLength/r;return Math.floor(Math.min(n,s))}function aF(t,e,r){const n=cF(t),s=e.length/r;if(!n)return Math.max(s,1);const i=XP(n);for(let a=0,o=i.length-1;a<o;a++){const l=i[a];if(l>s)return l}return Math.max(s,1)}function oF(t){const e=[];let r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function lF(t,e,r,n){let s=0,i=r[0],a;for(n=Math.ceil(n),a=0;a<t.length;a++)a===i&&(e.push(t[a]),s++,i=r[s*n])}function au(t,e,r,n,s){const i=Be(n,0),a=Math.min(Be(s,t.length),t.length);let o=0,l,c,h;for(r=Math.ceil(r),s&&(l=s-n,r=l/Math.floor(l/r)),h=i;h<0;)o++,h=Math.round(i+o*r);for(c=Math.max(i,0);c<a;c++)c===h&&(e.push(t[c]),o++,h=Math.round(i+o*r))}function cF(t){const e=t.length;let r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}const uF=t=>t==="left"?"right":t==="right"?"left":t,$1=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,W1=(t,e)=>Math.min(e||t,t);function V1(t,e){const r=[],n=t.length/e,s=t.length;let i=0;for(;i<s;i+=n)r.push(t[Math.floor(i)]);return r}function hF(t,e,r){const n=t.ticks.length,s=Math.min(e,n-1),i=t._startPixel,a=t._endPixel,o=1e-6;let l=t.getPixelForTick(s),c;if(!(r&&(n===1?c=Math.max(l-i,a-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-o||l>a+o)))return l}function dF(t,e){ot(t,r=>{const n=r.gc,s=n.length/2;let i;if(s>e){for(i=0;i<s;++i)delete r.data[n[i]];n.splice(0,s)}})}function Bo(t){return t.drawTicks?t.tickLength:0}function H1(t,e){if(!t.display)return 0;const r=Qt(t.font,e),n=Cr(t.padding);return(Et(t.text)?t.text.length:1)*r.lineHeight+n.height}function fF(t,e){return wi(t,{scale:e,type:"scale"})}function pF(t,e,r){return wi(t,{tick:r,index:e,type:"tick"})}function gF(t,e,r){let n=kg(t);return(r&&e!=="right"||!r&&e==="right")&&(n=uF(n)),n}function mF(t,e,r,n){const{top:s,left:i,bottom:a,right:o,chart:l}=t,{chartArea:c,scales:h}=l;let d=0,f,p,m;const g=a-s,x=o-i;if(t.isHorizontal()){if(p=yr(n,i,o),qe(r)){const v=Object.keys(r)[0],b=r[v];m=h[v].getPixelForValue(b)+g-e}else r==="center"?m=(c.bottom+c.top)/2+g-e:m=$1(t,r,e);f=o-i}else{if(qe(r)){const v=Object.keys(r)[0],b=r[v];p=h[v].getPixelForValue(b)-x+e}else r==="center"?p=(c.left+c.right)/2-x+e:p=$1(t,r,e);m=yr(n,a,s),d=r==="left"?-Bt:Bt}return{titleX:p,titleY:m,maxWidth:f,rotation:d}}class fa extends Gn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:s}=this;return e=en(e,Number.POSITIVE_INFINITY),r=en(r,Number.NEGATIVE_INFINITY),n=en(n,Number.POSITIVE_INFINITY),s=en(s,Number.NEGATIVE_INFINITY),{min:en(e,n),max:en(r,s),minDefined:Mt(e),maxDefined:Mt(r)}}getMinMax(e){let{min:r,max:n,minDefined:s,maxDefined:i}=this.getUserBounds(),a;if(s&&i)return{min:r,max:n};const o=this.getMatchingVisibleMetas();for(let l=0,c=o.length;l<c;++l)a=o[l].controller.getMinMax(this,e),s||(r=Math.min(r,a.min)),i||(n=Math.max(n,a.max));return r=i&&r>n?n:r,n=s&&r>n?r:n,{min:en(r,en(n,r)),max:en(n,en(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){gt(this.options.beforeUpdate,[this])}update(e,r,n){const{beginAtZero:s,grace:i,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=kI(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?V1(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=sF(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){gt(this.options.afterUpdate,[this])}beforeSetDimensions(){gt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){gt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),gt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){gt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const r=this.options.ticks;let n,s,i;for(n=0,s=e.length;n<s;n++)i=e[n],i.label=gt(r.callback,[i.value,n,e],this)}afterTickToLabelConversion(){gt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){gt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,r=e.ticks,n=W1(this.ticks.length,e.ticks.maxTicksLimit),s=r.minRotation||0,i=r.maxRotation;let a=s,o,l,c;if(!this._isVisible()||!r.display||s>=i||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,p=sr(this.chart.width-d,0,this.maxWidth);o=e.offset?this.maxWidth/n:p/(n-1),d+6>o&&(o=p/(n-(e.offset?.5:1)),l=this.maxHeight-Bo(e.grid)-r.padding-H1(e.title,this.chart.options.font),c=Math.sqrt(d*d+f*f),a=_g(Math.min(Math.asin(sr((h.highest.height+6)/o,-1,1)),Math.asin(sr(l/c,-1,1))-Math.asin(sr(f/c,-1,1)))),a=Math.max(s,Math.min(i,a))),this.labelRotation=a}afterCalculateLabelRotation(){gt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){gt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:r,options:{ticks:n,title:s,grid:i}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const l=H1(s,r.options.font);if(o?(e.width=this.maxWidth,e.height=Bo(i)+l):(e.height=this.maxHeight,e.width=Bo(i)+l),n.display&&this.ticks.length){const{first:c,last:h,widest:d,highest:f}=this._getLabelSizes(),p=n.padding*2,m=Un(this.labelRotation),g=Math.cos(m),x=Math.sin(m);if(o){const v=n.mirror?0:x*d.width+g*f.height;e.height=Math.min(this.maxHeight,e.height+v+p)}else{const v=n.mirror?0:g*d.width+x*f.height;e.width=Math.min(this.maxWidth,e.width+v+p)}this._calculatePadding(c,h,x,g)}}this._handleMargins(),o?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,s){const{ticks:{align:i,padding:a},position:o}=this.options,l=this.labelRotation!==0,c=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=s*e.width,p=n*r.height):(f=n*e.height,p=s*r.width):i==="start"?p=r.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,p=r.width/2),this.paddingLeft=Math.max((f-h+a)*this.width/(this.width-h),0),this.paddingRight=Math.max((p-d+a)*this.width/(this.width-d),0)}else{let h=r.height/2,d=e.height/2;i==="start"?(h=0,d=e.height):i==="end"&&(h=r.height,d=0),this.paddingTop=h+a,this.paddingBottom=d+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){gt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)Ye(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const r=this.options.ticks.sampleSize;let n=this.ticks;r<n.length&&(n=V1(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){const{ctx:s,_longestTextCache:i}=this,a=[],o=[],l=Math.floor(r/W1(r,n));let c=0,h=0,d,f,p,m,g,x,v,b,y,w,S;for(d=0;d<r;d+=l){if(m=e[d].label,g=this._resolveTickFontOptions(d),s.font=x=g.string,v=i[x]=i[x]||{data:{},gc:[]},b=g.lineHeight,y=w=0,!Ye(m)&&!Et(m))y=Nh(s,v.data,v.gc,y,m),w=b;else if(Et(m))for(f=0,p=m.length;f<p;++f)S=m[f],!Ye(S)&&!Et(S)&&(y=Nh(s,v.data,v.gc,y,S),w+=b);a.push(y),o.push(w),c=Math.max(y,c),h=Math.max(w,h)}dF(i,r);const N=a.indexOf(c),k=o.indexOf(h),A=T=>({width:a[T]||0,height:o[T]||0});return{first:A(0),last:A(r-1),widest:A(N),highest:A(k),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const r=this._startPixel+e*this._length;return ZP(this._alignToPixels?Ai(this.chart,r,0):r)}getDecimalForPixel(e){const r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){const r=this.ticks||[];if(e>=0&&e<r.length){const n=r[e];return n.$context||(n.$context=pF(this.getContext(),e,n))}return this.$context||(this.$context=fF(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,r=Un(this.labelRotation),n=Math.abs(Math.cos(r)),s=Math.abs(Math.sin(r)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,o=i?i.widest.width+a:0,l=i?i.highest.height+a:0;return this.isHorizontal()?l*n>o*s?o/n:l/s:l*s<o*n?l/n:o/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const r=this.axis,n=this.chart,s=this.options,{grid:i,position:a,border:o}=s,l=i.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Bo(i),p=[],m=o.setContext(this.getContext()),g=m.display?m.width:0,x=g/2,v=function(Te){return Ai(n,Te,g)};let b,y,w,S,N,k,A,T,F,I,B,Z;if(a==="top")b=v(this.bottom),k=this.bottom-f,T=b-x,I=v(e.top)+x,Z=e.bottom;else if(a==="bottom")b=v(this.top),I=e.top,Z=v(e.bottom)-x,k=b+x,T=this.top+f;else if(a==="left")b=v(this.right),N=this.right-f,A=b-x,F=v(e.left)+x,B=e.right;else if(a==="right")b=v(this.left),F=e.left,B=v(e.right)-x,N=b+x,A=this.left+f;else if(r==="x"){if(a==="center")b=v((e.top+e.bottom)/2+.5);else if(qe(a)){const Te=Object.keys(a)[0],he=a[Te];b=v(this.chart.scales[Te].getPixelForValue(he))}I=e.top,Z=e.bottom,k=b+x,T=k+f}else if(r==="y"){if(a==="center")b=v((e.left+e.right)/2);else if(qe(a)){const Te=Object.keys(a)[0],he=a[Te];b=v(this.chart.scales[Te].getPixelForValue(he))}N=b-x,A=N-f,F=e.left,B=e.right}const ke=Be(s.ticks.maxTicksLimit,d),ae=Math.max(1,Math.ceil(d/ke));for(y=0;y<d;y+=ae){const Te=this.getContext(y),he=i.setContext(Te),te=o.setContext(Te),re=he.lineWidth,le=he.color,je=te.dash||[],M=te.dashOffset,U=he.tickWidth,L=he.tickColor,P=he.tickBorderDash||[],V=he.tickBorderDashOffset;w=hF(this,y,l),w!==void 0&&(S=Ai(n,w,re),c?N=A=F=B=S:k=T=I=Z=S,p.push({tx1:N,ty1:k,tx2:A,ty2:T,x1:F,y1:I,x2:B,y2:Z,width:re,color:le,borderDash:je,borderDashOffset:M,tickWidth:U,tickColor:L,tickBorderDash:P,tickBorderDashOffset:V}))}return this._ticksLength=d,this._borderValue=b,p}_computeLabelItems(e){const r=this.axis,n=this.options,{position:s,ticks:i}=n,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:c,padding:h,mirror:d}=i,f=Bo(n.grid),p=f+h,m=d?-h:p,g=-Un(this.labelRotation),x=[];let v,b,y,w,S,N,k,A,T,F,I,B,Z="middle";if(s==="top")N=this.bottom-m,k=this._getXAxisLabelAlignment();else if(s==="bottom")N=this.top+m,k=this._getXAxisLabelAlignment();else if(s==="left"){const ae=this._getYAxisLabelAlignment(f);k=ae.textAlign,S=ae.x}else if(s==="right"){const ae=this._getYAxisLabelAlignment(f);k=ae.textAlign,S=ae.x}else if(r==="x"){if(s==="center")N=(e.top+e.bottom)/2+p;else if(qe(s)){const ae=Object.keys(s)[0],Te=s[ae];N=this.chart.scales[ae].getPixelForValue(Te)+p}k=this._getXAxisLabelAlignment()}else if(r==="y"){if(s==="center")S=(e.left+e.right)/2-p;else if(qe(s)){const ae=Object.keys(s)[0],Te=s[ae];S=this.chart.scales[ae].getPixelForValue(Te)}k=this._getYAxisLabelAlignment(f).textAlign}r==="y"&&(l==="start"?Z="top":l==="end"&&(Z="bottom"));const ke=this._getLabelSizes();for(v=0,b=o.length;v<b;++v){y=o[v],w=y.label;const ae=i.setContext(this.getContext(v));A=this.getPixelForTick(v)+i.labelOffset,T=this._resolveTickFontOptions(v),F=T.lineHeight,I=Et(w)?w.length:1;const Te=I/2,he=ae.color,te=ae.textStrokeColor,re=ae.textStrokeWidth;let le=k;a?(S=A,k==="inner"&&(v===b-1?le=this.options.reverse?"left":"right":v===0?le=this.options.reverse?"right":"left":le="center"),s==="top"?c==="near"||g!==0?B=-I*F+F/2:c==="center"?B=-ke.highest.height/2-Te*F+F:B=-ke.highest.height+F/2:c==="near"||g!==0?B=F/2:c==="center"?B=ke.highest.height/2-Te*F:B=ke.highest.height-I*F,d&&(B*=-1),g!==0&&!ae.showLabelBackdrop&&(S+=F/2*Math.sin(g))):(N=A,B=(1-I)*F/2);let je;if(ae.showLabelBackdrop){const M=Cr(ae.backdropPadding),U=ke.heights[v],L=ke.widths[v];let P=B-M.top,V=0-M.left;switch(Z){case"middle":P-=U/2;break;case"bottom":P-=U;break}switch(k){case"center":V-=L/2;break;case"right":V-=L;break;case"inner":v===b-1?V-=L:v>0&&(V-=L/2);break}je={left:V,top:P,width:L+M.width,height:U+M.height,color:ae.backdropColor}}x.push({label:w,font:T,textOffset:B,options:{rotation:g,color:he,strokeColor:te,strokeWidth:re,textAlign:le,textBaseline:Z,translation:[S,N],backdrop:je}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:r}=this.options;if(-Un(this.labelRotation))return e==="top"?"left":"right";let s="center";return r.align==="start"?s="left":r.align==="end"?s="right":r.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:r,ticks:{crossAlign:n,mirror:s,padding:i}}=this.options,a=this._getLabelSizes(),o=e+i,l=a.widest.width;let c,h;return r==="left"?s?(h=this.right+i,n==="near"?c="left":n==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-o,n==="near"?c="right":n==="center"?(c="center",h-=l/2):(c="left",h=this.left)):r==="right"?s?(h=this.left+i,n==="near"?c="right":n==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+o,n==="near"?c="left":n==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:r},left:n,top:s,width:i,height:a}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,s,i,a),e.restore())}getLineWidthForValue(e){const r=this.options.grid;if(!this._isVisible()||!r.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?r.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const r=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const o=(l,c,h)=>{!h.width||!h.color||(n.save(),n.lineWidth=h.width,n.strokeStyle=h.color,n.setLineDash(h.borderDash||[]),n.lineDashOffset=h.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(r.display)for(i=0,a=s.length;i<a;++i){const l=s[i];r.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),r.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:r,options:{border:n,grid:s}}=this,i=n.setContext(this.getContext()),a=n.display?i.width:0;if(!a)return;const o=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,d,f;this.isHorizontal()?(c=Ai(e,this.left,a)-a/2,h=Ai(e,this.right,o)+o/2,d=f=l):(d=Ai(e,this.top,a)-a/2,f=Ai(e,this.bottom,o)+o/2,c=h=l),r.save(),r.lineWidth=i.width,r.strokeStyle=i.color,r.beginPath(),r.moveTo(c,d),r.lineTo(h,f),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&ld(n,s);const i=this.getLabelItems(e);for(const a of i){const o=a.options,l=a.font,c=a.label,h=a.textOffset;ia(n,c,0,h,l,o)}s&&cd(n)}drawTitle(){const{ctx:e,options:{position:r,title:n,reverse:s}}=this;if(!n.display)return;const i=Qt(n.font),a=Cr(n.padding),o=n.align;let l=i.lineHeight/2;r==="bottom"||r==="center"||qe(r)?(l+=a.bottom,Et(n.text)&&(l+=i.lineHeight*(n.text.length-1))):l+=a.top;const{titleX:c,titleY:h,maxWidth:d,rotation:f}=mF(this,l,r,o);ia(e,n.text,0,0,i,{color:n.color,maxWidth:d,rotation:f,textAlign:gF(o,r,s),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,r=e.ticks&&e.ticks.z||0,n=Be(e.grid&&e.grid.z,-1),s=Be(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==fa.prototype.draw?[{z:r,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:r,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let i,a;for(i=0,a=r.length;i<a;++i){const o=r[i];o[n]===this.id&&(!e||o.type===e)&&s.push(o)}return s}_resolveTickFontOptions(e){const r=this.options.ticks.setContext(this.getContext(e));return Qt(r.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ou{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const r=Object.getPrototypeOf(e);let n;bF(r)&&(n=this.register(r));const s=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,xF(e,a,n),this.override&&Tt.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const r=this.items,n=e.id,s=this.scope;n in r&&delete r[n],s&&n in Tt[s]&&(delete Tt[s][n],this.override&&delete sa[n])}}function xF(t,e,r){const n=rc(Object.create(null),[r?Tt.get(r):{},Tt.get(e),t.defaults]);Tt.set(e,n),t.defaultRoutes&&vF(e,t.defaultRoutes),t.descriptors&&Tt.describe(e,t.descriptors)}function vF(t,e){Object.keys(e).forEach(r=>{const n=r.split("."),s=n.pop(),i=[t].concat(n).join("."),a=e[r].split("."),o=a.pop(),l=a.join(".");Tt.route(i,s,l,o)})}function bF(t){return"id"in t&&"defaults"in t}class yF{constructor(){this.controllers=new ou(Vn,"datasets",!0),this.elements=new ou(Gn,"elements"),this.plugins=new ou(Object,"plugins"),this.scales=new ou(fa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(s=>{const i=n||this._getRegistryForType(s);n||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):ot(s,a=>{const o=n||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,r,n){const s=wg(e);gt(n["before"+s],[],n),r[e](n),gt(n["after"+s],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){const n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){const s=r.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return s}}var is=new yF;class wF{constructor(){this._init=void 0}notify(e,r,n,s){if(r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const i=s?this._descriptors(e).filter(s):this._descriptors(e),a=this._notify(i,e,r,n);return r==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),a}_notify(e,r,n,s){s=s||{};for(const i of e){const a=i.plugin,o=a[n],l=[r,s,i.options];if(gt(o,l,a)===!1&&s.cancelable)return!1}return!0}invalidate(){Ye(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){const n=e&&e.config,s=Be(n.options&&n.options.plugins,{}),i=_F(n);return s===!1&&!r?[]:kF(e,i,s,r)}_notifyStateChanges(e){const r=this._oldCache||[],n=this._cache,s=(i,a)=>i.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(s(r,n),e,"stop"),this._notify(s(n,r),e,"start")}}function _F(t){const e={},r=[],n=Object.keys(is.plugins.items);for(let i=0;i<n.length;i++)r.push(is.getPlugin(n[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const a=s[i];r.indexOf(a)===-1&&(r.push(a),e[a.id]=!0)}return{plugins:r,localIds:e}}function SF(t,e){return!e&&t===!1?null:t===!0?{}:t}function kF(t,{plugins:e,localIds:r},n,s){const i=[],a=t.getContext();for(const o of e){const l=o.id,c=SF(n[l],s);c!==null&&i.push({plugin:o,options:EF(t.config,{plugin:o,local:r[l]},c,a)})}return i}function EF(t,{plugin:e,local:r},n,s){const i=t.pluginScopeKeys(e),a=t.getOptionScopes(n,i);return r&&e.defaults&&a.push(e.defaults),t.createResolver(a,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function L0(t,e){const r=Tt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function TF(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function CF(t,e){return t===e?"_index_":"_value_"}function G1(t){if(t==="x"||t==="y"||t==="r")return t}function AF(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function B0(t,...e){if(G1(t))return t;for(const r of e){const n=r.axis||AF(r.position)||t.length>1&&G1(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function K1(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function NF(t,e){if(e.data&&e.data.datasets){const r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return K1(t,"x",r[0])||K1(t,"y",r[0])}return{}}function jF(t,e){const r=sa[t.type]||{scales:{}},n=e.scales||{},s=L0(t.type,e),i=Object.create(null);return Object.keys(n).forEach(a=>{const o=n[a];if(!qe(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=B0(a,o,NF(a,t),Tt.scales[o.type]),c=CF(l,s),h=r.scales||{};i[a]=yl(Object.create(null),[{axis:l},o,h[l],h[c]])}),t.data.datasets.forEach(a=>{const o=a.type||t.type,l=a.indexAxis||L0(o,e),h=(sa[o]||{}).scales||{};Object.keys(h).forEach(d=>{const f=TF(d,l),p=a[f+"AxisID"]||f;i[p]=i[p]||Object.create(null),yl(i[p],[{axis:f},n[p],h[d]])})}),Object.keys(i).forEach(a=>{const o=i[a];yl(o,[Tt.scales[o.type],Tt.scale])}),i}function C2(t){const e=t.options||(t.options={});e.plugins=Be(e.plugins,{}),e.scales=jF(t,e)}function A2(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function OF(t){return t=t||{},t.data=A2(t.data),C2(t),t}const Y1=new Map,N2=new Set;function lu(t,e){let r=Y1.get(t);return r||(r=e(),Y1.set(t,r),N2.add(r)),r}const Uo=(t,e,r)=>{const n=gi(e,r);n!==void 0&&t.add(n)};class RF{constructor(e){this._config=OF(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=A2(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),C2(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return lu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return lu(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return lu(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){const r=e.id,n=this.type;return lu(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){const n=this._scopeCache;let s=n.get(e);return(!s||r)&&(s=new Map,n.set(e,s)),s}getOptionScopes(e,r,n){const{options:s,type:i}=this,a=this._cachedScopes(e,n),o=a.get(r);if(o)return o;const l=new Set;r.forEach(h=>{e&&(l.add(e),h.forEach(d=>Uo(l,e,d))),h.forEach(d=>Uo(l,s,d)),h.forEach(d=>Uo(l,sa[i]||{},d)),h.forEach(d=>Uo(l,Tt,d)),h.forEach(d=>Uo(l,I0,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),N2.has(r)&&a.set(r,c),c}chartOptionScopes(){const{options:e,type:r}=this;return[e,sa[r]||{},Tt.datasets[r]||{},{type:r},Tt,I0]}resolveNamedOptions(e,r,n,s=[""]){const i={$shared:!0},{resolver:a,subPrefixes:o}=X1(this._resolverCache,e,s);let l=a;if(PF(a,r)){i.$shared=!1,n=mi(n)?n():n;const c=this.createResolver(e,n,o);l=go(a,n,c)}for(const c of r)i[c]=l[c];return i}createResolver(e,r,n=[""],s){const{resolver:i}=X1(this._resolverCache,e,n);return qe(r)?go(i,r,void 0,s):i}}function X1(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));const s=r.join();let i=n.get(s);return i||(i={resolver:Cg(e,r),subPrefixes:r.filter(o=>!o.toLowerCase().includes("hover"))},n.set(s,i)),i}const DF=t=>qe(t)&&Object.getOwnPropertyNames(t).some(e=>mi(t[e]));function PF(t,e){const{isScriptable:r,isIndexable:n}=o2(t);for(const s of e){const i=r(s),a=n(s),o=(a||i)&&t[s];if(i&&(mi(o)||DF(o))||a&&Et(o))return!0}return!1}var IF="4.5.1";const MF=["top","bottom","left","right","chartArea"];function q1(t,e){return t==="top"||t==="bottom"||MF.indexOf(t)===-1&&e==="x"}function J1(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function Q1(t){const e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),gt(r&&r.onComplete,[t],e)}function FF(t){const e=t.chart,r=e.options.animation;gt(r&&r.onProgress,[t],e)}function j2(t){return jg()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Du={},Z1=t=>{const e=j2(t);return Object.values(Du).filter(r=>r.canvas===e).pop()};function LF(t,e,r){const n=Object.keys(t);for(const s of n){const i=+s;if(i>=e){const a=t[s];delete t[s],(r>0||i>e)&&(t[i+r]=a)}}}function BF(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}class Rt{static register(...e){is.add(...e),ev()}static unregister(...e){is.remove(...e),ev()}constructor(e,r){const n=this.config=new RF(r),s=j2(e),i=Z1(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||nF(s)),this.platform.updateConfig(n);const o=this.platform.acquireContext(s,a.aspectRatio),l=o&&o.canvas,c=l&&l.height,h=l&&l.width;if(this.id=UP(),this.ctx=o,this.canvas=l,this.width=h,this.height=c,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new wF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=nI(d=>this.update(d),a.resizeDelay||0),this._dataChanges=[],Du[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}fs.listen(this,"complete",Q1),fs.listen(this,"progress",FF),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:s,_aspectRatio:i}=this;return Ye(e)?r&&i?i:s?n/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return is}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_1(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return b1(this.canvas,this.ctx),this}stop(){return fs.stop(this),this}resize(e,r){fs.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){const n=this.options,s=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,e,r,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,_1(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),gt(n.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const r=this.options.scales||{};ot(r,(n,s)=>{n.id=s})}buildOrUpdateScales(){const e=this.options,r=e.scales,n=this.scales,s=Object.keys(n).reduce((a,o)=>(a[o]=!1,a),{});let i=[];r&&(i=i.concat(Object.keys(r).map(a=>{const o=r[a],l=B0(a,o),c=l==="r",h=l==="x";return{options:o,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),ot(i,a=>{const o=a.options,l=o.id,c=B0(l,o),h=Be(o.type,a.dtype);(o.position===void 0||q1(o.position,c)!==q1(a.dposition))&&(o.position=a.dposition),s[l]=!0;let d=null;if(l in n&&n[l].type===h)d=n[l];else{const f=is.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),n[d.id]=d}d.init(o,e)}),ot(s,(a,o)=>{a||delete n[o]}),ot(n,a=>{Sr.configure(this,a,a.options),Sr.addBox(this,a)})}_updateMetasets(){const e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((s,i)=>s.index-i.index),n>r){for(let s=r;s<n;++s)this._destroyDatasetMeta(s);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(J1("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,s)=>{r.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],r=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=r.length;n<s;n++){const i=r[n];let a=this.getDatasetMeta(n);const o=i.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=o,a.indexAxis=i.indexAxis||L0(o,this.options),a.order=i.order||0,a.index=n,a.label=""+i.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{const l=is.getController(o),{datasetElementType:c,dataElementType:h}=Tt.datasets[o];Object.assign(l,{dataElementType:is.getElement(h),datasetElementType:c&&is.getElement(c)}),a.controller=new l(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){ot(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const r=this.config;r.update();const n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:d}=this.getDatasetMeta(c),f=!s&&i.indexOf(d)===-1;d.buildOrUpdateElements(f),a=Math.max(+d.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),s||ot(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(J1("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){ot(this.scales,e=>{Sr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!u1(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:i}of r){const a=n==="_removeElements"?-i:i;LF(e,s,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const r=this.data.datasets.length,n=i=>new Set(e.filter(a=>a[0]===i).map((a,o)=>o+","+a.splice(1).join(","))),s=n(0);for(let i=1;i<r;i++)if(!u1(s,n(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Sr.update(this,this.width,this.height,e);const r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],ot(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,mi(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){const n=this.getDatasetMeta(e),s={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(fs.has(this)?this.attached&&!fs.running(this)&&fs.start(this):(this.draw(),Q1({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const r=this._sortedMetasets,n=[];let s,i;for(s=0,i=r.length;s<i;++s){const a=r[s];(!e||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const r=this.ctx,n={meta:e,index:e.index,cancelable:!0},s=v2(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(s&&ld(r,s),e.controller.draw(),s&&cd(r),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Ss(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,s){const i=MM.modes[r];return typeof i=="function"?i(this,e,n,s):[]}getDatasetMeta(e){const r=this.data.datasets[e],n=this._metasets;let s=n.filter(i=>i&&i._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=wi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const r=this.data.datasets[e];if(!r)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){const n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){const s=n?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,s);nc(r)?(i.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(i,{visible:n}),this.update(o=>o.datasetIndex===e?s:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){const r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),fs.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),b1(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete Du[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,r=this.platform,n=(i,a)=>{r.addEventListener(this,i,a),e[i]=a},s=(i,a,o)=>{i.offsetX=a,i.offsetY=o,this._eventHandler(i)};ot(this.options.events,i=>n(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,r=this.platform,n=(l,c)=>{r.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(r.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let a;const o=()=>{s("attach",o),this.attached=!0,this.resize(),n("resize",i),n("detach",a)};a=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),n("attach",o)},r.isAttached(this.canvas)?o():a()}unbindEvents(){ot(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},ot(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){const s=n?"set":"remove";let i,a,o,l;for(r==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){a=e[o];const c=a&&this.getDatasetMeta(a.datasetIndex).controller;c&&c[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const r=this._active||[],n=e.map(({datasetIndex:i,index:a})=>{const o=this.getDatasetMeta(i);if(!o)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:o.data[a],index:a}});!Th(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){const s=this.options.hover,i=(l,c)=>l.filter(h=>!c.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),a=i(r,e),o=n?e:i(e,r);a.length&&this.updateHoverStyle(a,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(e,r){const n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const i=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(i||n.changed)&&this.render(),this}_handleEvent(e,r,n){const{_active:s=[],options:i}=this,a=r,o=this._getActiveElements(e,s,n,a),l=GP(e),c=BF(e,this._lastEvent,n,l);n&&(this._lastEvent=null,gt(i.onHover,[e,o,this],this),l&&gt(i.onClick,[e,o,this],this));const h=!Th(o,s);return(h||r)&&(this._active=o,this._updateHoverStyles(o,s,r)),this._lastEvent=c,h}_getActiveElements(e,r,n,s){if(e.type==="mouseout")return[];if(!n)return r;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}}be(Rt,"defaults",Tt),be(Rt,"instances",Du),be(Rt,"overrides",sa),be(Rt,"registry",is),be(Rt,"version",IF),be(Rt,"getChart",Z1);function ev(){return ot(Rt.instances,t=>t._plugins.invalidate())}function UF(t,e,r){const{startAngle:n,x:s,y:i,outerRadius:a,innerRadius:o,options:l}=e,{borderWidth:c,borderJoinStyle:h}=l,d=Math.min(c/a,wr(n-r));if(t.beginPath(),t.arc(s,i,a-c/2,n+d/2,r-d/2),o>0){const f=Math.min(c/o,wr(n-r));t.arc(s,i,o+c/2,r-f/2,n+f/2,!0)}else{const f=Math.min(c/2,a*wr(n-r));if(h==="round")t.arc(s,i,f,r-tt/2,n+tt/2,!0);else if(h==="bevel"){const p=2*f*f,m=-p*Math.cos(r+tt/2)+s,g=-p*Math.sin(r+tt/2)+i,x=p*Math.cos(n+tt/2)+s,v=p*Math.sin(n+tt/2)+i;t.lineTo(m,g),t.lineTo(x,v)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function zF(t,e,r){const{startAngle:n,pixelMargin:s,x:i,y:a,outerRadius:o,innerRadius:l}=e;let c=s/o;t.beginPath(),t.arc(i,a,o,n-c,r+c),l>s?(c=s/l,t.arc(i,a,l,r+c,n-c,!0)):t.arc(i,a,s,r+Bt,n-Bt),t.closePath(),t.clip()}function $F(t){return Tg(t,["outerStart","outerEnd","innerStart","innerEnd"])}function WF(t,e,r,n){const s=$F(t.options.borderRadius),i=(r-e)/2,a=Math.min(i,n*e/2),o=l=>{const c=(r-Math.min(i,l))*n/2;return sr(l,0,Math.min(i,c))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:sr(s.innerStart,0,a),innerEnd:sr(s.innerEnd,0,a)}}function Ca(t,e,r,n){return{x:r+t*Math.cos(e),y:n+t*Math.sin(e)}}function Rh(t,e,r,n,s,i){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:h}=e,d=Math.max(e.outerRadius+n+r-c,0),f=h>0?h+n+r+c:0;let p=0;const m=s-l;if(n){const ae=h>0?h-n:0,Te=d>0?d-n:0,he=(ae+Te)/2,te=he!==0?m*he/(he+n):m;p=(m-te)/2}const g=Math.max(.001,m*d-r/tt)/d,x=(m-g)/2,v=l+x+p,b=s-x-p,{outerStart:y,outerEnd:w,innerStart:S,innerEnd:N}=WF(e,f,d,b-v),k=d-y,A=d-w,T=v+y/k,F=b-w/A,I=f+S,B=f+N,Z=v+S/I,ke=b-N/B;if(t.beginPath(),i){const ae=(T+F)/2;if(t.arc(a,o,d,T,ae),t.arc(a,o,d,ae,F),w>0){const re=Ca(A,F,a,o);t.arc(re.x,re.y,w,F,b+Bt)}const Te=Ca(B,b,a,o);if(t.lineTo(Te.x,Te.y),N>0){const re=Ca(B,ke,a,o);t.arc(re.x,re.y,N,b+Bt,ke+Math.PI)}const he=(b-N/f+(v+S/f))/2;if(t.arc(a,o,f,b-N/f,he,!0),t.arc(a,o,f,he,v+S/f,!0),S>0){const re=Ca(I,Z,a,o);t.arc(re.x,re.y,S,Z+Math.PI,v-Bt)}const te=Ca(k,v,a,o);if(t.lineTo(te.x,te.y),y>0){const re=Ca(k,T,a,o);t.arc(re.x,re.y,y,v-Bt,T)}}else{t.moveTo(a,o);const ae=Math.cos(T)*d+a,Te=Math.sin(T)*d+o;t.lineTo(ae,Te);const he=Math.cos(F)*d+a,te=Math.sin(F)*d+o;t.lineTo(he,te)}t.closePath()}function VF(t,e,r,n,s){const{fullCircles:i,startAngle:a,circumference:o}=e;let l=e.endAngle;if(i){Rh(t,e,r,n,l,s);for(let c=0;c<i;++c)t.fill();isNaN(o)||(l=a+(o%_t||_t))}return Rh(t,e,r,n,l,s),t.fill(),l}function HF(t,e,r,n,s){const{fullCircles:i,startAngle:a,circumference:o,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:d,borderDashOffset:f,borderRadius:p}=l,m=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=f,m?(t.lineWidth=c*2,t.lineJoin=h||"round"):(t.lineWidth=c,t.lineJoin=h||"bevel");let g=e.endAngle;if(i){Rh(t,e,r,n,g,s);for(let x=0;x<i;++x)t.stroke();isNaN(o)||(g=a+(o%_t||_t))}m&&zF(t,e,g),l.selfJoin&&g-a>=tt&&p===0&&h!=="miter"&&UF(t,e,g),i||(Rh(t,e,r,n,g,s),t.stroke())}class Qo extends Gn{constructor(r){super();be(this,"circumference");be(this,"endAngle");be(this,"fullCircles");be(this,"innerRadius");be(this,"outerRadius");be(this,"pixelMargin");be(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,r&&Object.assign(this,r)}inRange(r,n,s){const i=this.getProps(["x","y"],s),{angle:a,distance:o}=J_(i,{x:r,y:n}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:d,circumference:f}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),p=(this.options.spacing+this.options.borderWidth)/2,m=Be(f,c-l),g=sc(a,l,c)&&l!==c,x=m>=_t||g,v=ws(o,h+p,d+p);return x&&v}getCenterPoint(r){const{x:n,y:s,startAngle:i,endAngle:a,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],r),{offset:c,spacing:h}=this.options,d=(i+a)/2,f=(o+l+h+c)/2;return{x:n+Math.cos(d)*f,y:s+Math.sin(d)*f}}tooltipPosition(r){return this.getCenterPoint(r)}draw(r){const{options:n,circumference:s}=this,i=(n.offset||0)/4,a=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>_t?Math.floor(s/_t):0,s===0||this.innerRadius<0||this.outerRadius<0)return;r.save();const l=(this.startAngle+this.endAngle)/2;r.translate(Math.cos(l)*i,Math.sin(l)*i);const c=1-Math.sin(Math.min(tt,s||0)),h=i*c;r.fillStyle=n.backgroundColor,r.strokeStyle=n.borderColor,VF(r,this,h,a,o),HF(r,this,h,a,o),r.restore()}}be(Qo,"id","arc"),be(Qo,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),be(Qo,"defaultRoutes",{backgroundColor:"backgroundColor"}),be(Qo,"descriptors",{_scriptable:!0,_indexable:r=>r!=="borderDash"});function O2(t,e,r=e){t.lineCap=Be(r.borderCapStyle,e.borderCapStyle),t.setLineDash(Be(r.borderDash,e.borderDash)),t.lineDashOffset=Be(r.borderDashOffset,e.borderDashOffset),t.lineJoin=Be(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Be(r.borderWidth,e.borderWidth),t.strokeStyle=Be(r.borderColor,e.borderColor)}function GF(t,e,r){t.lineTo(r.x,r.y)}function KF(t){return t.stepped?gI:t.tension||t.cubicInterpolationMode==="monotone"?mI:GF}function R2(t,e,r={}){const n=t.length,{start:s=0,end:i=n-1}=r,{start:a,end:o}=e,l=Math.max(s,a),c=Math.min(i,o),h=s<a&&i<a||s>o&&i>o;return{count:n,start:l,loop:e.loop,ilen:c<l&&!h?n+c-l:c-l}}function YF(t,e,r,n){const{points:s,options:i}=e,{count:a,start:o,loop:l,ilen:c}=R2(s,r,n),h=KF(i);let{move:d=!0,reverse:f}=n||{},p,m,g;for(p=0;p<=c;++p)m=s[(o+(f?c-p:p))%a],!m.skip&&(d?(t.moveTo(m.x,m.y),d=!1):h(t,g,m,f,i.stepped),g=m);return l&&(m=s[(o+(f?c:0))%a],h(t,g,m,f,i.stepped)),!!l}function XF(t,e,r,n){const s=e.points,{count:i,start:a,ilen:o}=R2(s,r,n),{move:l=!0,reverse:c}=n||{};let h=0,d=0,f,p,m,g,x,v;const b=w=>(a+(c?o-w:w))%i,y=()=>{g!==x&&(t.lineTo(h,x),t.lineTo(h,g),t.lineTo(h,v))};for(l&&(p=s[b(0)],t.moveTo(p.x,p.y)),f=0;f<=o;++f){if(p=s[b(f)],p.skip)continue;const w=p.x,S=p.y,N=w|0;N===m?(S<g?g=S:S>x&&(x=S),h=(d*h+w)/++d):(y(),t.lineTo(w,S),m=N,d=0,g=x=S),v=S}y()}function U0(t){const e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?XF:YF}function qF(t){return t.stepped?YI:t.tension||t.cubicInterpolationMode==="monotone"?XI:Ii}function JF(t,e,r,n){let s=e._path;s||(s=e._path=new Path2D,e.path(s,r,n)&&s.closePath()),O2(t,e.options),t.stroke(s)}function QF(t,e,r,n){const{segments:s,options:i}=e,a=U0(e);for(const o of s)O2(t,i,o.style),t.beginPath(),a(t,e,o,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}const ZF=typeof Path2D=="function";function e6(t,e,r,n){ZF&&!e.options.segment?JF(t,e,r,n):QF(t,e,r,n)}class Zs extends Gn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;UI(this._points,n,e,s,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=tM(this,this.options.segment))}first(){const e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){const e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){const n=this.options,s=e[r],i=this.points,a=x2(this,{property:r,start:s,end:s});if(!a.length)return;const o=[],l=qF(n);let c,h;for(c=0,h=a.length;c<h;++c){const{start:d,end:f}=a[c],p=i[d],m=i[f];if(p===m){o.push(p);continue}const g=Math.abs((s-p[r])/(m[r]-p[r])),x=l(p,m,g,n.stepped);x[r]=e[r],o.push(x)}return o.length===1?o[0]:o}pathSegment(e,r,n){return U0(this)(e,this,r,n)}path(e,r,n){const s=this.segments,i=U0(this);let a=this._loop;r=r||0,n=n||this.points.length-r;for(const o of s)a&=i(e,this,o,{start:r,end:r+n-1});return!!a}draw(e,r,n,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),e6(e,this,n,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}be(Zs,"id","line"),be(Zs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),be(Zs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),be(Zs,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function tv(t,e,r,n){const s=t.options,{[r]:i}=t.getProps([r],n);return Math.abs(e-i)<s.radius+s.hitRadius}class Pu extends Gn{constructor(r){super();be(this,"parsed");be(this,"skip");be(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,n,s){const i=this.options,{x:a,y:o}=this.getProps(["x","y"],s);return Math.pow(r-a,2)+Math.pow(n-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(r,n){return tv(this,r,"x",n)}inYRange(r,n){return tv(this,r,"y",n)}getCenterPoint(r){const{x:n,y:s}=this.getProps(["x","y"],r);return{x:n,y:s}}size(r){r=r||this.options||{};let n=r.radius||0;n=Math.max(n,n&&r.hoverRadius||0);const s=n&&r.borderWidth||0;return(n+s)*2}draw(r,n){const s=this.options;this.skip||s.radius<.1||!Ss(this,n,this.size(s)/2)||(r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.fillStyle=s.backgroundColor,M0(r,s,this.x,this.y))}getRange(){const r=this.options||{};return r.radius+r.hitRadius}}be(Pu,"id","point"),be(Pu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),be(Pu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function D2(t,e){const{x:r,y:n,base:s,width:i,height:a}=t.getProps(["x","y","base","width","height"],e);let o,l,c,h,d;return t.horizontal?(d=a/2,o=Math.min(r,s),l=Math.max(r,s),c=n-d,h=n+d):(d=i/2,o=r-d,l=r+d,c=Math.min(n,s),h=Math.max(n,s)),{left:o,top:c,right:l,bottom:h}}function ei(t,e,r,n){return t?0:sr(e,r,n)}function t6(t,e,r){const n=t.options.borderWidth,s=t.borderSkipped,i=a2(n);return{t:ei(s.top,i.top,0,r),r:ei(s.right,i.right,0,e),b:ei(s.bottom,i.bottom,0,r),l:ei(s.left,i.left,0,e)}}function r6(t,e,r){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,i=Ki(s),a=Math.min(e,r),o=t.borderSkipped,l=n||qe(s);return{topLeft:ei(!l||o.top||o.left,i.topLeft,0,a),topRight:ei(!l||o.top||o.right,i.topRight,0,a),bottomLeft:ei(!l||o.bottom||o.left,i.bottomLeft,0,a),bottomRight:ei(!l||o.bottom||o.right,i.bottomRight,0,a)}}function n6(t){const e=D2(t),r=e.right-e.left,n=e.bottom-e.top,s=t6(t,r/2,n/2),i=r6(t,r/2,n/2);return{outer:{x:e.left,y:e.top,w:r,h:n,radius:i},inner:{x:e.left+s.l,y:e.top+s.t,w:r-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,i.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(s.b,s.r))}}}}function xf(t,e,r,n){const s=e===null,i=r===null,o=t&&!(s&&i)&&D2(t,n);return o&&(s||ws(e,o.left,o.right))&&(i||ws(r,o.top,o.bottom))}function s6(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function i6(t,e){t.rect(e.x,e.y,e.w,e.h)}function vf(t,e,r={}){const n=t.x!==r.x?-e:0,s=t.y!==r.y?-e:0,i=(t.x+t.w!==r.x+r.w?e:0)-n,a=(t.y+t.h!==r.y+r.h?e:0)-s;return{x:t.x+n,y:t.y+s,w:t.w+i,h:t.h+a,radius:t.radius}}class Iu extends Gn{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:r,options:{borderColor:n,backgroundColor:s}}=this,{inner:i,outer:a}=n6(this),o=s6(a.radius)?ic:i6;e.save(),(a.w!==i.w||a.h!==i.h)&&(e.beginPath(),o(e,vf(a,r,i)),e.clip(),o(e,vf(i,-r,a)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,vf(i,r)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,r,n){return xf(this,e,r,n)}inXRange(e,r){return xf(this,e,null,r)}inYRange(e,r){return xf(this,null,e,r)}getCenterPoint(e){const{x:r,y:n,base:s,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(r+s)/2:r,y:i?n:(n+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}be(Iu,"id","bar"),be(Iu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),be(Iu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var a6=Object.freeze({__proto__:null,ArcElement:Qo,BarElement:Iu,LineElement:Zs,PointElement:Pu});const z0=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],rv=z0.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function P2(t){return z0[t%z0.length]}function I2(t){return rv[t%rv.length]}function o6(t,e){return t.borderColor=P2(e),t.backgroundColor=I2(e),++e}function l6(t,e){return t.backgroundColor=t.data.map(()=>P2(e++)),e}function c6(t,e){return t.backgroundColor=t.data.map(()=>I2(e++)),e}function u6(t){let e=0;return(r,n)=>{const s=t.getDatasetMeta(n).controller;s instanceof Wi?e=l6(r,e):s instanceof kl?e=c6(r,e):s&&(e=o6(r,e))}}function nv(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function h6(t){return t&&(t.borderColor||t.backgroundColor)}function d6(){return Tt.borderColor!=="rgba(0,0,0,0.1)"||Tt.backgroundColor!=="rgba(0,0,0,0.1)"}var f6={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,r){if(!r.enabled)return;const{data:{datasets:n},options:s}=t.config,{elements:i}=s,a=nv(n)||h6(s)||i&&nv(i)||d6();if(!r.forceOverride&&a)return;const o=u6(t);n.forEach(o)}};function p6(t,e,r,n,s){const i=s.samples||n;if(i>=r)return t.slice(e,e+r);const a=[],o=(r-2)/(i-2);let l=0;const c=e+r-1;let h=e,d,f,p,m,g;for(a[l++]=t[h],d=0;d<i-2;d++){let x=0,v=0,b;const y=Math.floor((d+1)*o)+1+e,w=Math.min(Math.floor((d+2)*o)+1,r)+e,S=w-y;for(b=y;b<w;b++)x+=t[b].x,v+=t[b].y;x/=S,v/=S;const N=Math.floor(d*o)+1+e,k=Math.min(Math.floor((d+1)*o)+1,r)+e,{x:A,y:T}=t[h];for(p=m=-1,b=N;b<k;b++)m=.5*Math.abs((A-x)*(t[b].y-T)-(A-t[b].x)*(v-T)),m>p&&(p=m,f=t[b],g=b);a[l++]=f,h=g}return a[l++]=t[c],a}function g6(t,e,r,n){let s=0,i=0,a,o,l,c,h,d,f,p,m,g;const x=[],v=e+r-1,b=t[e].x,w=t[v].x-b;for(a=e;a<e+r;++a){o=t[a],l=(o.x-b)/w*n,c=o.y;const S=l|0;if(S===h)c<m?(m=c,d=a):c>g&&(g=c,f=a),s=(i*s+o.x)/++i;else{const N=a-1;if(!Ye(d)&&!Ye(f)){const k=Math.min(d,f),A=Math.max(d,f);k!==p&&k!==N&&x.push({...t[k],x:s}),A!==p&&A!==N&&x.push({...t[A],x:s})}a>0&&N!==p&&x.push(t[N]),x.push(o),h=S,i=0,m=g=c,d=f=p=a}}return x}function M2(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function sv(t){t.data.datasets.forEach(e=>{M2(e)})}function m6(t,e){const r=e.length;let n=0,s;const{iScale:i}=t,{min:a,max:o,minDefined:l,maxDefined:c}=i.getUserBounds();return l&&(n=sr(_s(e,i.axis,a).lo,0,r-1)),c?s=sr(_s(e,i.axis,o).hi+1,n,r)-n:s=r-n,{start:n,count:s}}var x6={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,r)=>{if(!r.enabled){sv(t);return}const n=t.width;t.data.datasets.forEach((s,i)=>{const{_data:a,indexAxis:o}=s,l=t.getDatasetMeta(i),c=a||s.data;if(qo([o,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=t.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||t.options.parsing)return;let{start:d,count:f}=m6(l,c);const p=r.threshold||4*n;if(f<=p){M2(s);return}Ye(a)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let m;switch(r.algorithm){case"lttb":m=p6(c,d,f,n,r);break;case"min-max":m=g6(c,d,f,n);break;default:throw new Error(`Unsupported decimation algorithm '${r.algorithm}'`)}s._decimated=m})},destroy(t){sv(t)}};function v6(t,e,r){const n=t.segments,s=t.points,i=e.points,a=[];for(const o of n){let{start:l,end:c}=o;c=dd(l,c,s);const h=$0(r,s[l],s[c],o.loop);if(!e.segments){a.push({source:o,target:h,start:s[l],end:s[c]});continue}const d=x2(e,h);for(const f of d){const p=$0(r,i[f.start],i[f.end],f.loop),m=m2(o,s,p);for(const g of m)a.push({source:g,target:f,start:{[r]:iv(h,p,"start",Math.max)},end:{[r]:iv(h,p,"end",Math.min)}})}}return a}function $0(t,e,r,n){if(n)return;let s=e[t],i=r[t];return t==="angle"&&(s=wr(s),i=wr(i)),{property:t,start:s,end:i}}function b6(t,e){const{x:r=null,y:n=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:a,end:o})=>{o=dd(a,o,s);const l=s[a],c=s[o];n!==null?(i.push({x:l.x,y:n}),i.push({x:c.x,y:n})):r!==null&&(i.push({x:r,y:l.y}),i.push({x:r,y:c.y}))}),i}function dd(t,e,r){for(;e>t;e--){const n=r[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function iv(t,e,r,n){return t&&e?n(t[r],e[r]):t?t[r]:e?e[r]:0}function F2(t,e){let r=[],n=!1;return Et(t)?(n=!0,r=t):r=b6(t,e),r.length?new Zs({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function av(t){return t&&t.fill!==!1}function y6(t,e,r){let s=t[e].fill;const i=[e];let a;if(!r)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!Mt(s))return s;if(a=t[s],!a)return!1;if(a.visible)return s;i.push(s),s=a.fill}return!1}function w6(t,e,r){const n=E6(t);if(qe(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return Mt(s)&&Math.floor(s)===s?_6(n[0],e,s,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function _6(t,e,r,n){return(t==="-"||t==="+")&&(r=e+r),r===e||r<0||r>=n?!1:r}function S6(t,e){let r=null;return t==="start"?r=e.bottom:t==="end"?r=e.top:qe(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}function k6(t,e,r){let n;return t==="start"?n=r:t==="end"?n=e.options.reverse?e.min:e.max:qe(t)?n=t.value:n=e.getBaseValue(),n}function E6(t){const e=t.options,r=e.fill;let n=Be(r&&r.target,r);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function T6(t){const{scale:e,index:r,line:n}=t,s=[],i=n.segments,a=n.points,o=C6(e,r);o.push(F2({x:null,y:e.bottom},n));for(let l=0;l<i.length;l++){const c=i[l];for(let h=c.start;h<=c.end;h++)A6(s,a[h],o)}return new Zs({points:s,options:{}})}function C6(t,e){const r=[],n=t.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){const i=n[s];if(i.index===e)break;i.hidden||r.unshift(i.dataset)}return r}function A6(t,e,r){const n=[];for(let s=0;s<r.length;s++){const i=r[s],{first:a,last:o,point:l}=N6(i,e,"x");if(!(!l||a&&o)){if(a)n.unshift(l);else if(t.push(l),!o)break}}t.push(...n)}function N6(t,e,r){const n=t.interpolate(e,r);if(!n)return{};const s=n[r],i=t.segments,a=t.points;let o=!1,l=!1;for(let c=0;c<i.length;c++){const h=i[c],d=a[h.start][r],f=a[h.end][r];if(ws(s,d,f)){o=s===d,l=s===f;break}}return{first:o,last:l,point:n}}class L2{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,r,n){const{x:s,y:i,radius:a}=this;return r=r||{start:0,end:_t},e.arc(s,i,a,r.end,r.start,!0),!n.bounds}interpolate(e){const{x:r,y:n,radius:s}=this,i=e.angle;return{x:r+Math.cos(i)*s,y:n+Math.sin(i)*s,angle:i}}}function j6(t){const{chart:e,fill:r,line:n}=t;if(Mt(r))return O6(e,r);if(r==="stack")return T6(t);if(r==="shape")return!0;const s=R6(t);return s instanceof L2?s:F2(s,n)}function O6(t,e){const r=t.getDatasetMeta(e);return r&&t.isDatasetVisible(e)?r.dataset:null}function R6(t){return(t.scale||{}).getPointPositionForValue?P6(t):D6(t)}function D6(t){const{scale:e={},fill:r}=t,n=S6(r,e);if(Mt(n)){const s=e.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function P6(t){const{scale:e,fill:r}=t,n=e.options,s=e.getLabels().length,i=n.reverse?e.max:e.min,a=k6(r,e,i),o=[];if(n.grid.circular){const l=e.getPointPositionForValue(0,i);return new L2({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(a)})}for(let l=0;l<s;++l)o.push(e.getPointPositionForValue(l,a));return o}function bf(t,e,r){const n=j6(e),{chart:s,index:i,line:a,scale:o,axis:l}=e,c=a.options,h=c.fill,d=c.backgroundColor,{above:f=d,below:p=d}=h||{},m=s.getDatasetMeta(i),g=v2(s,m);n&&a.points.length&&(ld(t,r),I6(t,{line:a,target:n,above:f,below:p,area:r,scale:o,axis:l,clip:g}),cd(t))}function I6(t,e){const{line:r,target:n,above:s,below:i,area:a,scale:o,clip:l}=e,c=r._loop?"angle":e.axis;t.save();let h=i;i!==s&&(c==="x"?(ov(t,n,a.top),yf(t,{line:r,target:n,color:s,scale:o,property:c,clip:l}),t.restore(),t.save(),ov(t,n,a.bottom)):c==="y"&&(lv(t,n,a.left),yf(t,{line:r,target:n,color:i,scale:o,property:c,clip:l}),t.restore(),t.save(),lv(t,n,a.right),h=s)),yf(t,{line:r,target:n,color:h,scale:o,property:c,clip:l}),t.restore()}function ov(t,e,r){const{segments:n,points:s}=e;let i=!0,a=!1;t.beginPath();for(const o of n){const{start:l,end:c}=o,h=s[l],d=s[dd(l,c,s)];i?(t.moveTo(h.x,h.y),i=!1):(t.lineTo(h.x,r),t.lineTo(h.x,h.y)),a=!!e.pathSegment(t,o,{move:a}),a?t.closePath():t.lineTo(d.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function lv(t,e,r){const{segments:n,points:s}=e;let i=!0,a=!1;t.beginPath();for(const o of n){const{start:l,end:c}=o,h=s[l],d=s[dd(l,c,s)];i?(t.moveTo(h.x,h.y),i=!1):(t.lineTo(r,h.y),t.lineTo(h.x,h.y)),a=!!e.pathSegment(t,o,{move:a}),a?t.closePath():t.lineTo(r,d.y)}t.lineTo(r,e.first().y),t.closePath(),t.clip()}function yf(t,e){const{line:r,target:n,property:s,color:i,scale:a,clip:o}=e,l=v6(r,n,s);for(const{source:c,target:h,start:d,end:f}of l){const{style:{backgroundColor:p=i}={}}=c,m=n!==!0;t.save(),t.fillStyle=p,M6(t,a,o,m&&$0(s,d,f)),t.beginPath();const g=!!r.pathSegment(t,c);let x;if(m){g?t.closePath():cv(t,n,f,s);const v=!!n.pathSegment(t,h,{move:g,reverse:!0});x=g&&v,x||cv(t,n,d,s)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function M6(t,e,r,n){const s=e.chart.chartArea,{property:i,start:a,end:o}=n||{};if(i==="x"||i==="y"){let l,c,h,d;i==="x"?(l=a,c=s.top,h=o,d=s.bottom):(l=s.left,c=a,h=s.right,d=o),t.beginPath(),r&&(l=Math.max(l,r.left),h=Math.min(h,r.right),c=Math.max(c,r.top),d=Math.min(d,r.bottom)),t.rect(l,c,h-l,d-c),t.clip()}}function cv(t,e,r,n){const s=e.interpolate(r,n);s&&t.lineTo(s.x,s.y)}var F6={id:"filler",afterDatasetsUpdate(t,e,r){const n=(t.data.datasets||[]).length,s=[];let i,a,o,l;for(a=0;a<n;++a)i=t.getDatasetMeta(a),o=i.dataset,l=null,o&&o.options&&o instanceof Zs&&(l={visible:t.isDatasetVisible(a),index:a,fill:w6(o,a,n),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:o}),i.$filler=l,s.push(l);for(a=0;a<n;++a)l=s[a],!(!l||l.fill===!1)&&(l.fill=y6(s,a,r.propagate))},beforeDraw(t,e,r){const n=r.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let a=s.length-1;a>=0;--a){const o=s[a].$filler;o&&(o.line.updateControlPoints(i,o.axis),n&&o.fill&&bf(t.ctx,o,i))}},beforeDatasetsDraw(t,e,r){if(r.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){const i=n[s].$filler;av(i)&&bf(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,r){const n=e.meta.$filler;!av(n)||r.drawTime!=="beforeDatasetDraw"||bf(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const uv=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},L6=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class hv extends Gn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let r=gt(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,s)=>e.sort(n,s,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){const{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,s=Qt(n.font),i=s.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=uv(n,i);let c,h;r.font=s.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(a,i,o,l)+10):(h=this.maxHeight,c=this._fitCols(a,s,o,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,s){const{ctx:i,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=s+o;let d=e;i.textAlign="left",i.textBaseline="middle";let f=-1,p=-h;return this.legendItems.forEach((m,g)=>{const x=n+r/2+i.measureText(m.text).width;(g===0||c[c.length-1]+x+2*o>a)&&(d+=h,c[c.length-(g>0?0:1)]=0,p+=h,f++),l[g]={left:0,top:p,row:f,width:x,height:s},c[c.length-1]+=x+o}),d}_fitCols(e,r,n,s){const{ctx:i,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=a-e;let d=o,f=0,p=0,m=0,g=0;return this.legendItems.forEach((x,v)=>{const{itemWidth:b,itemHeight:y}=B6(n,r,i,x,s);v>0&&p+y+2*o>h&&(d+=f+o,c.push({width:f,height:p}),m+=f+o,g++,f=p=0),l[v]={left:m,top:p,col:g,width:b,height:y},f=Math.max(f,b),p+=y+o}),d+=f,c.push({width:f,height:p}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:s},rtl:i}}=this,a=no(i,this.left,this.width);if(this.isHorizontal()){let o=0,l=yr(n,this.left+s,this.right-this.lineWidths[o]);for(const c of r)o!==c.row&&(o=c.row,l=yr(n,this.left+s,this.right-this.lineWidths[o])),c.top+=this.top+e+s,c.left=a.leftForLtr(a.x(l),c.width),l+=c.width+s}else{let o=0,l=yr(n,this.top+e+s,this.bottom-this.columnSizes[o].height);for(const c of r)c.col!==o&&(o=c.col,l=yr(n,this.top+e+s,this.bottom-this.columnSizes[o].height)),c.top=l,c.left+=this.left+s,c.left=a.leftForLtr(a.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ld(e,this),this._draw(),cd(e)}}_draw(){const{options:e,columnSizes:r,lineWidths:n,ctx:s}=this,{align:i,labels:a}=e,o=Tt.color,l=no(e.rtl,this.left,this.width),c=Qt(a.font),{padding:h}=a,d=c.size,f=d/2;let p;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:m,boxHeight:g,itemHeight:x}=uv(a,d),v=function(N,k,A){if(isNaN(m)||m<=0||isNaN(g)||g<0)return;s.save();const T=Be(A.lineWidth,1);if(s.fillStyle=Be(A.fillStyle,o),s.lineCap=Be(A.lineCap,"butt"),s.lineDashOffset=Be(A.lineDashOffset,0),s.lineJoin=Be(A.lineJoin,"miter"),s.lineWidth=T,s.strokeStyle=Be(A.strokeStyle,o),s.setLineDash(Be(A.lineDash,[])),a.usePointStyle){const F={radius:g*Math.SQRT2/2,pointStyle:A.pointStyle,rotation:A.rotation,borderWidth:T},I=l.xPlus(N,m/2),B=k+f;i2(s,F,I,B,a.pointStyleWidth&&m)}else{const F=k+Math.max((d-g)/2,0),I=l.leftForLtr(N,m),B=Ki(A.borderRadius);s.beginPath(),Object.values(B).some(Z=>Z!==0)?ic(s,{x:I,y:F,w:m,h:g,radius:B}):s.rect(I,F,m,g),s.fill(),T!==0&&s.stroke()}s.restore()},b=function(N,k,A){ia(s,A.text,N,k+x/2,c,{strikethrough:A.hidden,textAlign:l.textAlign(A.textAlign)})},y=this.isHorizontal(),w=this._computeTitleHeight();y?p={x:yr(i,this.left+h,this.right-n[0]),y:this.top+h+w,line:0}:p={x:this.left+h,y:yr(i,this.top+w+h,this.bottom-r[0].height),line:0},f2(this.ctx,e.textDirection);const S=x+h;this.legendItems.forEach((N,k)=>{s.strokeStyle=N.fontColor,s.fillStyle=N.fontColor;const A=s.measureText(N.text).width,T=l.textAlign(N.textAlign||(N.textAlign=a.textAlign)),F=m+f+A;let I=p.x,B=p.y;l.setWidth(this.width),y?k>0&&I+F+h>this.right&&(B=p.y+=S,p.line++,I=p.x=yr(i,this.left+h,this.right-n[p.line])):k>0&&B+S>this.bottom&&(I=p.x=I+r[p.line].width+h,p.line++,B=p.y=yr(i,this.top+w+h,this.bottom-r[p.line].height));const Z=l.x(I);if(v(Z,B,N),I=sI(T,I+m+f,y?I+F:this.right,e.rtl),b(l.x(I),B,N),y)p.x+=F+h;else if(typeof N.text!="string"){const ke=c.lineHeight;p.y+=B2(N,ke)+h}else p.y+=S}),p2(this.ctx,e.textDirection)}drawTitle(){const e=this.options,r=e.title,n=Qt(r.font),s=Cr(r.padding);if(!r.display)return;const i=no(e.rtl,this.left,this.width),a=this.ctx,o=r.position,l=n.size/2,c=s.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+c,d=yr(e.align,d,this.right-f);else{const m=this.columnSizes.reduce((g,x)=>Math.max(g,x.height),0);h=c+yr(e.align,this.top,this.bottom-m-e.labels.padding-this._computeTitleHeight())}const p=yr(o,d,d+f);a.textAlign=i.textAlign(kg(o)),a.textBaseline="middle",a.strokeStyle=r.color,a.fillStyle=r.color,a.font=n.string,ia(a,r.text,p,h,n)}_computeTitleHeight(){const e=this.options.title,r=Qt(e.font),n=Cr(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,s,i;if(ws(e,this.left,this.right)&&ws(r,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(s=i[n],ws(e,s.left,s.left+s.width)&&ws(r,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(e){const r=this.options;if(!$6(e.type,r))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=L6(s,n);s&&!i&&gt(r.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!i&&gt(r.onHover,[e,n,this],this)}else n&&gt(r.onClick,[e,n,this],this)}}function B6(t,e,r,n,s){const i=U6(n,t,e,r),a=z6(s,n,e.lineHeight);return{itemWidth:i,itemHeight:a}}function U6(t,e,r,n){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,a)=>i.length>a.length?i:a)),e+r.size/2+n.measureText(s).width}function z6(t,e,r){let n=t;return typeof e.text!="string"&&(n=B2(e,r)),n}function B2(t,e){const r=t.text?t.text.length:0;return e*r}function $6(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var W6={id:"legend",_element:hv,start(t,e,r){const n=t.legend=new hv({ctx:t.ctx,options:r,chart:t});Sr.configure(t,n,r),Sr.addBox(t,n)},stop(t){Sr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){const n=t.legend;Sr.configure(t,n,r),n.options=r},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){const n=e.datasetIndex,s=r.chart;s.isDatasetVisible(n)?(s.hide(n),e.hidden=!0):(s.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:s,color:i,useBorderRadius:a,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(r?0:void 0),h=Cr(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:a&&(o||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Dg extends Gn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;const s=Et(n.text)?n.text.length:1;this._padding=Cr(n.padding);const i=s*Qt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:r,left:n,bottom:s,right:i,options:a}=this,o=a.align;let l=0,c,h,d;return this.isHorizontal()?(h=yr(o,n,i),d=r+e,c=i-n):(a.position==="left"?(h=n+e,d=yr(o,s,r),l=tt*-.5):(h=i-e,d=yr(o,r,s),l=tt*.5),c=s-r),{titleX:h,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,r=this.options;if(!r.display)return;const n=Qt(r.font),i=n.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:l,rotation:c}=this._drawArgs(i);ia(e,r.text,0,0,n,{color:r.color,maxWidth:l,rotation:c,textAlign:kg(r.align),textBaseline:"middle",translation:[a,o]})}}function V6(t,e){const r=new Dg({ctx:t.ctx,options:e,chart:t});Sr.configure(t,r,e),Sr.addBox(t,r),t.titleBlock=r}var H6={id:"title",_element:Dg,start(t,e,r){V6(t,r)},stop(t){const e=t.titleBlock;Sr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){const n=t.titleBlock;Sr.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const cu=new WeakMap;var G6={id:"subtitle",start(t,e,r){const n=new Dg({ctx:t.ctx,options:r,chart:t});Sr.configure(t,n,r),Sr.addBox(t,n),cu.set(t,n)},stop(t){Sr.removeBox(t,cu.get(t)),cu.delete(t)},beforeUpdate(t,e,r){const n=cu.get(t);Sr.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Zo={average(t){if(!t.length)return!1;let e,r,n=new Set,s=0,i=0;for(e=0,r=t.length;e<r;++e){const o=t[e].element;if(o&&o.hasValue()){const l=o.tooltipPosition();n.add(l.x),s+=l.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((o,l)=>o+l)/n.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,s=Number.POSITIVE_INFINITY,i,a,o;for(i=0,a=t.length;i<a;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=P0(e,c);h<s&&(s=h,o=l)}}if(o){const l=o.tooltipPosition();r=l.x,n=l.y}return{x:r,y:n}}};function ns(t,e){return e&&(Et(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ps(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function K6(t,e){const{element:r,datasetIndex:n,index:s}=e,i=t.getDatasetMeta(n).controller,{label:a,value:o}=i.getLabelAndValue(s);return{chart:t,label:a,parsed:i.getParsed(s),raw:t.data.datasets[n].data[s],formattedValue:o,dataset:i.getDataset(),dataIndex:s,datasetIndex:n,element:r}}function dv(t,e){const r=t.chart.ctx,{body:n,footer:s,title:i}=t,{boxWidth:a,boxHeight:o}=e,l=Qt(e.bodyFont),c=Qt(e.titleFont),h=Qt(e.footerFont),d=i.length,f=s.length,p=n.length,m=Cr(e.padding);let g=m.height,x=0,v=n.reduce((w,S)=>w+S.before.length+S.lines.length+S.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),v){const w=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;g+=p*w+(v-p)*l.lineHeight+(v-1)*e.bodySpacing}f&&(g+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let b=0;const y=function(w){x=Math.max(x,r.measureText(w).width+b)};return r.save(),r.font=c.string,ot(t.title,y),r.font=l.string,ot(t.beforeBody.concat(t.afterBody),y),b=e.displayColors?a+2+e.boxPadding:0,ot(n,w=>{ot(w.before,y),ot(w.lines,y),ot(w.after,y)}),b=0,r.font=h.string,ot(t.footer,y),r.restore(),x+=m.width,{width:x,height:g}}function Y6(t,e){const{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function X6(t,e,r,n){const{x:s,width:i}=n,a=r.caretSize+r.caretPadding;if(t==="left"&&s+i+a>e.width||t==="right"&&s-i-a<0)return!0}function q6(t,e,r,n){const{x:s,width:i}=r,{width:a,chartArea:{left:o,right:l}}=t;let c="center";return n==="center"?c=s<=(o+l)/2?"left":"right":s<=i/2?c="left":s>=a-i/2&&(c="right"),X6(c,t,e,r)&&(c="center"),c}function fv(t,e,r){const n=r.yAlign||e.yAlign||Y6(t,r);return{xAlign:r.xAlign||e.xAlign||q6(t,e,r,n),yAlign:n}}function J6(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function Q6(t,e,r){let{y:n,height:s}=t;return e==="top"?n+=r:e==="bottom"?n-=s+r:n-=s/2,n}function pv(t,e,r,n){const{caretSize:s,caretPadding:i,cornerRadius:a}=t,{xAlign:o,yAlign:l}=r,c=s+i,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:p}=Ki(a);let m=J6(e,o);const g=Q6(e,l,c);return l==="center"?o==="left"?m+=c:o==="right"&&(m-=c):o==="left"?m-=Math.max(h,f)+s:o==="right"&&(m+=Math.max(d,p)+s),{x:sr(m,0,n.width-e.width),y:sr(g,0,n.height-e.height)}}function uu(t,e,r){const n=Cr(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function gv(t){return ns([],ps(t))}function Z6(t,e,r){return wi(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function mv(t,e){const r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}const U2={beforeTitle:ds,title(t){if(t.length>0){const e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:ds,beforeBody:ds,beforeLabel:ds,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const r=t.formattedValue;return Ye(r)||(e+=r),e},labelColor(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:ds,afterBody:ds,beforeFooter:ds,footer:ds,afterFooter:ds};function Lr(t,e,r,n){const s=t[e].call(r,n);return typeof s>"u"?U2[e].call(r,n):s}class W0 extends Gn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const r=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&r.options.animation&&n.animations,i=new b2(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Z6(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){const{callbacks:n}=r,s=Lr(n,"beforeTitle",this,e),i=Lr(n,"title",this,e),a=Lr(n,"afterTitle",this,e);let o=[];return o=ns(o,ps(s)),o=ns(o,ps(i)),o=ns(o,ps(a)),o}getBeforeBody(e,r){return gv(Lr(r.callbacks,"beforeBody",this,e))}getBody(e,r){const{callbacks:n}=r,s=[];return ot(e,i=>{const a={before:[],lines:[],after:[]},o=mv(n,i);ns(a.before,ps(Lr(o,"beforeLabel",this,i))),ns(a.lines,Lr(o,"label",this,i)),ns(a.after,ps(Lr(o,"afterLabel",this,i))),s.push(a)}),s}getAfterBody(e,r){return gv(Lr(r.callbacks,"afterBody",this,e))}getFooter(e,r){const{callbacks:n}=r,s=Lr(n,"beforeFooter",this,e),i=Lr(n,"footer",this,e),a=Lr(n,"afterFooter",this,e);let o=[];return o=ns(o,ps(s)),o=ns(o,ps(i)),o=ns(o,ps(a)),o}_createItems(e){const r=this._active,n=this.chart.data,s=[],i=[],a=[];let o=[],l,c;for(l=0,c=r.length;l<c;++l)o.push(K6(this.chart,r[l]));return e.filter&&(o=o.filter((h,d,f)=>e.filter(h,d,f,n))),e.itemSort&&(o=o.sort((h,d)=>e.itemSort(h,d,n))),ot(o,h=>{const d=mv(e.callbacks,h);s.push(Lr(d,"labelColor",this,h)),i.push(Lr(d,"labelPointStyle",this,h)),a.push(Lr(d,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=o,o}update(e,r){const n=this.options.setContext(this.getContext()),s=this._active;let i,a=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const o=Zo[n.position].call(this,s,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const l=this._size=dv(this,n),c=Object.assign({},o,l),h=fv(this.chart,n,c),d=pv(n,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,i={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,s){const i=this.getCaretPosition(e,n,s);r.lineTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.lineTo(i.x3,i.y3)}getCaretPosition(e,r,n){const{xAlign:s,yAlign:i}=this,{caretSize:a,cornerRadius:o}=n,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:d}=Ki(o),{x:f,y:p}=e,{width:m,height:g}=r;let x,v,b,y,w,S;return i==="center"?(w=p+g/2,s==="left"?(x=f,v=x-a,y=w+a,S=w-a):(x=f+m,v=x+a,y=w-a,S=w+a),b=x):(s==="left"?v=f+Math.max(l,h)+a:s==="right"?v=f+m-Math.max(c,d)-a:v=this.caretX,i==="top"?(y=p,w=y-a,x=v-a,b=v+a):(y=p+g,w=y+a,x=v+a,b=v-a),S=y),{x1:x,x2:v,x3:b,y1:y,y2:w,y3:S}}drawTitle(e,r,n){const s=this.title,i=s.length;let a,o,l;if(i){const c=no(n.rtl,this.x,this.width);for(e.x=uu(this,n.titleAlign,n),r.textAlign=c.textAlign(n.titleAlign),r.textBaseline="middle",a=Qt(n.titleFont),o=n.titleSpacing,r.fillStyle=n.titleColor,r.font=a.string,l=0;l<i;++l)r.fillText(s[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,l+1===i&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,r,n,s,i){const a=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=i,h=Qt(i.bodyFont),d=uu(this,"left",i),f=s.x(d),p=l<h.lineHeight?(h.lineHeight-l)/2:0,m=r.y+p;if(i.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},x=s.leftForLtr(f,c)+c/2,v=m+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,M0(e,g,x,v),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,M0(e,g,x,v)}else{e.lineWidth=qe(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const g=s.leftForLtr(f,c),x=s.leftForLtr(s.xPlus(f,1),c-2),v=Ki(a.borderRadius);Object.values(v).some(b=>b!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,ic(e,{x:g,y:m,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),ic(e,{x,y:m+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(g,m,c,l),e.strokeRect(g,m,c,l),e.fillStyle=a.backgroundColor,e.fillRect(x,m+1,c-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){const{body:s}=this,{bodySpacing:i,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:c,boxPadding:h}=n,d=Qt(n.bodyFont);let f=d.lineHeight,p=0;const m=no(n.rtl,this.x,this.width),g=function(A){r.fillText(A,m.x(e.x+p),e.y+f/2),e.y+=f+i},x=m.textAlign(a);let v,b,y,w,S,N,k;for(r.textAlign=a,r.textBaseline="middle",r.font=d.string,e.x=uu(this,x,n),r.fillStyle=n.bodyColor,ot(this.beforeBody,g),p=o&&x!=="right"?a==="center"?c/2+h:c+2+h:0,w=0,N=s.length;w<N;++w){for(v=s[w],b=this.labelTextColors[w],r.fillStyle=b,ot(v.before,g),y=v.lines,o&&y.length&&(this._drawColorBox(r,e,w,m,n),f=Math.max(d.lineHeight,l)),S=0,k=y.length;S<k;++S)g(y[S]),f=d.lineHeight;ot(v.after,g)}p=0,f=d.lineHeight,ot(this.afterBody,g),e.y-=i}drawFooter(e,r,n){const s=this.footer,i=s.length;let a,o;if(i){const l=no(n.rtl,this.x,this.width);for(e.x=uu(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=l.textAlign(n.footerAlign),r.textBaseline="middle",a=Qt(n.footerFont),r.fillStyle=n.footerColor,r.font=a.string,o=0;o<i;++o)r.fillText(s[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,r,n,s){const{xAlign:i,yAlign:a}=this,{x:o,y:l}=e,{width:c,height:h}=n,{topLeft:d,topRight:f,bottomLeft:p,bottomRight:m}=Ki(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(o+d,l),a==="top"&&this.drawCaret(e,r,n,s),r.lineTo(o+c-f,l),r.quadraticCurveTo(o+c,l,o+c,l+f),a==="center"&&i==="right"&&this.drawCaret(e,r,n,s),r.lineTo(o+c,l+h-m),r.quadraticCurveTo(o+c,l+h,o+c-m,l+h),a==="bottom"&&this.drawCaret(e,r,n,s),r.lineTo(o+p,l+h),r.quadraticCurveTo(o,l+h,o,l+h-p),a==="center"&&i==="left"&&this.drawCaret(e,r,n,s),r.lineTo(o,l+d),r.quadraticCurveTo(o,l,o+d,l),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){const r=this.chart,n=this.$animations,s=n&&n.x,i=n&&n.y;if(s||i){const a=Zo[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=dv(this,e),l=Object.assign({},a,this._size),c=fv(r,e,l),h=pv(e,l,c,r);(s._to!==h.x||i._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const r=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(r);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=Cr(r.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,s,r),f2(e,r.textDirection),i.y+=a.top,this.drawTitle(i,e,r),this.drawBody(i,e,r),this.drawFooter(i,e,r),p2(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){const n=this._active,s=e.map(({datasetIndex:o,index:l})=>{const c=this.chart.getDatasetMeta(o);if(!c)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:c.data[l],index:l}}),i=!Th(n,s),a=this._positionChanged(s,r);(i||a)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],a=this._getActiveElements(e,i,r,n),o=this._positionChanged(a,e),l=r||!Th(a,i)||o;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),l}_getActiveElements(e,r,n,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return r.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&a.reverse(),a}_positionChanged(e,r){const{caretX:n,caretY:s,options:i}=this,a=Zo[i.position].call(this,e,r);return a!==!1&&(n!==a.x||s!==a.y)}}be(W0,"positioners",Zo);var e8={id:"tooltip",_element:W0,positioners:Zo,afterInit(t,e,r){r&&(t.tooltip=new W0({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){const r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:U2},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},t8=Object.freeze({__proto__:null,Colors:f6,Decimation:x6,Filler:F6,Legend:W6,SubTitle:G6,Title:H6,Tooltip:e8});const r8=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function n8(t,e,r,n){const s=t.indexOf(e);if(s===-1)return r8(t,e,r,n);const i=t.lastIndexOf(e);return s!==i?r:s}const s8=(t,e)=>t===null?null:sr(Math.round(t),0,e);function xv(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class V0 extends fa{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const r=this._addedLabels;if(r.length){const n=this.getLabels();for(const{index:s,label:i}of r)n[s]===i&&n.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(Ye(e))return null;const n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:n8(n,e,Be(r,e),this._addedLabels),s8(r,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const e=this.min,r=this.max,n=this.options.offset,s=[];let i=this.getLabels();i=e===0&&r===i.length-1?i:i.slice(e,r+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=r;a++)s.push({value:a});return s}getLabelForValue(e){return xv.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}be(V0,"id","category"),be(V0,"defaults",{ticks:{callback:xv}});function i8(t,e){const r=[],{bounds:s,step:i,min:a,max:o,precision:l,count:c,maxTicks:h,maxDigits:d,includeBounds:f}=t,p=i||1,m=h-1,{min:g,max:x}=e,v=!Ye(a),b=!Ye(o),y=!Ye(c),w=(x-g)/(d+1);let S=d1((x-g)/m/p)*p,N,k,A,T;if(S<1e-14&&!v&&!b)return[{value:g},{value:x}];T=Math.ceil(x/S)-Math.floor(g/S),T>m&&(S=d1(T*S/m/p)*p),Ye(l)||(N=Math.pow(10,l),S=Math.ceil(S*N)/N),s==="ticks"?(k=Math.floor(g/S)*S,A=Math.ceil(x/S)*S):(k=g,A=x),v&&b&&i&&JP((o-a)/i,S/1e3)?(T=Math.round(Math.min((o-a)/S,h)),S=(o-a)/T,k=a,A=o):y?(k=v?a:k,A=b?o:A,T=c-1,S=(A-k)/T):(T=(A-k)/S,wl(T,Math.round(T),S/1e3)?T=Math.round(T):T=Math.ceil(T));const F=Math.max(f1(S),f1(k));N=Math.pow(10,Ye(l)?F:l),k=Math.round(k*N)/N,A=Math.round(A*N)/N;let I=0;for(v&&(f&&k!==a?(r.push({value:a}),k<a&&I++,wl(Math.round((k+I*S)*N)/N,a,vv(a,w,t))&&I++):k<a&&I++);I<T;++I){const B=Math.round((k+I*S)*N)/N;if(b&&B>o)break;r.push({value:B})}return b&&f&&A!==o?r.length&&wl(r[r.length-1].value,o,vv(o,w,t))?r[r.length-1].value=o:r.push({value:o}):(!b||A===o)&&r.push({value:A}),r}function vv(t,e,{horizontal:r,minRotation:n}){const s=Un(n),i=(r?Math.sin(s):Math.cos(s))||.001,a=.75*e*(""+t).length;return Math.min(e/i,a)}class Dh extends fa{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return Ye(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds();let{min:s,max:i}=this;const a=l=>s=r?s:l,o=l=>i=n?i:l;if(e){const l=cs(s),c=cs(i);l<0&&c<0?o(0):l>0&&c>0&&a(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);o(i+l),e||a(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:r,stepSize:n}=e,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),r=r||11),r&&(s=Math.min(r,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,r=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},i=this._range||this,a=i8(s,i);return e.bounds==="ticks"&&q_(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const s=(n-r)/Math.max(e.length-1,1)/2;r-=s,n+=s}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return _c(e,this.chart.options.locale,this.options.ticks.format)}}class H0 extends Dh{determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=Mt(e)?e:0,this.max=Mt(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),r=e?this.width:this.height,n=Un(this.options.ticks.minRotation),s=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}be(H0,"id","linear"),be(H0,"defaults",{ticks:{callback:od.formatters.numeric}});const oc=t=>Math.floor(Js(t)),ji=(t,e)=>Math.pow(10,oc(t)+e);function bv(t){return t/Math.pow(10,oc(t))===1}function yv(t,e,r){const n=Math.pow(10,r),s=Math.floor(t/n);return Math.ceil(e/n)-s}function a8(t,e){const r=e-t;let n=oc(r);for(;yv(t,e,n)>10;)n++;for(;yv(t,e,n)<10;)n--;return Math.min(n,oc(t))}function o8(t,{min:e,max:r}){e=en(t.min,e);const n=[],s=oc(e);let i=a8(e,r),a=i<0?Math.pow(10,Math.abs(i)):1;const o=Math.pow(10,i),l=s>i?Math.pow(10,s):0,c=Math.round((e-l)*a)/a,h=Math.floor((e-l)/o/10)*o*10;let d=Math.floor((c-h)/Math.pow(10,i)),f=en(t.min,Math.round((l+h+d*Math.pow(10,i))*a)/a);for(;f<r;)n.push({value:f,major:bv(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(i++,d=2,a=i>=0?1:a),f=Math.round((l+h+d*Math.pow(10,i))*a)/a;const p=en(t.max,f);return n.push({value:p,major:bv(p),significand:d}),n}class G0 extends fa{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,r){const n=Dh.prototype.parse.apply(this,[e,r]);if(n===0){this._zero=!0;return}return Mt(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!0);this.min=Mt(e)?Math.max(0,e):null,this.max=Mt(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Mt(this._userMin)&&(this.min=e===ji(this.min,0)?ji(this.min,-1):ji(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:r}=this.getUserBounds();let n=this.min,s=this.max;const i=o=>n=e?n:o,a=o=>s=r?s:o;n===s&&(n<=0?(i(1),a(10)):(i(ji(n,-1)),a(ji(s,1)))),n<=0&&i(ji(s,-1)),s<=0&&a(ji(n,1)),this.min=n,this.max=s}buildTicks(){const e=this.options,r={min:this._userMin,max:this._userMax},n=o8(r,this);return e.bounds==="ticks"&&q_(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":_c(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Js(e),this._valueRange=Js(this.max)-Js(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Js(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const r=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+r*this._valueRange)}}be(G0,"id","logarithmic"),be(G0,"defaults",{ticks:{callback:od.formatters.logarithmic,major:{enabled:!0}}});function K0(t){const e=t.ticks;if(e.display&&t.display){const r=Cr(e.backdropPadding);return Be(e.font&&e.font.size,Tt.font.size)+r.height}return 0}function l8(t,e,r){return r=Et(r)?r:[r],{w:pI(t,e.string,r),h:r.length*e.lineHeight}}function wv(t,e,r,n,s){return t===n||t===s?{start:e-r/2,end:e+r/2}:t<n||t>s?{start:e-r,end:e}:{start:e,end:e+r}}function c8(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},r=Object.assign({},e),n=[],s=[],i=t._pointLabels.length,a=t.options.pointLabels,o=a.centerPointLabels?tt/i:0;for(let l=0;l<i;l++){const c=a.setContext(t.getPointLabelContext(l));s[l]=c.padding;const h=t.getPointPosition(l,t.drawingArea+s[l],o),d=Qt(c.font),f=l8(t.ctx,d,t._pointLabels[l]);n[l]=f;const p=wr(t.getIndexAngle(l)+o),m=Math.round(_g(p)),g=wv(m,h.x,f.w,0,180),x=wv(m,h.y,f.h,90,270);u8(r,e,p,g,x)}t.setCenterPoint(e.l-r.l,r.r-e.r,e.t-r.t,r.b-e.b),t._pointLabelItems=f8(t,n,s)}function u8(t,e,r,n,s){const i=Math.abs(Math.sin(r)),a=Math.abs(Math.cos(r));let o=0,l=0;n.start<e.l?(o=(e.l-n.start)/i,t.l=Math.min(t.l,e.l-o)):n.end>e.r&&(o=(n.end-e.r)/i,t.r=Math.max(t.r,e.r+o)),s.start<e.t?(l=(e.t-s.start)/a,t.t=Math.min(t.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/a,t.b=Math.max(t.b,e.b+l))}function h8(t,e,r){const n=t.drawingArea,{extra:s,additionalAngle:i,padding:a,size:o}=r,l=t.getPointPosition(e,n+s+a,i),c=Math.round(_g(wr(l.angle+Bt))),h=m8(l.y,o.h,c),d=p8(c),f=g8(l.x,o.w,d);return{visible:!0,x:l.x,y:h,textAlign:d,left:f,top:h,right:f+o.w,bottom:h+o.h}}function d8(t,e){if(!e)return!0;const{left:r,top:n,right:s,bottom:i}=t;return!(Ss({x:r,y:n},e)||Ss({x:r,y:i},e)||Ss({x:s,y:n},e)||Ss({x:s,y:i},e))}function f8(t,e,r){const n=[],s=t._pointLabels.length,i=t.options,{centerPointLabels:a,display:o}=i.pointLabels,l={extra:K0(i)/2,additionalAngle:a?tt/s:0};let c;for(let h=0;h<s;h++){l.padding=r[h],l.size=e[h];const d=h8(t,h,l);n.push(d),o==="auto"&&(d.visible=d8(d,c),d.visible&&(c=d))}return n}function p8(t){return t===0||t===180?"center":t<180?"left":"right"}function g8(t,e,r){return r==="right"?t-=e:r==="center"&&(t-=e/2),t}function m8(t,e,r){return r===90||r===270?t-=e/2:(r>270||r<90)&&(t-=e),t}function x8(t,e,r){const{left:n,top:s,right:i,bottom:a}=r,{backdropColor:o}=e;if(!Ye(o)){const l=Ki(e.borderRadius),c=Cr(e.backdropPadding);t.fillStyle=o;const h=n-c.left,d=s-c.top,f=i-n+c.width,p=a-s+c.height;Object.values(l).some(m=>m!==0)?(t.beginPath(),ic(t,{x:h,y:d,w:f,h:p,radius:l}),t.fill()):t.fillRect(h,d,f,p)}}function v8(t,e){const{ctx:r,options:{pointLabels:n}}=t;for(let s=e-1;s>=0;s--){const i=t._pointLabelItems[s];if(!i.visible)continue;const a=n.setContext(t.getPointLabelContext(s));x8(r,a,i);const o=Qt(a.font),{x:l,y:c,textAlign:h}=i;ia(r,t._pointLabels[s],l,c+o.lineHeight/2,o,{color:a.color,textAlign:h,textBaseline:"middle"})}}function z2(t,e,r,n){const{ctx:s}=t;if(r)s.arc(t.xCenter,t.yCenter,e,0,_t);else{let i=t.getPointPosition(0,e);s.moveTo(i.x,i.y);for(let a=1;a<n;a++)i=t.getPointPosition(a,e),s.lineTo(i.x,i.y)}}function b8(t,e,r,n,s){const i=t.ctx,a=e.circular,{color:o,lineWidth:l}=e;!a&&!n||!o||!l||r<0||(i.save(),i.strokeStyle=o,i.lineWidth=l,i.setLineDash(s.dash||[]),i.lineDashOffset=s.dashOffset,i.beginPath(),z2(t,r,a,n),i.closePath(),i.stroke(),i.restore())}function y8(t,e,r){return wi(t,{label:r,index:e,type:"pointLabel"})}class el extends Dh{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Cr(K0(this.options)/2),r=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+r/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(r,n)/2)}determineDataLimits(){const{min:e,max:r}=this.getMinMax(!1);this.min=Mt(e)&&!isNaN(e)?e:0,this.max=Mt(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/K0(this.options))}generateTickLabels(e){Dh.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((r,n)=>{const s=gt(this.options.pointLabels.callback,[r,n],this);return s||s===0?s:""}).filter((r,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?c8(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,r,n,s){this.xCenter+=Math.floor((e-r)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,r,n,s))}getIndexAngle(e){const r=_t/(this._pointLabels.length||1),n=this.options.startAngle||0;return wr(e*r+Un(n))}getDistanceFromCenterForValue(e){if(Ye(e))return NaN;const r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*r:(e-this.min)*r}getValueForDistanceFromCenter(e){if(Ye(e))return NaN;const r=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(e){const r=this._pointLabels||[];if(e>=0&&e<r.length){const n=r[e];return y8(this.getContext(),e,n)}}getPointPosition(e,r,n=0){const s=this.getIndexAngle(e)-Bt+n;return{x:Math.cos(s)*r+this.xCenter,y:Math.sin(s)*r+this.yCenter,angle:s}}getPointPositionForValue(e,r){return this.getPointPosition(e,this.getDistanceFromCenterForValue(r))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:r,top:n,right:s,bottom:i}=this._pointLabelItems[e];return{left:r,top:n,right:s,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:r}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),z2(this,this.getDistanceFromCenterForValue(this._endValue),r,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,r=this.options,{angleLines:n,grid:s,border:i}=r,a=this._pointLabels.length;let o,l,c;if(r.pointLabels.display&&v8(this,a),s.display&&this.ticks.forEach((h,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const f=this.getContext(d),p=s.setContext(f),m=i.setContext(f);b8(this,p,l,a,m)}}),n.display){for(e.save(),o=a-1;o>=0;o--){const h=n.setContext(this.getPointLabelContext(o)),{color:d,lineWidth:f}=h;!f||!d||(e.lineWidth=f,e.strokeStyle=d,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),c=this.getPointPosition(o,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,r=this.options,n=r.ticks;if(!n.display)return;const s=this.getIndexAngle(0);let i,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,l)=>{if(l===0&&this.min>=0&&!r.reverse)return;const c=n.setContext(this.getContext(l)),h=Qt(c.font);if(i=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=h.string,a=e.measureText(o.label).width,e.fillStyle=c.backdropColor;const d=Cr(c.backdropPadding);e.fillRect(-a/2-d.left,-i-h.size/2-d.top,a+d.width,h.size+d.height)}ia(e,o.label,0,-i,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}be(el,"id","radialLinear"),be(el,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:od.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),be(el,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),be(el,"descriptors",{angleLines:{_fallback:"grid"}});const fd={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ur=Object.keys(fd);function _v(t,e){return t-e}function Sv(t,e){if(Ye(e))return null;const r=t._adapter,{parser:n,round:s,isoWeekday:i}=t._parseOpts;let a=e;return typeof n=="function"&&(a=n(a)),Mt(a)||(a=typeof n=="string"?r.parse(a,n):r.parse(a)),a===null?null:(s&&(a=s==="week"&&(po(i)||i===!0)?r.startOf(a,"isoWeek",i):r.startOf(a,s)),+a)}function kv(t,e,r,n){const s=Ur.length;for(let i=Ur.indexOf(t);i<s-1;++i){const a=fd[Ur[i]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((r-e)/(o*a.size))<=n)return Ur[i]}return Ur[s-1]}function w8(t,e,r,n,s){for(let i=Ur.length-1;i>=Ur.indexOf(r);i--){const a=Ur[i];if(fd[a].common&&t._adapter.diff(s,n,a)>=e-1)return a}return Ur[r?Ur.indexOf(r):0]}function _8(t){for(let e=Ur.indexOf(t)+1,r=Ur.length;e<r;++e)if(fd[Ur[e]].common)return Ur[e]}function Ev(t,e,r){if(!r)t[e]=!0;else if(r.length){const{lo:n,hi:s}=Sg(r,e),i=r[n]>=e?r[n]:r[s];t[i]=!0}}function S8(t,e,r,n){const s=t._adapter,i=+s.startOf(e[0].value,n),a=e[e.length-1].value;let o,l;for(o=i;o<=a;o=+s.add(o,1,n))l=r[o],l>=0&&(e[l].major=!0);return e}function Tv(t,e,r){const n=[],s={},i=e.length;let a,o;for(a=0;a<i;++a)o=e[a],s[o]=a,n.push({value:o,major:!1});return i===0||!r?n:S8(t,n,s,r)}class lc extends fa{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){const n=e.time||(e.time={}),s=this._adapter=new OM._date(e.adapters.date);s.init(r),yl(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:Sv(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,r=this._adapter,n=e.time.unit||"day";let{min:s,max:i,minDefined:a,maxDefined:o}=this.getUserBounds();function l(c){!a&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!o&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!a||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Mt(s)&&!isNaN(s)?s:+r.startOf(Date.now(),n),i=Mt(i)&&!isNaN(i)?i:+r.endOf(Date.now(),n)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){const e=this.options,r=e.time,n=e.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,a=this.max,o=tI(s,i,a);return this._unit=r.unit||(n.autoSkip?kv(r.minUnit,this.min,this.max,this._getLabelCapacity(i)):w8(this,o.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:_8(this._unit),this.initOffsets(s),e.reverse&&o.reverse(),Tv(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?r=1-s:r=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;r=sr(r,0,a),n=sr(n,0,a),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){const e=this._adapter,r=this.min,n=this.max,s=this.options,i=s.time,a=i.unit||kv(i.minUnit,r,n,this._getLabelCapacity(r)),o=Be(s.ticks.stepSize,1),l=a==="week"?i.isoWeekday:!1,c=po(l)||l===!0,h={};let d=r,f,p;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":a),e.diff(n,r,a)>1e5*o)throw new Error(r+" and "+n+" are too far apart with stepSize of "+o+" "+a);const m=s.ticks.source==="data"&&this.getDataTimestamps();for(f=d,p=0;f<n;f=+e.add(f,o,a),p++)Ev(h,f,m);return(f===n||s.bounds==="ticks"||p===1)&&Ev(h,f,m),Object.keys(h).sort(_v).map(g=>+g)}getLabelForValue(e){const r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){const s=this.options.time.displayFormats,i=this._unit,a=r||s[i];return this._adapter.format(e,a)}_tickFormatFunction(e,r,n,s){const i=this.options,a=i.ticks.callback;if(a)return gt(a,[e,r,n],this);const o=i.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&o[l],d=c&&o[c],f=n[r],p=c&&d&&f&&f.major;return this._adapter.format(e,s||(p?d:h))}generateTickLabels(e){let r,n,s;for(r=0,n=e.length;r<n;++r)s=e[r],s.label=this._tickFormatFunction(s.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const r=this.options.ticks,n=this.ctx.measureText(e).width,s=Un(this.isHorizontal()?r.maxRotation:r.minRotation),i=Math.cos(s),a=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*a,h:n*a+o*i}}_getLabelCapacity(e){const r=this.options.time,n=r.displayFormats,s=n[r.unit]||n.millisecond,i=this._tickFormatFunction(e,0,Tv(this,[e],this._majorUnit),s),a=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,n=s.length;r<n;++r)e=e.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let r,n;if(e.length)return e;const s=this.getLabels();for(r=0,n=s.length;r<n;++r)e.push(Sv(this,s[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Z_(e.sort(_v))}}be(lc,"id","time"),be(lc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function hu(t,e,r){let n=0,s=t.length-1,i,a,o,l;r?(e>=t[n].pos&&e<=t[s].pos&&({lo:n,hi:s}=_s(t,"pos",e)),{pos:i,time:o}=t[n],{pos:a,time:l}=t[s]):(e>=t[n].time&&e<=t[s].time&&({lo:n,hi:s}=_s(t,"time",e)),{time:i,pos:o}=t[n],{time:a,pos:l}=t[s]);const c=a-i;return c?o+(l-o)*(e-i)/c:o}class Y0 extends lc{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=hu(r,this.min),this._tableRange=hu(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:r,max:n}=this,s=[],i=[];let a,o,l,c,h;for(a=0,o=e.length;a<o;++a)c=e[a],c>=r&&c<=n&&s.push(c);if(s.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(a=0,o=s.length;a<o;++a)h=s[a+1],l=s[a-1],c=s[a],Math.round((h+l)/2)!==c&&i.push({time:c,pos:a/(o-1)});return i}_generate(){const e=this.min,r=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return(hu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return hu(this._table,n*this._tableRange+this._minPos,!0)}}be(Y0,"id","timeseries"),be(Y0,"defaults",lc.defaults);var k8=Object.freeze({__proto__:null,CategoryScale:V0,LinearScale:H0,LogarithmicScale:G0,RadialLinearScale:el,TimeScale:lc,TimeSeriesScale:Y0});const E8=[jM,a6,t8,k8];Rt.register(...E8);const T8=({state:t="principal",component:e,text:r,className:n,onClick:s,...i})=>u.jsxs("button",{type:"button",onClick:s,className:`rounded-[10px] border border-solid border-global-stroke-highlight-2nd pt-2 pr-3 pb-2 pl-3 flex flex-row gap-2 items-center justify-center relative cursor-pointer transition-opacity hover:opacity-90 bg-[linear-gradient(90deg,rgba(21,93,252,1)_0%,rgba(18,161,213,1)_100%)] ${n}`,...i,children:[e,r&&u.jsx("div",{className:"text-global-blanc text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative",children:r})]}),C8=({className:t="",state:e,...r})=>u.jsxs("svg",{className:`w-5 h-5 ${t}`,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:[u.jsx("path",{d:"M10 2L2 7L10 12L18 7L10 2Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M2 13L10 18L18 13",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M2 10L10 15L18 10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]});function X0({className:t="",state:e="fl-che-bas",...r}){return u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:t,...r,children:u.jsx("path",{d:"M5 7.5L10 12.5L15 7.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}const du=({text:t,text2:e,className:r="",value:n,onChange:s,options:i=[],...a})=>u.jsxs("div",{className:`flex flex-col gap-2 items-start justify-start shrink-0 relative ${r}`,...a,children:[t&&u.jsx("div",{className:"text-global-blanc text-left font-p1-font-family text-p1-font-size font-p1-font-weight relative self-stretch",children:t}),u.jsx("div",{className:"bg-global-bg-small-box rounded-lg border-solid border-global-stroke-box border pt-[7px] pr-3 pb-[7px] pl-3 flex flex-row gap-3 items-center justify-start self-stretch shrink-0 h-[38px] relative",children:i.length>0?u.jsxs(u.Fragment,{children:[u.jsxs("select",{value:n||"",onChange:s,className:"flex-1 bg-transparent border-none outline-none text-global-inactive font-h4-font-family text-h4-font-size leading-h4-line-height font-h4-font-weight appearance-none cursor-pointer relative z-10",style:{WebkitAppearance:"none",MozAppearance:"none"},children:[u.jsx("option",{value:"",children:e||"Slectionner..."}),i.map(o=>u.jsx("option",{value:typeof o=="string"?o:o.value,children:typeof o=="string"?o:o.label||o.value},typeof o=="string"?o:o.value))]}),u.jsx(X0,{className:"!w-5 !h-5 shrink-0 pointer-events-none absolute right-3",state:"fl-che-bas"})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"text-global-inactive text-left font-h4-font-family text-h4-font-size leading-h4-line-height font-h4-font-weight relative flex-1",children:e||"Slectionner..."}),u.jsx(X0,{className:"!w-5 !h-5 shrink-0 pointer-events-none",state:"fl-che-bas"})]})})]}),fu=({state:t="big",text:e,value:r,icon:n,iconState:s,className:i="",...a})=>{const o="state-"+t;return u.jsx("div",{className:"bg-global-bg-box rounded-[14px] border-solid border-global-stroke-box border p-4 flex flex-col gap-2 items-start justify-center self-stretch flex-1 relative overflow-hidden "+i+" "+o,...a,children:u.jsxs("div",{className:"flex flex-row items-center justify-between self-stretch shrink-0 relative",children:[u.jsxs("div",{className:"flex flex-col gap-0 items-start justify-start flex-1 relative",children:[u.jsxs("div",{className:"text-global-inactive text-left font-p1-font-family text-p1-font-size font-p1-font-weight relative",children:[e||"Taux d'occupation (Rel)"," "]}),u.jsxs("div",{className:"text-global-blanc text-left font-h1-font-family text-h1-font-size font-h1-font-weight relative",children:[r||"12.5%"," "]})]}),n&&u.jsx("div",{className:"rounded-[10px] border-solid border-global-stroke-highlight-2nd border flex flex-col gap-2.5 items-center justify-center shrink-0 w-[50px] h-[50px] relative",style:{background:"var(--global-bg-highlight-2nd, linear-gradient(90deg, rgba(21, 93, 252, 0.20) 0%,rgba(0, 146, 184, 0.20) 100%))",aspectRatio:"1"},children:u.jsx(n,{state:s,className:"!w-6 !h-6"})})]})})},A8=({className:t="",state:e,...r})=>u.jsxs("svg",{className:`w-6 h-6 ${t}`,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:[u.jsx("path",{d:"M3 10.5L12 3L21 10.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M5 10.5V21H9V15H15V21H19V10.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),N8=({className:t="",state:e,...r})=>u.jsx("svg",{className:`w-6 h-6 ${t}`,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:u.jsx("path",{d:"M12 2V22M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6312 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6312 13.6815 18 14.5717 18 15.5C18 16.4283 17.6312 17.3185 16.9749 17.9749C16.3185 18.6312 15.4283 19 14.5 19H6",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),j8=({className:t="",state:e,...r})=>u.jsxs("svg",{className:`w-6 h-6 ${t}`,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:[u.jsx("path",{d:"M12 3L1 9L12 15L21 10.74V17",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M5 10.74V15.26C5 15.54 5.11 15.81 5.3 16L11.3 22C11.69 22.39 12.31 22.39 12.7 22L18.7 16C18.89 15.81 19 15.54 19 15.26V10.74",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M9 21H15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),pu=(t="en")=>{const e={fr:{baseRevenueEstimation:"Estimation du revenu de base ( ajuster selon vos donnes)",approximation:"Approximation",aiGainCalculation:"Calcul du gain gnr par l'IA",aiScoreCalculation:"Calcul du score de performance de l'IA",demandExplanation:"Demande = nombre de nuits rserves (nightsBookedData reprsente la demande satisfaite)",supplyExplanation:"Offre = nuits disponibles (supply)",groupDataByMonth:"Grouper les donnes par mois",createDataForAI:"Crer les donnes pour Gain IA & Score IA (groupes par mois)",errorProcessingDate:"Erreur lors du traitement de la date",continueWithNextDate:"Continuer avec la prochaine date",ignoreInvalidValues:"Ignorer les valeurs invalides",ignoreInvalidDates:"Ignorer les dates invalides"},en:{baseRevenueEstimation:"Base revenue estimation (to be adjusted according to your data)",approximation:"Approximation",aiGainCalculation:"AI gain calculation",aiScoreCalculation:"AI performance score calculation",demandExplanation:"Demand = number of nights booked (nightsBookedData represents satisfied demand)",supplyExplanation:"Supply = available nights (supply)",groupDataByMonth:"Group data by month",createDataForAI:"Create data for AI Gain & AI Score (grouped by month)",errorProcessingDate:"Error processing date",continueWithNextDate:"Continue with next date",ignoreInvalidValues:"Ignore invalid values",ignoreInvalidDates:"Ignore invalid dates"}};return e[t]||e.en};function O8({token:t,userProfile:e}){var de;const{language:r}=Vt();pu((e==null?void 0:e.language)||r||"en");const[n,s]=C.useState([]),[i,a]=C.useState([]),[o,l]=C.useState(!0),[c,h]=C.useState(!0),[d,f]=C.useState(""),[p,m]=C.useState("1m"),[g,x]=C.useState(""),[v,b]=C.useState(""),[y,w]=C.useState(""),[S,N]=C.useState(""),[k,A]=C.useState(0),[T,F]=C.useState("overview"),[I,B]=C.useState(null),[Z,ke]=C.useState(null),[ae,Te]=C.useState(null),[he,te]=C.useState(null),[re,le]=C.useState(null),[je,M]=C.useState(null),[U,L]=C.useState(null),[P,V]=C.useState(null),[ce,we]=C.useState(null),[xe,X]=C.useState(null),[ve,Ee]=C.useState(null),[Se,Ce]=C.useState(null),[rt,We]=C.useState(null),[fe,xt]=C.useState(null),[st,Zt]=C.useState(null),[Ct,W]=C.useState(null),[_e,Pe]=C.useState(null),[Ze,vt]=C.useState({isOpen:!1,message:"",title:"Information"}),bt=C.useRef(null),dt=C.useRef(null),Yr=C.useRef(null),Xr=C.useRef(null),Tn=C.useRef(null),qr=C.useRef(null),Ar=C.useRef(null),ar=C.useRef(null),Kn=C.useRef(null),hs=C.useRef(null),Jr=C.useRef(null),gn=C.useRef(null),Cn=C.useRef(null),An=C.useRef(null),Yn=C.useRef(null),Xn=C.useRef(null),Fr=C.useRef(null),qn=C.useRef(null),Jn=C.useRef(null),Qn=C.useRef(null),Zn=C.useRef(null),ne=C.useRef(null),ye=C.useRef(null),De=C.useRef(null),Ne=C.useRef(null),Oe=C.useRef(null),$e=C.useRef(null),Ve=C.useRef(null),Ue=z=>(z||0).toLocaleString("fr-FR",{style:"currency",currency:(e==null?void 0:e.currency)||"EUR",minimumFractionDigits:0,maximumFractionDigits:0}),_=z=>(z||0).toLocaleString("fr-FR",{style:"currency",currency:(e==null?void 0:e.currency)||"EUR",minimumFractionDigits:2}),R=z=>`${(z||0).toFixed(1)}%`,E=(z,ee,oe="en")=>{const q=pu(oe);if(!z||!z.labels||!Array.isArray(z.labels)||z.labels.length===0||!z.revenueData||!Array.isArray(z.revenueData)||z.revenueData.length===0)return null;const pe=new Map;if(z.labels.forEach((Je,Ge)=>{var Kt,Ke,Nr;try{if(!Je||typeof Je!="string")return;let Qr;if(Je.match(/^\d{4}-W\d{2}$/)){const[To,W2]=Je.split("-W"),Pg=new Date(parseInt(To),0,1),V2=(parseInt(W2)-1)*7;Qr=new Date(Pg),Qr.setDate(Pg.getDate()+V2)}else Qr=new Date(Je);if(isNaN(Qr.getTime()))return;const _i=`${Qr.getFullYear()}-${String(Qr.getMonth()+1).padStart(2,"0")}`,Fs=oe==="fr"?"fr-FR":"en-US",pa=Qr.toLocaleDateString(Fs,{month:"short"});pe.has(_i)||pe.set(_i,{label:pa,revenue:0,nightsBooked:0,totalNights:0});const Si=pe.get(_i),Eo=((Kt=z.revenueData)==null?void 0:Kt[Ge])||0,ga=((Ke=z.nightsBookedData)==null?void 0:Ke[Ge])||0,ki=((Nr=z.supplyData)==null?void 0:Nr[Ge])||0;Si.revenue+=Eo,Si.nightsBooked+=ga,Si.totalNights+=ga+ki}catch(Qr){console.error(`${q.errorProcessingDate}:`,Je,Qr)}}),pe.size===0)return null;const Le=[],He=[],Gt=[],ft=[];return Array.from(pe.entries()).sort().forEach(([Je,Ge])=>{Le.push(Ge.label);const Kt=Ge.nightsBooked>0?Ge.revenue/Ge.nightsBooked:0,Ke=Ge.totalNights>0?Ge.revenue/Ge.totalNights:0,Nr=Ge.totalNights>0?Ge.nightsBooked/Ge.totalNights*100:0;He.push(Kt),Gt.push(Ke),ft.push(Nr)}),{labels:Le,adrData:He,revparData:Gt,occupancyData:ft}},j=(z,ee,oe="en")=>{const q=pu(oe);if(!z||!z.labels||!Array.isArray(z.labels)||z.labels.length===0||!z.revenueData||!Array.isArray(z.revenueData)||z.revenueData.length===0)return null;const pe=new Map;if(z.labels.forEach((ft,Je)=>{var Ge,Kt;try{if(!ft||typeof ft!="string")return;let Ke;if(ft.match(/^\d{4}-W\d{2}$/)){const[Eo,ga]=ft.split("-W"),ki=new Date(parseInt(Eo),0,1),To=(parseInt(ga)-1)*7;Ke=new Date(ki),Ke.setDate(ki.getDate()+To)}else Ke=new Date(ft);if(isNaN(Ke.getTime()))return;const Nr=`${Ke.getFullYear()}-${String(Ke.getMonth()+1).padStart(2,"0")}`,Qr=oe==="fr"?"fr-FR":"en-US",_i=Ke.toLocaleDateString(Qr,{month:"short"});pe.has(Nr)||pe.set(Nr,{label:_i,revenue:0,baseRevenue:0,nightsBooked:0});const Fs=pe.get(Nr),pa=((Ge=z.revenueData)==null?void 0:Ge[Je])||0,Si=((Kt=z.nightsBookedData)==null?void 0:Kt[Je])||0;Fs.revenue+=pa,Fs.nightsBooked+=Si,Fs.baseRevenue+=pa*.8}catch(Ke){console.error(`${q.errorProcessingDate}:`,ft,Ke)}}),pe.size===0)return null;const Le=[],He=[],Gt=[];return Array.from(pe.entries()).sort().forEach(([ft,Je])=>{Le.push(Je.label);const Ge=Je.revenue-Je.baseRevenue,Kt=Je.nightsBooked>0?Ge>0?75+Math.random()*25:50+Math.random()*25:0;He.push(Math.max(0,Ge)),Gt.push(Math.min(100,Math.max(0,Kt)))}),{labels:Le,gainIaData:He,scoreIaData:Gt}},O=(z,ee,oe="en")=>{const q=pu(oe);if(!z||!z.labels||!Array.isArray(z.labels)||z.labels.length===0||!z.supplyData||!Array.isArray(z.supplyData)||z.supplyData.length===0)return null;const pe=new Map;if(z.labels.forEach((ft,Je)=>{var Ge,Kt;try{if(!ft||typeof ft!="string")return;let Ke;if(ft.match(/^\d{4}-W\d{2}$/)){const[Eo,ga]=ft.split("-W"),ki=new Date(parseInt(Eo),0,1),To=(parseInt(ga)-1)*7;Ke=new Date(ki),Ke.setDate(ki.getDate()+To)}else Ke=new Date(ft);if(isNaN(Ke.getTime()))return;const Nr=`${Ke.getFullYear()}-${String(Ke.getMonth()+1).padStart(2,"0")}`,Qr=oe==="fr"?"fr-FR":"en-US",_i=Ke.toLocaleDateString(Qr,{month:"short"});pe.has(Nr)||pe.set(Nr,{label:_i,demande:0,offre:0});const Fs=pe.get(Nr),pa=((Ge=z.nightsBookedData)==null?void 0:Ge[Je])||0,Si=((Kt=z.supplyData)==null?void 0:Kt[Je])||0;Fs.demande+=pa,Fs.offre+=Si}catch(Ke){console.error(`${q.errorProcessingDate}:`,ft,Ke)}}),pe.size===0)return null;const Le=[],He=[],Gt=[];return Array.from(pe.entries()).sort().forEach(([ft,Je])=>{Le.push(Je.label),He.push(Je.demande),Gt.push(Je.offre)}),{labels:Le,demandeData:He,offreData:Gt}},D=z=>{if(!z||z.length===0)return{labels:["Villa Luxe","Chalet Alpes","Villa Sunset","Appart Centre"],marketAdrData:[120,95,140,80],yourAdrData:[150,110,165,100]};const ee=z.slice(0,4),oe=ee.map(Le=>Le.name||"Proprit"),q=ee.map(Le=>Le.market_adr||Math.floor(Math.random()*100+50)),pe=ee.map(Le=>Le.adr||Math.floor(Math.random()*100+80));return{labels:oe,marketAdrData:q,yourAdrData:pe}},H=()=>({labels:["0-100","100-150","150-200","200-250","250-300","300+"],data:[8,12,18,15,10,5]}),J=()=>({revenueForecast:{labels:["Sem 1","Sem 2","Sem 3","Sem 4"],revenueData:[4e3,8e3,12e3,14e3],occupancyData:[25,50,75,85]},adrForecast:{labels:["Sem 1","Sem 2","Sem 3","Sem 4"],adrData:[55,110,165,200],revparData:[50,100,150,180],occupancyData:[25,50,75,90]},scenarios:{labels:["Sem 1","Sem 2","Sem 3","Sem 4"],baselineData:[4500,9e3,13500,16e3],optimisticData:[4950,9900,14850,17600],pessimisticData:[4050,8100,12150,14400]},radar:{labels:["Revenue","Occupancy","ADR","AI Score","ROI"],data:[75,60,80,70,65]}}),G=()=>({revenueVsTarget:{labels:["Jan","Fv","Mar","Avr","Mai","Juin"],targetData:[2e4,25e3,3e4,35e3,4e4,45e3],revenueData:[18e3,23e3,28e3,32e3,38e3,42e3]},adrByChannel:{labels:["Airbnb","Booking.com","VRBO","Direct"],data:[150,140,130,160],variations:[5.2,3.1,7.8,9.2]},grossMargin:{labels:["Jan","Fv","Mar","Avr","Mai","Juin"],data:[45,50,55,58,62,65]}}),K=C.useCallback(async()=>{l(!0);try{const z=await ea(t);s(z),f("")}catch(z){f(`Error loading properties: ${z.message}`)}finally{l(!1)}},[t]);C.useEffect(()=>{K()},[K]),C.useEffect(()=>{if(n.length>0){const q=D(n);V(q)}else V({labels:["Villa Luxe","Chalet Alpes","Villa Sunset","Appart Centre"],marketAdrData:[120,95,140,80],yourAdrData:[150,110,165,100]});const z=H();we(z);const ee=J();X(ee.revenueForecast),Ee(ee.adrForecast),Ce(ee.scenarios),We(ee.radar);const oe=G();xt(oe.revenueVsTarget),Zt(oe.adrByChannel),W(oe.grossMargin)},[n]);const Y=C.useCallback(async()=>{if(e){h(!0),f("");try{const{startDate:z,endDate:ee}=cw(p,e.timezone),{startDate:oe,endDate:q}=nA(z,ee),[pe,Le,He,Gt,ft,Je]=await Promise.all([A0(t,z,ee),A0(t,oe,q),RC(t,z,ee),DC(t,z,ee),PC(t,e.timezone||"Europe/Paris"),IC(t,z,ee)]);if(B(pe),ke(Le),Te(He),te(Gt),Pe(ft||null),Je&&Je.adrVsMarket&&V(Je.adrVsMarket),Je&&Je.priceDistribution&&we(Je.priceDistribution),He&&He.labels&&Array.isArray(He.labels)&&He.labels.length>0)try{const Ge=(e==null?void 0:e.language)||r||"en",Kt=E(He,Gt,Ge);le(Kt||null);const Ke=j(He,Gt,Ge);M(Ke||null);const Nr=O(He,Gt,Ge);L(Nr||null)}catch(Ge){console.error("Error transforming data:",Ge),le(null),M(null),L(null)}else le(null),M(null),L(null)}catch(z){console.error("Error loading KPIs:",z),f(`Error loading KPIs: ${z.message||"Unknown error"}`),B(null),ke(null),Te(null),te(null),le(null),M(null),L(null),Pe(null),V(null),we(null)}finally{h(!1)}}},[t,p,e]);C.useEffect(()=>{Y()},[Y]),C.useEffect(()=>{let z=n;if(g&&(z=z.filter(ee=>ee.property_type===g)),v&&(z=z.filter(ee=>ee.channel===v)),y&&(z=z.filter(ee=>ee.status===y)),S){const ee=S.toLowerCase();z=z.filter(oe=>{var q,pe;return((q=oe.location)==null?void 0:q.toLowerCase().includes(ee))||((pe=oe.address)==null?void 0:pe.toLowerCase().includes(ee))})}z=z.filter(ee=>(ee.occupancy||0)*100>=k),a(z)},[n,g,v,y,S,k]),C.useEffect(()=>{const z=(q,pe)=>{if(!q)return!1;for(const Le of pe)if(!q[Le]||!Array.isArray(q[Le])||q[Le].length===0)return!1;return!0},ee=()=>{if(Yn.current){try{Yn.current.destroy()}catch{}Yn.current=null}if(Xn.current){try{Xn.current.destroy()}catch{}Xn.current=null}if(Fr.current){try{Fr.current.destroy()}catch{}Fr.current=null}if(qn.current){try{qn.current.destroy()}catch{}qn.current=null}if(Jn.current){try{Jn.current.destroy()}catch{}Jn.current=null}if(Qn.current){try{Qn.current.destroy()}catch{}Qn.current=null}if(Zn.current){try{Zn.current.destroy()}catch{}Zn.current=null}if(ne.current){try{ne.current.destroy()}catch{}ne.current=null}if(ye.current){try{ye.current.destroy()}catch{}ye.current=null}if(De.current){try{De.current.destroy()}catch{}De.current=null}if(Ne.current){try{Ne.current.destroy()}catch{}Ne.current=null}if(Oe.current){try{Oe.current.destroy()}catch{}Oe.current=null}if($e.current){try{$e.current.destroy()}catch{}$e.current=null}if(Ve.current){try{Ve.current.destroy()}catch{}Ve.current=null}};if(c){ee();return}const oe=setTimeout(()=>{if(ee(),bt.current&&z(ae,["labels","revenueData"]))try{const q=bt.current.getContext("2d");Yn.current=new Rt(q,{type:"line",data:{labels:ae.labels,datasets:[{label:"Real Revenue",data:ae.revenueData,borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4}]},options:{scales:{y:{beginAtZero:!0,ticks:{color:"#9ca3af",maxTicksLimit:5}},x:{ticks:{color:"#9ca3af",maxTicksLimit:6}}},plugins:{legend:{labels:{color:"#9ca3af"}}}}})}catch(q){console.error("Error creating revenue chart:",q)}if(dt.current&&z(he,["labels","bookingCounts","occupancyRates"]))try{const q=dt.current.getContext("2d");Xn.current=new Rt(q,{type:"bar",data:{labels:he.labels,datasets:[{label:"Bookings",data:he.bookingCounts,backgroundColor:"#00d3f2",borderColor:"#00d3f2",borderWidth:0,yAxisID:"y"},{label:"Occupation (%)",data:he.occupancyRates,type:"line",borderColor:"#fef137",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#fef137",pointBorderColor:"#fef137",pointBorderWidth:2,pointHoverRadius:6,yAxisID:"y1"}]},options:{scales:{x:{ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},padding:8},grid:{display:!1},border:{display:!1}},y:{beginAtZero:!0,position:"left",ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},stepSize:5,maxTicksLimit:5,padding:4},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}},y1:{beginAtZero:!0,max:100,position:"right",ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},stepSize:25,maxTicksLimit:5,callback:pe=>`${pe}`,padding:4},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}}},plugins:{legend:{display:!1}},maintainAspectRatio:!1}})}catch(q){console.error("Error creating market chart:",q)}if(Yr.current&&z(re,["labels","adrData","revparData","occupancyData"]))try{const q=Yr.current.getContext("2d");Fr.current=new Rt(q,{type:"line",data:{labels:re.labels,datasets:[{label:"ADR ()",data:re.adrData,borderColor:"#8b5cf6",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#8b5cf6",pointBorderColor:"#8b5cf6",yAxisID:"y"},{label:"Occupation (%)",data:re.occupancyData,borderColor:"#00d492",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#00d492",pointBorderColor:"#00d492",yAxisID:"y1"},{label:"RevPAR ()",data:re.revparData,borderColor:"#00d3f2",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#00d3f2",pointBorderColor:"#00d3f2",yAxisID:"y"}]},options:{scales:{x:{ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},padding:8},grid:{display:!1},border:{display:!1}},y:{beginAtZero:!0,position:"left",ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},maxTicksLimit:5,padding:4,callback:function(pe){return pe.toFixed(0)}},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}},y1:{beginAtZero:!0,max:100,position:"right",ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},stepSize:25,maxTicksLimit:5,padding:4,callback:function(pe){return pe.toFixed(0)}},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}}},plugins:{legend:{display:!1}},maintainAspectRatio:!1}})}catch(q){console.error("Error creating revpar chart:",q)}if(Xr.current&&z(je,["labels","gainIaData","scoreIaData"]))try{const q=Xr.current.getContext("2d");qn.current=new Rt(q,{type:"line",data:{labels:je.labels,datasets:[{label:"AI Gain ()",data:je.gainIaData,borderColor:"#fef137",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#fef137",pointBorderColor:"#fef137",yAxisID:"y"},{label:"AI Score (/100)",data:je.scoreIaData,borderColor:"#00d3f2",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#00d3f2",pointBorderColor:"#00d3f2",yAxisID:"y1"}]},options:{scales:{x:{ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},padding:8},grid:{display:!1},border:{display:!1}},y:{beginAtZero:!0,position:"left",ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},maxTicksLimit:5,padding:4,callback:function(pe){return pe.toFixed(0)}},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}},y1:{beginAtZero:!0,max:100,position:"right",ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},stepSize:25,maxTicksLimit:5,padding:4,callback:function(pe){return pe.toFixed(0)}},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}}},plugins:{legend:{display:!1}},maintainAspectRatio:!1}})}catch(q){console.error("Error creating IA chart:",q)}if(Tn.current&&z(U,["labels","demandeData","offreData"]))try{const q=Tn.current.getContext("2d");Jn.current=new Rt(q,{type:"line",data:{labels:U.labels,datasets:[{label:"Demand",data:U.demandeData,borderColor:"#00d3f2",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#00d3f2",pointBorderColor:"#00d3f2",pointBorderWidth:2,pointHoverRadius:6},{label:"Supply",data:U.offreData,borderColor:"#fef137",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#fef137",pointBorderColor:"#fef137",pointBorderWidth:2,pointHoverRadius:6}]},options:{scales:{x:{ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},padding:8},grid:{display:!1},border:{display:!1}},y:{beginAtZero:!0,max:600,ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},stepSize:150,padding:4,callback:function(pe){return pe.toFixed(0)}},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}}},plugins:{legend:{display:!1}},maintainAspectRatio:!1}})}catch(q){console.error("Error creating market trend chart:",q)}if(qr.current&&z(P,["labels","marketAdrData","yourAdrData"]))try{const q=qr.current.getContext("2d");Qn.current=new Rt(q,{type:"bar",data:{labels:P.labels,datasets:[{label:"Market ADR",data:P.marketAdrData,backgroundColor:"rgba(148, 163, 184, 0.3)",borderColor:"#94a3b8",borderWidth:1},{label:"Your ADR",data:P.yourAdrData,backgroundColor:"#00d3f2",borderColor:"#00d3f2",borderWidth:1}]},options:{scales:{x:{ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},padding:8},grid:{display:!1},border:{display:!1}},y:{beginAtZero:!0,max:220,ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},stepSize:55,padding:4,callback:function(pe){return pe.toFixed(0)}},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}}},plugins:{legend:{display:!1}},maintainAspectRatio:!1}})}catch(q){console.error("Error creating ADR vs Market chart:",q)}if(Ar.current&&z(ce,["labels","data"]))try{const q=Ar.current.getContext("2d");Zn.current=new Rt(q,{type:"bar",data:{labels:ce.labels,datasets:[{label:"Number of competitors",data:ce.data,backgroundColor:"#00d3f2",borderColor:"#00d3f2",borderWidth:1}]},options:{scales:{x:{ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},padding:8},grid:{display:!1},border:{display:!1}},y:{beginAtZero:!0,max:24,ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},stepSize:6,padding:4,callback:function(pe){return pe.toFixed(0)}},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}}},plugins:{legend:{display:!1}},maintainAspectRatio:!1}})}catch(q){console.error("Error creating Price Distribution chart:",q)}if(ar.current&&z(xe,["labels","revenueData","occupancyData"]))try{const q=ar.current.getContext("2d");ne.current=new Rt(q,{type:"bar",data:{labels:xe.labels,datasets:[{label:"Forecasted Revenue ()",data:xe.revenueData,backgroundColor:"#1e40af",borderColor:"#1e40af",borderWidth:1,yAxisID:"y"},{label:"Occupation (%)",data:xe.occupancyData,type:"line",borderColor:"#06b6d4",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#06b6d4",pointBorderColor:"#06b6d4",pointBorderWidth:2,pointHoverRadius:6,yAxisID:"y1"}]},options:{scales:{x:{ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},padding:8},grid:{display:!1},border:{display:!1}},y:{beginAtZero:!0,max:16e3,position:"left",ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},stepSize:4e3,padding:4,callback:function(pe){return pe.toFixed(0)}},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}},y1:{beginAtZero:!0,max:100,position:"right",ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},stepSize:25,padding:4,callback:function(pe){return pe.toFixed(0)}},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}}},plugins:{legend:{display:!1}},maintainAspectRatio:!1}})}catch(q){console.error("Error creating Forecast Revenue chart:",q)}if(Kn.current&&z(ve,["labels","adrData","revparData","occupancyData"]))try{const q=Kn.current.getContext("2d");ye.current=new Rt(q,{type:"line",data:{labels:ve.labels,datasets:[{label:"ADR ()",data:ve.adrData,borderColor:"#8b5cf6",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#8b5cf6",pointBorderColor:"#8b5cf6",yAxisID:"y"},{label:"RevPAR ()",data:ve.revparData,borderColor:"#06b6d4",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#06b6d4",pointBorderColor:"#06b6d4",yAxisID:"y"},{label:"Occupation (%)",data:ve.occupancyData,borderColor:"#10b981",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#10b981",pointBorderColor:"#10b981",yAxisID:"y1"}]},options:{scales:{x:{ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},padding:8},grid:{display:!1},border:{display:!1}},y:{beginAtZero:!0,max:220,position:"left",ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},stepSize:55,padding:4,callback:function(pe){return pe.toFixed(0)}},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}},y1:{beginAtZero:!0,max:100,position:"right",ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},stepSize:25,padding:4,callback:function(pe){return pe.toFixed(0)}},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}}},plugins:{legend:{display:!1}},maintainAspectRatio:!1}})}catch(q){console.error("Error creating Forecast ADR chart:",q)}if(hs.current&&z(Se,["labels","baselineData","optimisticData","pessimisticData"]))try{const q=hs.current.getContext("2d");De.current=new Rt(q,{type:"line",data:{labels:Se.labels,datasets:[{label:"Baseline scenario",data:Se.baselineData,borderColor:"#06b6d4",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#06b6d4",pointBorderColor:"#06b6d4",pointBorderWidth:2,pointHoverRadius:6},{label:"Optimistic scenario (+10%)",data:Se.optimisticData,borderColor:"#10b981",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#10b981",pointBorderColor:"#10b981",pointBorderWidth:2,pointHoverRadius:6},{label:"Pessimistic scenario (-10%)",data:Se.pessimisticData,borderColor:"#ef4444",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#ef4444",pointBorderColor:"#ef4444",pointBorderWidth:2,pointHoverRadius:6}]},options:{scales:{x:{ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},padding:8},grid:{display:!1},border:{display:!1}},y:{beginAtZero:!0,max:18e3,ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},stepSize:4500,padding:4,callback:function(pe){return pe.toFixed(0)}},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}}},plugins:{legend:{display:!1}},maintainAspectRatio:!1}})}catch(q){console.error("Error creating Forecast Scenarios chart:",q)}if(Jr.current&&z(rt,["labels","data"]))try{const q=Jr.current.getContext("2d");Ne.current=new Rt(q,{type:"radar",data:{labels:rt.labels,datasets:[{label:"Forecasts",data:rt.data,borderColor:"#00d3f2",backgroundColor:"rgba(0, 211, 242, 0.2)",pointBackgroundColor:"#00d3f2",pointBorderColor:"#00d3f2",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"#00d3f2"}]},options:{scales:{r:{beginAtZero:!0,max:100,ticks:{stepSize:25,color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},backdropColor:"transparent"},grid:{color:"rgba(148, 163, 184, 0.2)"},pointLabels:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12}}}},plugins:{legend:{display:!1}},maintainAspectRatio:!1}})}catch(q){console.error("Error creating Forecast Radar chart:",q)}if(gn.current&&z(fe,["labels","targetData","revenueData"]))try{const q=gn.current.getContext("2d");Oe.current=new Rt(q,{type:"line",data:{labels:fe.labels,datasets:[{label:"Target",data:fe.targetData,borderColor:"#64748b",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#64748b",pointBorderColor:"#64748b",borderWidth:2,borderDash:[5,5]},{label:"Real revenue",data:fe.revenueData,borderColor:"#06b6d4",backgroundColor:"transparent",tension:.3,fill:!1,pointRadius:4,pointBackgroundColor:"#06b6d4",pointBorderColor:"#06b6d4",borderWidth:2}]},options:{scales:{x:{ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},padding:8},grid:{display:!1},border:{display:!1}},y:{beginAtZero:!0,max:6e4,ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},stepSize:15e3,padding:4,callback:function(pe){return pe.toFixed(0)}},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}}},plugins:{legend:{display:!1}},maintainAspectRatio:!1}})}catch(q){console.error("Error creating Revenue vs Target chart:",q)}if(Cn.current&&z(st,["labels","data"]))try{const q=Cn.current.getContext("2d");$e.current=new Rt(q,{type:"bar",data:{labels:st.labels,datasets:[{label:"ADR ()",data:st.data,backgroundColor:"#00d3f2",borderColor:"#00d3f2",borderWidth:1}]},options:{indexAxis:"y",scales:{x:{beginAtZero:!0,max:220,ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},stepSize:55,padding:8,callback:function(pe){return pe.toFixed(0)}},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}},y:{ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},padding:4},grid:{display:!1},border:{display:!1}}},plugins:{legend:{display:!1}},maintainAspectRatio:!1}})}catch(q){console.error("Error creating ADR by Channel chart:",q)}if(An.current&&z(Ct,["labels","data"]))try{const q=An.current.getContext("2d");Ve.current=new Rt(q,{type:"line",data:{labels:Ct.labels,datasets:[{label:"Gross Margin (%)",data:Ct.data,borderColor:"#00d3f2",backgroundColor:"rgba(0, 211, 242, 0.1)",tension:.3,fill:!0,pointRadius:4,pointBackgroundColor:"#00d3f2",pointBorderColor:"#00d3f2",pointBorderWidth:2,pointHoverRadius:6}]},options:{scales:{x:{ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},padding:8},grid:{display:!1},border:{display:!1}},y:{beginAtZero:!0,max:80,ticks:{color:"#94a3b8",font:{family:"Inter-Regular, sans-serif",size:12},stepSize:20,padding:4,callback:function(pe){return pe.toFixed(0)}},grid:{color:"rgba(148, 163, 184, 0.2)",drawBorder:!1,lineWidth:1},border:{display:!1}}},plugins:{legend:{display:!1}},maintainAspectRatio:!1}})}catch(q){console.error("Error creating Gross Margin chart:",q)}},100);return()=>{clearTimeout(oe),Yn.current&&Yn.current.destroy(),Xn.current&&Xn.current.destroy(),Fr.current&&Fr.current.destroy(),qn.current&&qn.current.destroy(),Jn.current&&Jn.current.destroy(),Qn.current&&Qn.current.destroy(),Zn.current&&Zn.current.destroy(),ne.current&&ne.current.destroy(),ye.current&&ye.current.destroy(),De.current&&De.current.destroy(),Ne.current&&Ne.current.destroy(),Oe.current&&Oe.current.destroy(),$e.current&&$e.current.destroy(),Ve.current&&Ve.current.destroy()}},[ae,he,re,je,U,P,ce,xe,ve,Se,rt,fe,st,Ct,c,T]);const ie=()=>{if(i.length===0){vt({isOpen:!0,message:"No data to export.",title:"Information"});return}xP(i,`Rapport_Proprietes_${p}`,z=>{vt({isOpen:!0,message:z,title:"Error"})})};return u.jsxs("div",{className:"relative min-h-screen",children:[u.jsx("div",{className:"fixed inset-0",style:{background:"linear-gradient(135deg, rgba(2,6,24,1) 0%, rgba(22,36,86,1) 45%, rgba(15,23,43,1) 100%)",zIndex:0}}),u.jsxs("div",{className:"relative z-10 pt-8 pr-10 pb-8 pl-10 flex flex-col gap-3 items-start justify-start self-stretch flex-1 relative overflow-hidden",children:[u.jsx("div",{className:"flex flex-row gap-0 items-start justify-start self-stretch shrink-0 relative",children:u.jsx("div",{className:"text-global-blanc text-left font-h1-font-family text-h1-font-size font-h1-font-weight relative",children:"Activity Reports"})}),u.jsx("div",{className:"rounded-[14px] flex flex-row gap-1.5 items-start justify-start self-stretch shrink-0 relative",children:c?u.jsx(u.Fragment,{children:[...Array(4)].map((z,ee)=>u.jsx("div",{className:"flex-1 bg-global-bg-box rounded-[14px] border border-global-stroke-box p-4 h-32 animate-pulse"},ee))}):u.jsxs(u.Fragment,{children:[u.jsx(fu,{state:"big",text:"Total Revenue (Real)",value:Ue((I==null?void 0:I.totalRevenue)||0),className:"!flex-1 !shrink-[unset]"}),u.jsx(fu,{state:"big",text:"Occupancy Rate (Real)",value:R((I==null?void 0:I.avgOccupancy)||0),icon:A8,iconState:"prop",className:"!flex-1 !shrink-[unset]"}),u.jsx(fu,{state:"big",text:"ADR (Real)",value:_((I==null?void 0:I.adr)||0),icon:N8,iconState:"argent",className:"!flex-1 !shrink-[unset]"}),u.jsx(fu,{state:"big",text:"AI Gains",value:Ue((I==null?void 0:I.iaGain)||0),icon:j8,iconState:"logo-priceye",className:"!flex-1 !shrink-[unset]"})]})}),u.jsxs("div",{className:"bg-global-bg-box rounded-[14px] border-solid border-global-stroke-box border p-6 flex flex-col gap-3 items-start justify-start self-stretch shrink-0 relative",children:[u.jsxs("div",{className:"flex flex-row items-center justify-between self-stretch shrink-0 relative",children:[u.jsx("div",{className:"flex flex-row gap-3 items-center justify-start shrink-0 relative",children:u.jsxs("div",{className:"text-global-blanc text-left font-h2-font-family text-h2-font-size font-h2-font-weight relative",children:["Filters :"," "]})}),u.jsx("div",{className:"flex flex-row gap-3 items-center justify-start shrink-0 relative",children:u.jsx(T8,{component:u.jsx(C8,{className:"!w-5 !h-5",state:"export"}),text:"Export",onClick:ie,className:"!shrink-0"})})]}),u.jsxs("div",{className:"shrink-0 w-[731.77px] h-[42px] relative",children:[u.jsx("button",{onClick:()=>F("overview"),className:`rounded-[10px] border-solid border p-px w-[150.5px] h-[42px] absolute left-0 top-0 ${T==="overview"?"bg-[rgba(0,146,184,0.20)] border-[rgba(0,184,219,0.30)]":"bg-[rgba(29,41,61,0.50)] border-[rgba(49,65,88,0.50)]"}`,children:u.jsxs("div",{className:`text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal absolute left-[17px] top-[8.5px] ${T==="overview"?"text-[#00d3f2]":"text-[#90a1b9]"}`,style:{letterSpacing:"-0.31px"},children:["Overview"," "]})}),u.jsx("button",{onClick:()=>F("market"),className:`rounded-[10px] border-solid border p-px w-[88.3px] h-[42px] absolute left-[158.5px] top-0 ${T==="market"?"bg-[rgba(0,146,184,0.20)] border-[rgba(0,184,219,0.30)]":"bg-[rgba(29,41,61,0.50)] border-[rgba(49,65,88,0.50)]"}`,children:u.jsxs("div",{className:`text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal absolute left-4 top-[8.5px] ${T==="market"?"text-[#00d3f2]":"text-[#90a1b9]"}`,style:{letterSpacing:"-0.31px"},children:["Market"," "]})}),u.jsx("button",{onClick:()=>F("positioning"),className:`rounded-[10px] border-solid border p-px w-[146.58px] h-[42px] absolute left-[254.8px] top-0 ${T==="positioning"?"bg-[rgba(0,146,184,0.20)] border-[rgba(0,184,219,0.30)]":"bg-[rgba(29,41,61,0.50)] border-[rgba(49,65,88,0.50)]"}`,children:u.jsxs("div",{className:`text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal absolute left-4 top-[8.5px] ${T==="positioning"?"text-[#00d3f2]":"text-[#90a1b9]"}`,style:{letterSpacing:"-0.31px"},children:["Positioning"," "]})}),u.jsx("button",{onClick:()=>F("forecast"),className:`rounded-[10px] border-solid border p-px w-[108.16px] h-[42px] absolute left-[409.38px] top-0 ${T==="forecast"?"bg-[rgba(0,146,184,0.20)] border-[rgba(0,184,219,0.30)]":"bg-[rgba(29,41,61,0.50)] border-[rgba(49,65,88,0.50)]"}`,children:u.jsxs("div",{className:`text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal absolute left-[17px] top-[8.5px] ${T==="forecast"?"text-[#00d3f2]":"text-[#90a1b9]"}`,style:{letterSpacing:"-0.31px"},children:["Forecast"," "]})}),u.jsx("button",{onClick:()=>F("financial"),className:`rounded-[10px] border-solid border p-px w-[206.23px] h-[42px] absolute left-[525.54px] top-0 ${T==="financial"?"bg-[rgba(0,146,184,0.20)] border-[rgba(0,184,219,0.30)]":"bg-[rgba(29,41,61,0.50)] border-[rgba(49,65,88,0.50)]"}`,children:u.jsxs("div",{className:`text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal absolute left-4 top-[8.5px] ${T==="financial"?"text-[#00d3f2]":"text-[#90a1b9]"}`,style:{letterSpacing:"-0.31px"},children:["Financial Performance"," "]})})]}),u.jsx("div",{className:"flex flex-row gap-5 gap-y-3 items-start justify-start flex-wrap content-start self-stretch shrink-0 relative",children:o?u.jsx("p",{className:"text-xs text-global-inactive",children:"Loading filters..."}):u.jsxs(u.Fragment,{children:[u.jsx(du,{text:"Period",text2:p==="7d"?"Last 7 days":p==="1m"?"1 month":p==="6m"?"6 months":p==="ytd"?"Year to date":p==="1y"?"1 year":p==="all"?"All":"1 month",value:p,onChange:z=>m(z.target.value),options:[{value:"7d",label:"Last 7 days"},{value:"1m",label:"1 month"},{value:"6m",label:"6 months"},{value:"ytd",label:"Year to date"},{value:"1y",label:"1 year"},{value:"all",label:"All"}],className:"!shrink-0"}),u.jsx(du,{text:"Property Type",text2:g&&((de=n.find(z=>z.property_type===g))==null?void 0:de.property_type)||"All types",value:g,onChange:z=>x(z.target.value),options:[...new Set(n.map(z=>z.property_type))].filter(Boolean),className:"!shrink-0"}),u.jsx(du,{text:"Channel",text2:v||"All channels",value:v,onChange:z=>b(z.target.value),options:[...new Set(n.map(z=>z.channel))].filter(Boolean),className:"!shrink-0"}),u.jsx(du,{text:"Status",text2:y||"All statuses",value:y,onChange:z=>w(z.target.value),options:[...new Set(n.map(z=>z.status))].filter(Boolean),className:"!shrink-0"}),u.jsxs("div",{className:"flex flex-col gap-2 items-start justify-start shrink-0 relative",children:[u.jsxs("div",{className:"text-global-blanc text-left font-p1-font-family text-p1-font-size font-p1-font-weight relative self-stretch",children:["Country / City / Address"," "]}),u.jsx("div",{className:"bg-global-bg-small-box rounded-lg border-solid border-global-stroke-box border pt-[7px] pr-3 pb-[7px] pl-3 flex flex-row gap-3 items-center justify-start self-stretch shrink-0 h-[38px] relative",children:u.jsx("input",{type:"text",value:S,onChange:z=>N(z.target.value),placeholder:"Ex: Paris",className:"flex-1 bg-transparent border-none outline-none text-global-inactive font-h4-font-family text-h4-font-size leading-h4-line-height font-h4-font-weight placeholder:text-global-inactive"})})]})]})})]}),d&&u.jsx("p",{className:"text-red-400 text-center",children:d}),u.jsxs("div",{className:"flex flex-col gap-3 items-start justify-start self-stretch shrink-0 relative",children:[T==="overview"&&u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"bg-global-bg-box rounded-[14px] border-solid border-global-stroke-box border p-6 flex flex-col gap-6 items-start justify-start self-stretch shrink-0 relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-7 relative",children:u.jsx("div",{className:"text-global-blanc text-left font-['Inter-Medium',_sans-serif] text-xl leading-7 font-medium",style:{letterSpacing:"-0.45px"},children:"Weekly Performance"})}),u.jsxs("div",{className:"flex flex-col gap-2.5 items-start justify-start self-stretch shrink-0 relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-[261.74px] relative w-full",children:c?u.jsx("div",{className:"flex items-center justify-center h-full w-full",children:u.jsx("p",{className:"text-global-inactive",children:"Loading..."})}):u.jsx("div",{className:"w-full h-full relative",children:u.jsx("canvas",{ref:dt,className:"w-full h-full"})})}),u.jsxs("div",{className:"flex flex-row gap-[34px] items-center justify-center self-stretch shrink-0 relative",children:[u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-global-mid-impact shrink-0"}),u.jsx("div",{className:"text-global-mid-impact text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"Occupancy (%)"})]}),u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-global-content-highlight-2nd shrink-0"}),u.jsx("div",{className:"text-global-content-highlight-2nd text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"Bookings"})]})]})]})]}),u.jsxs("div",{className:"self-stretch shrink-0 grid gap-6 relative",style:{gridTemplateColumns:"repeat(2, minmax(0, 1fr))",gridTemplateRows:"repeat(1, minmax(0, 1fr))"},children:[u.jsxs("div",{className:"bg-global-bg-box rounded-[14px] border-solid border-global-stroke-box border p-6 flex flex-col gap-6 items-start justify-start relative",style:{gridColumn:"1 / span 1",gridRow:"1 / span 1"},children:[u.jsx("div",{className:"self-stretch shrink-0 h-7 relative",children:u.jsx("div",{className:"text-global-blanc text-left font-['Inter-Medium',_sans-serif] text-xl leading-7 font-medium",style:{letterSpacing:"-0.45px"},children:"RevPAR, ADR & Occupancy"})}),u.jsxs("div",{className:"pt-[5px] pb-[5px] flex flex-col gap-2.5 items-start justify-start self-stretch shrink-0 relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-[256.26px] relative w-full",children:c?u.jsx("div",{className:"flex items-center justify-center h-full w-full",children:u.jsx("p",{className:"text-global-inactive",children:"Loading..."})}):u.jsx("div",{className:"w-full h-full relative",children:u.jsx("canvas",{ref:Yr,className:"w-full h-full"})})}),u.jsxs("div",{className:"pr-[141px] pl-[141px] flex flex-row gap-2.5 items-center justify-center self-stretch shrink-0 relative",children:[u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-[#8b5cf6] shrink-0"}),u.jsx("div",{className:"text-[#8b5cf6] text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"ADR ()"})]}),u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-global-positive-impact shrink-0"}),u.jsx("div",{className:"text-global-positive-impact text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"Occupancy (%)"})]}),u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-global-content-highlight-2nd shrink-0"}),u.jsx("div",{className:"text-global-content-highlight-2nd text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"RevPAR ()"})]})]})]})]}),u.jsxs("div",{className:"bg-global-bg-box rounded-[14px] border-solid border-global-stroke-box border p-6 flex flex-col gap-6 items-start justify-start relative",style:{gridColumn:"2 / span 1",gridRow:"1 / span 1"},children:[u.jsx("div",{className:"self-stretch shrink-0 h-7 relative",children:u.jsx("div",{className:"text-global-blanc text-left font-['Inter-Medium',_sans-serif] text-xl leading-7 font-medium",style:{letterSpacing:"-0.45px"},children:"AI Gain & AI Score"})}),u.jsxs("div",{className:"pt-[5px] pb-[5px] flex flex-col gap-2.5 items-start justify-start self-stretch shrink-0 relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-[271.26px] relative w-full",children:c?u.jsx("div",{className:"flex items-center justify-center h-full w-full",children:u.jsx("p",{className:"text-global-inactive",children:"Loading..."})}):u.jsx("div",{className:"w-full h-full relative",children:u.jsx("canvas",{ref:Xr,className:"w-full h-full"})})}),u.jsxs("div",{className:"flex flex-row gap-6 items-center justify-center self-stretch shrink-0 relative",children:[u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-global-mid-impact shrink-0"}),u.jsx("div",{className:"text-global-mid-impact text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"AI Gain ()"})]}),u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-global-content-highlight-2nd shrink-0"}),u.jsx("div",{className:"text-global-content-highlight-2nd text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"AI Score (/100)"})]})]})]})]})]})]}),T==="market"&&u.jsxs("div",{className:"self-stretch shrink-0 grid gap-6 relative",style:{gridTemplateColumns:"2fr 1fr"},children:[u.jsxs("div",{className:"bg-[rgba(15,23,43,0.40)] rounded-[14px] border-solid border-[rgba(49,65,88,0.50)] border pt-[25px] pr-[25px] pb-px pl-[25px] flex flex-col gap-6 items-start justify-start h-[452px] relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-7 relative",children:u.jsx("div",{className:"text-[#ffffff] text-left font-['Inter-Medium',_sans-serif] text-xl leading-7 font-medium",style:{letterSpacing:"-0.45px"},children:"Market Trend - Supply vs Demand"})}),u.jsx("div",{className:"self-stretch shrink-0 h-[350px] relative",children:c?u.jsx("div",{className:"flex items-center justify-center h-full w-full",children:u.jsx("p",{className:"text-global-inactive",children:"Chargement..."})}):u.jsx("div",{className:"w-full h-full relative",children:u.jsx("canvas",{ref:Tn,className:"w-full h-full"})})}),u.jsxs("div",{className:"flex flex-row gap-6 items-center justify-center self-stretch shrink-0 relative",children:[u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-global-content-highlight-2nd shrink-0"}),u.jsx("div",{className:"text-global-content-highlight-2nd text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"Demand"})]}),u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-global-mid-impact shrink-0"}),u.jsx("div",{className:"text-global-mid-impact text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"Supply"})]})]})]}),u.jsxs("div",{className:"bg-[rgba(15,23,43,0.40)] rounded-[14px] border-solid border-[rgba(49,65,88,0.50)] border pt-[25px] pr-[25px] pb-px pl-[25px] flex flex-col gap-6 items-start justify-start h-[352px] relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-7 relative",children:u.jsx("div",{className:"text-[#ffffff] text-left font-['Inter-Regular',_sans-serif] text-xl leading-7 font-normal",style:{letterSpacing:"-0.45px"},children:"24h Demand Analysis"})}),u.jsxs("div",{className:"flex flex-col gap-4 items-start justify-start self-stretch shrink-0 h-56 relative",children:[u.jsxs("div",{className:"bg-[rgba(29,41,61,0.50)] rounded-[10px] pr-4 pl-4 flex flex-row items-center justify-between self-stretch shrink-0 h-16 relative",children:[u.jsx("div",{className:"shrink-0 w-[141.06px] h-6 relative",children:u.jsx("div",{className:"text-[#90a1b9] text-left font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal absolute left-0 top-[-0.5px]",style:{letterSpacing:"-0.31px"},children:"Active searches"})}),u.jsx("div",{className:"shrink-0 w-[52.02px] h-8 relative",children:u.jsx("div",{className:"text-[#00d3f2] text-left font-['Inter-Regular',_sans-serif] text-2xl leading-8 font-normal absolute left-0 top-0",style:{letterSpacing:"0.07px"},children:_e?`+${_e.activeSearches}`:"+127"})})]}),u.jsxs("div",{className:"bg-[rgba(29,41,61,0.50)] rounded-[10px] pr-4 pl-4 flex flex-row items-center justify-between self-stretch shrink-0 h-16 relative",children:[u.jsx("div",{className:"shrink-0 w-[122.53px] h-6 relative",children:u.jsx("div",{className:"text-[#90a1b9] text-left font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal absolute left-0 top-[-0.5px]",style:{letterSpacing:"-0.31px"},children:"Listing views"})}),u.jsx("div",{className:"shrink-0 w-[44.08px] h-8 relative",children:u.jsx("div",{className:"text-[#51a2ff] text-left font-['Inter-Regular',_sans-serif] text-2xl leading-8 font-normal absolute left-0 top-0",style:{letterSpacing:"0.07px"},children:_e?`+${_e.listingViews}`:"+84"})})]}),u.jsxs("div",{className:"bg-[rgba(29,41,61,0.50)] rounded-[10px] pr-4 pl-4 flex flex-row items-center justify-between self-stretch shrink-0 h-16 relative",children:[u.jsx("div",{className:"shrink-0 w-[139.38px] h-6 relative",children:u.jsx("div",{className:"text-[#90a1b9] text-left font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal absolute left-0 top-[-0.5px]",style:{letterSpacing:"-0.31px"},children:"Conversion rate"})}),u.jsx("div",{className:"shrink-0 w-[64.31px] h-8 relative",children:u.jsx("div",{className:"text-[#00d492] text-left font-['Inter-Regular',_sans-serif] text-2xl leading-8 font-normal absolute left-0 top-0",style:{letterSpacing:"0.07px"},children:_e?`${_e.conversionRate.toFixed(1)}%`:"18.2%"})})]})]})]})]}),T==="positioning"&&u.jsxs("div",{className:"self-stretch shrink-0 grid gap-6 relative",style:{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"},children:[u.jsxs("div",{className:"bg-[rgba(15,23,43,0.40)] rounded-[14px] border-solid border-[rgba(49,65,88,0.50)] border pt-[25px] pr-[25px] pb-px pl-[25px] flex flex-col gap-6 items-start justify-start h-[402px] relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-7 relative",children:u.jsx("div",{className:"text-[#ffffff] text-left font-['Inter-Medium',_sans-serif] text-xl leading-7 font-medium",style:{letterSpacing:"-0.45px"},children:"ADR vs Market"})}),u.jsx("div",{className:"self-stretch shrink-0 h-[300px] relative",children:c?u.jsx("div",{className:"flex items-center justify-center h-full w-full",children:u.jsx("p",{className:"text-global-inactive",children:"Chargement..."})}):u.jsx("div",{className:"w-full h-full relative",children:u.jsx("canvas",{ref:qr,className:"w-full h-full"})})}),u.jsxs("div",{className:"flex flex-row gap-6 items-center justify-center self-stretch shrink-0 relative",children:[u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-[#94a3b8] shrink-0"}),u.jsx("div",{className:"text-global-inactive text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"Market ADR"})]}),u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-global-content-highlight-2nd shrink-0"}),u.jsx("div",{className:"text-global-content-highlight-2nd text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"Your ADR"})]})]})]}),u.jsxs("div",{className:"bg-[rgba(15,23,43,0.40)] rounded-[14px] border-solid border-[rgba(49,65,88,0.50)] border pt-[25px] pr-[25px] pb-px pl-[25px] flex flex-col gap-6 items-start justify-start h-[402px] relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-7 relative",children:u.jsx("div",{className:"text-[#ffffff] text-left font-['Inter-Regular',_sans-serif] text-xl leading-7 font-normal",style:{letterSpacing:"-0.45px"},children:"Competitor Price Distribution"})}),u.jsx("div",{className:"self-stretch shrink-0 h-[300px] relative",children:c?u.jsx("div",{className:"flex items-center justify-center h-full w-full",children:u.jsx("p",{className:"text-global-inactive",children:"Chargement..."})}):u.jsx("div",{className:"w-full h-full relative",children:u.jsx("canvas",{ref:Ar,className:"w-full h-full"})})})]})]}),T==="forecast"&&u.jsxs("div",{className:"flex flex-col gap-6 items-start justify-start relative",children:[u.jsxs("div",{className:"self-stretch shrink-0 grid gap-6 relative",style:{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"},children:[u.jsxs("div",{className:"bg-[rgba(15,23,43,0.40)] rounded-[14px] border-solid border-[rgba(49,65,88,0.50)] border pt-[25px] pr-[25px] pb-px pl-[25px] flex flex-col gap-6 items-start justify-start h-[402px] relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-7 relative",children:u.jsx("div",{className:"text-[#ffffff] text-left font-['Inter-Medium',_sans-serif] text-xl leading-7 font-medium",style:{letterSpacing:"-0.45px"},children:"Future Revenue & Forecasted Occupancy"})}),u.jsx("div",{className:"self-stretch shrink-0 h-[300px] relative",children:c?u.jsx("div",{className:"flex items-center justify-center h-full w-full",children:u.jsx("p",{className:"text-global-inactive",children:"Loading..."})}):u.jsx("div",{className:"w-full h-full relative",children:u.jsx("canvas",{ref:ar,className:"w-full h-full"})})}),u.jsxs("div",{className:"flex flex-row gap-6 items-center justify-center self-stretch shrink-0 relative",children:[u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-[#06b6d4] shrink-0"}),u.jsx("div",{className:"text-[#06b6d4] text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"Occupancy (%)"})]}),u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-[#1e40af] shrink-0"}),u.jsx("div",{className:"text-[#1e40af] text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"Forecasted Revenue ()"})]})]})]}),u.jsxs("div",{className:"bg-[rgba(15,23,43,0.40)] rounded-[14px] border-solid border-[rgba(49,65,88,0.50)] border pt-[25px] pr-[25px] pb-px pl-[25px] flex flex-col gap-6 items-start justify-start h-[402px] relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-7 relative",children:u.jsx("div",{className:"text-[#ffffff] text-left font-['Inter-Medium',_sans-serif] text-xl leading-7 font-medium",style:{letterSpacing:"-0.45px"},children:"Forecasted ADR, RevPAR & Occupancy"})}),u.jsx("div",{className:"self-stretch shrink-0 h-[300px] relative",children:c?u.jsx("div",{className:"flex items-center justify-center h-full w-full",children:u.jsx("p",{className:"text-global-inactive",children:"Loading..."})}):u.jsx("div",{className:"w-full h-full relative",children:u.jsx("canvas",{ref:Kn,className:"w-full h-full"})})}),u.jsxs("div",{className:"flex flex-row gap-6 items-center justify-center self-stretch shrink-0 relative",children:[u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-[#8b5cf6] shrink-0"}),u.jsx("div",{className:"text-[#8b5cf6] text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"ADR ()"})]}),u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-[#10b981] shrink-0"}),u.jsx("div",{className:"text-[#10b981] text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"Occupancy (%)"})]}),u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-[#06b6d4] shrink-0"}),u.jsx("div",{className:"text-[#06b6d4] text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"RevPAR ()"})]})]})]})]}),u.jsxs("div",{className:"bg-[rgba(15,23,43,0.40)] rounded-[14px] border-solid border-[rgba(49,65,88,0.50)] border pt-[25px] pr-[25px] pb-px pl-[25px] flex flex-col gap-6 items-start justify-start self-stretch shrink-0 h-[452px] relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-7 relative",children:u.jsx("div",{className:"text-[#ffffff] text-left font-['Inter-Medium',_sans-serif] text-xl leading-7 font-medium",style:{letterSpacing:"-0.45px"},children:"Forecast Scenarios"})}),u.jsx("div",{className:"self-stretch shrink-0 h-[350px] relative",children:c?u.jsx("div",{className:"flex items-center justify-center h-full w-full",children:u.jsx("p",{className:"text-global-inactive",children:"Chargement..."})}):u.jsx("div",{className:"w-full h-full relative",children:u.jsx("canvas",{ref:hs,className:"w-full h-full"})})}),u.jsxs("div",{className:"flex flex-row gap-6 items-center justify-center self-stretch shrink-0 relative",children:[u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-[#06b6d4] shrink-0"}),u.jsx("div",{className:"text-[#06b6d4] text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"Baseline scenario"})]}),u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-[#10b981] shrink-0"}),u.jsx("div",{className:"text-[#10b981] text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"Optimistic scenario (+10%)"})]}),u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-[#ef4444] shrink-0"}),u.jsx("div",{className:"text-[#ef4444] text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"Pessimistic scenario (-10%)"})]})]})]}),u.jsxs("div",{className:"bg-[rgba(15,23,43,0.40)] rounded-[14px] border-solid border-[rgba(49,65,88,0.50)] border pt-[25px] pr-[25px] pb-px pl-[25px] flex flex-col gap-6 items-start justify-start self-stretch shrink-0 h-[452px] relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-7 relative",children:u.jsx("div",{className:"text-[#ffffff] text-left font-['Inter-Medium',_sans-serif] text-xl leading-7 font-medium",style:{letterSpacing:"-0.45px"},children:"Synthetic Forecasts by Property"})}),u.jsx("div",{className:"self-stretch shrink-0 h-[350px] relative",children:c?u.jsx("div",{className:"flex items-center justify-center h-full w-full",children:u.jsx("p",{className:"text-global-inactive",children:"Chargement..."})}):u.jsx("div",{className:"w-full h-full relative",children:u.jsx("canvas",{ref:Jr,className:"w-full h-full"})})})]})]}),T==="financial"&&u.jsxs("div",{className:"flex flex-col gap-6 items-start justify-start relative",children:[u.jsxs("div",{className:"bg-[rgba(15,23,43,0.40)] rounded-[14px] border-solid border-[rgba(49,65,88,0.50)] border pt-[25px] pr-[25px] pb-px pl-[25px] flex flex-col gap-6 items-start justify-start self-stretch shrink-0 h-[452px] relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-7 relative",children:u.jsx("div",{className:"text-[#ffffff] text-left font-['Inter-Medium',_sans-serif] text-xl leading-7 font-medium",style:{letterSpacing:"-0.45px"},children:"Total Revenue vs Target"})}),u.jsx("div",{className:"self-stretch shrink-0 h-[350px] relative",children:c?u.jsx("div",{className:"flex items-center justify-center h-full w-full",children:u.jsx("p",{className:"text-global-inactive",children:"Chargement..."})}):u.jsx("div",{className:"w-full h-full relative",children:u.jsx("canvas",{ref:gn,className:"w-full h-full"})})}),u.jsxs("div",{className:"flex flex-row gap-6 items-center justify-center self-stretch shrink-0 relative",children:[u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-[#64748b] shrink-0"}),u.jsx("div",{className:"text-[#64748b] text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"Target"})]}),u.jsxs("div",{className:"shrink-0 h-6 relative flex items-center gap-2",children:[u.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-[#06b6d4] shrink-0"}),u.jsx("div",{className:"text-[#06b6d4] text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal",style:{letterSpacing:"-0.31px"},children:"Real revenue"})]})]})]}),u.jsxs("div",{className:"self-stretch shrink-0 grid gap-6 relative",style:{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"},children:[u.jsxs("div",{className:"bg-[rgba(15,23,43,0.40)] rounded-[14px] border-solid border-[rgba(49,65,88,0.50)] border pt-[25px] pr-[25px] pb-px pl-[25px] flex flex-col gap-6 items-start justify-start h-[530px] relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-7 relative",children:u.jsx("div",{className:"text-[#ffffff] text-left font-['Inter-Regular',_sans-serif] text-xl leading-7 font-normal",style:{letterSpacing:"-0.45px"},children:"ADR by Channel"})}),u.jsx("div",{className:"self-stretch shrink-0 h-[300px] relative",children:c?u.jsx("div",{className:"flex items-center justify-center h-full w-full",children:u.jsx("p",{className:"text-global-inactive",children:"Loading..."})}):u.jsx("div",{className:"w-full h-full relative",children:u.jsx("canvas",{ref:Cn,className:"w-full h-full"})})}),u.jsx("div",{className:"flex flex-col gap-2 items-start justify-start self-stretch shrink-0 h-28 relative",children:st&&st.labels.map((z,ee)=>u.jsxs("div",{className:"flex flex-row items-center justify-between self-stretch shrink-0 h-[22px] relative",children:[u.jsx("div",{className:"shrink-0 relative",children:u.jsx("div",{className:"text-[#90a1b9] text-left font-['Inter-Regular',_sans-serif] text-sm leading-5 font-normal",style:{letterSpacing:"-0.15px"},children:z})}),u.jsx("div",{className:"bg-[rgba(0,153,102,0.20)] rounded-lg border-solid border-[rgba(0,188,125,0.30)] border pt-0.5 pr-2 pb-0.5 pl-2 flex flex-row gap-1 items-center justify-center shrink-0 h-[22px] relative overflow-hidden",children:u.jsxs("div",{className:"text-[#00d492] text-left font-['Inter-Medium',_sans-serif] text-xs leading-4 font-medium relative",children:["+",st.variations[ee].toFixed(1),"%"]})})]},z))})]}),u.jsxs("div",{className:"bg-[rgba(15,23,43,0.40)] rounded-[14px] border-solid border-[rgba(49,65,88,0.50)] border pt-[25px] pr-[25px] pb-px pl-[25px] flex flex-col gap-6 items-center justify-center h-[530px] relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-7 relative",children:u.jsx("div",{className:"text-[#ffffff] text-left font-['Inter-Regular',_sans-serif] text-xl leading-7 font-normal",style:{letterSpacing:"-0.45px"},children:"PricEye ROI"})}),u.jsxs("div",{className:"flex flex-col gap-6 items-center justify-center self-stretch shrink-0 h-[250px] relative",children:[u.jsxs("div",{className:"flex flex-col gap-2 items-start justify-start shrink-0 w-[187.41px] h-[92px] relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-[60px] relative",children:u.jsx("div",{className:"text-center font-['Inter-Regular',_sans-serif] text-6xl leading-[60px] font-normal absolute left-[13.89px] top-[0.5px]",style:{background:"linear-gradient(to left, rgba(0, 0, 0, 0.00), rgba(0, 0, 0, 0.00)), linear-gradient(90deg, rgba(81, 162, 255, 1.00) 0%,rgba(0, 211, 242, 1.00) 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",letterSpacing:"0.26px"},children:"295%"})}),u.jsx("div",{className:"self-stretch shrink-0 h-6 relative",children:u.jsx("div",{className:"text-[#90a1b9] text-center font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal absolute left-0 top-[-0.5px]",style:{letterSpacing:"-0.31px"},children:"Return on investment"})})]}),u.jsxs("div",{className:"flex flex-col gap-3 items-start justify-start shrink-0 w-96 h-[108px] relative",children:[u.jsxs("div",{className:"bg-[rgba(29,41,61,0.50)] rounded-[10px] pr-3 pl-3 flex flex-row items-center justify-between self-stretch shrink-0 h-12 relative",children:[u.jsx("div",{className:"shrink-0 w-[82.87px] h-5 relative",children:u.jsx("div",{className:"text-[#90a1b9] text-left font-['Inter-Regular',_sans-serif] text-sm leading-5 font-normal absolute left-0 top-[0.5px]",style:{letterSpacing:"-0.15px"},children:"PricEye Cost"})}),u.jsx("div",{className:"shrink-0 w-[49.59px] h-6 relative",children:u.jsx("div",{className:"text-[#00d492] text-left font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal absolute left-0 top-[-0.5px]",style:{letterSpacing:"-0.31px"},children:"1,000"})})]}),u.jsxs("div",{className:"bg-[rgba(29,41,61,0.50)] rounded-[10px] pr-3 pl-3 flex flex-row items-center justify-between self-stretch shrink-0 h-12 relative",children:[u.jsx("div",{className:"shrink-0 w-[92.27px] h-5 relative",children:u.jsx("div",{className:"text-[#90a1b9] text-left font-['Inter-Regular',_sans-serif] text-sm leading-5 font-normal absolute left-0 top-[0.5px]",style:{letterSpacing:"-0.15px"},children:"Generated gains"})}),u.jsx("div",{className:"shrink-0 w-[51.91px] h-6 relative",children:u.jsx("div",{className:"text-[#00d3f2] text-left font-['Inter-Regular',_sans-serif] text-base leading-6 font-normal absolute left-0 top-[-0.5px]",style:{letterSpacing:"-0.31px"},children:"2,950"})})]})]})]})]})]}),u.jsxs("div",{className:"bg-[rgba(15,23,43,0.40)] rounded-[14px] border-solid border-[rgba(49,65,88,0.50)] border pt-[25px] pr-[25px] pb-px pl-[25px] flex flex-col gap-6 items-start justify-start self-stretch shrink-0 h-[402px] relative",children:[u.jsx("div",{className:"self-stretch shrink-0 h-7 relative",children:u.jsx("div",{className:"text-[#ffffff] text-left font-['Inter-Medium',_sans-serif] text-xl leading-7 font-medium",style:{letterSpacing:"-0.45px"},children:"Gross Margin (%)"})}),u.jsx("div",{className:"self-stretch shrink-0 h-[300px] relative",children:c?u.jsx("div",{className:"flex items-center justify-center h-full w-full",children:u.jsx("p",{className:"text-global-inactive",children:"Chargement..."})}):u.jsx("div",{className:"w-full h-full relative",children:u.jsx("canvas",{ref:An,className:"w-full h-full"})})})]})]})]}),!o&&!d&&i.length===0&&u.jsx("p",{className:"text-center text-text-muted mt-8",children:"No properties to display."})]})]})}function zo({text:t,className:e=""}){return u.jsx("div",{className:`inline-flex items-center justify-center px-2 py-1 rounded-[10px] border border-solid text-global-blanc font-p1-font-family text-p1-font-size font-p1-font-weight relative ${e}`,children:t})}function R8({className:t="",state:e="filtre",...r}){return u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:t,...r,children:u.jsx("path",{d:"M3 5H17M5 10H15M7 15H13",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})}function D8({state:t="secondaire",component:e,component2:r,text:n,className:s="",onClick:i,...a}){return u.jsxs("button",{type:"button",onClick:i,className:`inline-flex items-center justify-center gap-2 px-3 py-2 rounded-[10px] border border-solid border-global-stroke-box bg-transparent cursor-pointer hover:opacity-90 transition-opacity ${s}`,...a,children:[e,r,n&&u.jsx("span",{className:"text-global-blanc font-h3-font-family text-h3-font-size font-h3-font-weight",children:n})]})}const P8=({className:t=""})=>u.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",className:t,children:[u.jsx("path",{d:"M7 13C10.3137 13 13 10.3137 13 7C13 3.68629 10.3137 1 7 1C3.68629 1 1 3.68629 1 7C1 10.3137 3.68629 13 7 13Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),u.jsx("path",{d:"M15 15L11.65 11.65",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]});function I8({className:t="",value:e="",onChange:r,onFilterClick:n,...s}){return u.jsx("div",{className:`bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box p-6 flex flex-col gap-6 items-start justify-start flex-1 relative ${t}`,...s,children:u.jsxs("div",{className:"flex flex-row items-center justify-between self-stretch shrink-0 h-[38px] relative",children:[u.jsxs("div",{className:"bg-global-bg-box rounded-lg border border-solid border-global-stroke-box pt-[7px] pr-3 pb-[7px] pl-3 flex flex-row gap-3 items-center justify-start self-stretch shrink-0 w-[400px] relative",children:[u.jsx(P8,{className:"w-4 h-4 shrink-0 text-global-inactive"}),u.jsx("input",{type:"text",value:e,onChange:i=>r&&r(i.target.value),placeholder:"Rechercher par nom, ID ou proprit...",className:"flex-1 bg-transparent border-none outline-none text-global-inactive font-h4-font-family text-h4-font-size leading-h4-line-height font-h4-font-weight placeholder:text-global-inactive"})]}),u.jsx(D8,{state:"secondaire",component:u.jsx(R8,{className:"!w-5 !h-5",state:"filtre"}),component2:u.jsx(X0,{className:"!w-5 !h-5",state:"fl-che-bas"}),onClick:n,className:"!shrink-0"})]})})}function M8({bookings:t,propertyMap:e,formatCurrency:r,formatDate:n,onBookingClick:s}){const{t:i,language:a}=Vt(),[o,l]=_f.useState(new Date),c=C.useMemo(()=>{const w=o.getFullYear(),S=o.getMonth(),N=new Date(w,S,1),A=new Date(w,S+1,0).getDate(),F=(N.getDay()+6)%7,I=[],Z=new Date(w,S,0).getDate();for(let he=F-1;he>=0;he--)I.push({date:new Date(w,S-1,Z-he),isCurrentMonth:!1,isToday:!1});const ke=new Date;ke.setHours(0,0,0,0);for(let he=1;he<=A;he++){const te=new Date(w,S,he);te.setHours(0,0,0,0),I.push({date:te,isCurrentMonth:!0,isToday:te.getTime()===ke.getTime()})}const Te=42-I.length;for(let he=1;he<=Te;he++)I.push({date:new Date(w,S+1,he),isCurrentMonth:!1,isToday:!1});return I},[o]),h=_f.useCallback(w=>{const S=w.getFullYear(),N=String(w.getMonth()+1).padStart(2,"0"),k=String(w.getDate()).padStart(2,"0");return`${S}-${N}-${k}`},[]),d=C.useMemo(()=>{const w=new Map;return t.forEach(S=>{const N=S.startDate,k=S.endDate,[A,T,F]=N.split("-").map(Number),[I,B,Z]=k.split("-").map(Number),ke=new Date(A,T-1,F),ae=new Date(I,B-1,Z),Te=new Date(ke);for(;Te<ae;){const he=h(Te);w.has(he)||w.set(he,[]),w.get(he).push(S),Te.setDate(Te.getDate()+1)}}),w},[t,h]),f=w=>{const S=h(w);return d.get(S)||[]},p=()=>{l(new Date(o.getFullYear(),o.getMonth()-1,1))},m=()=>{l(new Date(o.getFullYear(),o.getMonth()+1,1))},g=()=>{l(new Date)},x=a==="en"?["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]:["Lun","Mar","Mer","Jeu","Ven","Sam","Dim"],b=(a==="en"?["January","February","March","April","May","June","July","August","September","October","November","December"]:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"])[o.getMonth()],y=o.getFullYear();return u.jsxs("div",{className:"bg-global-bg-box border border-global-stroke-box rounded-[14px] p-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:p,className:"p-2 hover:bg-global-bg-small-box rounded-[10px] text-global-blanc transition-colors","aria-label":i("bookings.calendar.previousMonth"),children:""}),u.jsxs("h3",{className:"text-xl font-bold text-global-blanc font-h3-font-family",children:[b," ",y]}),u.jsx("button",{onClick:m,className:"p-2 hover:bg-global-bg-small-box rounded-[10px] text-global-blanc transition-colors","aria-label":i("bookings.calendar.nextMonth"),children:""})]}),u.jsx("button",{onClick:g,className:"px-4 py-2 bg-global-bg-small-box hover:bg-global-content-highlight-2nd border border-global-stroke-box rounded-[10px] text-global-blanc font-h4-font-family text-h4-font-size transition-colors",children:i("bookings.calendar.today")})]}),u.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[x.map(w=>u.jsx("div",{className:"p-2 text-center text-global-inactive font-h4-font-family text-h4-font-size font-semibold",children:w},w)),c.map((w,S)=>{const N=f(w.date),k=!w.isCurrentMonth,A=w.isToday;return u.jsxs("div",{className:`
                min-h-[100px] p-1 border border-global-stroke-box rounded-[8px]
                ${k?"bg-global-bg-small-box opacity-50":"bg-global-bg-box"}
                ${A?"ring-2 ring-global-content-highlight-2nd":""}
                ${N.length>0?"cursor-pointer hover:bg-global-bg-small-box":""}
                transition-colors
              `,onClick:()=>N.length>0&&s&&s(N,w.date),children:[u.jsx("div",{className:`
                text-sm font-h4-font-family mb-1
                ${A?"text-global-content-highlight-2nd font-bold":"text-global-blanc"}
              `,children:w.date.getDate()}),u.jsxs("div",{className:"space-y-1",children:[N.slice(0,3).map((T,F)=>{const I=e.get(T.propertyId)||i("bookings.unknownProperty"),B=h(w.date);T.startDate,T.endDate;let Z="bg-calendrierbg-vert",ke="border-calendrierstroke-vert";return T.status==="en attente"||T.status==="pending"?(Z="bg-calendrierbg-bleu",ke="border-calendrierstroke-bleu"):(T.status==="annule"||T.status==="annul"||T.status==="cancelled")&&(Z="bg-calendrierbg-orange",ke="border-calendrierstroke-orange"),u.jsxs("div",{className:`
                        text-xs p-1 rounded truncate
                        ${Z} ${ke} border
                        text-global-blanc font-p1-font-family
                      `,title:`${I} - ${r(T.totalPrice)}`,children:[u.jsx("div",{className:"font-semibold truncate",children:I}),u.jsx("div",{className:"text-xs opacity-90",children:r(T.totalPrice)})]},F)}),N.length>3&&u.jsxs("div",{className:"text-xs text-global-inactive font-p1-font-family p-1",children:["+",N.length-3," ",i("bookings.calendar.more")]})]})]},S)})]})]})}function F8({properties:t,selectedIds:e,onChange:r}){const{t:n}=Vt(),[s,i]=C.useState(!1),a=C.useRef(null);C.useEffect(()=>{const h=d=>{a.current&&!a.current.contains(d.target)&&i(!1)};return document.addEventListener("click",h,!0),()=>document.removeEventListener("click",h,!0)},[]);const o=h=>{h.stopPropagation(),e.length===t.length?r([]):r(t.map(d=>d.id))},l=(h,d)=>{h.stopPropagation();const f=[...e];f.includes(d)?r(f.filter(p=>p!==d)):r([...f,d])},c=()=>{if(e.length===0||e.length===t.length)return n("bookings.allProperties");if(e.length===1){const h=t.find(d=>d.id===e[0]);return(h==null?void 0:h.address)||n("bookings.oneProperty")}return`${e.length} ${n("bookings.propertiesSelected")}`};return u.jsxs("div",{className:"relative",ref:a,children:[u.jsxs("button",{type:"button",onClick:()=>i(!s),className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc font-h4-font-family text-h4-font-size text-left flex justify-between items-center focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd",children:[u.jsx("span",{className:"truncate",children:c()}),u.jsx("span",{className:"ml-2 text-global-inactive",children:""})]}),s&&u.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-global-bg-box border border-global-stroke-box rounded-[10px] shadow-lg max-h-60 overflow-y-auto",children:[u.jsx("div",{className:"p-2 border-b border-global-stroke-box",children:u.jsx("button",{type:"button",onClick:o,className:"text-xs text-global-content-highlight-2nd hover:text-global-blanc font-p1-font-family",children:e.length===t.length?n("bookings.deselectAll"):n("bookings.selectAll")})}),u.jsx("div",{className:"p-2 space-y-1",children:t.map(h=>u.jsxs("label",{className:"flex items-center gap-2 text-sm text-global-blanc cursor-pointer font-p1-font-family hover:bg-global-bg-small-box p-1 rounded",children:[u.jsx("input",{type:"checkbox",checked:e.includes(h.id),onChange:d=>l(d,h.id),className:"w-4 h-4 rounded border border-global-stroke-box bg-global-bg-small-box text-global-content-highlight-2nd focus:ring-2 focus:ring-global-content-highlight-2nd"}),h.address]},h.id))})]})]})}function L8({token:t,userProfile:e}){const{t:r,language:n}=Vt(),[s,i]=C.useState([]),[a,o]=C.useState([]),[l,c]=C.useState(!0),[h,d]=C.useState(""),[f,p]=C.useState("next_30d"),[m,g]=C.useState([]),[x,v]=C.useState(""),[b,y]=C.useState(""),[w,S]=C.useState(""),[N,k]=C.useState(""),[A,T]=C.useState(""),[F,I]=C.useState(!1),[B,Z]=C.useState("table"),[ke,ae]=C.useState([]),[Te,he]=C.useState(null),[te,re]=C.useState(!1),le=C.useMemo(()=>new Map(s.map(X=>[X.id,X.address])),[s]),je=C.useMemo(()=>{const X=new Set(a.map(ve=>ve.channel));return Array.from(X)},[a]),M=C.useCallback(async()=>{if(e){c(!0),d("");try{const{startDate:X,endDate:ve}=(()=>{const Ce=e.timezone||"UTC",rt=Zt=>Zt.toISOString().split("T")[0],We=()=>{const Ct=new Intl.DateTimeFormat("en-CA",{year:"numeric",month:"2-digit",day:"2-digit",timeZone:Ce}).format(new Date);return new Date(Date.UTC(parseInt(Ct.substring(0,4)),parseInt(Ct.substring(5,7))-1,parseInt(Ct.substring(8,10))))},fe=We();let xt=We(),st=We();switch(f){case"next_30d":st.setUTCDate(fe.getUTCDate()+30);break;case"next_90d":st.setUTCDate(fe.getUTCDate()+90);break;case"this_month":xt=new Date(Date.UTC(fe.getUTCFullYear(),fe.getUTCMonth(),1)),st=new Date(Date.UTC(fe.getUTCFullYear(),fe.getUTCMonth()+1,0));break;case"last_7d":xt.setUTCDate(fe.getUTCDate()-7);break;case"last_30d":default:xt.setUTCDate(fe.getUTCDate()-30);break}return f.startsWith("last_")&&(st=We()),f.startsWith("next_")&&(xt=We()),{startDate:rt(xt),endDate:rt(st)}})(),[Ee,Se]=await Promise.all([ea(t),AC(t,X,ve)]);i(Ee),o(Se)}catch(X){d(r("bookings.errors.loadError",{message:X.message}))}finally{c(!1)}}},[t,f,e,r]);C.useEffect(()=>{M()},[M]);const U=C.useMemo(()=>a.filter(ve=>le.has(ve.propertyId)).filter(ve=>!(A&&!(le.get(ve.propertyId)||"").toLowerCase().includes(A.toLowerCase())||m.length>0&&!m.includes(ve.propertyId)||x&&ve.channel!==x||b&&(ve.totalPrice||0)<parseInt(b,10)||w&&(ve.status||"confirm")!==w||N&&(ve.pricingMethod||"ia")!==N)),[a,m,le,x,b,w,N,A]),L=X=>{const ve=n==="en"?"en-US":"fr-FR";return(X||0).toLocaleString(ve,{style:"currency",currency:(e==null?void 0:e.currency)||"EUR",minimumFractionDigits:2})},P=(X,ve)=>{const Ee=new Date(X),Se=new Date(ve),Ce=Math.abs(Se-Ee);return Math.ceil(Ce/(1e3*60*60*24))},V=X=>{if(!X)return"";const ve=new Date(X),Ee=String(ve.getDate()).padStart(2,"0"),Se=String(ve.getMonth()+1).padStart(2,"0"),Ce=ve.getFullYear();return n==="en"?`${Se}/${Ee}/${Ce}`:`${Ee}/${Se}/${Ce}`},ce=X=>{X=X||"confirm";const ve=X.toLowerCase();let Ee=X;switch(ve==="confirm"||ve==="confirmed"?Ee=r("bookings.confirmed"):ve==="en attente"||ve==="pending"?Ee=r("bookings.pending"):(ve==="annule"||ve==="annul"||ve==="cancelled")&&(Ee=r("bookings.cancelled")),ve){case"confirm":case"confirmed":return u.jsx(zo,{text:Ee,className:"!bg-calendrierbg-vert !border-calendrierstroke-vert"});case"en attente":case"pending":return u.jsx(zo,{text:Ee,className:"!bg-calendrierbg-bleu !border-calendrierstroke-bleu"});case"annule":case"annul":case"cancelled":return u.jsx(zo,{text:Ee,className:"!bg-calendrierbg-orange !border-calendrierstroke-orange"});default:return u.jsx(zo,{text:Ee,className:"!bg-global-bg-small-box !border-global-stroke-box"})}},we=X=>X?u.jsx(zo,{text:X,className:"!bg-global-bg-small-box !border-global-stroke-box"}):null,xe=(X,ve)=>{ae(X),he(ve),re(!0)};return u.jsxs("div",{className:"relative min-h-screen",children:[u.jsx("div",{className:"fixed inset-0",style:{background:"linear-gradient(135deg, rgba(2,6,24,1) 0%, rgba(22,36,86,1) 45%, rgba(15,23,43,1) 100%)",zIndex:0}}),u.jsxs("div",{className:"relative z-10 space-y-6 p-4 md:p-6 lg:p-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-text-primary",children:r("bookings.title")}),u.jsx(I8,{value:A,onChange:T,onFilterClick:()=>I(!F)}),F&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 p-4 bg-global-bg-box border border-global-stroke-box rounded-[14px]",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"date-range-selector",className:"block text-sm font-medium text-global-inactive mb-1 font-p1-font-family",children:r("bookings.period")}),u.jsxs("select",{id:"date-range-selector",value:f,onChange:X=>p(X.target.value),className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc font-h4-font-family text-h4-font-size focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd",children:[u.jsx("option",{value:"next_30d",children:r("bookings.next30Days")}),u.jsx("option",{value:"next_90d",children:r("bookings.next90Days")}),u.jsx("option",{value:"this_month",children:r("bookings.thisMonth")}),u.jsx("option",{value:"last_7d",children:r("bookings.last7Days")}),u.jsx("option",{value:"last_30d",children:r("bookings.last30Days")})]})]}),u.jsxs("div",{className:"lg:col-span-2",children:[u.jsx("label",{htmlFor:"property-filter",className:"block text-sm font-medium text-global-inactive mb-1 font-p1-font-family",children:r("bookings.properties")}),u.jsx(F8,{properties:s,selectedIds:m,onChange:g})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"channel-filter",className:"block text-sm font-medium text-global-inactive mb-1 font-p1-font-family",children:r("bookings.channel")}),u.jsxs("select",{id:"channel-filter",value:x,onChange:X=>v(X.target.value),className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc font-h4-font-family text-h4-font-size focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd",children:[u.jsx("option",{value:"",children:r("bookings.allChannels")}),je.map(X=>u.jsx("option",{value:X,children:X},X))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-global-inactive mb-1 font-p1-font-family",children:r("bookings.status")}),u.jsxs("select",{id:"status-filter",value:w,onChange:X=>S(X.target.value),className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc font-h4-font-family text-h4-font-size focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd",children:[u.jsx("option",{value:"",children:r("bookings.allStatuses")}),u.jsx("option",{value:"confirm",children:r("bookings.confirmed")}),u.jsx("option",{value:"en attente",children:r("bookings.pending")}),u.jsx("option",{value:"annule",children:r("bookings.cancelled")})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"pricing-filter",className:"block text-sm font-medium text-global-inactive mb-1 font-p1-font-family",children:r("bookings.pricing")}),u.jsxs("select",{id:"pricing-filter",value:N,onChange:X=>k(X.target.value),className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc font-h4-font-family text-h4-font-size focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd",children:[u.jsx("option",{value:"",children:r("bookings.all")}),u.jsx("option",{value:"ia",children:r("bookings.ai")}),u.jsx("option",{value:"manuelle",children:r("bookings.manual")})]})]}),u.jsxs("div",{className:"lg:col-start-5",children:[u.jsx("label",{htmlFor:"min-price-filter",className:"block text-sm font-medium text-global-inactive mb-1 font-p1-font-family",children:r("bookings.minPrice")}),u.jsx("input",{type:"number",id:"min-price-filter",value:b,onChange:X=>y(X.target.value),className:"w-full bg-global-bg-small-box border border-global-stroke-box rounded-[10px] px-3 py-2 text-global-blanc placeholder:text-global-inactive font-h4-font-family text-h4-font-size focus:outline-none focus:ring-2 focus:ring-global-content-highlight-2nd",placeholder:`Ex: 100 (${(e==null?void 0:e.currency)||"EUR"})`})]})]}),h&&u.jsx("p",{className:"text-red-400 text-center",children:h}),u.jsxs("div",{className:"flex gap-2 border-b border-global-stroke-box",children:[u.jsx("button",{onClick:()=>Z("table"),className:`px-6 py-3 font-h4-font-family text-h4-font-size transition-colors ${B==="table"?"text-global-content-highlight-2nd border-b-2 border-global-content-highlight-2nd":"text-global-inactive hover:text-global-blanc"}`,children:r("bookings.viewTable")}),u.jsx("button",{onClick:()=>Z("calendar"),className:`px-6 py-3 font-h4-font-family text-h4-font-size transition-colors ${B==="calendar"?"text-global-content-highlight-2nd border-b-2 border-global-content-highlight-2nd":"text-global-inactive hover:text-global-blanc"}`,children:r("bookings.viewCalendar")})]}),B==="table"?u.jsxs("div",{className:"bg-global-bg-box rounded-[14px] border border-solid border-global-stroke-box flex flex-col gap-0 items-start justify-start self-stretch shrink-0 relative overflow-hidden",children:[u.jsxs("div",{className:"border border-solid border-global-stroke-box border-b pt-4 pr-6 pb-4 pl-6 flex flex-row items-center justify-between self-stretch shrink-0 relative",children:[u.jsx("div",{className:"text-global-inactive text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative w-[100px]",children:r("bookings.property")}),u.jsx("div",{className:"text-global-inactive text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative w-[100px]",children:r("bookings.arrivalDate")}),u.jsx("div",{className:"text-global-inactive text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative w-[100px]",children:r("bookings.departureDate")}),u.jsx("div",{className:"text-global-inactive text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative w-[50px]",children:r("bookings.nights")}),u.jsx("div",{className:"text-global-inactive text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative w-[100px]",children:r("bookings.totalPrice")}),u.jsx("div",{className:"text-global-inactive text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative w-[100px]",children:r("bookings.pricing")}),u.jsx("div",{className:"text-global-inactive text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative w-[100px]",children:r("bookings.channel")}),u.jsx("div",{className:"text-global-inactive text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative w-[100px]",children:r("bookings.status")})]}),l?u.jsx("div",{className:"border border-solid border-global-stroke-box border-b pt-4 pr-6 pb-4 pl-6 flex flex-row items-center justify-center self-stretch shrink-0 relative",children:u.jsxs("div",{className:"text-center p-8 text-global-inactive",children:[u.jsx("div",{className:"w-8 h-8 border-2 border-global-content-highlight-2nd border-t-transparent rounded-full animate-spin mx-auto mb-2"}),r("bookings.loading")]})}):U.length===0?u.jsx("div",{className:"border border-solid border-global-stroke-box border-b pt-4 pr-6 pb-4 pl-6 flex flex-row items-center justify-center self-stretch shrink-0 relative",children:u.jsx("div",{className:"text-center p-8 text-global-inactive",children:r("bookings.noBookings")})}):U.map((X,ve)=>{const Ee=le.get(X.propertyId)||r("bookings.unknownProperty"),Se=s.find(rt=>rt.id===X.propertyId),Ce=(Se==null?void 0:Se.address)||Ee;return u.jsxs("div",{className:`border border-solid border-global-stroke-box ${ve<U.length-1?"border-b":""} pt-4 pr-6 pb-4 pl-6 flex flex-row items-center justify-between self-stretch shrink-0 relative`,children:[u.jsxs("div",{className:"flex flex-col gap-0 items-start justify-start shrink-0 w-[100px] relative",children:[u.jsx("div",{className:"text-global-blanc text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative",children:Ee}),u.jsx("div",{className:"text-global-inactive text-left font-p1-font-family text-p1-font-size font-p1-font-weight relative self-stretch break-words",children:Ce})]}),u.jsx("div",{className:"text-global-blanc text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative w-[100px]",children:V(X.startDate)}),u.jsx("div",{className:"text-global-blanc text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative w-[100px]",children:V(X.endDate)}),u.jsx("div",{className:"text-global-blanc text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative w-[50px]",children:P(X.startDate,X.endDate)}),u.jsx("div",{className:"text-global-blanc text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative w-[100px]",children:L(X.totalPrice)}),u.jsx("div",{className:"text-global-blanc text-left font-h3-font-family text-h3-font-size font-h3-font-weight relative w-[100px]",children:L(X.totalPrice)}),u.jsx("div",{className:"shrink-0 w-[100px] h-[26px] relative flex items-center",children:we(X.channel)}),u.jsx("div",{className:"shrink-0 w-[100px] h-[26px] relative flex items-center",children:ce(X.status)})]},X.id)})]}):u.jsx("div",{children:l?u.jsx("div",{className:"bg-global-bg-box rounded-[14px] border border-global-stroke-box p-8 flex items-center justify-center",children:u.jsxs("div",{className:"text-center text-global-inactive",children:[u.jsx("div",{className:"w-8 h-8 border-2 border-global-content-highlight-2nd border-t-transparent rounded-full animate-spin mx-auto mb-2"}),r("bookings.loading")]})}):u.jsx(M8,{bookings:U,propertyMap:le,formatCurrency:L,formatDate:V,onBookingClick:xe})}),te&&ke.length>0&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>re(!1),children:u.jsxs("div",{className:"bg-global-bg-box border border-global-stroke-box rounded-[14px] p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",onClick:X=>X.stopPropagation(),children:[u.jsxs("div",{className:"flex justify-between items-center mb-4",children:[u.jsxs("h3",{className:"text-xl font-bold text-global-blanc font-h3-font-family",children:[r("bookings.property")," - ",V(Te.toISOString().split("T")[0])]}),u.jsx("button",{onClick:()=>re(!1),className:"text-global-inactive hover:text-global-blanc text-2xl",children:""})]}),u.jsx("div",{className:"space-y-4",children:ke.map((X,ve)=>{const Ee=le.get(X.propertyId)||r("bookings.unknownProperty");return u.jsx("div",{className:"border border-global-stroke-box rounded-[10px] p-4 bg-global-bg-small-box",children:u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-global-inactive text-sm font-p1-font-family mb-1",children:r("bookings.property")}),u.jsx("div",{className:"text-global-blanc font-h4-font-family",children:Ee})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-global-inactive text-sm font-p1-font-family mb-1",children:r("bookings.totalPrice")}),u.jsx("div",{className:"text-global-blanc font-h4-font-family",children:L(X.totalPrice)})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-global-inactive text-sm font-p1-font-family mb-1",children:r("bookings.arrivalDate")}),u.jsx("div",{className:"text-global-blanc font-h4-font-family",children:V(X.startDate)})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-global-inactive text-sm font-p1-font-family mb-1",children:r("bookings.departureDate")}),u.jsx("div",{className:"text-global-blanc font-h4-font-family",children:V(X.endDate)})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-global-inactive text-sm font-p1-font-family mb-1",children:r("bookings.channel")}),u.jsx("div",{className:"mt-1",children:we(X.channel)})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-global-inactive text-sm font-p1-font-family mb-1",children:r("bookings.status")}),u.jsx("div",{className:"mt-1",children:ce(X.status)})]})]})},ve)})})]})})]})]})}function B8({token:t,onProfileUpdate:e}){const[r,n]=C.useState(!0),[s,i]=C.useState("");return C.useEffect(()=>{if(!new URLSearchParams(window.location.search).get("session_id")){i("Session ID manquant"),n(!1);return}(async()=>{try{await new Promise(l=>setTimeout(l,2e3)),e&&await e(),setTimeout(()=>{window.location.href="/#settings"},3e3)}catch(l){console.error("Erreur lors de la vrification de l'abonnement:",l),i("Une erreur est survenue. Votre abonnement devrait tre activ sous peu.")}finally{n(!1)}})()},[e]),r?u.jsxs("div",{className:"relative min-h-screen",children:[u.jsx("div",{className:"fixed inset-0",style:{background:"linear-gradient(135deg, rgba(2,6,24,1) 0%, rgba(22,36,86,1) 45%, rgba(15,23,43,1) 100%)",zIndex:0}}),u.jsx("div",{className:"relative z-10 flex items-center justify-center min-h-screen",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),u.jsx("p",{className:"text-global-blanc",children:"Activation de votre abonnement en cours..."})]})})]}):s?u.jsxs("div",{className:"relative min-h-screen",children:[u.jsx("div",{className:"fixed inset-0",style:{background:"linear-gradient(135deg, rgba(2,6,24,1) 0%, rgba(22,36,86,1) 45%, rgba(15,23,43,1) 100%)",zIndex:0}}),u.jsx("div",{className:"relative z-10 flex items-center justify-center min-h-screen",children:u.jsxs("div",{className:"text-center bg-global-bg-box rounded-[14px] border border-global-stroke-box p-8 max-w-md",children:[u.jsx("p",{className:"text-red-400 mb-4",children:s}),u.jsx("button",{onClick:()=>{window.location.href="/#settings"},className:"px-6 py-2 font-semibold text-white rounded-[10px] bg-gradient-to-r from-[#155dfc] to-[#12a1d5] hover:opacity-90",children:"Retour aux paramtres"})]})})]}):u.jsxs("div",{className:"relative min-h-screen",children:[u.jsx("div",{className:"fixed inset-0",style:{background:"linear-gradient(135deg, rgba(2,6,24,1) 0%, rgba(22,36,86,1) 45%, rgba(15,23,43,1) 100%)",zIndex:0}}),u.jsx("div",{className:"relative z-10 flex items-center justify-center min-h-screen",children:u.jsxs("div",{className:"text-center bg-global-bg-box rounded-[14px] border border-global-stroke-box p-8 max-w-md",children:[u.jsx("div",{className:"text-6xl mb-4",children:""}),u.jsx("h1",{className:"text-global-blanc text-2xl font-bold mb-4",children:"Abonnement activ avec succs !"}),u.jsx("p",{className:"text-global-inactive mb-6",children:"Votre abonnement a t activ. Vous allez tre redirig vers les paramtres..."})]})})]})}function U8(){return u.jsxs("div",{className:"relative min-h-screen",children:[u.jsx("div",{className:"fixed inset-0",style:{background:"linear-gradient(135deg, rgba(2,6,24,1) 0%, rgba(22,36,86,1) 45%, rgba(15,23,43,1) 100%)",zIndex:0}}),u.jsx("div",{className:"relative z-10 flex items-center justify-center min-h-screen",children:u.jsxs("div",{className:"text-center bg-global-bg-box rounded-[14px] border border-global-stroke-box p-8 max-w-md",children:[u.jsx("h1",{className:"text-global-blanc text-2xl font-bold mb-4",children:"Paiement annul"}),u.jsx("p",{className:"text-global-inactive mb-6",children:"Vous avez annul le processus de paiement. Vous pouvez ressayer  tout moment depuis les paramtres."}),u.jsx("button",{onClick:()=>{window.location.href="/#settings"},className:"px-6 py-2 font-semibold text-white rounded-[10px] bg-gradient-to-r from-[#155dfc] to-[#12a1d5] hover:opacity-90",children:"Retour aux paramtres"})]})})]})}function z8({token:t}){const e=async()=>{try{const{url:r}=await ow(t);window.location.href=r}catch(r){console.error("Erreur lors de l'ouverture du portal:",r),alert("Une erreur est survenue. Veuillez contacter le support.")}};return u.jsxs("div",{className:"relative min-h-screen",children:[u.jsx("div",{className:"fixed inset-0",style:{background:"linear-gradient(135deg, rgba(2,6,24,1) 0%, rgba(22,36,86,1) 45%, rgba(15,23,43,1) 100%)",zIndex:0}}),u.jsx("div",{className:"relative z-10 flex items-center justify-center min-h-screen",children:u.jsxs("div",{className:"text-center bg-global-bg-box rounded-[14px] border border-red-700 p-8 max-w-md",children:[u.jsx("div",{className:"text-6xl mb-4",children:""}),u.jsx("h1",{className:"text-red-400 text-2xl font-bold mb-4",children:"Accs temporairement dsactiv"}),u.jsx("p",{className:"text-global-inactive mb-6",children:"Votre accs a t dsactiv en raison d'un problme de paiement. Veuillez mettre  jour votre mthode de paiement pour ractiver votre compte."}),t&&u.jsx("button",{onClick:e,className:"px-6 py-2 font-semibold text-white rounded-[10px] bg-red-600 hover:bg-red-700 transition-colors",children:"Mettre  jour la mthode de paiement"})]})})]})}const $2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAYAAAAPOoFWAAAABmJLR0QA/wD/AP+gvaeTAAACPklEQVRYhe2XvWsUQRjGn/cQEQkB8YNExNiJSmwFQTCFRdQqRpvYWyloqU2q2Phf+AcoElSIhXiQQgwGISlEUPH8SPS8JHcI8Yw/i93FZb2Z2Tt2r/Jp7mbmmfe37+y7s7MmScA5STclHZZUUT61JK1IWpD0RNJDM/vhnQGcpxitA7eB3T7YfEGwRCvAhAvWKBgG8BuYBiwLa5YASzTdTxjAxYRlQFPSgLeK/uqnpFeS1iTtkjQqaXtgzjdJx8xsNW9mq8BVYDCzKoPANeBrYP6dvMu4BBz0XTowEvtcagEDIVgdGMmzvsAh4Lsn1lRot5gxs/epgGNAlehZqgKnkzEzeydpxhNrzJfZL2BvCnQy7ktrCziV8uzr4Em04IO9zizTfYfvXsb3xuGr+ZZxI9N2FUn2nq45fDt9sOFM+4XD9zzT3u/wrYeq8UjiBIaBWmb8AzCU8hz1xHoaqsbryR8z+6xox7gl6a6i99+omX1J+W94YnkLBKLKGg9cUJLVWdyVCOAt/UQtYDIAuhT7XHoLVLrZ9R8BE8AQUIl/LwCPc8y9InW/6/eil5JOmFk77+GmV21IumxmbSn/SaoXbUqaNLPlpKMsWF3SGTObS3eWAZuVdNzMqv+MdFGNPm0CD0i9ATppW+Aq65KqktodxhqSPkpalFQ1s0YwZ09mTeBAMEAX8t2zJTOr9Qu2VSQoBCtc/2Glw5r9hD0rGuZ6qBeBHf2ALZM6MRUN+5TJaE8poBg2RXQenMX3pV+A/gAueLP1wZgl5AAAAABJRU5ErkJggg==",$8=({className:t=""})=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:`w-5 h-5 ${t}`,children:[u.jsx("path",{d:"M3 13h8V3H3z"}),u.jsx("path",{d:"M13 21h8V11h-8z"}),u.jsx("path",{d:"M13 3v6h8V3z"}),u.jsx("path",{d:"M3 21h8v-4H3z"})]}),Cv=({className:t=""})=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:`w-5 h-5 ${t}`,children:[u.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"3"}),u.jsx("path",{d:"M16 2v4"}),u.jsx("path",{d:"M8 2v4"}),u.jsx("path",{d:"M3 10h18"}),u.jsx("path",{d:"M8 14h.01"}),u.jsx("path",{d:"M12 14h.01"}),u.jsx("path",{d:"M16 14h.01"}),u.jsx("path",{d:"M8 18h.01"}),u.jsx("path",{d:"M12 18h.01"}),u.jsx("path",{d:"M16 18h.01"})]}),W8=({className:t=""})=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:`w-5 h-5 ${t}`,children:[u.jsx("path",{d:"M3 3h6l2 3h10a0 0 0 0 1 0 0v14a2 2 0 0 1-2 2H3a0 0 0 0 1-0-0V3a0 0 0 0 1 0-0z"}),u.jsx("path",{d:"M13 10h4"}),u.jsx("path",{d:"M13 14h4"}),u.jsx("path",{d:"M8 10h.01"}),u.jsx("path",{d:"M8 14h.01"})]}),V8=({className:t=""})=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",className:`w-5 h-5 ${t}`,children:[u.jsx("circle",{cx:"12",cy:"12",r:"3"}),u.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.6a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9c.37.53.58 1.16.6 1.81V11a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),Av=({direction:t="left",className:e=""})=>{const r=t==="left";return u.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:`${e} w-4 h-4`,children:r?u.jsx("polyline",{points:"15 18 9 12 15 6"}):u.jsx("polyline",{points:"9 18 15 12 9 6"})})},H8=[{id:"dashboard",translationKey:"sidebar.dashboard",icon:$8},{id:"bookings",translationKey:"sidebar.bookings",icon:Cv},{id:"report",translationKey:"sidebar.reports",icon:W8},{id:"pricing",translationKey:"sidebar.pricing",icon:Cv},{id:"settings",translationKey:"sidebar.settings",icon:V8}],G8=({currentView:t,onNavigate:e,isCollapsed:r=!1,onToggleCollapse:n,className:s="",...i})=>{const{t:a}=Vt(),o=r?"w-[96px]":"w-[255px]",l=H8.map(c=>({...c,label:a(c.translationKey)}));return u.jsx("nav",{className:`hidden md:flex flex-col gap-2.5 items-start justify-center ${o} min-h-screen fixed left-0 top-0 transition-[width] duration-300 z-20 ${s}`,...i,children:u.jsxs("div",{className:"bg-global-bg-box border-r border-global-stroke-box flex flex-col items-stretch justify-between w-full min-h-screen relative",children:[u.jsxs("div",{className:`border-b border-global-stroke-box h-[70px] flex items-center justify-between ${r?"px-4":"px-8"}`,children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:$2,alt:"PricEye Logo",className:"w-[27px] h-10 object-contain"}),!r&&u.jsx("div",{className:"text-global-blanc text-left font-['Avenir-Heavy',sans-serif] text-xl leading-6 font-normal relative",children:"PricEye"})]}),u.jsx("button",{type:"button",onClick:()=>n==null?void 0:n(),className:`${r?"hidden":"p-3"} rounded-xl border border-transparent text-global-inactive hover:text-global-blanc hover:border-global-stroke-box transition`,"aria-label":r?"Dplier la barre latrale":"Replier la barre latrale",children:!r&&u.jsx(Av,{direction:"left"})})]}),u.jsx("div",{className:`p-4 flex flex-col gap-2 flex-1 ${r?"items-center":""}`,children:l.map(({id:c,label:h,icon:d})=>{const f=t===c;return u.jsxs("button",{type:"button",onClick:()=>e==null?void 0:e(c),className:`w-full flex items-center ${r?"justify-center":"gap-3 justify-start"} rounded-2xl ${r?"px-0 py-3":"px-4 py-3"} text-sm font-medium transition duration-200 border ${f?"bg-global-stroke-highlight-2nd/20 border-global-stroke-highlight-2nd text-global-blanc shadow-[0_8px_30px_rgba(0,184,219,0.15)]":"border-transparent text-global-inactive hover:border-global-stroke-box hover:text-global-blanc"}`,"aria-label":r?h:void 0,children:[u.jsx(d,{className:f?"text-global-content-highlight-2nd":""}),!r&&u.jsx("span",{className:"flex-1 text-left",children:h})]},c)})}),r&&u.jsx("button",{type:"button",onClick:()=>n==null?void 0:n(),"aria-label":"Dplier la barre latrale",className:"hidden md:flex absolute top-[70px] -right-4 bg-global-bg-box border border-global-stroke-box rounded-tr-xl rounded-br-xl p-2 text-global-inactive hover:text-global-blanc hover:border-global-content-highlight-2nd transition",children:u.jsx(Av,{direction:"right"})})]})})};function K8({isOpen:t,onClose:e,recommendations:r,token:n,onGroupCreated:s,position:i}){const[a,o]=C.useState(new Set),[l,c]=C.useState(""),h=async p=>{if(!p||!p.properties||p.properties.length<2){c("Recommandation invalide.");return}o(m=>new Set([...m,p.key])),c("");try{const g=`Groupe Similaire (${p.properties[0].address.split(",")[0]})`,x=await Xp({name:g},n),v=p.properties.map(b=>b.id);await qp(x.id,v,n),s&&s(),e()}catch(m){console.error("Erreur lors de la cration du groupe suggr:",m),c(m.message)}finally{o(m=>{const g=new Set(m);return g.delete(p.key),g})}};if(!t)return null;const d=r&&r.length>0,f=u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"fixed inset-0 bg-transparent z-[10000]",onClick:e,style:{pointerEvents:"auto"}}),u.jsxs("div",{className:"notifications-menu fixed border border-global-stroke-box rounded-[14px] shadow-xl z-[10001] w-[400px] max-h-[600px] overflow-hidden flex flex-col backdrop-blur-md",style:{top:(i==null?void 0:i.top)||"60px",right:(i==null?void 0:i.right)||"20px",backgroundColor:"rgba(15, 23, 43, 0.98)",pointerEvents:"auto"},onClick:p=>p.stopPropagation(),children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-global-stroke-box",children:[u.jsx("h3",{className:"text-global-blanc font-h3-font-family font-h3-font-weight text-h3-font-size",children:"Notifications"}),u.jsx("button",{onClick:e,className:"text-global-inactive hover:text-global-blanc transition-colors","aria-label":"Fermer",children:u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:u.jsx("path",{d:"M15 5L5 15M5 5l10 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),u.jsxs("div",{className:"overflow-y-auto flex-1",children:[l&&u.jsx("div",{className:"m-4 p-3 bg-red-900/20 border border-red-500/50 rounded-[10px] text-red-300 text-sm",children:l}),d?u.jsxs("div",{className:"p-4 space-y-3",children:[u.jsx("div",{className:"mb-3",children:u.jsx("p",{className:"text-xs font-bold uppercase tracking-[0.2em] text-global-inactive mb-2",children:"Suggestions de regroupement"})}),r.map(p=>{const m=a.has(p.key);return u.jsxs("div",{className:"bg-global-bg-small-box border border-global-stroke-box rounded-[12px] p-4 flex flex-col gap-3",children:[u.jsxs("div",{className:"text-sm text-global-inactive",children:[u.jsxs("p",{className:"text-global-blanc font-semibold mb-2",children:[p.properties.length," proprits similaires dtectes"]}),u.jsx("ul",{className:"list-disc list-inside text-xs space-y-1 max-h-32 overflow-y-auto",children:p.properties.map(g=>u.jsx("li",{className:"text-global-inactive",children:g.address},g.id))})]}),u.jsx("button",{onClick:()=>h(p),disabled:m,className:"w-full inline-flex items-center justify-center gap-2 px-4 py-2 rounded-[10px] font-semibold text-white bg-gradient-to-r from-[#155dfc] to-[#12a1d5] shadow-lg hover:opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:m?u.jsxs(u.Fragment,{children:[u.jsxs("svg",{className:"animate-spin w-4 h-4",viewBox:"0 0 24 24",fill:"none",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),u.jsx("span",{children:"Cration..."})]}):"Crer le groupe"})]},p.key)})]}):u.jsxs("div",{className:"p-8 text-center",children:[u.jsx("svg",{className:"w-16 h-16 mx-auto mb-4 text-global-inactive",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:u.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),u.jsx("p",{className:"text-global-inactive font-p1-font-family text-p1-font-size",children:"Aucune notification"})]})]})]})]});return zy.createPortal(f,document.body)}const Y8=({className:t=""})=>u.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",className:`w-5 h-5 ${t}`,children:[u.jsx("path",{d:"M18 8a6 6 0 0 0-12 0c0 7-3 9-3 9h18s-3-2-3-9"}),u.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]});function X8({className:t="",userName:e="Utilisateur",propertyCount:r=null,notifications:n=[],token:s=null,onNotificationsUpdate:i,onLogout:a=null,...o}){const{t:l}=Vt(),[c,h]=C.useState(!1),d=C.useRef(null),f=typeof r=="number"?`${r} ${r>1?l("common.properties"):l("common.property")}`:"",p=n&&n.length>0,m=()=>{h(!c)},g=()=>{h(!1)},x=()=>{i&&i()},v=()=>{if(d.current){const b=d.current.getBoundingClientRect();return{top:`${b.bottom+8}px`,right:`${window.innerWidth-b.right}px`}}return{top:"60px",right:"20px"}};return C.useEffect(()=>{if(!c)return;const b=y=>{var w,S;(w=d.current)!=null&&w.contains(y.target)||(S=document.querySelector(".notifications-menu"))!=null&&S.contains(y.target)||h(!1)};return document.addEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}},[c]),u.jsx("div",{className:`bg-global-bg-box border-b border-global-stroke-box px-4 py-3 flex items-center justify-end h-[70px] relative z-10 ${t}`,...o,children:u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("button",{ref:d,type:"button",onClick:m,className:"relative w-10 h-10 flex items-center justify-center rounded-full border border-transparent text-global-inactive hover:text-global-blanc hover:border-global-stroke-box transition","aria-label":"Notifications",children:[p&&u.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-global-content-highlight-2nd rounded-full"}),u.jsx(Y8,{})]}),c&&u.jsx(K8,{isOpen:c,onClose:g,recommendations:n,token:s,onGroupCreated:x,position:v()}),u.jsx("div",{className:"hidden sm:block w-px h-8 bg-white/10","aria-hidden":"true"}),u.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[u.jsx("span",{className:"text-global-blanc font-h3-font-family text-h3-font-size font-h3-font-weight leading-h3-line-height",children:e}),u.jsx("span",{className:"text-global-inactive font-p1-font-family text-p1-font-size font-p1-font-weight leading-p1-line-height",children:f})]}),u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"rounded-full w-11 h-11 flex items-center justify-center bg-white p-1 cursor-pointer",children:u.jsx("img",{src:$2,alt:"PricEye Logo",className:"w-full h-full object-contain rounded-full"})}),a&&u.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-global-bg-box border border-global-stroke-box rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:u.jsx("button",{onClick:a,className:"w-full text-left px-4 py-2 text-global-blanc hover:bg-global-stroke-box transition-colors rounded-lg",children:l("settings.disconnect")})})]})]})})}function wf(t){const e=window.document.documentElement;if(e.classList.remove("light","dark"),t==="auto"){const r=window.matchMedia("(prefers-color-scheme: dark)").matches;e.classList.add(r?"dark":"light")}else e.classList.add(t)}function q8(){const[t,e]=C.useState(null),[r,n]=C.useState(localStorage.getItem("authToken")?"dashboard":"login"),[s,i]=C.useState(null),[a,o]=C.useState(!0),[l,c]=C.useState(!1),[h,d]=C.useState([]),[f,p]=C.useState(!1),[m,g]=C.useState(null),[x,v]=C.useState(!0),b=I=>{i(B=>({...B,theme:I})),wf(I)},y=C.useCallback(async I=>{if(!I){d([]);return}try{p(!0);const B=await iw(I);d(B||[])}catch(B){console.error("Erreur lors du chargement des notifications:",B),d([])}finally{p(!1)}},[]),w=C.useCallback(async I=>{if(!I){g(null);return}try{const B=await ea(I);g(Array.isArray(B)?B.length:0)}catch(B){console.error("Erreur lors du chargement des proprits:",B),g(null)}},[]),S=C.useCallback(async()=>{try{const{supabase:I}=await wE(async()=>{const{supabase:B}=await Promise.resolve().then(()=>rC);return{supabase:B}},void 0);await I.auth.signOut()}catch(I){console.error("Erreur lors de la dconnexion Supabase:",I)}localStorage.removeItem("authToken"),Object.keys(localStorage).forEach(I=>{I.startsWith("sb-")&&localStorage.removeItem(I)}),e(null),i(null),d([]),g(null),n("login"),window.history.replaceState({},"","/"),setTimeout(()=>{window.location.href="/"},100)},[]);C.useEffect(()=>{const I=()=>{S()};return window.addEventListener("tokenExpired",I),()=>{window.removeEventListener("tokenExpired",I)}},[S]),C.useEffect(()=>{const I=new URLSearchParams(window.location.search),B=I.get("session_id"),Z=I.get("canceled");B?(n("checkout-success"),window.history.replaceState({},"",window.location.pathname)):Z&&(n("checkout-cancel"),window.history.replaceState({},"",window.location.pathname))},[]),C.useEffect(()=>{if(!x)return;const I=localStorage.getItem("authToken");if(I)try{const{jwtDecode:B}=require("jwt-decode");B(I),e(I),(r==="login"||r==="register")&&n("dashboard")}catch(B){console.error("Token invalide au chargement:",B),localStorage.removeItem("authToken"),n("login")}else n("login");v(!1)},[x,r]),C.useEffect(()=>{if(!t){o(!1),wf("auto"),d([]);return}o(!0),C0(t).then(I=>{if(i(I),I.accessDisabled){n("access-blocked"),o(!1);return}if(wf(I.theme||"auto"),I.language&&(localStorage.setItem("userLanguage",I.language),typeof window<"u"))try{window.dispatchEvent(new CustomEvent("languageChanged",{detail:{language:I.language}}))}catch(B){console.error("Erreur lors de l'envoi de l'vnement languageChanged:",B)}y(t),w(t)}).catch(I=>{console.error("Erreur de chargement du profil:",I),(I.message.includes("403")||I.message.includes("401")||I.message.includes("Jeton invalide")||I.message.includes("Jeton manquant"))&&S()}).finally(()=>o(!1))},[t,y,w,S]);const N=I=>{e(I),localStorage.setItem("authToken",I),n("dashboard")},k=C.useCallback(()=>{t&&y(t)},[t,y]),A=I=>{n(I)},T=()=>{if(a)return u.jsx("div",{className:"text-center p-10 text-text-muted",children:"Chargement du profil..."});switch(r){case"dashboard":return u.jsx(vx,{token:t,userProfile:s});case"pricing":return u.jsx(_A,{token:t,userProfile:s});case"bookings":return u.jsx(L8,{token:t,userProfile:s});case"settings":return u.jsx(CA,{token:t,userProfile:s,onThemeChange:b,onLogout:S});case"report":return u.jsx(O8,{token:t,userProfile:s});case"checkout-success":return u.jsx(B8,{token:t,onProfileUpdate:async()=>{const I=await C0(t);i(I)}});case"checkout-cancel":return u.jsx(U8,{});case"access-blocked":return u.jsx(z8,{token:t});default:return u.jsx(vx,{token:t,userProfile:s})}};return!t&&!a?r==="register"?u.jsx(WC,{onNavigate:A}):u.jsx($C,{onLoginSuccess:N,onNavigate:A}):u.jsxs("div",{className:`min-h-screen bg-transparent text-text-primary transition-colors duration-200 ${l?"md:pl-[96px]":"md:pl-[255px]"}`,children:[u.jsx(G8,{currentView:r,onNavigate:A,isCollapsed:l,onToggleCollapse:()=>c(I=>!I)}),u.jsxs("div",{className:"flex flex-col min-h-screen",children:[u.jsx("div",{className:"hidden md:block",children:u.jsx(X8,{userName:(s==null?void 0:s.name)||(s==null?void 0:s.email)||"Utilisateur",propertyCount:m,notifications:h,token:t,onNotificationsUpdate:k,onLogout:S})}),u.jsx("nav",{className:"bg-bg-sidebar md:hidden p-4 flex-shrink-0 flex flex-col rounded-b-3xl border border-border-primary",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-white mb-6",children:"Pricing IA"}),u.jsxs("ul",{className:"space-y-2",children:[u.jsx("li",{children:u.jsx("button",{onClick:()=>A("dashboard"),className:`w-full text-left block py-2.5 px-4 rounded-xl transition duration-200 hover:bg-global-bg-box ${r==="dashboard"?"bg-global-stroke-highlight-2nd/30 text-text-sidebar-active":"text-text-sidebar"}`,children:"Dashboard"})}),u.jsx("li",{children:u.jsx("button",{onClick:()=>A("bookings"),className:`w-full text-left block py-2.5 px-4 rounded-xl transition duration-200 hover:bg-global-bg-box ${r==="bookings"?"bg-global-stroke-highlight-2nd/30 text-text-sidebar-active":"text-text-sidebar"}`,children:"Rservations"})}),u.jsx("li",{children:u.jsx("button",{onClick:()=>A("report"),className:`w-full text-left block py-2.5 px-4 rounded-xl transition duration-200 hover:bg-global-bg-box ${r==="report"?"bg-global-stroke-highlight-2nd/30 text-text-sidebar-active":"text-text-sidebar"}`,children:"Rapports"})}),u.jsx("li",{children:u.jsx("button",{onClick:()=>A("pricing"),className:`w-full text-left block py-2.5 px-4 rounded-xl transition duration-200 hover:bg-global-bg-box ${r==="pricing"?"bg-global-stroke-highlight-2nd/30 text-text-sidebar-active":"text-text-sidebar"}`,children:"Calendrier Pricing"})}),u.jsx("li",{children:u.jsx("button",{disabled:!0,className:"w-full text-left block py-2.5 px-4 rounded-xl text-gray-600 cursor-not-allowed bg-gray-800/40 border border-gray-700/60",children:"Concurrents (Bientt)"})}),u.jsx("li",{children:u.jsx("button",{onClick:()=>A("settings"),className:`w-full text-left block py-2.5 px-4 rounded-xl transition duration-200 hover:bg-global-bg-box ${r==="settings"?"bg-global-stroke-highlight-2nd/30 text-text-sidebar-active":"text-text-sidebar"}`,children:"Paramtres"})})]})]})}),u.jsx("main",{className:"flex-1 p-4 md:p-8 overflow-auto",children:T()})]})]})}function J8(){return u.jsx(VC,{userLanguage:localStorage.getItem("userLanguage")||"fr",children:u.jsx(q8,{})})}Sf.createRoot(document.getElementById("root")).render(u.jsx(_f.StrictMode,{children:u.jsx(J8,{})}));
